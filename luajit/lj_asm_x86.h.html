<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>lj_asm_x86.h source code [luajit/lj_asm_x86.h] - Woboq Code Browser</title>
<link rel="stylesheet" href=".././data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href=".././data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src=".././data/jquery/jquery.min.js"></script>
<script type="text/javascript" src=".././data/jquery/jquery-ui.min.js"></script>
<script>var file = 'luajit/lj_asm_x86.h'; var root_path = '..'; var data_path = '.././data'; var ecma_script_api_version = 2;</script>
<script src='.././data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='./'>luajit</a>/<a href='lj_asm_x86.h.html'>lj_asm_x86.h</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*</i></td></tr>
<tr><th id="2">2</th><td><i>** x86/x64 IR assembler (SSA IR -&gt; machine code).</i></td></tr>
<tr><th id="3">3</th><td><i>** Copyright (C) 2005-2021 Mike Pall. See Copyright Notice in luajit.h</i></td></tr>
<tr><th id="4">4</th><td><i>*/</i></td></tr>
<tr><th id="5">5</th><td></td></tr>
<tr><th id="6">6</th><td><i>/* -- Guard handling ------------------------------------------------------ */</i></td></tr>
<tr><th id="7">7</th><td></td></tr>
<tr><th id="8">8</th><td><i>/* Generate an exit stub group at the bottom of the reserved MCode memory. */</i></td></tr>
<tr><th id="9">9</th><td><em>static</em> <a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *<dfn class="decl def fn" id="asm_exitstub_gen" title='asm_exitstub_gen' data-ref="asm_exitstub_gen" data-ref-filename="asm_exitstub_gen">asm_exitstub_gen</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col6 decl" id="396as" title='as' data-type='ASMState *' data-ref="396as" data-ref-filename="396as">as</dfn>, <a class="typedef" href="lj_jit.h.html#ExitNo" title='ExitNo' data-type='uint32_t' data-ref="ExitNo" data-ref-filename="ExitNo">ExitNo</a> <dfn class="local col7 decl" id="397group" title='group' data-type='ExitNo' data-ref="397group" data-ref-filename="397group">group</dfn>)</td></tr>
<tr><th id="10">10</th><td>{</td></tr>
<tr><th id="11">11</th><td>  <a class="typedef" href="lj_jit.h.html#ExitNo" title='ExitNo' data-type='uint32_t' data-ref="ExitNo" data-ref-filename="ExitNo">ExitNo</a> <dfn class="local col8 decl" id="398i" title='i' data-type='ExitNo' data-ref="398i" data-ref-filename="398i">i</dfn>, <dfn class="local col9 decl" id="399groupofs" title='groupofs' data-type='ExitNo' data-ref="399groupofs" data-ref-filename="399groupofs">groupofs</dfn> = (<a class="local col7 ref" href="#397group" title='group' data-ref="397group" data-ref-filename="397group">group</a>*<a class="macro" href="lj_target_x86.h.html#166" title="32" data-ref="_M/EXITSTUBS_PER_GROUP">EXITSTUBS_PER_GROUP</a>) &amp; <var>0xff</var>;</td></tr>
<tr><th id="12">12</th><td>  <a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *<dfn class="local col0 decl" id="400mxp" title='mxp' data-type='MCode *' data-ref="400mxp" data-ref-filename="400mxp">mxp</dfn> = <a class="local col6 ref" href="#396as" title='as' data-ref="396as" data-ref-filename="396as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcbot" title='ASMState::mcbot' data-use='r' data-ref="ASMState::mcbot" data-ref-filename="ASMState..mcbot">mcbot</a>;</td></tr>
<tr><th id="13">13</th><td>  <a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *<dfn class="local col1 decl" id="401mxpstart" title='mxpstart' data-type='MCode *' data-ref="401mxpstart" data-ref-filename="401mxpstart">mxpstart</dfn> = <a class="local col0 ref" href="#400mxp" title='mxp' data-ref="400mxp" data-ref-filename="400mxp">mxp</a>;</td></tr>
<tr><th id="14">14</th><td>  <b>if</b> (<a class="local col0 ref" href="#400mxp" title='mxp' data-ref="400mxp" data-ref-filename="400mxp">mxp</a> + (<var>2</var>+<var>2</var>)*<a class="macro" href="lj_target_x86.h.html#166" title="32" data-ref="_M/EXITSTUBS_PER_GROUP">EXITSTUBS_PER_GROUP</a>+<var>8</var>+<var>5</var> &gt;= <a class="local col6 ref" href="#396as" title='as' data-ref="396as" data-ref-filename="396as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mctop" title='ASMState::mctop' data-use='r' data-ref="ASMState::mctop" data-ref-filename="ASMState..mctop">mctop</a>)</td></tr>
<tr><th id="15">15</th><td>    <a class="tu ref fn" href="lj_asm.c.html#asm_mclimit" title='asm_mclimit' data-use='c' data-ref="asm_mclimit" data-ref-filename="asm_mclimit">asm_mclimit</a>(<a class="local col6 ref" href="#396as" title='as' data-ref="396as" data-ref-filename="396as">as</a>);</td></tr>
<tr><th id="16">16</th><td>  <i>/* Push low byte of exitno for each exit stub. */</i></td></tr>
<tr><th id="17">17</th><td>  *<a class="local col0 ref" href="#400mxp" title='mxp' data-ref="400mxp" data-ref-filename="400mxp">mxp</a>++ = <a class="enum" href="lj_target_x86.h.html#XI_PUSHi8" title='XI_PUSHi8' data-ref="XI_PUSHi8" data-ref-filename="XI_PUSHi8">XI_PUSHi8</a>; *<a class="local col0 ref" href="#400mxp" title='mxp' data-ref="400mxp" data-ref-filename="400mxp">mxp</a>++ = (<a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a>)<a class="local col9 ref" href="#399groupofs" title='groupofs' data-ref="399groupofs" data-ref-filename="399groupofs">groupofs</a>;</td></tr>
<tr><th id="18">18</th><td>  <b>for</b> (<a class="local col8 ref" href="#398i" title='i' data-ref="398i" data-ref-filename="398i">i</a> = <var>1</var>; <a class="local col8 ref" href="#398i" title='i' data-ref="398i" data-ref-filename="398i">i</a> &lt; <a class="macro" href="lj_target_x86.h.html#166" title="32" data-ref="_M/EXITSTUBS_PER_GROUP">EXITSTUBS_PER_GROUP</a>; <a class="local col8 ref" href="#398i" title='i' data-ref="398i" data-ref-filename="398i">i</a>++) {</td></tr>
<tr><th id="19">19</th><td>    *<a class="local col0 ref" href="#400mxp" title='mxp' data-ref="400mxp" data-ref-filename="400mxp">mxp</a>++ = <a class="enum" href="lj_target_x86.h.html#XI_JMPs" title='XI_JMPs' data-ref="XI_JMPs" data-ref-filename="XI_JMPs">XI_JMPs</a>; *<a class="local col0 ref" href="#400mxp" title='mxp' data-ref="400mxp" data-ref-filename="400mxp">mxp</a>++ = (<a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a>)((<var>2</var>+<var>2</var>)*(<a class="macro" href="lj_target_x86.h.html#166" title="32" data-ref="_M/EXITSTUBS_PER_GROUP">EXITSTUBS_PER_GROUP</a> - <a class="local col8 ref" href="#398i" title='i' data-ref="398i" data-ref-filename="398i">i</a>) - <var>2</var>);</td></tr>
<tr><th id="20">20</th><td>    *<a class="local col0 ref" href="#400mxp" title='mxp' data-ref="400mxp" data-ref-filename="400mxp">mxp</a>++ = <a class="enum" href="lj_target_x86.h.html#XI_PUSHi8" title='XI_PUSHi8' data-ref="XI_PUSHi8" data-ref-filename="XI_PUSHi8">XI_PUSHi8</a>; *<a class="local col0 ref" href="#400mxp" title='mxp' data-ref="400mxp" data-ref-filename="400mxp">mxp</a>++ = (<a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a>)(<a class="local col9 ref" href="#399groupofs" title='groupofs' data-ref="399groupofs" data-ref-filename="399groupofs">groupofs</a> + <a class="local col8 ref" href="#398i" title='i' data-ref="398i" data-ref-filename="398i">i</a>);</td></tr>
<tr><th id="21">21</th><td>  }</td></tr>
<tr><th id="22">22</th><td>  <i>/* Push the high byte of the exitno for each exit stub group. */</i></td></tr>
<tr><th id="23">23</th><td>  *<a class="local col0 ref" href="#400mxp" title='mxp' data-ref="400mxp" data-ref-filename="400mxp">mxp</a>++ = <a class="enum" href="lj_target_x86.h.html#XI_PUSHi8" title='XI_PUSHi8' data-ref="XI_PUSHi8" data-ref-filename="XI_PUSHi8">XI_PUSHi8</a>; *<a class="local col0 ref" href="#400mxp" title='mxp' data-ref="400mxp" data-ref-filename="400mxp">mxp</a>++ = (<a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a>)((<a class="local col7 ref" href="#397group" title='group' data-ref="397group" data-ref-filename="397group">group</a>*<a class="macro" href="lj_target_x86.h.html#166" title="32" data-ref="_M/EXITSTUBS_PER_GROUP">EXITSTUBS_PER_GROUP</a>)&gt;&gt;<var>8</var>);</td></tr>
<tr><th id="24">24</th><td><u>#<span data-ppcond="24">if</span> !<a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="25">25</th><td>  <i>/* Store DISPATCH at original stack slot 0. Account for the two push ops. */</i></td></tr>
<tr><th id="26">26</th><td>  *mxp++ = XI_MOVmi;</td></tr>
<tr><th id="27">27</th><td>  *mxp++ = MODRM(XM_OFS8, <var>0</var>, RID_ESP);</td></tr>
<tr><th id="28">28</th><td>  *mxp++ = MODRM(XM_SCALE1, RID_ESP, RID_ESP);</td></tr>
<tr><th id="29">29</th><td>  *mxp++ = <var>2</var>*<b>sizeof</b>(<em>void</em> *);</td></tr>
<tr><th id="30">30</th><td>  *(int32_t *)mxp = ptr2addr(J2GG(as-&gt;J)-&gt;dispatch); mxp += <var>4</var>;</td></tr>
<tr><th id="31">31</th><td><u>#<span data-ppcond="24">endif</span></u></td></tr>
<tr><th id="32">32</th><td>  <i>/* Jump to exit handler which fills in the ExitState. */</i></td></tr>
<tr><th id="33">33</th><td>  *<a class="local col0 ref" href="#400mxp" title='mxp' data-ref="400mxp" data-ref-filename="400mxp">mxp</a>++ = <a class="enum" href="lj_target_x86.h.html#XI_JMP" title='XI_JMP' data-ref="XI_JMP" data-ref-filename="XI_JMP">XI_JMP</a>; <a class="local col0 ref" href="#400mxp" title='mxp' data-ref="400mxp" data-ref-filename="400mxp">mxp</a> += <var>4</var>;</td></tr>
<tr><th id="34">34</th><td>  *((<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> *)(<a class="local col0 ref" href="#400mxp" title='mxp' data-ref="400mxp" data-ref-filename="400mxp">mxp</a>-<var>4</var>)) = <a class="ref fn" href="lj_emit_x86.h.html#jmprel" title='jmprel' data-ref="jmprel" data-ref-filename="jmprel">jmprel</a>(<a class="local col6 ref" href="#396as" title='as' data-ref="396as" data-ref-filename="396as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>, <a class="local col0 ref" href="#400mxp" title='mxp' data-ref="400mxp" data-ref-filename="400mxp">mxp</a>, (<a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *)(<em>void</em> *)<a class="ref fn" href="lj_vm.h.html#lj_vm_exit_handler" title='lj_vm_exit_handler' data-ref="lj_vm_exit_handler" data-ref-filename="lj_vm_exit_handler">lj_vm_exit_handler</a>);</td></tr>
<tr><th id="35">35</th><td>  <i>/* Commit the code for this group (even if assembly fails later on). */</i></td></tr>
<tr><th id="36">36</th><td>  <a class="macro" href="lj_mcode.h.html#26" title="(as-&gt;J-&gt;mcbot = (mxp))" data-ref="_M/lj_mcode_commitbot">lj_mcode_commitbot</a>(<a class="local col6 ref" href="#396as" title='as' data-ref="396as" data-ref-filename="396as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>, <a class="local col0 ref" href="#400mxp" title='mxp' data-ref="400mxp" data-ref-filename="400mxp">mxp</a>);</td></tr>
<tr><th id="37">37</th><td>  <a class="local col6 ref" href="#396as" title='as' data-ref="396as" data-ref-filename="396as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcbot" title='ASMState::mcbot' data-use='w' data-ref="ASMState::mcbot" data-ref-filename="ASMState..mcbot">mcbot</a> = <a class="local col0 ref" href="#400mxp" title='mxp' data-ref="400mxp" data-ref-filename="400mxp">mxp</a>;</td></tr>
<tr><th id="38">38</th><td>  <a class="local col6 ref" href="#396as" title='as' data-ref="396as" data-ref-filename="396as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mclim" title='ASMState::mclim' data-use='w' data-ref="ASMState::mclim" data-ref-filename="ASMState..mclim">mclim</a> = <a class="local col6 ref" href="#396as" title='as' data-ref="396as" data-ref-filename="396as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcbot" title='ASMState::mcbot' data-use='r' data-ref="ASMState::mcbot" data-ref-filename="ASMState..mcbot">mcbot</a> + <a class="macro" href="lj_asm.c.html#128" title="64" data-ref="_M/MCLIM_REDZONE">MCLIM_REDZONE</a>;</td></tr>
<tr><th id="39">39</th><td>  <b>return</b> <a class="local col1 ref" href="#401mxpstart" title='mxpstart' data-ref="401mxpstart" data-ref-filename="401mxpstart">mxpstart</a>;</td></tr>
<tr><th id="40">40</th><td>}</td></tr>
<tr><th id="41">41</th><td></td></tr>
<tr><th id="42">42</th><td><i>/* Setup all needed exit stubs. */</i></td></tr>
<tr><th id="43">43</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_exitstub_setup" title='asm_exitstub_setup' data-ref="asm_exitstub_setup" data-ref-filename="asm_exitstub_setup">asm_exitstub_setup</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col2 decl" id="402as" title='as' data-type='ASMState *' data-ref="402as" data-ref-filename="402as">as</dfn>, <a class="typedef" href="lj_jit.h.html#ExitNo" title='ExitNo' data-type='uint32_t' data-ref="ExitNo" data-ref-filename="ExitNo">ExitNo</a> <dfn class="local col3 decl" id="403nexits" title='nexits' data-type='ExitNo' data-ref="403nexits" data-ref-filename="403nexits">nexits</dfn>)</td></tr>
<tr><th id="44">44</th><td>{</td></tr>
<tr><th id="45">45</th><td>  <a class="typedef" href="lj_jit.h.html#ExitNo" title='ExitNo' data-type='uint32_t' data-ref="ExitNo" data-ref-filename="ExitNo">ExitNo</a> <dfn class="local col4 decl" id="404i" title='i' data-type='ExitNo' data-ref="404i" data-ref-filename="404i">i</dfn>;</td></tr>
<tr><th id="46">46</th><td>  <b>if</b> (<a class="local col3 ref" href="#403nexits" title='nexits' data-ref="403nexits" data-ref-filename="403nexits">nexits</a> &gt;= <a class="macro" href="lj_target_x86.h.html#166" title="32" data-ref="_M/EXITSTUBS_PER_GROUP">EXITSTUBS_PER_GROUP</a>*<a class="macro" href="lj_def.h.html#87" title="16" data-ref="_M/LJ_MAX_EXITSTUBGR">LJ_MAX_EXITSTUBGR</a>)</td></tr>
<tr><th id="47">47</th><td>    <a class="ref fn" href="lj_trace.h.html#lj_trace_err" title='lj_trace_err' data-ref="lj_trace_err" data-ref-filename="lj_trace_err">lj_trace_err</a>(<a class="local col2 ref" href="#402as" title='as' data-ref="402as" data-ref-filename="402as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>, <a class="enum" href="lj_traceerr.h.html#13" title='LJ_TRERR_SNAPOV' data-ref="LJ_TRERR_SNAPOV" data-ref-filename="LJ_TRERR_SNAPOV">LJ_TRERR_SNAPOV</a>);</td></tr>
<tr><th id="48">48</th><td>  <b>for</b> (<a class="local col4 ref" href="#404i" title='i' data-ref="404i" data-ref-filename="404i">i</a> = <var>0</var>; <a class="local col4 ref" href="#404i" title='i' data-ref="404i" data-ref-filename="404i">i</a> &lt; (<a class="local col3 ref" href="#403nexits" title='nexits' data-ref="403nexits" data-ref-filename="403nexits">nexits</a>+<a class="macro" href="lj_target_x86.h.html#166" title="32" data-ref="_M/EXITSTUBS_PER_GROUP">EXITSTUBS_PER_GROUP</a>-<var>1</var>)/<a class="macro" href="lj_target_x86.h.html#166" title="32" data-ref="_M/EXITSTUBS_PER_GROUP">EXITSTUBS_PER_GROUP</a>; <a class="local col4 ref" href="#404i" title='i' data-ref="404i" data-ref-filename="404i">i</a>++)</td></tr>
<tr><th id="49">49</th><td>    <b>if</b> (<a class="local col2 ref" href="#402as" title='as' data-ref="402as" data-ref-filename="402as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>-&gt;<a class="ref field" href="lj_jit.h.html#jit_State::exitstubgroup" title='jit_State::exitstubgroup' data-ref="jit_State::exitstubgroup" data-ref-filename="jit_State..exitstubgroup">exitstubgroup</a>[<a class="local col4 ref" href="#404i" title='i' data-ref="404i" data-ref-filename="404i">i</a>] == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="50">50</th><td>      <a class="local col2 ref" href="#402as" title='as' data-ref="402as" data-ref-filename="402as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>-&gt;<a class="ref field" href="lj_jit.h.html#jit_State::exitstubgroup" title='jit_State::exitstubgroup' data-ref="jit_State::exitstubgroup" data-ref-filename="jit_State..exitstubgroup">exitstubgroup</a>[<a class="local col4 ref" href="#404i" title='i' data-ref="404i" data-ref-filename="404i">i</a>] = <a class="ref fn" href="#asm_exitstub_gen" title='asm_exitstub_gen' data-ref="asm_exitstub_gen" data-ref-filename="asm_exitstub_gen">asm_exitstub_gen</a>(<a class="local col2 ref" href="#402as" title='as' data-ref="402as" data-ref-filename="402as">as</a>, <a class="local col4 ref" href="#404i" title='i' data-ref="404i" data-ref-filename="404i">i</a>);</td></tr>
<tr><th id="51">51</th><td>}</td></tr>
<tr><th id="52">52</th><td></td></tr>
<tr><th id="53">53</th><td><i>/* Emit conditional branch to exit for guard.</i></td></tr>
<tr><th id="54">54</th><td><i>** It's important to emit this *after* all registers have been allocated,</i></td></tr>
<tr><th id="55">55</th><td><i>** because rematerializations may invalidate the flags.</i></td></tr>
<tr><th id="56">56</th><td><i>*/</i></td></tr>
<tr><th id="57">57</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_guardcc" title='asm_guardcc' data-ref="asm_guardcc" data-ref-filename="asm_guardcc">asm_guardcc</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col5 decl" id="405as" title='as' data-type='ASMState *' data-ref="405as" data-ref-filename="405as">as</dfn>, <em>int</em> <dfn class="local col6 decl" id="406cc" title='cc' data-type='int' data-ref="406cc" data-ref-filename="406cc">cc</dfn>)</td></tr>
<tr><th id="58">58</th><td>{</td></tr>
<tr><th id="59">59</th><td>  <a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *<dfn class="local col7 decl" id="407target" title='target' data-type='MCode *' data-ref="407target" data-ref-filename="407target">target</dfn> = <a class="macro" href="lj_target.h.html#161" title="((MCode *)exitstub_addr_((char **)((as-&gt;J)-&gt;exitstubgroup), (as-&gt;snapno)))" data-ref="_M/exitstub_addr">exitstub_addr</a>(<a class="local col5 ref" href="#405as" title='as' data-ref="405as" data-ref-filename="405as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>, <a class="local col5 ref" href="#405as" title='as' data-ref="405as" data-ref-filename="405as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::snapno" title='ASMState::snapno' data-use='r' data-ref="ASMState::snapno" data-ref-filename="ASMState..snapno">snapno</a>);</td></tr>
<tr><th id="60">60</th><td>  <a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *<dfn class="local col8 decl" id="408p" title='p' data-type='MCode *' data-ref="408p" data-ref-filename="408p">p</dfn> = <a class="local col5 ref" href="#405as" title='as' data-ref="405as" data-ref-filename="405as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcp" title='ASMState::mcp' data-use='r' data-ref="ASMState::mcp" data-ref-filename="ASMState..mcp">mcp</a>;</td></tr>
<tr><th id="61">61</th><td>  <b>if</b> (<a class="macro" href="lj_def.h.html#146" title="__builtin_expect(!!(p == as-&gt;invmcp), 0)" data-ref="_M/LJ_UNLIKELY">LJ_UNLIKELY</a>(<a class="local col8 ref" href="#408p" title='p' data-ref="408p" data-ref-filename="408p">p</a> == <a class="local col5 ref" href="#405as" title='as' data-ref="405as" data-ref-filename="405as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::invmcp" title='ASMState::invmcp' data-use='r' data-ref="ASMState::invmcp" data-ref-filename="ASMState..invmcp">invmcp</a>)) {</td></tr>
<tr><th id="62">62</th><td>    <a class="local col5 ref" href="#405as" title='as' data-ref="405as" data-ref-filename="405as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::loopinv" title='ASMState::loopinv' data-use='w' data-ref="ASMState::loopinv" data-ref-filename="ASMState..loopinv">loopinv</a> = <var>1</var>;</td></tr>
<tr><th id="63">63</th><td>    *(<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> *)(<a class="local col8 ref" href="#408p" title='p' data-ref="408p" data-ref-filename="408p">p</a>+<var>1</var>) = <a class="ref fn" href="lj_emit_x86.h.html#jmprel" title='jmprel' data-ref="jmprel" data-ref-filename="jmprel">jmprel</a>(<a class="local col5 ref" href="#405as" title='as' data-ref="405as" data-ref-filename="405as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>, <a class="local col8 ref" href="#408p" title='p' data-ref="408p" data-ref-filename="408p">p</a>+<var>5</var>, <a class="local col7 ref" href="#407target" title='target' data-ref="407target" data-ref-filename="407target">target</a>);</td></tr>
<tr><th id="64">64</th><td>    <a class="local col7 ref" href="#407target" title='target' data-ref="407target" data-ref-filename="407target">target</a> = <a class="local col8 ref" href="#408p" title='p' data-ref="408p" data-ref-filename="408p">p</a>;</td></tr>
<tr><th id="65">65</th><td>    <a class="local col6 ref" href="#406cc" title='cc' data-ref="406cc" data-ref-filename="406cc">cc</a> ^= <var>1</var>;</td></tr>
<tr><th id="66">66</th><td>    <b>if</b> (<a class="local col5 ref" href="#405as" title='as' data-ref="405as" data-ref-filename="405as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::realign" title='ASMState::realign' data-use='r' data-ref="ASMState::realign" data-ref-filename="ASMState..realign">realign</a>) {</td></tr>
<tr><th id="67">67</th><td>      <b>if</b> (<a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a> &amp;&amp; <a class="macro" href="lj_def.h.html#146" title="__builtin_expect(!!(as-&gt;mrm.base == RID_RIP), 0)" data-ref="_M/LJ_UNLIKELY">LJ_UNLIKELY</a>(<a class="local col5 ref" href="#405as" title='as' data-ref="405as" data-ref-filename="405as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> == <a class="enum" href="lj_target_x86.h.html#RID_RIP" title='RID_RIP' data-ref="RID_RIP" data-ref-filename="RID_RIP">RID_RIP</a>))</td></tr>
<tr><th id="68">68</th><td>	<a class="local col5 ref" href="#405as" title='as' data-ref="405as" data-ref-filename="405as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> += <var>2</var>;  <i>/* Fixup RIP offset for pending fused load. */</i></td></tr>
<tr><th id="69">69</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_sjcc" title='emit_sjcc' data-ref="emit_sjcc" data-ref-filename="emit_sjcc">emit_sjcc</a>(<a class="local col5 ref" href="#405as" title='as' data-ref="405as" data-ref-filename="405as">as</a>, <a class="local col6 ref" href="#406cc" title='cc' data-ref="406cc" data-ref-filename="406cc">cc</a>, <a class="local col7 ref" href="#407target" title='target' data-ref="407target" data-ref-filename="407target">target</a>);</td></tr>
<tr><th id="70">70</th><td>      <b>return</b>;</td></tr>
<tr><th id="71">71</th><td>    }</td></tr>
<tr><th id="72">72</th><td>  }</td></tr>
<tr><th id="73">73</th><td>  <b>if</b> (<a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a> &amp;&amp; <a class="macro" href="lj_def.h.html#146" title="__builtin_expect(!!(as-&gt;mrm.base == RID_RIP), 0)" data-ref="_M/LJ_UNLIKELY">LJ_UNLIKELY</a>(<a class="local col5 ref" href="#405as" title='as' data-ref="405as" data-ref-filename="405as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> == <a class="enum" href="lj_target_x86.h.html#RID_RIP" title='RID_RIP' data-ref="RID_RIP" data-ref-filename="RID_RIP">RID_RIP</a>))</td></tr>
<tr><th id="74">74</th><td>    <a class="local col5 ref" href="#405as" title='as' data-ref="405as" data-ref-filename="405as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> += <var>6</var>;  <i>/* Fixup RIP offset for pending fused load. */</i></td></tr>
<tr><th id="75">75</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_jcc" title='emit_jcc' data-ref="emit_jcc" data-ref-filename="emit_jcc">emit_jcc</a>(<a class="local col5 ref" href="#405as" title='as' data-ref="405as" data-ref-filename="405as">as</a>, <a class="local col6 ref" href="#406cc" title='cc' data-ref="406cc" data-ref-filename="406cc">cc</a>, <a class="local col7 ref" href="#407target" title='target' data-ref="407target" data-ref-filename="407target">target</a>);</td></tr>
<tr><th id="76">76</th><td>}</td></tr>
<tr><th id="77">77</th><td></td></tr>
<tr><th id="78">78</th><td><i>/* -- Memory operand fusion ----------------------------------------------- */</i></td></tr>
<tr><th id="79">79</th><td></td></tr>
<tr><th id="80">80</th><td><i>/* Limit linear search to this distance. Avoids O(n^2) behavior. */</i></td></tr>
<tr><th id="81">81</th><td><u>#define <dfn class="macro" id="_M/CONFLICT_SEARCH_LIM" data-ref="_M/CONFLICT_SEARCH_LIM">CONFLICT_SEARCH_LIM</dfn>	31</u></td></tr>
<tr><th id="82">82</th><td></td></tr>
<tr><th id="83">83</th><td><i>/* Check if a reference is a signed 32 bit constant. */</i></td></tr>
<tr><th id="84">84</th><td><em>static</em> <em>int</em> <dfn class="decl def fn" id="asm_isk32" title='asm_isk32' data-ref="asm_isk32" data-ref-filename="asm_isk32">asm_isk32</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col9 decl" id="409as" title='as' data-type='ASMState *' data-ref="409as" data-ref-filename="409as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col0 decl" id="410ref" title='ref' data-type='IRRef' data-ref="410ref" data-ref-filename="410ref">ref</dfn>, <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> *<dfn class="local col1 decl" id="411k" title='k' data-type='int32_t *' data-ref="411k" data-ref-filename="411k">k</dfn>)</td></tr>
<tr><th id="85">85</th><td>{</td></tr>
<tr><th id="86">86</th><td>  <b>if</b> (<a class="macro" href="lj_ir.h.html#470" title="((ref) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col0 ref" href="#410ref" title='ref' data-ref="410ref" data-ref-filename="410ref">ref</a>)) {</td></tr>
<tr><th id="87">87</th><td>    <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col2 decl" id="412ir" title='ir' data-type='IRIns *' data-ref="412ir" data-ref-filename="412ir">ir</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ref)])" data-ref="_M/IR">IR</a>(<a class="local col0 ref" href="#410ref" title='ref' data-ref="410ref" data-ref-filename="410ref">ref</a>);</td></tr>
<tr><th id="88">88</th><td><u>#<span data-ppcond="88">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="89">89</th><td>    <b>if</b> (<a class="local col2 ref" href="#412ir" title='ir' data-ref="412ir" data-ref-filename="412ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_KNULL' data-ref="IR_KNULL" data-ref-filename="IR_KNULL">IR_KNULL</a> || !<a class="macro" href="lj_ir.h.html#394" title="((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)((ir-&gt;t).irt &amp; IRT_TYPE))) &amp; 1)" data-ref="_M/irt_is64">irt_is64</a>(<a class="local col2 ref" href="#412ir" title='ir' data-ref="412ir" data-ref-filename="412ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="90">90</th><td>      *<a class="local col1 ref" href="#411k" title='k' data-ref="411k" data-ref-filename="411k">k</a> = <a class="local col2 ref" href="#412ir" title='ir' data-ref="412ir" data-ref-filename="412ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#IRIns::i" title='IRIns::i' data-ref="IRIns::i" data-ref-filename="IRIns..i">i</a>;</td></tr>
<tr><th id="91">91</th><td>      <b>return</b> <var>1</var>;</td></tr>
<tr><th id="92">92</th><td>    } <b>else</b> <b>if</b> (<a class="macro" href="lj_def.h.html#105" title="(((int64_t)(&amp;(ir)[1].tv)-&gt;u64) == (int32_t)((int64_t)(&amp;(ir)[1].tv)-&gt;u64))" data-ref="_M/checki32">checki32</a>((<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int64_t" title='int64_t' data-type='__int64_t' data-ref="int64_t" data-ref-filename="int64_t">int64_t</a>)<a class="macro" href="lj_ir.h.html#578" title="(&amp;(ir)[1].tv)" data-ref="_M/ir_k64">ir_k64</a>(<a class="local col2 ref" href="#412ir" title='ir' data-ref="412ir" data-ref-filename="412ir">ir</a>)-&gt;<a class="ref field" href="lj_obj.h.html#TValue::u64" title='TValue::u64' data-ref="TValue::u64" data-ref-filename="TValue..u64">u64</a>)) {</td></tr>
<tr><th id="93">93</th><td>      *<a class="local col1 ref" href="#411k" title='k' data-ref="411k" data-ref-filename="411k">k</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<a class="macro" href="lj_ir.h.html#578" title="(&amp;(ir)[1].tv)" data-ref="_M/ir_k64">ir_k64</a>(<a class="local col2 ref" href="#412ir" title='ir' data-ref="412ir" data-ref-filename="412ir">ir</a>)-&gt;<a class="ref field" href="lj_obj.h.html#TValue::u64" title='TValue::u64' data-ref="TValue::u64" data-ref-filename="TValue..u64">u64</a>;</td></tr>
<tr><th id="94">94</th><td>      <b>return</b> <var>1</var>;</td></tr>
<tr><th id="95">95</th><td>    }</td></tr>
<tr><th id="96">96</th><td><u>#<span data-ppcond="88">else</span></u></td></tr>
<tr><th id="97">97</th><td>    <b>if</b> (ir-&gt;o != IR_KINT64) {</td></tr>
<tr><th id="98">98</th><td>      *k = ir-&gt;i;</td></tr>
<tr><th id="99">99</th><td>      <b>return</b> <var>1</var>;</td></tr>
<tr><th id="100">100</th><td>    } <b>else</b> <b>if</b> (checki32((int64_t)ir_kint64(ir)-&gt;u64)) {</td></tr>
<tr><th id="101">101</th><td>      *k = (int32_t)ir_kint64(ir)-&gt;u64;</td></tr>
<tr><th id="102">102</th><td>      <b>return</b> <var>1</var>;</td></tr>
<tr><th id="103">103</th><td>    }</td></tr>
<tr><th id="104">104</th><td><u>#<span data-ppcond="88">endif</span></u></td></tr>
<tr><th id="105">105</th><td>  }</td></tr>
<tr><th id="106">106</th><td>  <b>return</b> <var>0</var>;</td></tr>
<tr><th id="107">107</th><td>}</td></tr>
<tr><th id="108">108</th><td></td></tr>
<tr><th id="109">109</th><td><i>/* Check if there's no conflicting instruction between curins and ref.</i></td></tr>
<tr><th id="110">110</th><td><i>** Also avoid fusing loads if there are multiple references.</i></td></tr>
<tr><th id="111">111</th><td><i>*/</i></td></tr>
<tr><th id="112">112</th><td><em>static</em> <em>int</em> <dfn class="decl def fn" id="noconflict" title='noconflict' data-ref="noconflict" data-ref-filename="noconflict">noconflict</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col3 decl" id="413as" title='as' data-type='ASMState *' data-ref="413as" data-ref-filename="413as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col4 decl" id="414ref" title='ref' data-type='IRRef' data-ref="414ref" data-ref-filename="414ref">ref</dfn>, <a class="typedef" href="lj_ir.h.html#IROp" title='IROp' data-type='enum IROp' data-ref="IROp" data-ref-filename="IROp">IROp</a> <dfn class="local col5 decl" id="415conflict" title='conflict' data-type='IROp' data-ref="415conflict" data-ref-filename="415conflict">conflict</dfn>, <em>int</em> <dfn class="local col6 decl" id="416noload" title='noload' data-type='int' data-ref="416noload" data-ref-filename="416noload">noload</dfn>)</td></tr>
<tr><th id="113">113</th><td>{</td></tr>
<tr><th id="114">114</th><td>  <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col7 decl" id="417ir" title='ir' data-type='IRIns *' data-ref="417ir" data-ref-filename="417ir">ir</dfn> = <a class="local col3 ref" href="#413as" title='as' data-ref="413as" data-ref-filename="413as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::ir" title='ASMState::ir' data-use='r' data-ref="ASMState::ir" data-ref-filename="ASMState..ir">ir</a>;</td></tr>
<tr><th id="115">115</th><td>  <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col8 decl" id="418i" title='i' data-type='IRRef' data-ref="418i" data-ref-filename="418i">i</dfn> = <a class="local col3 ref" href="#413as" title='as' data-ref="413as" data-ref-filename="413as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::curins" title='ASMState::curins' data-use='r' data-ref="ASMState::curins" data-ref-filename="ASMState..curins">curins</a>;</td></tr>
<tr><th id="116">116</th><td>  <b>if</b> (<a class="local col8 ref" href="#418i" title='i' data-ref="418i" data-ref-filename="418i">i</a> &gt; <a class="local col4 ref" href="#414ref" title='ref' data-ref="414ref" data-ref-filename="414ref">ref</a> + <a class="macro" href="#81" title="31" data-ref="_M/CONFLICT_SEARCH_LIM">CONFLICT_SEARCH_LIM</a>)</td></tr>
<tr><th id="117">117</th><td>    <b>return</b> <var>0</var>;  <i>/* Give up, ref is too far away. */</i></td></tr>
<tr><th id="118">118</th><td>  <b>while</b> (--<a class="local col8 ref" href="#418i" title='i' data-ref="418i" data-ref-filename="418i">i</a> &gt; <a class="local col4 ref" href="#414ref" title='ref' data-ref="414ref" data-ref-filename="414ref">ref</a>) {</td></tr>
<tr><th id="119">119</th><td>    <b>if</b> (<a class="local col7 ref" href="#417ir" title='ir' data-ref="417ir" data-ref-filename="417ir">ir</a>[<a class="local col8 ref" href="#418i" title='i' data-ref="418i" data-ref-filename="418i">i</a>].<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="local col5 ref" href="#415conflict" title='conflict' data-ref="415conflict" data-ref-filename="415conflict">conflict</a>)</td></tr>
<tr><th id="120">120</th><td>      <b>return</b> <var>0</var>;  <i>/* Conflict found. */</i></td></tr>
<tr><th id="121">121</th><td>    <b>else</b> <b>if</b> (!<a class="local col6 ref" href="#416noload" title='noload' data-ref="416noload" data-ref-filename="416noload">noload</a> &amp;&amp; (<a class="local col7 ref" href="#417ir" title='ir' data-ref="417ir" data-ref-filename="417ir">ir</a>[<a class="local col8 ref" href="#418i" title='i' data-ref="418i" data-ref-filename="418i">i</a>].<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a> == <a class="local col4 ref" href="#414ref" title='ref' data-ref="414ref" data-ref-filename="414ref">ref</a> || <a class="local col7 ref" href="#417ir" title='ir' data-ref="417ir" data-ref-filename="417ir">ir</a>[<a class="local col8 ref" href="#418i" title='i' data-ref="418i" data-ref-filename="418i">i</a>].<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a> == <a class="local col4 ref" href="#414ref" title='ref' data-ref="414ref" data-ref-filename="414ref">ref</a>))</td></tr>
<tr><th id="122">122</th><td>      <b>return</b> <var>0</var>;</td></tr>
<tr><th id="123">123</th><td>  }</td></tr>
<tr><th id="124">124</th><td>  <b>return</b> <var>1</var>;  <i>/* Ok, no conflict. */</i></td></tr>
<tr><th id="125">125</th><td>}</td></tr>
<tr><th id="126">126</th><td></td></tr>
<tr><th id="127">127</th><td><i>/* Fuse array base into memory operand. */</i></td></tr>
<tr><th id="128">128</th><td><em>static</em> <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="decl def fn" id="asm_fuseabase" title='asm_fuseabase' data-ref="asm_fuseabase" data-ref-filename="asm_fuseabase">asm_fuseabase</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col9 decl" id="419as" title='as' data-type='ASMState *' data-ref="419as" data-ref-filename="419as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col0 decl" id="420ref" title='ref' data-type='IRRef' data-ref="420ref" data-ref-filename="420ref">ref</dfn>)</td></tr>
<tr><th id="129">129</th><td>{</td></tr>
<tr><th id="130">130</th><td>  <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col1 decl" id="421irb" title='irb' data-type='IRIns *' data-ref="421irb" data-ref-filename="421irb">irb</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ref)])" data-ref="_M/IR">IR</a>(<a class="local col0 ref" href="#420ref" title='ref' data-ref="420ref" data-ref-filename="420ref">ref</a>);</td></tr>
<tr><th id="131">131</th><td>  <a class="local col9 ref" href="#419as" title='as' data-ref="419as" data-ref-filename="419as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> = <var>0</var>;</td></tr>
<tr><th id="132">132</th><td>  <b>if</b> (<a class="local col1 ref" href="#421irb" title='irb' data-ref="421irb" data-ref-filename="421irb">irb</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_FLOAD' data-ref="IR_FLOAD" data-ref-filename="IR_FLOAD">IR_FLOAD</a>) {</td></tr>
<tr><th id="133">133</th><td>    <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col2 decl" id="422ira" title='ira' data-type='IRIns *' data-ref="422ira" data-ref-filename="422ira">ira</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(irb-&gt;op1)])" data-ref="_M/IR">IR</a>(<a class="local col1 ref" href="#421irb" title='irb' data-ref="421irb" data-ref-filename="421irb">irb</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>);</td></tr>
<tr><th id="134">134</th><td>    <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(irb-&gt;op2 == IRFL_TAB_ARRAY, <q>"expected FLOAD TAB_ARRAY"</q>);</td></tr>
<tr><th id="135">135</th><td>    <i>/* We can avoid the FLOAD of t-&gt;array for colocated arrays. */</i></td></tr>
<tr><th id="136">136</th><td>    <b>if</b> (<a class="local col2 ref" href="#422ira" title='ira' data-ref="422ira" data-ref-filename="422ira">ira</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_TNEW' data-ref="IR_TNEW" data-ref-filename="IR_TNEW">IR_TNEW</a> &amp;&amp; <a class="local col2 ref" href="#422ira" title='ira' data-ref="422ira" data-ref-filename="422ira">ira</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a> &lt;= <a class="macro" href="lj_def.h.html#62" title="16" data-ref="_M/LJ_MAX_COLOSIZE">LJ_MAX_COLOSIZE</a> &amp;&amp;</td></tr>
<tr><th id="137">137</th><td>	!<a class="macro" href="lj_asm.c.html#121" title="(as-&gt;fuseref == (~(IRRef)0))" data-ref="_M/neverfuse">neverfuse</a>(<a class="local col9 ref" href="#419as" title='as' data-ref="419as" data-ref-filename="419as">as</a>) &amp;&amp; <a class="ref fn" href="#noconflict" title='noconflict' data-ref="noconflict" data-ref-filename="noconflict">noconflict</a>(<a class="local col9 ref" href="#419as" title='as' data-ref="419as" data-ref-filename="419as">as</a>, <a class="local col1 ref" href="#421irb" title='irb' data-ref="421irb" data-ref-filename="421irb">irb</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="enum" href="lj_ir.h.html#154" title='IR_NEWREF' data-ref="IR_NEWREF" data-ref-filename="IR_NEWREF">IR_NEWREF</a>, <var>1</var>)) {</td></tr>
<tr><th id="138">138</th><td>      <a class="local col9 ref" href="#419as" title='as' data-ref="419as" data-ref-filename="419as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<b>sizeof</b>(<a class="typedef" href="lj_obj.h.html#GCtab" title='GCtab' data-type='struct GCtab' data-ref="GCtab" data-ref-filename="GCtab">GCtab</a>);  <i>/* Ofs to colocated array. */</i></td></tr>
<tr><th id="139">139</th><td>      <b>return</b> <a class="local col1 ref" href="#421irb" title='irb' data-ref="421irb" data-ref-filename="421irb">irb</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>;  <i>/* Table obj. */</i></td></tr>
<tr><th id="140">140</th><td>    }</td></tr>
<tr><th id="141">141</th><td>  } <b>else</b> <b>if</b> (<a class="local col1 ref" href="#421irb" title='irb' data-ref="421irb" data-ref-filename="421irb">irb</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_ADD' data-ref="IR_ADD" data-ref-filename="IR_ADD">IR_ADD</a> &amp;&amp; <a class="macro" href="lj_ir.h.html#470" title="((irb-&gt;op2) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col1 ref" href="#421irb" title='irb' data-ref="421irb" data-ref-filename="421irb">irb</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>)) {</td></tr>
<tr><th id="142">142</th><td>    <i>/* Fuse base offset (vararg load). */</i></td></tr>
<tr><th id="143">143</th><td>    <a class="local col9 ref" href="#419as" title='as' data-ref="419as" data-ref-filename="419as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(irb-&gt;op2)])" data-ref="_M/IR">IR</a>(<a class="local col1 ref" href="#421irb" title='irb' data-ref="421irb" data-ref-filename="421irb">irb</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>)-&gt;<a class="ref field" href="lj_ir.h.html#IRIns::i" title='IRIns::i' data-ref="IRIns::i" data-ref-filename="IRIns..i">i</a>;</td></tr>
<tr><th id="144">144</th><td>    <b>return</b> <a class="local col1 ref" href="#421irb" title='irb' data-ref="421irb" data-ref-filename="421irb">irb</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>;</td></tr>
<tr><th id="145">145</th><td>  }</td></tr>
<tr><th id="146">146</th><td>  <b>return</b> <a class="local col0 ref" href="#420ref" title='ref' data-ref="420ref" data-ref-filename="420ref">ref</a>;  <i>/* Otherwise use the given array base. */</i></td></tr>
<tr><th id="147">147</th><td>}</td></tr>
<tr><th id="148">148</th><td></td></tr>
<tr><th id="149">149</th><td><i>/* Fuse array reference into memory operand. */</i></td></tr>
<tr><th id="150">150</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_fusearef" title='asm_fusearef' data-ref="asm_fusearef" data-ref-filename="asm_fusearef">asm_fusearef</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col3 decl" id="423as" title='as' data-type='ASMState *' data-ref="423as" data-ref-filename="423as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col4 decl" id="424ir" title='ir' data-type='IRIns *' data-ref="424ir" data-ref-filename="424ir">ir</dfn>, <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col5 decl" id="425allow" title='allow' data-type='RegSet' data-ref="425allow" data-ref-filename="425allow">allow</dfn>)</td></tr>
<tr><th id="151">151</th><td>{</td></tr>
<tr><th id="152">152</th><td>  <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col6 decl" id="426irx" title='irx' data-type='IRIns *' data-ref="426irx" data-ref-filename="426irx">irx</dfn>;</td></tr>
<tr><th id="153">153</th><td>  <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(ir-&gt;o == IR_AREF, <q>"expected AREF"</q>);</td></tr>
<tr><th id="154">154</th><td>  <a class="local col3 ref" href="#423as" title='as' data-ref="423as" data-ref-filename="423as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a>)<a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col3 ref" href="#423as" title='as' data-ref="423as" data-ref-filename="423as">as</a>, <a class="ref fn" href="#asm_fuseabase" title='asm_fuseabase' data-ref="asm_fuseabase" data-ref-filename="asm_fuseabase">asm_fuseabase</a>(<a class="local col3 ref" href="#423as" title='as' data-ref="423as" data-ref-filename="423as">as</a>, <a class="local col4 ref" href="#424ir" title='ir' data-ref="424ir" data-ref-filename="424ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>), <a class="local col5 ref" href="#425allow" title='allow' data-ref="425allow" data-ref-filename="425allow">allow</a>);</td></tr>
<tr><th id="155">155</th><td>  <a class="local col6 ref" href="#426irx" title='irx' data-ref="426irx" data-ref-filename="426irx">irx</a> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ir-&gt;op2)])" data-ref="_M/IR">IR</a>(<a class="local col4 ref" href="#424ir" title='ir' data-ref="424ir" data-ref-filename="424ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>);</td></tr>
<tr><th id="156">156</th><td>  <b>if</b> (<a class="macro" href="lj_ir.h.html#470" title="((ir-&gt;op2) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col4 ref" href="#424ir" title='ir' data-ref="424ir" data-ref-filename="424ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>)) {</td></tr>
<tr><th id="157">157</th><td>    <a class="local col3 ref" href="#423as" title='as' data-ref="423as" data-ref-filename="423as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> += <var>8</var>*<a class="local col6 ref" href="#426irx" title='irx' data-ref="426irx" data-ref-filename="426irx">irx</a>-&gt;<a class="ref field" href="lj_ir.h.html#IRIns::i" title='IRIns::i' data-ref="IRIns::i" data-ref-filename="IRIns..i">i</a>;</td></tr>
<tr><th id="158">158</th><td>    <a class="local col3 ref" href="#423as" title='as' data-ref="423as" data-ref-filename="423as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::idx" title='(anonymous struct)::idx' data-ref="(anonymous)::idx" data-ref-filename="(anonymous)..idx">idx</a> = <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a>;</td></tr>
<tr><th id="159">159</th><td>  } <b>else</b> {</td></tr>
<tr><th id="160">160</th><td>    <a class="macro" href="lj_target.h.html#70" title="(allow &amp;= ~(((RegSet)1) &lt;&lt; (as-&gt;mrm.base)))" data-ref="_M/rset_clear">rset_clear</a>(<a class="local col5 ref" href="#425allow" title='allow' data-ref="425allow" data-ref-filename="425allow">allow</a>, <a class="local col3 ref" href="#423as" title='as' data-ref="423as" data-ref-filename="423as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a>);</td></tr>
<tr><th id="161">161</th><td>    <a class="local col3 ref" href="#423as" title='as' data-ref="423as" data-ref-filename="423as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::scale" title='(anonymous struct)::scale' data-ref="(anonymous)::scale" data-ref-filename="(anonymous)..scale">scale</a> = <a class="enum" href="lj_target_x86.h.html#XM_SCALE8" title='XM_SCALE8' data-ref="XM_SCALE8" data-ref-filename="XM_SCALE8">XM_SCALE8</a>;</td></tr>
<tr><th id="162">162</th><td>    <i>/* Fuse a constant ADD (e.g. t[i+1]) into the offset.</i></td></tr>
<tr><th id="163">163</th><td><i>    ** Doesn't help much without ABCelim, but reduces register pressure.</i></td></tr>
<tr><th id="164">164</th><td><i>    */</i></td></tr>
<tr><th id="165">165</th><td>    <b>if</b> (!<a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp;  <i>/* Has bad effects with negative index on x64. */</i></td></tr>
<tr><th id="166">166</th><td>	<a class="macro" href="lj_asm.c.html#120" title="((ir-&gt;op2) &gt; as-&gt;fuseref)" data-ref="_M/mayfuse">mayfuse</a>(<a class="local col3 ref" href="#423as" title='as' data-ref="423as" data-ref-filename="423as">as</a>, <a class="local col4 ref" href="#424ir" title='ir' data-ref="424ir" data-ref-filename="424ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>) &amp;&amp; <a class="macro" href="lj_target.h.html#27" title="((irx-&gt;r) &amp; 0x80)" data-ref="_M/ra_noreg">ra_noreg</a>(<a class="local col6 ref" href="#426irx" title='irx' data-ref="426irx" data-ref-filename="426irx">irx</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>) &amp;&amp;</td></tr>
<tr><th id="167">167</th><td>	<a class="local col6 ref" href="#426irx" title='irx' data-ref="426irx" data-ref-filename="426irx">irx</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_ADD' data-ref="IR_ADD" data-ref-filename="IR_ADD">IR_ADD</a> &amp;&amp; <a class="macro" href="lj_ir.h.html#470" title="((irx-&gt;op2) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col6 ref" href="#426irx" title='irx' data-ref="426irx" data-ref-filename="426irx">irx</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>)) {</td></tr>
<tr><th id="168">168</th><td>      <a class="local col3 ref" href="#423as" title='as' data-ref="423as" data-ref-filename="423as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> += <var>8</var>*<a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(irx-&gt;op2)])" data-ref="_M/IR">IR</a>(<a class="local col6 ref" href="#426irx" title='irx' data-ref="426irx" data-ref-filename="426irx">irx</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>)-&gt;<a class="ref field" href="lj_ir.h.html#IRIns::i" title='IRIns::i' data-ref="IRIns::i" data-ref-filename="IRIns..i">i</a>;</td></tr>
<tr><th id="169">169</th><td>      <a class="local col3 ref" href="#423as" title='as' data-ref="423as" data-ref-filename="423as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::idx" title='(anonymous struct)::idx' data-ref="(anonymous)::idx" data-ref-filename="(anonymous)..idx">idx</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a>)<a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col3 ref" href="#423as" title='as' data-ref="423as" data-ref-filename="423as">as</a>, <a class="local col6 ref" href="#426irx" title='irx' data-ref="426irx" data-ref-filename="426irx">irx</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="local col5 ref" href="#425allow" title='allow' data-ref="425allow" data-ref-filename="425allow">allow</a>);</td></tr>
<tr><th id="170">170</th><td>    } <b>else</b> {</td></tr>
<tr><th id="171">171</th><td>      <a class="local col3 ref" href="#423as" title='as' data-ref="423as" data-ref-filename="423as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::idx" title='(anonymous struct)::idx' data-ref="(anonymous)::idx" data-ref-filename="(anonymous)..idx">idx</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a>)<a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col3 ref" href="#423as" title='as' data-ref="423as" data-ref-filename="423as">as</a>, <a class="local col4 ref" href="#424ir" title='ir' data-ref="424ir" data-ref-filename="424ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>, <a class="local col5 ref" href="#425allow" title='allow' data-ref="425allow" data-ref-filename="425allow">allow</a>);</td></tr>
<tr><th id="172">172</th><td>    }</td></tr>
<tr><th id="173">173</th><td>  }</td></tr>
<tr><th id="174">174</th><td>}</td></tr>
<tr><th id="175">175</th><td></td></tr>
<tr><th id="176">176</th><td><i>/* Fuse array/hash/upvalue reference into memory operand.</i></td></tr>
<tr><th id="177">177</th><td><i>** Caveat: this may allocate GPRs for the base/idx registers. Be sure to</i></td></tr>
<tr><th id="178">178</th><td><i>** pass the final allow mask, excluding any GPRs used for other inputs.</i></td></tr>
<tr><th id="179">179</th><td><i>** In particular: 2-operand GPR instructions need to call ra_dest() first!</i></td></tr>
<tr><th id="180">180</th><td><i>*/</i></td></tr>
<tr><th id="181">181</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_fuseahuref" title='asm_fuseahuref' data-ref="asm_fuseahuref" data-ref-filename="asm_fuseahuref">asm_fuseahuref</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col7 decl" id="427as" title='as' data-type='ASMState *' data-ref="427as" data-ref-filename="427as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col8 decl" id="428ref" title='ref' data-type='IRRef' data-ref="428ref" data-ref-filename="428ref">ref</dfn>, <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col9 decl" id="429allow" title='allow' data-type='RegSet' data-ref="429allow" data-ref-filename="429allow">allow</dfn>)</td></tr>
<tr><th id="182">182</th><td>{</td></tr>
<tr><th id="183">183</th><td>  <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col0 decl" id="430ir" title='ir' data-type='IRIns *' data-ref="430ir" data-ref-filename="430ir">ir</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ref)])" data-ref="_M/IR">IR</a>(<a class="local col8 ref" href="#428ref" title='ref' data-ref="428ref" data-ref-filename="428ref">ref</a>);</td></tr>
<tr><th id="184">184</th><td>  <b>if</b> (<a class="macro" href="lj_target.h.html#27" title="((ir-&gt;r) &amp; 0x80)" data-ref="_M/ra_noreg">ra_noreg</a>(<a class="local col0 ref" href="#430ir" title='ir' data-ref="430ir" data-ref-filename="430ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>)) {</td></tr>
<tr><th id="185">185</th><td>    <b>switch</b> ((<a class="typedef" href="lj_ir.h.html#IROp" title='IROp' data-type='enum IROp' data-ref="IROp" data-ref-filename="IROp">IROp</a>)<a class="local col0 ref" href="#430ir" title='ir' data-ref="430ir" data-ref-filename="430ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a>) {</td></tr>
<tr><th id="186">186</th><td>    <b>case</b> <a class="enum" href="lj_ir.h.html#154" title='IR_AREF' data-ref="IR_AREF" data-ref-filename="IR_AREF">IR_AREF</a>:</td></tr>
<tr><th id="187">187</th><td>      <b>if</b> (<a class="macro" href="lj_asm.c.html#120" title="((ref) &gt; as-&gt;fuseref)" data-ref="_M/mayfuse">mayfuse</a>(<a class="local col7 ref" href="#427as" title='as' data-ref="427as" data-ref-filename="427as">as</a>, <a class="local col8 ref" href="#428ref" title='ref' data-ref="428ref" data-ref-filename="428ref">ref</a>)) {</td></tr>
<tr><th id="188">188</th><td>	<a class="ref fn" href="#asm_fusearef" title='asm_fusearef' data-ref="asm_fusearef" data-ref-filename="asm_fusearef">asm_fusearef</a>(<a class="local col7 ref" href="#427as" title='as' data-ref="427as" data-ref-filename="427as">as</a>, <a class="local col0 ref" href="#430ir" title='ir' data-ref="430ir" data-ref-filename="430ir">ir</a>, <a class="local col9 ref" href="#429allow" title='allow' data-ref="429allow" data-ref-filename="429allow">allow</a>);</td></tr>
<tr><th id="189">189</th><td>	<b>return</b>;</td></tr>
<tr><th id="190">190</th><td>      }</td></tr>
<tr><th id="191">191</th><td>      <b>break</b>;</td></tr>
<tr><th id="192">192</th><td>    <b>case</b> <a class="enum" href="lj_ir.h.html#154" title='IR_HREFK' data-ref="IR_HREFK" data-ref-filename="IR_HREFK">IR_HREFK</a>:</td></tr>
<tr><th id="193">193</th><td>      <b>if</b> (<a class="macro" href="lj_asm.c.html#120" title="((ref) &gt; as-&gt;fuseref)" data-ref="_M/mayfuse">mayfuse</a>(<a class="local col7 ref" href="#427as" title='as' data-ref="427as" data-ref-filename="427as">as</a>, <a class="local col8 ref" href="#428ref" title='ref' data-ref="428ref" data-ref-filename="428ref">ref</a>)) {</td></tr>
<tr><th id="194">194</th><td>	<a class="local col7 ref" href="#427as" title='as' data-ref="427as" data-ref-filename="427as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a>)<a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col7 ref" href="#427as" title='as' data-ref="427as" data-ref-filename="427as">as</a>, <a class="local col0 ref" href="#430ir" title='ir' data-ref="430ir" data-ref-filename="430ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="local col9 ref" href="#429allow" title='allow' data-ref="429allow" data-ref-filename="429allow">allow</a>);</td></tr>
<tr><th id="195">195</th><td>	<a class="local col7 ref" href="#427as" title='as' data-ref="427as" data-ref-filename="427as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)(<a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ir-&gt;op2)])" data-ref="_M/IR">IR</a>(<a class="local col0 ref" href="#430ir" title='ir' data-ref="430ir" data-ref-filename="430ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>)-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a> * <b>sizeof</b>(<a class="typedef" href="lj_obj.h.html#Node" title='Node' data-type='struct Node' data-ref="Node" data-ref-filename="Node">Node</a>));</td></tr>
<tr><th id="196">196</th><td>	<a class="local col7 ref" href="#427as" title='as' data-ref="427as" data-ref-filename="427as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::idx" title='(anonymous struct)::idx' data-ref="(anonymous)::idx" data-ref-filename="(anonymous)..idx">idx</a> = <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a>;</td></tr>
<tr><th id="197">197</th><td>	<b>return</b>;</td></tr>
<tr><th id="198">198</th><td>      }</td></tr>
<tr><th id="199">199</th><td>      <b>break</b>;</td></tr>
<tr><th id="200">200</th><td>    <b>case</b> <a class="enum" href="lj_ir.h.html#154" title='IR_UREFC' data-ref="IR_UREFC" data-ref-filename="IR_UREFC">IR_UREFC</a>:</td></tr>
<tr><th id="201">201</th><td>      <b>if</b> (<a class="macro" href="lj_ir.h.html#470" title="((ir-&gt;op1) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col0 ref" href="#430ir" title='ir' data-ref="430ir" data-ref-filename="430ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>)) {</td></tr>
<tr><th id="202">202</th><td>	<a class="typedef" href="lj_obj.h.html#GCfunc" title='GCfunc' data-type='union GCfunc' data-ref="GCfunc" data-ref-filename="GCfunc">GCfunc</a> *<dfn class="local col1 decl" id="431fn" title='fn' data-type='GCfunc *' data-ref="431fn" data-ref-filename="431fn">fn</dfn> = <a class="macro" href="lj_ir.h.html#574" title="((&amp;((((GCobj *)((((&amp;as-&gt;ir[(ir-&gt;op1)])))[1].gcr).gcptr64)))-&gt;fn))" data-ref="_M/ir_kfunc">ir_kfunc</a>(<a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ir-&gt;op1)])" data-ref="_M/IR">IR</a>(<a class="local col0 ref" href="#430ir" title='ir' data-ref="430ir" data-ref-filename="430ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>));</td></tr>
<tr><th id="203">203</th><td>	<a class="typedef" href="lj_obj.h.html#GCupval" title='GCupval' data-type='struct GCupval' data-ref="GCupval" data-ref-filename="GCupval">GCupval</a> *<dfn class="local col2 decl" id="432uv" title='uv' data-type='GCupval *' data-ref="432uv" data-ref-filename="432uv">uv</dfn> = &amp;<a class="macro" href="lj_obj.h.html#67" title="((GCobj *)(fn-&gt;l.uvptr[(ir-&gt;op2 &gt;&gt; 8)]).gcptr64)" data-ref="_M/gcref">gcref</a>(<a class="local col1 ref" href="#431fn" title='fn' data-ref="431fn" data-ref-filename="431fn">fn</a>-&gt;<a class="ref field" href="lj_obj.h.html#GCfunc::l" title='GCfunc::l' data-ref="GCfunc::l" data-ref-filename="GCfunc..l">l</a>.<a class="ref field" href="lj_obj.h.html#GCfuncL::uvptr" title='GCfuncL::uvptr' data-ref="GCfuncL::uvptr" data-ref-filename="GCfuncL..uvptr">uvptr</a>[(<a class="local col0 ref" href="#430ir" title='ir' data-ref="430ir" data-ref-filename="430ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a> &gt;&gt; <var>8</var>)])-&gt;<a class="ref field" href="lj_obj.h.html#GCobj::uv" title='GCobj::uv' data-ref="GCobj::uv" data-ref-filename="GCobj..uv">uv</a>;</td></tr>
<tr><th id="204">204</th><td><u>#<span data-ppcond="204">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="205">205</th><td>	<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int64_t" title='int64_t' data-type='__int64_t' data-ref="int64_t" data-ref-filename="int64_t">int64_t</a> <dfn class="local col3 decl" id="433ofs" title='ofs' data-type='int64_t' data-ref="433ofs" data-ref-filename="433ofs">ofs</dfn> = <a class="macro" href="lj_emit_x86.h.html#295" title="((intptr_t)((uintptr_t)(&amp;uv-&gt;tv) - (uintptr_t)((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;dispatch))" data-ref="_M/dispofs">dispofs</a>(<a class="local col7 ref" href="#427as" title='as' data-ref="427as" data-ref-filename="427as">as</a>, &amp;<a class="local col2 ref" href="#432uv" title='uv' data-ref="432uv" data-ref-filename="432uv">uv</a>-&gt;<a class="ref field" href="lj_obj.h.html#GCupval::(anonymous)::tv" title='GCupval::(anonymous union)::tv' data-ref="GCupval::(anonymous)::tv" data-ref-filename="GCupval..(anonymous)..tv">tv</a>);</td></tr>
<tr><th id="206">206</th><td>	<b>if</b> (<a class="macro" href="lj_def.h.html#105" title="((ofs) == (int32_t)(ofs))" data-ref="_M/checki32">checki32</a>(<a class="local col3 ref" href="#433ofs" title='ofs' data-ref="433ofs" data-ref-filename="433ofs">ofs</a>) &amp;&amp; <a class="macro" href="lj_def.h.html#105" title="((ofs+4) == (int32_t)(ofs+4))" data-ref="_M/checki32">checki32</a>(<a class="local col3 ref" href="#433ofs" title='ofs' data-ref="433ofs" data-ref-filename="433ofs">ofs</a>+<var>4</var>)) {</td></tr>
<tr><th id="207">207</th><td>	  <a class="local col7 ref" href="#427as" title='as' data-ref="427as" data-ref-filename="427as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<a class="local col3 ref" href="#433ofs" title='ofs' data-ref="433ofs" data-ref-filename="433ofs">ofs</a>;</td></tr>
<tr><th id="208">208</th><td>	  <a class="local col7 ref" href="#427as" title='as' data-ref="427as" data-ref-filename="427as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> = <a class="enum" href="lj_target_x86.h.html#RID_DISPATCH" title='RID_DISPATCH' data-ref="RID_DISPATCH" data-ref-filename="RID_DISPATCH">RID_DISPATCH</a>;</td></tr>
<tr><th id="209">209</th><td>	  <a class="local col7 ref" href="#427as" title='as' data-ref="427as" data-ref-filename="427as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::idx" title='(anonymous struct)::idx' data-ref="(anonymous)::idx" data-ref-filename="(anonymous)..idx">idx</a> = <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a>;</td></tr>
<tr><th id="210">210</th><td>	  <b>return</b>;</td></tr>
<tr><th id="211">211</th><td>	}</td></tr>
<tr><th id="212">212</th><td><u>#<span data-ppcond="204">else</span></u></td></tr>
<tr><th id="213">213</th><td>	as-&gt;mrm.ofs = ptr2addr(&amp;uv-&gt;tv);</td></tr>
<tr><th id="214">214</th><td>	as-&gt;mrm.base = as-&gt;mrm.idx = RID_NONE;</td></tr>
<tr><th id="215">215</th><td>	<b>return</b>;</td></tr>
<tr><th id="216">216</th><td><u>#<span data-ppcond="204">endif</span></u></td></tr>
<tr><th id="217">217</th><td>      }</td></tr>
<tr><th id="218">218</th><td>      <b>break</b>;</td></tr>
<tr><th id="219">219</th><td>    <b>default</b>:</td></tr>
<tr><th id="220">220</th><td>      <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(ir-&gt;o == IR_HREF || ir-&gt;o == IR_NEWREF || ir-&gt;o == IR_UREFO ||</td></tr>
<tr><th id="221">221</th><td>		 ir-&gt;o == IR_KKPTR,</td></tr>
<tr><th id="222">222</th><td>		 <q>"bad IR op %d"</q>, ir-&gt;o);</td></tr>
<tr><th id="223">223</th><td>      <b>break</b>;</td></tr>
<tr><th id="224">224</th><td>    }</td></tr>
<tr><th id="225">225</th><td>  }</td></tr>
<tr><th id="226">226</th><td>  <a class="local col7 ref" href="#427as" title='as' data-ref="427as" data-ref-filename="427as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a>)<a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col7 ref" href="#427as" title='as' data-ref="427as" data-ref-filename="427as">as</a>, <a class="local col8 ref" href="#428ref" title='ref' data-ref="428ref" data-ref-filename="428ref">ref</a>, <a class="local col9 ref" href="#429allow" title='allow' data-ref="429allow" data-ref-filename="429allow">allow</a>);</td></tr>
<tr><th id="227">227</th><td>  <a class="local col7 ref" href="#427as" title='as' data-ref="427as" data-ref-filename="427as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> = <var>0</var>;</td></tr>
<tr><th id="228">228</th><td>  <a class="local col7 ref" href="#427as" title='as' data-ref="427as" data-ref-filename="427as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::idx" title='(anonymous struct)::idx' data-ref="(anonymous)::idx" data-ref-filename="(anonymous)..idx">idx</a> = <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a>;</td></tr>
<tr><th id="229">229</th><td>}</td></tr>
<tr><th id="230">230</th><td></td></tr>
<tr><th id="231">231</th><td><i>/* Fuse FLOAD/FREF reference into memory operand. */</i></td></tr>
<tr><th id="232">232</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_fusefref" title='asm_fusefref' data-ref="asm_fusefref" data-ref-filename="asm_fusefref">asm_fusefref</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col4 decl" id="434as" title='as' data-type='ASMState *' data-ref="434as" data-ref-filename="434as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col5 decl" id="435ir" title='ir' data-type='IRIns *' data-ref="435ir" data-ref-filename="435ir">ir</dfn>, <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col6 decl" id="436allow" title='allow' data-type='RegSet' data-ref="436allow" data-ref-filename="436allow">allow</dfn>)</td></tr>
<tr><th id="233">233</th><td>{</td></tr>
<tr><th id="234">234</th><td>  <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(ir-&gt;o == IR_FLOAD || ir-&gt;o == IR_FREF,</td></tr>
<tr><th id="235">235</th><td>	     <q>"bad IR op %d"</q>, ir-&gt;o);</td></tr>
<tr><th id="236">236</th><td>  <a class="local col4 ref" href="#434as" title='as' data-ref="434as" data-ref-filename="434as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::idx" title='(anonymous struct)::idx' data-ref="(anonymous)::idx" data-ref-filename="(anonymous)..idx">idx</a> = <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a>;</td></tr>
<tr><th id="237">237</th><td>  <b>if</b> (<a class="local col5 ref" href="#435ir" title='ir' data-ref="435ir" data-ref-filename="435ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a> == <a class="enum" href="lj_ir.h.html#REF_NIL" title='REF_NIL' data-ref="REF_NIL" data-ref-filename="REF_NIL">REF_NIL</a>) {  <i>/* FLOAD from GG_State with offset. */</i></td></tr>
<tr><th id="238">238</th><td><u>#<span data-ppcond="238">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="239">239</th><td>    <a class="local col4 ref" href="#434as" title='as' data-ref="434as" data-ref-filename="434as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)(<a class="local col5 ref" href="#435ir" title='ir' data-ref="435ir" data-ref-filename="435ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a> &lt;&lt; <var>2</var>) - <a class="macro" href="lj_dispatch.h.html#111" title="((int)__builtin_offsetof(GG_State, dispatch))" data-ref="_M/GG_OFS">GG_OFS</a>(dispatch);</td></tr>
<tr><th id="240">240</th><td>    <a class="local col4 ref" href="#434as" title='as' data-ref="434as" data-ref-filename="434as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> = <a class="enum" href="lj_target_x86.h.html#RID_DISPATCH" title='RID_DISPATCH' data-ref="RID_DISPATCH" data-ref-filename="RID_DISPATCH">RID_DISPATCH</a>;</td></tr>
<tr><th id="241">241</th><td><u>#<span data-ppcond="238">else</span></u></td></tr>
<tr><th id="242">242</th><td>    as-&gt;mrm.ofs = (int32_t)(ir-&gt;op2 &lt;&lt; <var>2</var>) + ptr2addr(J2GG(as-&gt;J));</td></tr>
<tr><th id="243">243</th><td>    as-&gt;mrm.base = RID_NONE;</td></tr>
<tr><th id="244">244</th><td><u>#<span data-ppcond="238">endif</span></u></td></tr>
<tr><th id="245">245</th><td>    <b>return</b>;</td></tr>
<tr><th id="246">246</th><td>  }</td></tr>
<tr><th id="247">247</th><td>  <a class="local col4 ref" href="#434as" title='as' data-ref="434as" data-ref-filename="434as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> = <a class="tu ref" href="lj_asm.c.html#field_ofs" title='field_ofs' data-use='r' data-ref="field_ofs" data-ref-filename="field_ofs">field_ofs</a>[<a class="local col5 ref" href="#435ir" title='ir' data-ref="435ir" data-ref-filename="435ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>];</td></tr>
<tr><th id="248">248</th><td>  <b>if</b> (<a class="macro" href="lj_ir.h.html#470" title="((ir-&gt;op1) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col5 ref" href="#435ir" title='ir' data-ref="435ir" data-ref-filename="435ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>)) {</td></tr>
<tr><th id="249">249</th><td>    <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col7 decl" id="437op1" title='op1' data-type='IRIns *' data-ref="437op1" data-ref-filename="437op1">op1</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ir-&gt;op1)])" data-ref="_M/IR">IR</a>(<a class="local col5 ref" href="#435ir" title='ir' data-ref="435ir" data-ref-filename="435ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>);</td></tr>
<tr><th id="250">250</th><td><u>#<span data-ppcond="250">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="251">251</th><td>    <b>if</b> (<a class="local col5 ref" href="#435ir" title='ir' data-ref="435ir" data-ref-filename="435ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a> == <a class="enum" href="lj_ir.h.html#REF_NIL" title='REF_NIL' data-ref="REF_NIL" data-ref-filename="REF_NIL">REF_NIL</a>) {</td></tr>
<tr><th id="252">252</th><td>      <a class="local col4 ref" href="#434as" title='as' data-ref="434as" data-ref-filename="434as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> -= <a class="macro" href="lj_dispatch.h.html#111" title="((int)__builtin_offsetof(GG_State, dispatch))" data-ref="_M/GG_OFS">GG_OFS</a>(dispatch);</td></tr>
<tr><th id="253">253</th><td>      <a class="local col4 ref" href="#434as" title='as' data-ref="434as" data-ref-filename="434as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> = <a class="enum" href="lj_target_x86.h.html#RID_DISPATCH" title='RID_DISPATCH' data-ref="RID_DISPATCH" data-ref-filename="RID_DISPATCH">RID_DISPATCH</a>;</td></tr>
<tr><th id="254">254</th><td>      <b>return</b>;</td></tr>
<tr><th id="255">255</th><td>    } <b>else</b> <b>if</b> (<a class="local col7 ref" href="#437op1" title='op1' data-ref="437op1" data-ref-filename="437op1">op1</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_KPTR' data-ref="IR_KPTR" data-ref-filename="IR_KPTR">IR_KPTR</a> || <a class="local col7 ref" href="#437op1" title='op1' data-ref="437op1" data-ref-filename="437op1">op1</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_KKPTR' data-ref="IR_KKPTR" data-ref-filename="IR_KKPTR">IR_KKPTR</a>) {</td></tr>
<tr><th id="256">256</th><td>      <a class="typedef" href="../include/stdint.h.html#intptr_t" title='intptr_t' data-type='long' data-ref="intptr_t" data-ref-filename="intptr_t">intptr_t</a> <dfn class="local col8 decl" id="438ofs" title='ofs' data-type='intptr_t' data-ref="438ofs" data-ref-filename="438ofs">ofs</dfn> = <a class="macro" href="lj_emit_x86.h.html#295" title="((intptr_t)((uintptr_t)((((void *)(void *)((op1)[1].ptr).ptr64))) - (uintptr_t)((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;dispatch))" data-ref="_M/dispofs">dispofs</a>(<a class="local col4 ref" href="#434as" title='as' data-ref="434as" data-ref-filename="434as">as</a>, <a class="macro" href="lj_ir.h.html#579" title="(((void *)(void *)((op1)[1].ptr).ptr64))" data-ref="_M/ir_kptr">ir_kptr</a>(<a class="local col7 ref" href="#437op1" title='op1' data-ref="437op1" data-ref-filename="437op1">op1</a>));</td></tr>
<tr><th id="257">257</th><td>      <b>if</b> (<a class="macro" href="lj_def.h.html#105" title="((as-&gt;mrm.ofs + ofs) == (int32_t)(as-&gt;mrm.ofs + ofs))" data-ref="_M/checki32">checki32</a>(<a class="local col4 ref" href="#434as" title='as' data-ref="434as" data-ref-filename="434as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> + <a class="local col8 ref" href="#438ofs" title='ofs' data-ref="438ofs" data-ref-filename="438ofs">ofs</a>)) {</td></tr>
<tr><th id="258">258</th><td>	<a class="local col4 ref" href="#434as" title='as' data-ref="434as" data-ref-filename="434as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> += (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<a class="local col8 ref" href="#438ofs" title='ofs' data-ref="438ofs" data-ref-filename="438ofs">ofs</a>;</td></tr>
<tr><th id="259">259</th><td>	<a class="local col4 ref" href="#434as" title='as' data-ref="434as" data-ref-filename="434as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> = <a class="enum" href="lj_target_x86.h.html#RID_DISPATCH" title='RID_DISPATCH' data-ref="RID_DISPATCH" data-ref-filename="RID_DISPATCH">RID_DISPATCH</a>;</td></tr>
<tr><th id="260">260</th><td>	<b>return</b>;</td></tr>
<tr><th id="261">261</th><td>      }</td></tr>
<tr><th id="262">262</th><td>    }</td></tr>
<tr><th id="263">263</th><td><u>#<span data-ppcond="250">else</span></u></td></tr>
<tr><th id="264">264</th><td>    as-&gt;mrm.ofs += op1-&gt;i;</td></tr>
<tr><th id="265">265</th><td>    as-&gt;mrm.base = RID_NONE;</td></tr>
<tr><th id="266">266</th><td>    <b>return</b>;</td></tr>
<tr><th id="267">267</th><td><u>#<span data-ppcond="250">endif</span></u></td></tr>
<tr><th id="268">268</th><td>  }</td></tr>
<tr><th id="269">269</th><td>  <a class="local col4 ref" href="#434as" title='as' data-ref="434as" data-ref-filename="434as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a>)<a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col4 ref" href="#434as" title='as' data-ref="434as" data-ref-filename="434as">as</a>, <a class="local col5 ref" href="#435ir" title='ir' data-ref="435ir" data-ref-filename="435ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="local col6 ref" href="#436allow" title='allow' data-ref="436allow" data-ref-filename="436allow">allow</a>);</td></tr>
<tr><th id="270">270</th><td>}</td></tr>
<tr><th id="271">271</th><td></td></tr>
<tr><th id="272">272</th><td><i>/* Fuse string reference into memory operand. */</i></td></tr>
<tr><th id="273">273</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_fusestrref" title='asm_fusestrref' data-ref="asm_fusestrref" data-ref-filename="asm_fusestrref">asm_fusestrref</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col9 decl" id="439as" title='as' data-type='ASMState *' data-ref="439as" data-ref-filename="439as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col0 decl" id="440ir" title='ir' data-type='IRIns *' data-ref="440ir" data-ref-filename="440ir">ir</dfn>, <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col1 decl" id="441allow" title='allow' data-type='RegSet' data-ref="441allow" data-ref-filename="441allow">allow</dfn>)</td></tr>
<tr><th id="274">274</th><td>{</td></tr>
<tr><th id="275">275</th><td>  <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col2 decl" id="442irr" title='irr' data-type='IRIns *' data-ref="442irr" data-ref-filename="442irr">irr</dfn>;</td></tr>
<tr><th id="276">276</th><td>  <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(ir-&gt;o == IR_STRREF, <q>"bad IR op %d"</q>, ir-&gt;o);</td></tr>
<tr><th id="277">277</th><td>  <a class="local col9 ref" href="#439as" title='as' data-ref="439as" data-ref-filename="439as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> = <a class="local col9 ref" href="#439as" title='as' data-ref="439as" data-ref-filename="439as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::idx" title='(anonymous struct)::idx' data-ref="(anonymous)::idx" data-ref-filename="(anonymous)..idx">idx</a> = <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a>;</td></tr>
<tr><th id="278">278</th><td>  <a class="local col9 ref" href="#439as" title='as' data-ref="439as" data-ref-filename="439as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::scale" title='(anonymous struct)::scale' data-ref="(anonymous)::scale" data-ref-filename="(anonymous)..scale">scale</a> = <a class="enum" href="lj_target_x86.h.html#XM_SCALE1" title='XM_SCALE1' data-ref="XM_SCALE1" data-ref-filename="XM_SCALE1">XM_SCALE1</a>;</td></tr>
<tr><th id="279">279</th><td>  <a class="local col9 ref" href="#439as" title='as' data-ref="439as" data-ref-filename="439as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> = <b>sizeof</b>(<a class="typedef" href="lj_obj.h.html#GCstr" title='GCstr' data-type='struct GCstr' data-ref="GCstr" data-ref-filename="GCstr">GCstr</a>);</td></tr>
<tr><th id="280">280</th><td>  <b>if</b> (!<a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a> &amp;&amp; <a class="macro" href="lj_ir.h.html#470" title="((ir-&gt;op1) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col0 ref" href="#440ir" title='ir' data-ref="440ir" data-ref-filename="440ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>)) {</td></tr>
<tr><th id="281">281</th><td>    <a class="local col9 ref" href="#439as" title='as' data-ref="439as" data-ref-filename="439as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> += <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ir-&gt;op1)])" data-ref="_M/IR">IR</a>(<a class="local col0 ref" href="#440ir" title='ir' data-ref="440ir" data-ref-filename="440ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>)-&gt;<a class="ref field" href="lj_ir.h.html#IRIns::i" title='IRIns::i' data-ref="IRIns::i" data-ref-filename="IRIns..i">i</a>;</td></tr>
<tr><th id="282">282</th><td>  } <b>else</b> {</td></tr>
<tr><th id="283">283</th><td>    <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col3 decl" id="443r" title='r' data-type='Reg' data-ref="443r" data-ref-filename="443r">r</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col9 ref" href="#439as" title='as' data-ref="439as" data-ref-filename="439as">as</a>, <a class="local col0 ref" href="#440ir" title='ir' data-ref="440ir" data-ref-filename="440ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="local col1 ref" href="#441allow" title='allow' data-ref="441allow" data-ref-filename="441allow">allow</a>);</td></tr>
<tr><th id="284">284</th><td>    <a class="macro" href="lj_target.h.html#70" title="(allow &amp;= ~(((RegSet)1) &lt;&lt; (r)))" data-ref="_M/rset_clear">rset_clear</a>(<a class="local col1 ref" href="#441allow" title='allow' data-ref="441allow" data-ref-filename="441allow">allow</a>, <a class="local col3 ref" href="#443r" title='r' data-ref="443r" data-ref-filename="443r">r</a>);</td></tr>
<tr><th id="285">285</th><td>    <a class="local col9 ref" href="#439as" title='as' data-ref="439as" data-ref-filename="439as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a>)<a class="local col3 ref" href="#443r" title='r' data-ref="443r" data-ref-filename="443r">r</a>;</td></tr>
<tr><th id="286">286</th><td>  }</td></tr>
<tr><th id="287">287</th><td>  <a class="local col2 ref" href="#442irr" title='irr' data-ref="442irr" data-ref-filename="442irr">irr</a> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ir-&gt;op2)])" data-ref="_M/IR">IR</a>(<a class="local col0 ref" href="#440ir" title='ir' data-ref="440ir" data-ref-filename="440ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>);</td></tr>
<tr><th id="288">288</th><td>  <b>if</b> (<a class="macro" href="lj_ir.h.html#470" title="((ir-&gt;op2) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col0 ref" href="#440ir" title='ir' data-ref="440ir" data-ref-filename="440ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>)) {</td></tr>
<tr><th id="289">289</th><td>    <a class="local col9 ref" href="#439as" title='as' data-ref="439as" data-ref-filename="439as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> += <a class="local col2 ref" href="#442irr" title='irr' data-ref="442irr" data-ref-filename="442irr">irr</a>-&gt;<a class="ref field" href="lj_ir.h.html#IRIns::i" title='IRIns::i' data-ref="IRIns::i" data-ref-filename="IRIns..i">i</a>;</td></tr>
<tr><th id="290">290</th><td>  } <b>else</b> {</td></tr>
<tr><th id="291">291</th><td>    <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col4 decl" id="444r" title='r' data-type='Reg' data-ref="444r" data-ref-filename="444r">r</dfn>;</td></tr>
<tr><th id="292">292</th><td>    <i>/* Fuse a constant add into the offset, e.g. string.sub(s, i+10). */</i></td></tr>
<tr><th id="293">293</th><td>    <b>if</b> (!<a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp;  <i>/* Has bad effects with negative index on x64. */</i></td></tr>
<tr><th id="294">294</th><td>	<a class="macro" href="lj_asm.c.html#120" title="((ir-&gt;op2) &gt; as-&gt;fuseref)" data-ref="_M/mayfuse">mayfuse</a>(<a class="local col9 ref" href="#439as" title='as' data-ref="439as" data-ref-filename="439as">as</a>, <a class="local col0 ref" href="#440ir" title='ir' data-ref="440ir" data-ref-filename="440ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>) &amp;&amp; <a class="local col2 ref" href="#442irr" title='irr' data-ref="442irr" data-ref-filename="442irr">irr</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_ADD' data-ref="IR_ADD" data-ref-filename="IR_ADD">IR_ADD</a> &amp;&amp; <a class="macro" href="lj_ir.h.html#470" title="((irr-&gt;op2) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col2 ref" href="#442irr" title='irr' data-ref="442irr" data-ref-filename="442irr">irr</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>)) {</td></tr>
<tr><th id="295">295</th><td>      <a class="local col9 ref" href="#439as" title='as' data-ref="439as" data-ref-filename="439as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> += <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(irr-&gt;op2)])" data-ref="_M/IR">IR</a>(<a class="local col2 ref" href="#442irr" title='irr' data-ref="442irr" data-ref-filename="442irr">irr</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>)-&gt;<a class="ref field" href="lj_ir.h.html#IRIns::i" title='IRIns::i' data-ref="IRIns::i" data-ref-filename="IRIns..i">i</a>;</td></tr>
<tr><th id="296">296</th><td>      <a class="local col4 ref" href="#444r" title='r' data-ref="444r" data-ref-filename="444r">r</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col9 ref" href="#439as" title='as' data-ref="439as" data-ref-filename="439as">as</a>, <a class="local col2 ref" href="#442irr" title='irr' data-ref="442irr" data-ref-filename="442irr">irr</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="local col1 ref" href="#441allow" title='allow' data-ref="441allow" data-ref-filename="441allow">allow</a>);</td></tr>
<tr><th id="297">297</th><td>    } <b>else</b> {</td></tr>
<tr><th id="298">298</th><td>      <a class="local col4 ref" href="#444r" title='r' data-ref="444r" data-ref-filename="444r">r</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col9 ref" href="#439as" title='as' data-ref="439as" data-ref-filename="439as">as</a>, <a class="local col0 ref" href="#440ir" title='ir' data-ref="440ir" data-ref-filename="440ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>, <a class="local col1 ref" href="#441allow" title='allow' data-ref="441allow" data-ref-filename="441allow">allow</a>);</td></tr>
<tr><th id="299">299</th><td>    }</td></tr>
<tr><th id="300">300</th><td>    <b>if</b> (<a class="local col9 ref" href="#439as" title='as' data-ref="439as" data-ref-filename="439as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> == <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a>)</td></tr>
<tr><th id="301">301</th><td>      <a class="local col9 ref" href="#439as" title='as' data-ref="439as" data-ref-filename="439as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a>)<a class="local col4 ref" href="#444r" title='r' data-ref="444r" data-ref-filename="444r">r</a>;</td></tr>
<tr><th id="302">302</th><td>    <b>else</b></td></tr>
<tr><th id="303">303</th><td>      <a class="local col9 ref" href="#439as" title='as' data-ref="439as" data-ref-filename="439as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::idx" title='(anonymous struct)::idx' data-ref="(anonymous)::idx" data-ref-filename="(anonymous)..idx">idx</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a>)<a class="local col4 ref" href="#444r" title='r' data-ref="444r" data-ref-filename="444r">r</a>;</td></tr>
<tr><th id="304">304</th><td>  }</td></tr>
<tr><th id="305">305</th><td>}</td></tr>
<tr><th id="306">306</th><td></td></tr>
<tr><th id="307">307</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_fusexref" title='asm_fusexref' data-ref="asm_fusexref" data-ref-filename="asm_fusexref">asm_fusexref</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col5 decl" id="445as" title='as' data-type='ASMState *' data-ref="445as" data-ref-filename="445as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col6 decl" id="446ref" title='ref' data-type='IRRef' data-ref="446ref" data-ref-filename="446ref">ref</dfn>, <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col7 decl" id="447allow" title='allow' data-type='RegSet' data-ref="447allow" data-ref-filename="447allow">allow</dfn>)</td></tr>
<tr><th id="308">308</th><td>{</td></tr>
<tr><th id="309">309</th><td>  <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col8 decl" id="448ir" title='ir' data-type='IRIns *' data-ref="448ir" data-ref-filename="448ir">ir</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ref)])" data-ref="_M/IR">IR</a>(<a class="local col6 ref" href="#446ref" title='ref' data-ref="446ref" data-ref-filename="446ref">ref</a>);</td></tr>
<tr><th id="310">310</th><td>  <a class="local col5 ref" href="#445as" title='as' data-ref="445as" data-ref-filename="445as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::idx" title='(anonymous struct)::idx' data-ref="(anonymous)::idx" data-ref-filename="(anonymous)..idx">idx</a> = <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a>;</td></tr>
<tr><th id="311">311</th><td>  <b>if</b> (<a class="local col8 ref" href="#448ir" title='ir' data-ref="448ir" data-ref-filename="448ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_KPTR' data-ref="IR_KPTR" data-ref-filename="IR_KPTR">IR_KPTR</a> || <a class="local col8 ref" href="#448ir" title='ir' data-ref="448ir" data-ref-filename="448ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_KKPTR' data-ref="IR_KKPTR" data-ref-filename="IR_KKPTR">IR_KKPTR</a>) {</td></tr>
<tr><th id="312">312</th><td><u>#<span data-ppcond="312">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="313">313</th><td>    <a class="typedef" href="../include/stdint.h.html#intptr_t" title='intptr_t' data-type='long' data-ref="intptr_t" data-ref-filename="intptr_t">intptr_t</a> <dfn class="local col9 decl" id="449ofs" title='ofs' data-type='intptr_t' data-ref="449ofs" data-ref-filename="449ofs">ofs</dfn> = <a class="macro" href="lj_emit_x86.h.html#295" title="((intptr_t)((uintptr_t)((((void *)(void *)((ir)[1].ptr).ptr64))) - (uintptr_t)((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;dispatch))" data-ref="_M/dispofs">dispofs</a>(<a class="local col5 ref" href="#445as" title='as' data-ref="445as" data-ref-filename="445as">as</a>, <a class="macro" href="lj_ir.h.html#579" title="(((void *)(void *)((ir)[1].ptr).ptr64))" data-ref="_M/ir_kptr">ir_kptr</a>(<a class="local col8 ref" href="#448ir" title='ir' data-ref="448ir" data-ref-filename="448ir">ir</a>));</td></tr>
<tr><th id="314">314</th><td>    <b>if</b> (<a class="macro" href="lj_def.h.html#105" title="((ofs) == (int32_t)(ofs))" data-ref="_M/checki32">checki32</a>(<a class="local col9 ref" href="#449ofs" title='ofs' data-ref="449ofs" data-ref-filename="449ofs">ofs</a>)) {</td></tr>
<tr><th id="315">315</th><td>      <a class="local col5 ref" href="#445as" title='as' data-ref="445as" data-ref-filename="445as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<a class="local col9 ref" href="#449ofs" title='ofs' data-ref="449ofs" data-ref-filename="449ofs">ofs</a>;</td></tr>
<tr><th id="316">316</th><td>      <a class="local col5 ref" href="#445as" title='as' data-ref="445as" data-ref-filename="445as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> = <a class="enum" href="lj_target_x86.h.html#RID_DISPATCH" title='RID_DISPATCH' data-ref="RID_DISPATCH" data-ref-filename="RID_DISPATCH">RID_DISPATCH</a>;</td></tr>
<tr><th id="317">317</th><td>      <b>return</b>;</td></tr>
<tr><th id="318">318</th><td>    }</td></tr>
<tr><th id="319">319</th><td>  } <b>if</b> (<var>0</var>) {</td></tr>
<tr><th id="320">320</th><td><u>#<span data-ppcond="312">else</span></u></td></tr>
<tr><th id="321">321</th><td>    as-&gt;mrm.ofs = ir-&gt;i;</td></tr>
<tr><th id="322">322</th><td>    as-&gt;mrm.base = RID_NONE;</td></tr>
<tr><th id="323">323</th><td>  } <b>else</b> <b>if</b> (ir-&gt;o == IR_STRREF) {</td></tr>
<tr><th id="324">324</th><td>    asm_fusestrref(as, ir, allow);</td></tr>
<tr><th id="325">325</th><td><u>#<span data-ppcond="312">endif</span></u></td></tr>
<tr><th id="326">326</th><td>  } <b>else</b> {</td></tr>
<tr><th id="327">327</th><td>    <a class="local col5 ref" href="#445as" title='as' data-ref="445as" data-ref-filename="445as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> = <var>0</var>;</td></tr>
<tr><th id="328">328</th><td>    <b>if</b> (<a class="macro" href="lj_asm.c.html#122" title="(!(as-&gt;fuseref == (~(IRRef)0)) &amp;&amp; !(((ir)-&gt;t).irt &amp; IRT_ISPHI))" data-ref="_M/canfuse">canfuse</a>(<a class="local col5 ref" href="#445as" title='as' data-ref="445as" data-ref-filename="445as">as</a>, <a class="local col8 ref" href="#448ir" title='ir' data-ref="448ir" data-ref-filename="448ir">ir</a>) &amp;&amp; <a class="local col8 ref" href="#448ir" title='ir' data-ref="448ir" data-ref-filename="448ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_ADD' data-ref="IR_ADD" data-ref-filename="IR_ADD">IR_ADD</a> &amp;&amp; <a class="macro" href="lj_target.h.html#27" title="((ir-&gt;r) &amp; 0x80)" data-ref="_M/ra_noreg">ra_noreg</a>(<a class="local col8 ref" href="#448ir" title='ir' data-ref="448ir" data-ref-filename="448ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>)) {</td></tr>
<tr><th id="329">329</th><td>      <i>/* Gather (base+idx*sz)+ofs as emitted by cdata ptr/array indexing. */</i></td></tr>
<tr><th id="330">330</th><td>      <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col0 decl" id="450irx" title='irx' data-type='IRIns *' data-ref="450irx" data-ref-filename="450irx">irx</dfn>;</td></tr>
<tr><th id="331">331</th><td>      <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col1 decl" id="451idx" title='idx' data-type='IRRef' data-ref="451idx" data-ref-filename="451idx">idx</dfn>;</td></tr>
<tr><th id="332">332</th><td>      <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col2 decl" id="452r" title='r' data-type='Reg' data-ref="452r" data-ref-filename="452r">r</dfn>;</td></tr>
<tr><th id="333">333</th><td>      <b>if</b> (<a class="ref fn" href="#asm_isk32" title='asm_isk32' data-ref="asm_isk32" data-ref-filename="asm_isk32">asm_isk32</a>(<a class="local col5 ref" href="#445as" title='as' data-ref="445as" data-ref-filename="445as">as</a>, <a class="local col8 ref" href="#448ir" title='ir' data-ref="448ir" data-ref-filename="448ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>, &amp;<a class="local col5 ref" href="#445as" title='as' data-ref="445as" data-ref-filename="445as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a>)) {  <i>/* Recognize x+ofs. */</i></td></tr>
<tr><th id="334">334</th><td>	<a class="local col6 ref" href="#446ref" title='ref' data-ref="446ref" data-ref-filename="446ref">ref</a> = <a class="local col8 ref" href="#448ir" title='ir' data-ref="448ir" data-ref-filename="448ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>;</td></tr>
<tr><th id="335">335</th><td>	<a class="local col8 ref" href="#448ir" title='ir' data-ref="448ir" data-ref-filename="448ir">ir</a> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ref)])" data-ref="_M/IR">IR</a>(<a class="local col6 ref" href="#446ref" title='ref' data-ref="446ref" data-ref-filename="446ref">ref</a>);</td></tr>
<tr><th id="336">336</th><td>	<b>if</b> (!(<a class="local col8 ref" href="#448ir" title='ir' data-ref="448ir" data-ref-filename="448ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_ADD' data-ref="IR_ADD" data-ref-filename="IR_ADD">IR_ADD</a> &amp;&amp; <a class="macro" href="lj_asm.c.html#122" title="(!(as-&gt;fuseref == (~(IRRef)0)) &amp;&amp; !(((ir)-&gt;t).irt &amp; IRT_ISPHI))" data-ref="_M/canfuse">canfuse</a>(<a class="local col5 ref" href="#445as" title='as' data-ref="445as" data-ref-filename="445as">as</a>, <a class="local col8 ref" href="#448ir" title='ir' data-ref="448ir" data-ref-filename="448ir">ir</a>) &amp;&amp; <a class="macro" href="lj_target.h.html#27" title="((ir-&gt;r) &amp; 0x80)" data-ref="_M/ra_noreg">ra_noreg</a>(<a class="local col8 ref" href="#448ir" title='ir' data-ref="448ir" data-ref-filename="448ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>)))</td></tr>
<tr><th id="337">337</th><td>	  <b>goto</b> <a class="lbl" href="#453noadd" data-ref="453noadd" data-ref-filename="453noadd">noadd</a>;</td></tr>
<tr><th id="338">338</th><td>      }</td></tr>
<tr><th id="339">339</th><td>      <a class="local col5 ref" href="#445as" title='as' data-ref="445as" data-ref-filename="445as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::scale" title='(anonymous struct)::scale' data-ref="(anonymous)::scale" data-ref-filename="(anonymous)..scale">scale</a> = <a class="enum" href="lj_target_x86.h.html#XM_SCALE1" title='XM_SCALE1' data-ref="XM_SCALE1" data-ref-filename="XM_SCALE1">XM_SCALE1</a>;</td></tr>
<tr><th id="340">340</th><td>      <a class="local col1 ref" href="#451idx" title='idx' data-ref="451idx" data-ref-filename="451idx">idx</a> = <a class="local col8 ref" href="#448ir" title='ir' data-ref="448ir" data-ref-filename="448ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>;</td></tr>
<tr><th id="341">341</th><td>      <a class="local col6 ref" href="#446ref" title='ref' data-ref="446ref" data-ref-filename="446ref">ref</a> = <a class="local col8 ref" href="#448ir" title='ir' data-ref="448ir" data-ref-filename="448ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>;</td></tr>
<tr><th id="342">342</th><td>      <a class="local col0 ref" href="#450irx" title='irx' data-ref="450irx" data-ref-filename="450irx">irx</a> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(idx)])" data-ref="_M/IR">IR</a>(<a class="local col1 ref" href="#451idx" title='idx' data-ref="451idx" data-ref-filename="451idx">idx</a>);</td></tr>
<tr><th id="343">343</th><td>      <b>if</b> (!(<a class="local col0 ref" href="#450irx" title='irx' data-ref="450irx" data-ref-filename="450irx">irx</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_BSHL' data-ref="IR_BSHL" data-ref-filename="IR_BSHL">IR_BSHL</a> || <a class="local col0 ref" href="#450irx" title='irx' data-ref="450irx" data-ref-filename="450irx">irx</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_ADD' data-ref="IR_ADD" data-ref-filename="IR_ADD">IR_ADD</a>)) {  <i>/* Try other operand. */</i></td></tr>
<tr><th id="344">344</th><td>	<a class="local col1 ref" href="#451idx" title='idx' data-ref="451idx" data-ref-filename="451idx">idx</a> = <a class="local col8 ref" href="#448ir" title='ir' data-ref="448ir" data-ref-filename="448ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>;</td></tr>
<tr><th id="345">345</th><td>	<a class="local col6 ref" href="#446ref" title='ref' data-ref="446ref" data-ref-filename="446ref">ref</a> = <a class="local col8 ref" href="#448ir" title='ir' data-ref="448ir" data-ref-filename="448ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>;</td></tr>
<tr><th id="346">346</th><td>	<a class="local col0 ref" href="#450irx" title='irx' data-ref="450irx" data-ref-filename="450irx">irx</a> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(idx)])" data-ref="_M/IR">IR</a>(<a class="local col1 ref" href="#451idx" title='idx' data-ref="451idx" data-ref-filename="451idx">idx</a>);</td></tr>
<tr><th id="347">347</th><td>      }</td></tr>
<tr><th id="348">348</th><td>      <b>if</b> (<a class="macro" href="lj_asm.c.html#122" title="(!(as-&gt;fuseref == (~(IRRef)0)) &amp;&amp; !(((irx)-&gt;t).irt &amp; IRT_ISPHI))" data-ref="_M/canfuse">canfuse</a>(<a class="local col5 ref" href="#445as" title='as' data-ref="445as" data-ref-filename="445as">as</a>, <a class="local col0 ref" href="#450irx" title='irx' data-ref="450irx" data-ref-filename="450irx">irx</a>) &amp;&amp; <a class="macro" href="lj_target.h.html#27" title="((irx-&gt;r) &amp; 0x80)" data-ref="_M/ra_noreg">ra_noreg</a>(<a class="local col0 ref" href="#450irx" title='irx' data-ref="450irx" data-ref-filename="450irx">irx</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>)) {</td></tr>
<tr><th id="349">349</th><td>	<b>if</b> (<a class="local col0 ref" href="#450irx" title='irx' data-ref="450irx" data-ref-filename="450irx">irx</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_BSHL' data-ref="IR_BSHL" data-ref-filename="IR_BSHL">IR_BSHL</a> &amp;&amp; <a class="macro" href="lj_ir.h.html#470" title="((irx-&gt;op2) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col0 ref" href="#450irx" title='irx' data-ref="450irx" data-ref-filename="450irx">irx</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>) &amp;&amp; <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(irx-&gt;op2)])" data-ref="_M/IR">IR</a>(<a class="local col0 ref" href="#450irx" title='irx' data-ref="450irx" data-ref-filename="450irx">irx</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>)-&gt;<a class="ref field" href="lj_ir.h.html#IRIns::i" title='IRIns::i' data-ref="IRIns::i" data-ref-filename="IRIns..i">i</a> &lt;= <var>3</var>) {</td></tr>
<tr><th id="350">350</th><td>	  <i>/* Recognize idx&lt;&lt;b with b = 0-3, corresponding to sz = (1),2,4,8. */</i></td></tr>
<tr><th id="351">351</th><td>	  <a class="local col1 ref" href="#451idx" title='idx' data-ref="451idx" data-ref-filename="451idx">idx</a> = <a class="local col0 ref" href="#450irx" title='irx' data-ref="450irx" data-ref-filename="450irx">irx</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>;</td></tr>
<tr><th id="352">352</th><td>	  <a class="local col5 ref" href="#445as" title='as' data-ref="445as" data-ref-filename="445as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::scale" title='(anonymous struct)::scale' data-ref="(anonymous)::scale" data-ref-filename="(anonymous)..scale">scale</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a>)(<a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(irx-&gt;op2)])" data-ref="_M/IR">IR</a>(<a class="local col0 ref" href="#450irx" title='irx' data-ref="450irx" data-ref-filename="450irx">irx</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>)-&gt;<a class="ref field" href="lj_ir.h.html#IRIns::i" title='IRIns::i' data-ref="IRIns::i" data-ref-filename="IRIns..i">i</a> &lt;&lt; <var>6</var>);</td></tr>
<tr><th id="353">353</th><td>	} <b>else</b> <b>if</b> (<a class="local col0 ref" href="#450irx" title='irx' data-ref="450irx" data-ref-filename="450irx">irx</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_ADD' data-ref="IR_ADD" data-ref-filename="IR_ADD">IR_ADD</a> &amp;&amp; <a class="local col0 ref" href="#450irx" title='irx' data-ref="450irx" data-ref-filename="450irx">irx</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a> == <a class="local col0 ref" href="#450irx" title='irx' data-ref="450irx" data-ref-filename="450irx">irx</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>) {</td></tr>
<tr><th id="354">354</th><td>	  <i>/* FOLD does idx*2 ==&gt; idx&lt;&lt;1 ==&gt; idx+idx. */</i></td></tr>
<tr><th id="355">355</th><td>	  <a class="local col1 ref" href="#451idx" title='idx' data-ref="451idx" data-ref-filename="451idx">idx</a> = <a class="local col0 ref" href="#450irx" title='irx' data-ref="450irx" data-ref-filename="450irx">irx</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>;</td></tr>
<tr><th id="356">356</th><td>	  <a class="local col5 ref" href="#445as" title='as' data-ref="445as" data-ref-filename="445as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::scale" title='(anonymous struct)::scale' data-ref="(anonymous)::scale" data-ref-filename="(anonymous)..scale">scale</a> = <a class="enum" href="lj_target_x86.h.html#XM_SCALE2" title='XM_SCALE2' data-ref="XM_SCALE2" data-ref-filename="XM_SCALE2">XM_SCALE2</a>;</td></tr>
<tr><th id="357">357</th><td>	}</td></tr>
<tr><th id="358">358</th><td>      }</td></tr>
<tr><th id="359">359</th><td>      <a class="local col2 ref" href="#452r" title='r' data-ref="452r" data-ref-filename="452r">r</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col5 ref" href="#445as" title='as' data-ref="445as" data-ref-filename="445as">as</a>, <a class="local col1 ref" href="#451idx" title='idx' data-ref="451idx" data-ref-filename="451idx">idx</a>, <a class="local col7 ref" href="#447allow" title='allow' data-ref="447allow" data-ref-filename="447allow">allow</a>);</td></tr>
<tr><th id="360">360</th><td>      <a class="macro" href="lj_target.h.html#70" title="(allow &amp;= ~(((RegSet)1) &lt;&lt; (r)))" data-ref="_M/rset_clear">rset_clear</a>(<a class="local col7 ref" href="#447allow" title='allow' data-ref="447allow" data-ref-filename="447allow">allow</a>, <a class="local col2 ref" href="#452r" title='r' data-ref="452r" data-ref-filename="452r">r</a>);</td></tr>
<tr><th id="361">361</th><td>      <a class="local col5 ref" href="#445as" title='as' data-ref="445as" data-ref-filename="445as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::idx" title='(anonymous struct)::idx' data-ref="(anonymous)::idx" data-ref-filename="(anonymous)..idx">idx</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a>)<a class="local col2 ref" href="#452r" title='r' data-ref="452r" data-ref-filename="452r">r</a>;</td></tr>
<tr><th id="362">362</th><td>    }</td></tr>
<tr><th id="363">363</th><td>  <dfn class="lbl" id="453noadd" data-ref="453noadd" data-ref-filename="453noadd">noadd</dfn>:</td></tr>
<tr><th id="364">364</th><td>    <a class="local col5 ref" href="#445as" title='as' data-ref="445as" data-ref-filename="445as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a>)<a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col5 ref" href="#445as" title='as' data-ref="445as" data-ref-filename="445as">as</a>, <a class="local col6 ref" href="#446ref" title='ref' data-ref="446ref" data-ref-filename="446ref">ref</a>, <a class="local col7 ref" href="#447allow" title='allow' data-ref="447allow" data-ref-filename="447allow">allow</a>);</td></tr>
<tr><th id="365">365</th><td>  }</td></tr>
<tr><th id="366">366</th><td>}</td></tr>
<tr><th id="367">367</th><td></td></tr>
<tr><th id="368">368</th><td><i>/* Fuse load of 64 bit IR constant into memory operand. */</i></td></tr>
<tr><th id="369">369</th><td><em>static</em> <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="decl def fn" id="asm_fuseloadk64" title='asm_fuseloadk64' data-ref="asm_fuseloadk64" data-ref-filename="asm_fuseloadk64">asm_fuseloadk64</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col4 decl" id="454as" title='as' data-type='ASMState *' data-ref="454as" data-ref-filename="454as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col5 decl" id="455ir" title='ir' data-type='IRIns *' data-ref="455ir" data-ref-filename="455ir">ir</dfn>)</td></tr>
<tr><th id="370">370</th><td>{</td></tr>
<tr><th id="371">371</th><td>  <em>const</em> <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> *<dfn class="local col6 decl" id="456k" title='k' data-type='const uint64_t *' data-ref="456k" data-ref-filename="456k">k</dfn> = &amp;<a class="macro" href="lj_ir.h.html#578" title="(&amp;(ir)[1].tv)" data-ref="_M/ir_k64">ir_k64</a>(<a class="local col5 ref" href="#455ir" title='ir' data-ref="455ir" data-ref-filename="455ir">ir</a>)-&gt;<a class="ref field" href="lj_obj.h.html#TValue::u64" title='TValue::u64' data-ref="TValue::u64" data-ref-filename="TValue..u64">u64</a>;</td></tr>
<tr><th id="372">372</th><td>  <b>if</b> (!<a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a> || <a class="macro" href="lj_def.h.html#105" title="(((intptr_t)k) == (int32_t)((intptr_t)k))" data-ref="_M/checki32">checki32</a>((<a class="typedef" href="../include/stdint.h.html#intptr_t" title='intptr_t' data-type='long' data-ref="intptr_t" data-ref-filename="intptr_t">intptr_t</a>)<a class="local col6 ref" href="#456k" title='k' data-ref="456k" data-ref-filename="456k">k</a>)) {</td></tr>
<tr><th id="373">373</th><td>    <a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> = <a class="macro" href="lj_emit_x86.h.html#99" title="(((int32_t)(intptr_t)(void *)((k))))" data-ref="_M/ptr2addr">ptr2addr</a>(<a class="local col6 ref" href="#456k" title='k' data-ref="456k" data-ref-filename="456k">k</a>);</td></tr>
<tr><th id="374">374</th><td>    <a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> = <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a>;</td></tr>
<tr><th id="375">375</th><td><u>#<span data-ppcond="375">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="376">376</th><td>  } <b>else</b> <b>if</b> (<a class="macro" href="lj_def.h.html#105" title="((((intptr_t)((uintptr_t)(k) - (uintptr_t)((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;dispatch))) == (int32_t)(((intptr_t)((uintptr_t)(k) - (uintptr_t)((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;dispatch))))" data-ref="_M/checki32">checki32</a>(<a class="macro" href="lj_emit_x86.h.html#295" title="((intptr_t)((uintptr_t)(k) - (uintptr_t)((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;dispatch))" data-ref="_M/dispofs">dispofs</a>(<a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>, <a class="local col6 ref" href="#456k" title='k' data-ref="456k" data-ref-filename="456k">k</a>))) {</td></tr>
<tr><th id="377">377</th><td>    <a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<a class="macro" href="lj_emit_x86.h.html#295" title="((intptr_t)((uintptr_t)(k) - (uintptr_t)((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;dispatch))" data-ref="_M/dispofs">dispofs</a>(<a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>, <a class="local col6 ref" href="#456k" title='k' data-ref="456k" data-ref-filename="456k">k</a>);</td></tr>
<tr><th id="378">378</th><td>    <a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> = <a class="enum" href="lj_target_x86.h.html#RID_DISPATCH" title='RID_DISPATCH' data-ref="RID_DISPATCH" data-ref-filename="RID_DISPATCH">RID_DISPATCH</a>;</td></tr>
<tr><th id="379">379</th><td>  } <b>else</b> <b>if</b> (<a class="macro" href="lj_def.h.html#105" title="((((intptr_t)((uintptr_t)(k) - (uintptr_t)as-&gt;mcp))) == (int32_t)(((intptr_t)((uintptr_t)(k) - (uintptr_t)as-&gt;mcp))))" data-ref="_M/checki32">checki32</a>(<a class="macro" href="lj_emit_x86.h.html#297" title="((intptr_t)((uintptr_t)(k) - (uintptr_t)as-&gt;mcp))" data-ref="_M/mcpofs">mcpofs</a>(<a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>, <a class="local col6 ref" href="#456k" title='k' data-ref="456k" data-ref-filename="456k">k</a>)) &amp;&amp; <a class="macro" href="lj_def.h.html#105" title="((((intptr_t)((uintptr_t)(k+1) - (uintptr_t)as-&gt;mcp))) == (int32_t)(((intptr_t)((uintptr_t)(k+1) - (uintptr_t)as-&gt;mcp))))" data-ref="_M/checki32">checki32</a>(<a class="macro" href="lj_emit_x86.h.html#297" title="((intptr_t)((uintptr_t)(k+1) - (uintptr_t)as-&gt;mcp))" data-ref="_M/mcpofs">mcpofs</a>(<a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>, <a class="local col6 ref" href="#456k" title='k' data-ref="456k" data-ref-filename="456k">k</a>+<var>1</var>)) &amp;&amp;</td></tr>
<tr><th id="380">380</th><td>	     <a class="macro" href="lj_def.h.html#105" title="((((intptr_t)((uintptr_t)(k) - (uintptr_t)as-&gt;mctop))) == (int32_t)(((intptr_t)((uintptr_t)(k) - (uintptr_t)as-&gt;mctop))))" data-ref="_M/checki32">checki32</a>(<a class="macro" href="lj_emit_x86.h.html#299" title="((intptr_t)((uintptr_t)(k) - (uintptr_t)as-&gt;mctop))" data-ref="_M/mctopofs">mctopofs</a>(<a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>, <a class="local col6 ref" href="#456k" title='k' data-ref="456k" data-ref-filename="456k">k</a>)) &amp;&amp; <a class="macro" href="lj_def.h.html#105" title="((((intptr_t)((uintptr_t)(k+1) - (uintptr_t)as-&gt;mctop))) == (int32_t)(((intptr_t)((uintptr_t)(k+1) - (uintptr_t)as-&gt;mctop))))" data-ref="_M/checki32">checki32</a>(<a class="macro" href="lj_emit_x86.h.html#299" title="((intptr_t)((uintptr_t)(k+1) - (uintptr_t)as-&gt;mctop))" data-ref="_M/mctopofs">mctopofs</a>(<a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>, <a class="local col6 ref" href="#456k" title='k' data-ref="456k" data-ref-filename="456k">k</a>+<var>1</var>))) {</td></tr>
<tr><th id="381">381</th><td>    <a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<a class="macro" href="lj_emit_x86.h.html#297" title="((intptr_t)((uintptr_t)(k) - (uintptr_t)as-&gt;mcp))" data-ref="_M/mcpofs">mcpofs</a>(<a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>, <a class="local col6 ref" href="#456k" title='k' data-ref="456k" data-ref-filename="456k">k</a>);</td></tr>
<tr><th id="382">382</th><td>    <a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> = <a class="enum" href="lj_target_x86.h.html#RID_RIP" title='RID_RIP' data-ref="RID_RIP" data-ref-filename="RID_RIP">RID_RIP</a>;</td></tr>
<tr><th id="383">383</th><td>  } <b>else</b> {  <i>/* Intern 64 bit constant at bottom of mcode. */</i></td></tr>
<tr><th id="384">384</th><td>    <b>if</b> (<a class="local col5 ref" href="#455ir" title='ir' data-ref="455ir" data-ref-filename="455ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#IRIns::i" title='IRIns::i' data-ref="IRIns::i" data-ref-filename="IRIns..i">i</a>) {</td></tr>
<tr><th id="385">385</th><td>      <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(*k == *(uint64_t*)(as-&gt;mctop - ir-&gt;i),</td></tr>
<tr><th id="386">386</th><td>		 <q>"bad interned 64 bit constant"</q>);</td></tr>
<tr><th id="387">387</th><td>    } <b>else</b> {</td></tr>
<tr><th id="388">388</th><td>      <b>while</b> ((<a class="typedef" href="../include/stdint.h.html#uintptr_t" title='uintptr_t' data-type='unsigned long' data-ref="uintptr_t" data-ref-filename="uintptr_t">uintptr_t</a>)<a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcbot" title='ASMState::mcbot' data-use='r' data-ref="ASMState::mcbot" data-ref-filename="ASMState..mcbot">mcbot</a> &amp; <var>7</var>) *<a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcbot" title='ASMState::mcbot' data-use='w' data-ref="ASMState::mcbot" data-ref-filename="ASMState..mcbot">mcbot</a>++ = <a class="enum" href="lj_target_x86.h.html#XI_INT3" title='XI_INT3' data-ref="XI_INT3" data-ref-filename="XI_INT3">XI_INT3</a>;</td></tr>
<tr><th id="389">389</th><td>      *(<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a>*)<a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcbot" title='ASMState::mcbot' data-use='r' data-ref="ASMState::mcbot" data-ref-filename="ASMState..mcbot">mcbot</a> = *<a class="local col6 ref" href="#456k" title='k' data-ref="456k" data-ref-filename="456k">k</a>;</td></tr>
<tr><th id="390">390</th><td>      <a class="local col5 ref" href="#455ir" title='ir' data-ref="455ir" data-ref-filename="455ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#IRIns::i" title='IRIns::i' data-ref="IRIns::i" data-ref-filename="IRIns..i">i</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)(<a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mctop" title='ASMState::mctop' data-use='r' data-ref="ASMState::mctop" data-ref-filename="ASMState..mctop">mctop</a> - <a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcbot" title='ASMState::mcbot' data-use='r' data-ref="ASMState::mcbot" data-ref-filename="ASMState..mcbot">mcbot</a>);</td></tr>
<tr><th id="391">391</th><td>      <a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcbot" title='ASMState::mcbot' data-use='w' data-ref="ASMState::mcbot" data-ref-filename="ASMState..mcbot">mcbot</a> += <var>8</var>;</td></tr>
<tr><th id="392">392</th><td>      <a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mclim" title='ASMState::mclim' data-use='w' data-ref="ASMState::mclim" data-ref-filename="ASMState..mclim">mclim</a> = <a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcbot" title='ASMState::mcbot' data-use='r' data-ref="ASMState::mcbot" data-ref-filename="ASMState..mcbot">mcbot</a> + <a class="macro" href="lj_asm.c.html#128" title="64" data-ref="_M/MCLIM_REDZONE">MCLIM_REDZONE</a>;</td></tr>
<tr><th id="393">393</th><td>      <a class="macro" href="lj_mcode.h.html#26" title="(as-&gt;J-&gt;mcbot = (as-&gt;mcbot))" data-ref="_M/lj_mcode_commitbot">lj_mcode_commitbot</a>(<a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>, <a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcbot" title='ASMState::mcbot' data-use='r' data-ref="ASMState::mcbot" data-ref-filename="ASMState..mcbot">mcbot</a>);</td></tr>
<tr><th id="394">394</th><td>    }</td></tr>
<tr><th id="395">395</th><td>    <a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<a class="macro" href="lj_emit_x86.h.html#297" title="((intptr_t)((uintptr_t)(as-&gt;mctop - ir-&gt;i) - (uintptr_t)as-&gt;mcp))" data-ref="_M/mcpofs">mcpofs</a>(<a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>, <a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mctop" title='ASMState::mctop' data-use='r' data-ref="ASMState::mctop" data-ref-filename="ASMState..mctop">mctop</a> - <a class="local col5 ref" href="#455ir" title='ir' data-ref="455ir" data-ref-filename="455ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#IRIns::i" title='IRIns::i' data-ref="IRIns::i" data-ref-filename="IRIns..i">i</a>);</td></tr>
<tr><th id="396">396</th><td>    <a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> = <a class="enum" href="lj_target_x86.h.html#RID_RIP" title='RID_RIP' data-ref="RID_RIP" data-ref-filename="RID_RIP">RID_RIP</a>;</td></tr>
<tr><th id="397">397</th><td><u>#<span data-ppcond="375">endif</span></u></td></tr>
<tr><th id="398">398</th><td>  }</td></tr>
<tr><th id="399">399</th><td>  <a class="local col4 ref" href="#454as" title='as' data-ref="454as" data-ref-filename="454as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::idx" title='(anonymous struct)::idx' data-ref="(anonymous)::idx" data-ref-filename="(anonymous)..idx">idx</a> = <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a>;</td></tr>
<tr><th id="400">400</th><td>  <b>return</b> <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>;</td></tr>
<tr><th id="401">401</th><td>}</td></tr>
<tr><th id="402">402</th><td></td></tr>
<tr><th id="403">403</th><td><i>/* Fuse load into memory operand.</i></td></tr>
<tr><th id="404">404</th><td><i>**</i></td></tr>
<tr><th id="405">405</th><td><i>** Important caveat: this may emit RIP-relative loads! So don't place any</i></td></tr>
<tr><th id="406">406</th><td><i>** code emitters between this function and the use of its result.</i></td></tr>
<tr><th id="407">407</th><td><i>** The only permitted exception is asm_guardcc().</i></td></tr>
<tr><th id="408">408</th><td><i>*/</i></td></tr>
<tr><th id="409">409</th><td><em>static</em> <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="decl def fn" id="asm_fuseload" title='asm_fuseload' data-ref="asm_fuseload" data-ref-filename="asm_fuseload">asm_fuseload</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col7 decl" id="457as" title='as' data-type='ASMState *' data-ref="457as" data-ref-filename="457as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col8 decl" id="458ref" title='ref' data-type='IRRef' data-ref="458ref" data-ref-filename="458ref">ref</dfn>, <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col9 decl" id="459allow" title='allow' data-type='RegSet' data-ref="459allow" data-ref-filename="459allow">allow</dfn>)</td></tr>
<tr><th id="410">410</th><td>{</td></tr>
<tr><th id="411">411</th><td>  <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col0 decl" id="460ir" title='ir' data-type='IRIns *' data-ref="460ir" data-ref-filename="460ir">ir</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ref)])" data-ref="_M/IR">IR</a>(<a class="local col8 ref" href="#458ref" title='ref' data-ref="458ref" data-ref-filename="458ref">ref</a>);</td></tr>
<tr><th id="412">412</th><td>  <b>if</b> (<a class="macro" href="lj_target.h.html#28" title="(!((ir-&gt;r) &amp; 0x80))" data-ref="_M/ra_hasreg">ra_hasreg</a>(<a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>)) {</td></tr>
<tr><th id="413">413</th><td>    <b>if</b> (<a class="local col9 ref" href="#459allow" title='allow' data-ref="459allow" data-ref-filename="459allow">allow</a> != <a class="macro" href="lj_target.h.html#65" title="((RegSet)0)" data-ref="_M/RSET_EMPTY">RSET_EMPTY</a>) {  <i>/* Fast path. */</i></td></tr>
<tr><th id="414">414</th><td>      <a class="macro" href="lj_asm.c.html#307" title="(as-&gt;weakset &amp;= ~(((RegSet)1) &lt;&lt; ((ir-&gt;r))))" data-ref="_M/ra_noweak">ra_noweak</a>(<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>, <a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>);</td></tr>
<tr><th id="415">415</th><td>      <b>return</b> <a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>;</td></tr>
<tr><th id="416">416</th><td>    }</td></tr>
<tr><th id="417">417</th><td>  <dfn class="lbl" id="461fusespill" data-ref="461fusespill" data-ref-filename="461fusespill">fusespill</dfn>:</td></tr>
<tr><th id="418">418</th><td>    <i>/* Force a spill if only memory operands are allowed (asm_x87load). */</i></td></tr>
<tr><th id="419">419</th><td>    <a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> = <a class="enum" href="lj_target_x86.h.html#30" title='RID_ESP' data-ref="RID_ESP" data-ref-filename="RID_ESP">RID_ESP</a>;</td></tr>
<tr><th id="420">420</th><td>    <a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_spill" title='ra_spill' data-use='c' data-ref="ra_spill" data-ref-filename="ra_spill">ra_spill</a>(<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>, <a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>);</td></tr>
<tr><th id="421">421</th><td>    <a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::idx" title='(anonymous struct)::idx' data-ref="(anonymous)::idx" data-ref-filename="(anonymous)..idx">idx</a> = <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a>;</td></tr>
<tr><th id="422">422</th><td>    <b>return</b> <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>;</td></tr>
<tr><th id="423">423</th><td>  }</td></tr>
<tr><th id="424">424</th><td>  <b>if</b> (<a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_KNUM' data-ref="IR_KNUM" data-ref-filename="IR_KNUM">IR_KNUM</a>) {</td></tr>
<tr><th id="425">425</th><td>    <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col2 decl" id="462avail" title='avail' data-type='RegSet' data-ref="462avail" data-ref-filename="462avail">avail</dfn> = <a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::freeset" title='ASMState::freeset' data-use='r' data-ref="ASMState::freeset" data-ref-filename="ASMState..freeset">freeset</a> &amp; ~<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::modset" title='ASMState::modset' data-use='r' data-ref="ASMState::modset" data-ref-filename="ASMState..modset">modset</a> &amp; <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>;</td></tr>
<tr><th id="426">426</th><td>    <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(allow != RSET_EMPTY, <q>"no register allowed"</q>);</td></tr>
<tr><th id="427">427</th><td>    <b>if</b> (!(<a class="local col2 ref" href="#462avail" title='avail' data-ref="462avail" data-ref-filename="462avail">avail</a> &amp; (<a class="local col2 ref" href="#462avail" title='avail' data-ref="462avail" data-ref-filename="462avail">avail</a>-<var>1</var>)))  <i>/* Fuse if less than two regs available. */</i></td></tr>
<tr><th id="428">428</th><td>      <b>return</b> <a class="ref fn" href="#asm_fuseloadk64" title='asm_fuseloadk64' data-ref="asm_fuseloadk64" data-ref-filename="asm_fuseloadk64">asm_fuseloadk64</a>(<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>, <a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>);</td></tr>
<tr><th id="429">429</th><td>  } <b>else</b> <b>if</b> (<a class="local col8 ref" href="#458ref" title='ref' data-ref="458ref" data-ref-filename="458ref">ref</a> == <a class="enum" href="lj_ir.h.html#REF_BASE" title='REF_BASE' data-ref="REF_BASE" data-ref-filename="REF_BASE">REF_BASE</a> || <a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_KINT64' data-ref="IR_KINT64" data-ref-filename="IR_KINT64">IR_KINT64</a>) {</td></tr>
<tr><th id="430">430</th><td>    <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col3 decl" id="463avail" title='avail' data-type='RegSet' data-ref="463avail" data-ref-filename="463avail">avail</dfn> = <a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::freeset" title='ASMState::freeset' data-use='r' data-ref="ASMState::freeset" data-ref-filename="ASMState..freeset">freeset</a> &amp; ~<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::modset" title='ASMState::modset' data-use='r' data-ref="ASMState::modset" data-ref-filename="ASMState..modset">modset</a> &amp; <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>;</td></tr>
<tr><th id="431">431</th><td>    <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(allow != RSET_EMPTY, <q>"no register allowed"</q>);</td></tr>
<tr><th id="432">432</th><td>    <b>if</b> (!(<a class="local col3 ref" href="#463avail" title='avail' data-ref="463avail" data-ref-filename="463avail">avail</a> &amp; (<a class="local col3 ref" href="#463avail" title='avail' data-ref="463avail" data-ref-filename="463avail">avail</a>-<var>1</var>))) {  <i>/* Fuse if less than two regs available. */</i></td></tr>
<tr><th id="433">433</th><td>      <b>if</b> (<a class="local col8 ref" href="#458ref" title='ref' data-ref="458ref" data-ref-filename="458ref">ref</a> == <a class="enum" href="lj_ir.h.html#REF_BASE" title='REF_BASE' data-ref="REF_BASE" data-ref-filename="REF_BASE">REF_BASE</a>) {</td></tr>
<tr><th id="434">434</th><td><u>#<span data-ppcond="434">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="435">435</th><td>	<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<a class="macro" href="lj_emit_x86.h.html#295" title="((intptr_t)((uintptr_t)(&amp;(&amp;((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;g)-&gt;jit_base) - (uintptr_t)((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;dispatch))" data-ref="_M/dispofs">dispofs</a>(<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>, &amp;<a class="macro" href="lj_dispatch.h.html#115" title="(&amp;((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;g)" data-ref="_M/J2G">J2G</a>(<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>)-&gt;<a class="ref field" href="lj_obj.h.html#global_State::jit_base" title='global_State::jit_base' data-ref="global_State::jit_base" data-ref-filename="global_State..jit_base">jit_base</a>);</td></tr>
<tr><th id="436">436</th><td>	<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> = <a class="enum" href="lj_target_x86.h.html#RID_DISPATCH" title='RID_DISPATCH' data-ref="RID_DISPATCH" data-ref-filename="RID_DISPATCH">RID_DISPATCH</a>;</td></tr>
<tr><th id="437">437</th><td><u>#<span data-ppcond="434">else</span></u></td></tr>
<tr><th id="438">438</th><td>	as-&gt;mrm.ofs = ptr2addr(&amp;J2G(as-&gt;J)-&gt;jit_base);</td></tr>
<tr><th id="439">439</th><td>	as-&gt;mrm.base = RID_NONE;</td></tr>
<tr><th id="440">440</th><td><u>#<span data-ppcond="434">endif</span></u></td></tr>
<tr><th id="441">441</th><td>	<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::idx" title='(anonymous struct)::idx' data-ref="(anonymous)::idx" data-ref-filename="(anonymous)..idx">idx</a> = <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a>;</td></tr>
<tr><th id="442">442</th><td>	<b>return</b> <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>;</td></tr>
<tr><th id="443">443</th><td>      } <b>else</b> {</td></tr>
<tr><th id="444">444</th><td>	<b>return</b> <a class="ref fn" href="#asm_fuseloadk64" title='asm_fuseloadk64' data-ref="asm_fuseloadk64" data-ref-filename="asm_fuseloadk64">asm_fuseloadk64</a>(<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>, <a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>);</td></tr>
<tr><th id="445">445</th><td>      }</td></tr>
<tr><th id="446">446</th><td>    }</td></tr>
<tr><th id="447">447</th><td>  } <b>else</b> <b>if</b> (<a class="macro" href="lj_asm.c.html#120" title="((ref) &gt; as-&gt;fuseref)" data-ref="_M/mayfuse">mayfuse</a>(<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>, <a class="local col8 ref" href="#458ref" title='ref' data-ref="458ref" data-ref-filename="458ref">ref</a>)) {</td></tr>
<tr><th id="448">448</th><td>    <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col4 decl" id="464xallow" title='xallow' data-type='RegSet' data-ref="464xallow" data-ref-filename="464xallow">xallow</dfn> = (<a class="local col9 ref" href="#459allow" title='allow' data-ref="459allow" data-ref-filename="459allow">allow</a> &amp; <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>) ? <a class="local col9 ref" href="#459allow" title='allow' data-ref="459allow" data-ref-filename="459allow">allow</a> : <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>;</td></tr>
<tr><th id="449">449</th><td>    <b>if</b> (<a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_SLOAD' data-ref="IR_SLOAD" data-ref-filename="IR_SLOAD">IR_SLOAD</a>) {</td></tr>
<tr><th id="450">450</th><td>      <b>if</b> (!(<a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a> &amp; (<a class="macro" href="lj_ir.h.html#222" title="0x01" data-ref="_M/IRSLOAD_PARENT">IRSLOAD_PARENT</a>|<a class="macro" href="lj_ir.h.html#225" title="0x08" data-ref="_M/IRSLOAD_CONVERT">IRSLOAD_CONVERT</a>)) &amp;&amp;</td></tr>
<tr><th id="451">451</th><td>	  <a class="ref fn" href="#noconflict" title='noconflict' data-ref="noconflict" data-ref-filename="noconflict">noconflict</a>(<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>, <a class="local col8 ref" href="#458ref" title='ref' data-ref="458ref" data-ref-filename="458ref">ref</a>, <a class="enum" href="lj_ir.h.html#154" title='IR_RETF' data-ref="IR_RETF" data-ref-filename="IR_RETF">IR_RETF</a>, <var>0</var>) &amp;&amp;</td></tr>
<tr><th id="452">452</th><td>	  !(<a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a> &amp;&amp; <a class="macro" href="lj_ir.h.html#376" title="(((uint32_t)(((ir-&gt;t)).irt &amp; IRT_TYPE) - (uint32_t)(IRT_LIGHTUD) &lt;= (uint32_t)(IRT_UDATA-IRT_LIGHTUD)))" data-ref="_M/irt_isaddr">irt_isaddr</a>(<a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>))) {</td></tr>
<tr><th id="453">453</th><td>	<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a>)<a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>, <a class="enum" href="lj_ir.h.html#REF_BASE" title='REF_BASE' data-ref="REF_BASE" data-ref-filename="REF_BASE">REF_BASE</a>, <a class="local col4 ref" href="#464xallow" title='xallow' data-ref="464xallow" data-ref-filename="464xallow">xallow</a>);</td></tr>
<tr><th id="454">454</th><td>	<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> = <var>8</var>*((<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>-<var>1</var>-<a class="macro" href="lj_arch.h.html#533" title="1" data-ref="_M/LJ_FR2">LJ_FR2</a>) +</td></tr>
<tr><th id="455">455</th><td>		      (!<a class="macro" href="lj_arch.h.html#533" title="1" data-ref="_M/LJ_FR2">LJ_FR2</a> &amp;&amp; (<a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a> &amp; <a class="macro" href="lj_ir.h.html#223" title="0x02" data-ref="_M/IRSLOAD_FRAME">IRSLOAD_FRAME</a>) ? <var>4</var> : <var>0</var>);</td></tr>
<tr><th id="456">456</th><td>	<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::idx" title='(anonymous struct)::idx' data-ref="(anonymous)::idx" data-ref-filename="(anonymous)..idx">idx</a> = <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a>;</td></tr>
<tr><th id="457">457</th><td>	<b>return</b> <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>;</td></tr>
<tr><th id="458">458</th><td>      }</td></tr>
<tr><th id="459">459</th><td>    } <b>else</b> <b>if</b> (<a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_FLOAD' data-ref="IR_FLOAD" data-ref-filename="IR_FLOAD">IR_FLOAD</a>) {</td></tr>
<tr><th id="460">460</th><td>      <i>/* Generic fusion is only ok for 32 bit operand (but see asm_comp). */</i></td></tr>
<tr><th id="461">461</th><td>      <b>if</b> ((<a class="macro" href="lj_ir.h.html#364" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_INT)" data-ref="_M/irt_isint">irt_isint</a>(<a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) || <a class="macro" href="lj_ir.h.html#369" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_U32)" data-ref="_M/irt_isu32">irt_isu32</a>(<a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) || <a class="macro" href="lj_ir.h.html#376" title="(((uint32_t)(((ir-&gt;t)).irt &amp; IRT_TYPE) - (uint32_t)(IRT_LIGHTUD) &lt;= (uint32_t)(IRT_UDATA-IRT_LIGHTUD)))" data-ref="_M/irt_isaddr">irt_isaddr</a>(<a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) &amp;&amp;</td></tr>
<tr><th id="462">462</th><td>	  <a class="ref fn" href="#noconflict" title='noconflict' data-ref="noconflict" data-ref-filename="noconflict">noconflict</a>(<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>, <a class="local col8 ref" href="#458ref" title='ref' data-ref="458ref" data-ref-filename="458ref">ref</a>, <a class="enum" href="lj_ir.h.html#154" title='IR_FSTORE' data-ref="IR_FSTORE" data-ref-filename="IR_FSTORE">IR_FSTORE</a>, <var>0</var>)) {</td></tr>
<tr><th id="463">463</th><td>	<a class="ref fn" href="#asm_fusefref" title='asm_fusefref' data-ref="asm_fusefref" data-ref-filename="asm_fusefref">asm_fusefref</a>(<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>, <a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>, <a class="local col4 ref" href="#464xallow" title='xallow' data-ref="464xallow" data-ref-filename="464xallow">xallow</a>);</td></tr>
<tr><th id="464">464</th><td>	<b>return</b> <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>;</td></tr>
<tr><th id="465">465</th><td>      }</td></tr>
<tr><th id="466">466</th><td>    } <b>else</b> <b>if</b> (<a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_ALOAD' data-ref="IR_ALOAD" data-ref-filename="IR_ALOAD">IR_ALOAD</a> || <a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_HLOAD' data-ref="IR_HLOAD" data-ref-filename="IR_HLOAD">IR_HLOAD</a> || <a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_ULOAD' data-ref="IR_ULOAD" data-ref-filename="IR_ULOAD">IR_ULOAD</a>) {</td></tr>
<tr><th id="467">467</th><td>      <b>if</b> (<a class="ref fn" href="#noconflict" title='noconflict' data-ref="noconflict" data-ref-filename="noconflict">noconflict</a>(<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>, <a class="local col8 ref" href="#458ref" title='ref' data-ref="458ref" data-ref-filename="458ref">ref</a>, <a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> + <a class="macro" href="lj_ir.h.html#169" title="((int)IR_ASTORE - (int)IR_ALOAD)" data-ref="_M/IRDELTA_L2S">IRDELTA_L2S</a>, <var>0</var>) &amp;&amp;</td></tr>
<tr><th id="468">468</th><td>	  !(<a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a> &amp;&amp; <a class="macro" href="lj_ir.h.html#376" title="(((uint32_t)(((ir-&gt;t)).irt &amp; IRT_TYPE) - (uint32_t)(IRT_LIGHTUD) &lt;= (uint32_t)(IRT_UDATA-IRT_LIGHTUD)))" data-ref="_M/irt_isaddr">irt_isaddr</a>(<a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>))) {</td></tr>
<tr><th id="469">469</th><td>	<a class="ref fn" href="#asm_fuseahuref" title='asm_fuseahuref' data-ref="asm_fuseahuref" data-ref-filename="asm_fuseahuref">asm_fuseahuref</a>(<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>, <a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="local col4 ref" href="#464xallow" title='xallow' data-ref="464xallow" data-ref-filename="464xallow">xallow</a>);</td></tr>
<tr><th id="470">470</th><td>	<b>return</b> <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>;</td></tr>
<tr><th id="471">471</th><td>      }</td></tr>
<tr><th id="472">472</th><td>    } <b>else</b> <b>if</b> (<a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_XLOAD' data-ref="IR_XLOAD" data-ref-filename="IR_XLOAD">IR_XLOAD</a>) {</td></tr>
<tr><th id="473">473</th><td>      <i>/* Generic fusion is not ok for 8/16 bit operands (but see asm_comp).</i></td></tr>
<tr><th id="474">474</th><td><i>      ** Fusing unaligned memory operands is ok on x86 (except for SIMD types).</i></td></tr>
<tr><th id="475">475</th><td><i>      */</i></td></tr>
<tr><th id="476">476</th><td>      <b>if</b> ((!<a class="macro" href="lj_ir.h.html#353" title="((uint32_t)((ir-&gt;t).irt &amp; IRT_TYPE) - (uint32_t)(IRT_I8) &lt;= (uint32_t)(IRT_U16-IRT_I8))" data-ref="_M/irt_typerange">irt_typerange</a>(<a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>, <a class="enum" href="lj_ir.h.html#318" title='IRT_I8' data-ref="IRT_I8" data-ref-filename="IRT_I8">IRT_I8</a>, <a class="enum" href="lj_ir.h.html#318" title='IRT_U16' data-ref="IRT_U16" data-ref-filename="IRT_U16">IRT_U16</a>)) &amp;&amp;</td></tr>
<tr><th id="477">477</th><td>	  <a class="ref fn" href="#noconflict" title='noconflict' data-ref="noconflict" data-ref-filename="noconflict">noconflict</a>(<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>, <a class="local col8 ref" href="#458ref" title='ref' data-ref="458ref" data-ref-filename="458ref">ref</a>, <a class="enum" href="lj_ir.h.html#154" title='IR_XSTORE' data-ref="IR_XSTORE" data-ref-filename="IR_XSTORE">IR_XSTORE</a>, <var>0</var>)) {</td></tr>
<tr><th id="478">478</th><td>	<a class="ref fn" href="#asm_fusexref" title='asm_fusexref' data-ref="asm_fusexref" data-ref-filename="asm_fusexref">asm_fusexref</a>(<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>, <a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="local col4 ref" href="#464xallow" title='xallow' data-ref="464xallow" data-ref-filename="464xallow">xallow</a>);</td></tr>
<tr><th id="479">479</th><td>	<b>return</b> <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>;</td></tr>
<tr><th id="480">480</th><td>      }</td></tr>
<tr><th id="481">481</th><td>    } <b>else</b> <b>if</b> (<a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_VLOAD' data-ref="IR_VLOAD" data-ref-filename="IR_VLOAD">IR_VLOAD</a> &amp;&amp; !(<a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a> &amp;&amp; <a class="macro" href="lj_ir.h.html#376" title="(((uint32_t)(((ir-&gt;t)).irt &amp; IRT_TYPE) - (uint32_t)(IRT_LIGHTUD) &lt;= (uint32_t)(IRT_UDATA-IRT_LIGHTUD)))" data-ref="_M/irt_isaddr">irt_isaddr</a>(<a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>))) {</td></tr>
<tr><th id="482">482</th><td>      <a class="ref fn" href="#asm_fuseahuref" title='asm_fuseahuref' data-ref="asm_fuseahuref" data-ref-filename="asm_fuseahuref">asm_fuseahuref</a>(<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>, <a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="local col4 ref" href="#464xallow" title='xallow' data-ref="464xallow" data-ref-filename="464xallow">xallow</a>);</td></tr>
<tr><th id="483">483</th><td>      <b>return</b> <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>;</td></tr>
<tr><th id="484">484</th><td>    }</td></tr>
<tr><th id="485">485</th><td>  }</td></tr>
<tr><th id="486">486</th><td>  <b>if</b> (<a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_FLOAD' data-ref="IR_FLOAD" data-ref-filename="IR_FLOAD">IR_FLOAD</a> &amp;&amp; <a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a> == <a class="enum" href="lj_ir.h.html#REF_NIL" title='REF_NIL' data-ref="REF_NIL" data-ref-filename="REF_NIL">REF_NIL</a>) {</td></tr>
<tr><th id="487">487</th><td>    <a class="ref fn" href="#asm_fusefref" title='asm_fusefref' data-ref="asm_fusefref" data-ref-filename="asm_fusefref">asm_fusefref</a>(<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>, <a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>, <a class="macro" href="lj_target.h.html#65" title="((RegSet)0)" data-ref="_M/RSET_EMPTY">RSET_EMPTY</a>);</td></tr>
<tr><th id="488">488</th><td>    <b>return</b> <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>;</td></tr>
<tr><th id="489">489</th><td>  }</td></tr>
<tr><th id="490">490</th><td>  <b>if</b> (!(<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::freeset" title='ASMState::freeset' data-use='r' data-ref="ASMState::freeset" data-ref-filename="ASMState..freeset">freeset</a> &amp; <a class="local col9 ref" href="#459allow" title='allow' data-ref="459allow" data-ref-filename="459allow">allow</a>) &amp;&amp; !<a class="macro" href="lj_emit_x86.h.html#571" title="((ref) &lt;= REF_BASE)" data-ref="_M/emit_canremat">emit_canremat</a>(<a class="local col8 ref" href="#458ref" title='ref' data-ref="458ref" data-ref-filename="458ref">ref</a>) &amp;&amp;</td></tr>
<tr><th id="491">491</th><td>      (<a class="local col9 ref" href="#459allow" title='allow' data-ref="459allow" data-ref-filename="459allow">allow</a> == <a class="macro" href="lj_target.h.html#65" title="((RegSet)0)" data-ref="_M/RSET_EMPTY">RSET_EMPTY</a> || <a class="macro" href="lj_target.h.html#39" title="((ir-&gt;s) != 0)" data-ref="_M/ra_hasspill">ra_hasspill</a>(<a class="local col0 ref" href="#460ir" title='ir' data-ref="460ir" data-ref-filename="460ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::s' data-ref="IRIns::(anonymous)::s" data-ref-filename="IRIns..(anonymous)..s">s</a>) || <a class="macro" href="lj_asm.c.html#116" title="((ref) &lt; as-&gt;sectref)" data-ref="_M/iscrossref">iscrossref</a>(<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>, <a class="local col8 ref" href="#458ref" title='ref' data-ref="458ref" data-ref-filename="458ref">ref</a>)))</td></tr>
<tr><th id="492">492</th><td>    <b>goto</b> <a class="lbl" href="#461fusespill" data-ref="461fusespill" data-ref-filename="461fusespill">fusespill</a>;</td></tr>
<tr><th id="493">493</th><td>  <b>return</b> <a class="tu ref fn" href="lj_asm.c.html#ra_allocref" title='ra_allocref' data-use='c' data-ref="ra_allocref" data-ref-filename="ra_allocref">ra_allocref</a>(<a class="local col7 ref" href="#457as" title='as' data-ref="457as" data-ref-filename="457as">as</a>, <a class="local col8 ref" href="#458ref" title='ref' data-ref="458ref" data-ref-filename="458ref">ref</a>, <a class="local col9 ref" href="#459allow" title='allow' data-ref="459allow" data-ref-filename="459allow">allow</a>);</td></tr>
<tr><th id="494">494</th><td>}</td></tr>
<tr><th id="495">495</th><td></td></tr>
<tr><th id="496">496</th><td><u>#<span data-ppcond="496">if</span> <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a></u></td></tr>
<tr><th id="497">497</th><td><i>/* Don't fuse a 32 bit load into a 64 bit operation. */</i></td></tr>
<tr><th id="498">498</th><td><em>static</em> <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="decl def fn" id="asm_fuseloadm" title='asm_fuseloadm' data-ref="asm_fuseloadm" data-ref-filename="asm_fuseloadm">asm_fuseloadm</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col5 decl" id="465as" title='as' data-type='ASMState *' data-ref="465as" data-ref-filename="465as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col6 decl" id="466ref" title='ref' data-type='IRRef' data-ref="466ref" data-ref-filename="466ref">ref</dfn>, <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col7 decl" id="467allow" title='allow' data-type='RegSet' data-ref="467allow" data-ref-filename="467allow">allow</dfn>, <em>int</em> <dfn class="local col8 decl" id="468is64" title='is64' data-type='int' data-ref="468is64" data-ref-filename="468is64">is64</dfn>)</td></tr>
<tr><th id="499">499</th><td>{</td></tr>
<tr><th id="500">500</th><td>  <b>if</b> (<a class="local col8 ref" href="#468is64" title='is64' data-ref="468is64" data-ref-filename="468is64">is64</a> &amp;&amp; !<a class="macro" href="lj_ir.h.html#394" title="((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)(((&amp;as-&gt;ir[(ref)])-&gt;t).irt &amp; IRT_TYPE))) &amp; 1)" data-ref="_M/irt_is64">irt_is64</a>(<a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ref)])" data-ref="_M/IR">IR</a>(<a class="local col6 ref" href="#466ref" title='ref' data-ref="466ref" data-ref-filename="466ref">ref</a>)-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>))</td></tr>
<tr><th id="501">501</th><td>    <b>return</b> <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col5 ref" href="#465as" title='as' data-ref="465as" data-ref-filename="465as">as</a>, <a class="local col6 ref" href="#466ref" title='ref' data-ref="466ref" data-ref-filename="466ref">ref</a>, <a class="local col7 ref" href="#467allow" title='allow' data-ref="467allow" data-ref-filename="467allow">allow</a>);</td></tr>
<tr><th id="502">502</th><td>  <b>return</b> <a class="ref fn" href="#asm_fuseload" title='asm_fuseload' data-ref="asm_fuseload" data-ref-filename="asm_fuseload">asm_fuseload</a>(<a class="local col5 ref" href="#465as" title='as' data-ref="465as" data-ref-filename="465as">as</a>, <a class="local col6 ref" href="#466ref" title='ref' data-ref="466ref" data-ref-filename="466ref">ref</a>, <a class="local col7 ref" href="#467allow" title='allow' data-ref="467allow" data-ref-filename="467allow">allow</a>);</td></tr>
<tr><th id="503">503</th><td>}</td></tr>
<tr><th id="504">504</th><td><u>#<span data-ppcond="496">else</span></u></td></tr>
<tr><th id="505">505</th><td><u>#define asm_fuseloadm(as, ref, allow, is64)  asm_fuseload(as, (ref), (allow))</u></td></tr>
<tr><th id="506">506</th><td><u>#<span data-ppcond="496">endif</span></u></td></tr>
<tr><th id="507">507</th><td></td></tr>
<tr><th id="508">508</th><td><i>/* -- Calls --------------------------------------------------------------- */</i></td></tr>
<tr><th id="509">509</th><td></td></tr>
<tr><th id="510">510</th><td><i>/* Count the required number of stack slots for a call. */</i></td></tr>
<tr><th id="511">511</th><td><em>static</em> <em>int</em> <dfn class="decl def fn" id="asm_count_call_slots" title='asm_count_call_slots' data-ref="asm_count_call_slots" data-ref-filename="asm_count_call_slots">asm_count_call_slots</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col9 decl" id="469as" title='as' data-type='ASMState *' data-ref="469as" data-ref-filename="469as">as</dfn>, <em>const</em> <a class="typedef" href="lj_ircall.h.html#CCallInfo" title='CCallInfo' data-type='struct CCallInfo' data-ref="CCallInfo" data-ref-filename="CCallInfo">CCallInfo</a> *<dfn class="local col0 decl" id="470ci" title='ci' data-type='const CCallInfo *' data-ref="470ci" data-ref-filename="470ci">ci</dfn>, <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> *<dfn class="local col1 decl" id="471args" title='args' data-type='IRRef *' data-ref="471args" data-ref-filename="471args">args</dfn>)</td></tr>
<tr><th id="512">512</th><td>{</td></tr>
<tr><th id="513">513</th><td>  <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a> <dfn class="local col2 decl" id="472i" title='i' data-type='uint32_t' data-ref="472i" data-ref-filename="472i">i</dfn>, <dfn class="local col3 decl" id="473nargs" title='nargs' data-type='uint32_t' data-ref="473nargs" data-ref-filename="473nargs">nargs</dfn> = <a class="macro" href="lj_ircall.h.html#60" title="(((ci))-&gt;flags &amp; 0xff)" data-ref="_M/CCI_XNARGS">CCI_XNARGS</a>(<a class="local col0 ref" href="#470ci" title='ci' data-ref="470ci" data-ref-filename="470ci">ci</a>);</td></tr>
<tr><th id="514">514</th><td>  <em>int</em> <dfn class="local col4 decl" id="474nslots" title='nslots' data-type='int' data-ref="474nslots" data-ref-filename="474nslots">nslots</dfn> = <var>0</var>;</td></tr>
<tr><th id="515">515</th><td><u>#<span data-ppcond="515">if</span> <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a></u></td></tr>
<tr><th id="516">516</th><td>  <b>if</b> (<a class="macro" href="lj_arch.h.html#622" title="0" data-ref="_M/LJ_ABI_WIN">LJ_ABI_WIN</a>) {</td></tr>
<tr><th id="517">517</th><td>    <a class="local col4 ref" href="#474nslots" title='nslots' data-ref="474nslots" data-ref-filename="474nslots">nslots</a> = (<em>int</em>)(<a class="local col3 ref" href="#473nargs" title='nargs' data-ref="473nargs" data-ref-filename="473nargs">nargs</a>*<var>2</var>);  <i>/* Only matters for more than four args. */</i></td></tr>
<tr><th id="518">518</th><td>  } <b>else</b> {</td></tr>
<tr><th id="519">519</th><td>    <em>int</em> <dfn class="local col5 decl" id="475ngpr" title='ngpr' data-type='int' data-ref="475ngpr" data-ref-filename="475ngpr">ngpr</dfn> = <a class="macro" href="lj_target_x86.h.html#103" title="6" data-ref="_M/REGARG_NUMGPR">REGARG_NUMGPR</a>, <dfn class="local col6 decl" id="476nfpr" title='nfpr' data-type='int' data-ref="476nfpr" data-ref-filename="476nfpr">nfpr</dfn> = <a class="macro" href="lj_target_x86.h.html#104" title="8" data-ref="_M/REGARG_NUMFPR">REGARG_NUMFPR</a>;</td></tr>
<tr><th id="520">520</th><td>    <b>for</b> (<a class="local col2 ref" href="#472i" title='i' data-ref="472i" data-ref-filename="472i">i</a> = <var>0</var>; <a class="local col2 ref" href="#472i" title='i' data-ref="472i" data-ref-filename="472i">i</a> &lt; <a class="local col3 ref" href="#473nargs" title='nargs' data-ref="473nargs" data-ref-filename="473nargs">nargs</a>; <a class="local col2 ref" href="#472i" title='i' data-ref="472i" data-ref-filename="472i">i</a>++)</td></tr>
<tr><th id="521">521</th><td>      <b>if</b> (<a class="local col1 ref" href="#471args" title='args' data-ref="471args" data-ref-filename="471args">args</a>[<a class="local col2 ref" href="#472i" title='i' data-ref="472i" data-ref-filename="472i">i</a>] &amp;&amp; <a class="macro" href="lj_ir.h.html#373" title="((((IRType)(((&amp;as-&gt;ir[(args[i])])-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM) || (((IRType)(((&amp;as-&gt;ir[(args[i])])-&gt;t).irt &amp; IRT_TYPE)) == IRT_FLOAT))" data-ref="_M/irt_isfp">irt_isfp</a>(<a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(args[i])])" data-ref="_M/IR">IR</a>(<a class="local col1 ref" href="#471args" title='args' data-ref="471args" data-ref-filename="471args">args</a>[<a class="local col2 ref" href="#472i" title='i' data-ref="472i" data-ref-filename="472i">i</a>])-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="522">522</th><td>	<b>if</b> (<a class="local col6 ref" href="#476nfpr" title='nfpr' data-ref="476nfpr" data-ref-filename="476nfpr">nfpr</a> &gt; <var>0</var>) <a class="local col6 ref" href="#476nfpr" title='nfpr' data-ref="476nfpr" data-ref-filename="476nfpr">nfpr</a>--; <b>else</b> <a class="local col4 ref" href="#474nslots" title='nslots' data-ref="474nslots" data-ref-filename="474nslots">nslots</a> += <var>2</var>;</td></tr>
<tr><th id="523">523</th><td>      } <b>else</b> {</td></tr>
<tr><th id="524">524</th><td>	<b>if</b> (<a class="local col5 ref" href="#475ngpr" title='ngpr' data-ref="475ngpr" data-ref-filename="475ngpr">ngpr</a> &gt; <var>0</var>) <a class="local col5 ref" href="#475ngpr" title='ngpr' data-ref="475ngpr" data-ref-filename="475ngpr">ngpr</a>--; <b>else</b> <a class="local col4 ref" href="#474nslots" title='nslots' data-ref="474nslots" data-ref-filename="474nslots">nslots</a> += <var>2</var>;</td></tr>
<tr><th id="525">525</th><td>      }</td></tr>
<tr><th id="526">526</th><td>  }</td></tr>
<tr><th id="527">527</th><td><u>#<span data-ppcond="515">else</span></u></td></tr>
<tr><th id="528">528</th><td>  <em>int</em> ngpr = <var>0</var>;</td></tr>
<tr><th id="529">529</th><td>  <b>if</b> ((ci-&gt;flags &amp; CCI_CC_MASK) == CCI_CC_FASTCALL)</td></tr>
<tr><th id="530">530</th><td>    ngpr = <var>2</var>;</td></tr>
<tr><th id="531">531</th><td>  <b>else</b> <b>if</b> ((ci-&gt;flags &amp; CCI_CC_MASK) == CCI_CC_THISCALL)</td></tr>
<tr><th id="532">532</th><td>    ngpr = <var>1</var>;</td></tr>
<tr><th id="533">533</th><td>  <b>for</b> (i = <var>0</var>; i &lt; nargs; i++)</td></tr>
<tr><th id="534">534</th><td>    <b>if</b> (args[i] &amp;&amp; irt_isfp(IR(args[i])-&gt;t)) {</td></tr>
<tr><th id="535">535</th><td>      nslots += irt_isnum(IR(args[i])-&gt;t) ? <var>2</var> : <var>1</var>;</td></tr>
<tr><th id="536">536</th><td>    } <b>else</b> {</td></tr>
<tr><th id="537">537</th><td>      <b>if</b> (ngpr &gt; <var>0</var>) ngpr--; <b>else</b> nslots++;</td></tr>
<tr><th id="538">538</th><td>    }</td></tr>
<tr><th id="539">539</th><td><u>#<span data-ppcond="515">endif</span></u></td></tr>
<tr><th id="540">540</th><td>  <b>return</b> <a class="local col4 ref" href="#474nslots" title='nslots' data-ref="474nslots" data-ref-filename="474nslots">nslots</a>;</td></tr>
<tr><th id="541">541</th><td>}</td></tr>
<tr><th id="542">542</th><td></td></tr>
<tr><th id="543">543</th><td><i>/* Generate a call to a C function. */</i></td></tr>
<tr><th id="544">544</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_gencall" title='asm_gencall' data-ref="asm_gencall" data-ref-filename="asm_gencall">asm_gencall</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col7 decl" id="477as" title='as' data-type='ASMState *' data-ref="477as" data-ref-filename="477as">as</dfn>, <em>const</em> <a class="typedef" href="lj_ircall.h.html#CCallInfo" title='CCallInfo' data-type='struct CCallInfo' data-ref="CCallInfo" data-ref-filename="CCallInfo">CCallInfo</a> *<dfn class="local col8 decl" id="478ci" title='ci' data-type='const CCallInfo *' data-ref="478ci" data-ref-filename="478ci">ci</dfn>, <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> *<dfn class="local col9 decl" id="479args" title='args' data-type='IRRef *' data-ref="479args" data-ref-filename="479args">args</dfn>)</td></tr>
<tr><th id="545">545</th><td>{</td></tr>
<tr><th id="546">546</th><td>  <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a> <dfn class="local col0 decl" id="480n" title='n' data-type='uint32_t' data-ref="480n" data-ref-filename="480n">n</dfn>, <dfn class="local col1 decl" id="481nargs" title='nargs' data-type='uint32_t' data-ref="481nargs" data-ref-filename="481nargs">nargs</dfn> = <a class="macro" href="lj_ircall.h.html#60" title="(((ci))-&gt;flags &amp; 0xff)" data-ref="_M/CCI_XNARGS">CCI_XNARGS</a>(<a class="local col8 ref" href="#478ci" title='ci' data-ref="478ci" data-ref-filename="478ci">ci</a>);</td></tr>
<tr><th id="547">547</th><td>  <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> <dfn class="local col2 decl" id="482ofs" title='ofs' data-type='int32_t' data-ref="482ofs" data-ref-filename="482ofs">ofs</dfn> = <a class="macro" href="lj_target_x86.h.html#107" title="0" data-ref="_M/STACKARG_OFS">STACKARG_OFS</a>;</td></tr>
<tr><th id="548">548</th><td><u>#<span data-ppcond="548">if</span> <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a></u></td></tr>
<tr><th id="549">549</th><td>  <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a> <dfn class="local col3 decl" id="483gprs" title='gprs' data-type='uint32_t' data-ref="483gprs" data-ref-filename="483gprs">gprs</dfn> = <a class="macro" href="lj_target_x86.h.html#100" title="(RID_EDI|((RID_ESI|((RID_EDX|((RID_ECX|((RID_R8D|(RID_R9D &lt;&lt;5))&lt;&lt;5))&lt;&lt;5))&lt;&lt;5))&lt;&lt;5))" data-ref="_M/REGARG_GPRS">REGARG_GPRS</a>;</td></tr>
<tr><th id="550">550</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col4 decl" id="484fpr" title='fpr' data-type='Reg' data-ref="484fpr" data-ref-filename="484fpr">fpr</dfn> = <a class="macro" href="lj_target_x86.h.html#105" title="RID_XMM0" data-ref="_M/REGARG_FIRSTFPR">REGARG_FIRSTFPR</a>;</td></tr>
<tr><th id="551">551</th><td><u>#<span data-ppcond="551">if</span> !<a class="macro" href="lj_arch.h.html#622" title="0" data-ref="_M/LJ_ABI_WIN">LJ_ABI_WIN</a></u></td></tr>
<tr><th id="552">552</th><td>  <a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *<dfn class="local col5 decl" id="485patchnfpr" title='patchnfpr' data-type='MCode *' data-ref="485patchnfpr" data-ref-filename="485patchnfpr">patchnfpr</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="553">553</th><td><u>#<span data-ppcond="551">endif</span></u></td></tr>
<tr><th id="554">554</th><td><u>#<span data-ppcond="548">else</span></u></td></tr>
<tr><th id="555">555</th><td>  uint32_t gprs = <var>0</var>;</td></tr>
<tr><th id="556">556</th><td>  <b>if</b> ((ci-&gt;flags &amp; CCI_CC_MASK) != CCI_CC_CDECL) {</td></tr>
<tr><th id="557">557</th><td>    <b>if</b> ((ci-&gt;flags &amp; CCI_CC_MASK) == CCI_CC_THISCALL)</td></tr>
<tr><th id="558">558</th><td>      gprs = (REGARG_GPRS &amp; <var>31</var>);</td></tr>
<tr><th id="559">559</th><td>    <b>else</b> <b>if</b> ((ci-&gt;flags &amp; CCI_CC_MASK) == CCI_CC_FASTCALL)</td></tr>
<tr><th id="560">560</th><td>      gprs = REGARG_GPRS;</td></tr>
<tr><th id="561">561</th><td>  }</td></tr>
<tr><th id="562">562</th><td><u>#<span data-ppcond="548">endif</span></u></td></tr>
<tr><th id="563">563</th><td>  <b>if</b> ((<em>void</em> *)<a class="local col8 ref" href="#478ci" title='ci' data-ref="478ci" data-ref-filename="478ci">ci</a>-&gt;<a class="ref field" href="lj_ircall.h.html#CCallInfo::func" title='CCallInfo::func' data-ref="CCallInfo::func" data-ref-filename="CCallInfo..func">func</a>)</td></tr>
<tr><th id="564">564</th><td>    <a class="macro" href="lj_emit_x86.h.html#519" title="emit_call_(as, (MCode *)(void *)(ci-&gt;func))" data-ref="_M/emit_call">emit_call</a>(<a class="local col7 ref" href="#477as" title='as' data-ref="477as" data-ref-filename="477as">as</a>, <a class="local col8 ref" href="#478ci" title='ci' data-ref="478ci" data-ref-filename="478ci">ci</a>-&gt;<a class="ref field" href="lj_ircall.h.html#CCallInfo::func" title='CCallInfo::func' data-ref="CCallInfo::func" data-ref-filename="CCallInfo..func">func</a>);</td></tr>
<tr><th id="565">565</th><td><u>#<span data-ppcond="565">if</span> <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a></u></td></tr>
<tr><th id="566">566</th><td>  <b>if</b> ((<a class="local col8 ref" href="#478ci" title='ci' data-ref="478ci" data-ref-filename="478ci">ci</a>-&gt;<a class="ref field" href="lj_ircall.h.html#CCallInfo::flags" title='CCallInfo::flags' data-ref="CCallInfo::flags" data-ref-filename="CCallInfo..flags">flags</a> &amp; <a class="macro" href="lj_ircall.h.html#42" title="0x0800" data-ref="_M/CCI_VARARG">CCI_VARARG</a>)) {  <i>/* Special handling for vararg calls. */</i></td></tr>
<tr><th id="567">567</th><td><u>#<span data-ppcond="567">if</span> <a class="macro" href="lj_arch.h.html#622" title="0" data-ref="_M/LJ_ABI_WIN">LJ_ABI_WIN</a></u></td></tr>
<tr><th id="568">568</th><td>    <b>for</b> (n = <var>0</var>; n &lt; <var>4</var> &amp;&amp; n &lt; nargs; n++) {</td></tr>
<tr><th id="569">569</th><td>      IRIns *ir = IR(args[n]);</td></tr>
<tr><th id="570">570</th><td>      <b>if</b> (irt_isfp(ir-&gt;t))  <i>/* Duplicate FPRs in GPRs. */</i></td></tr>
<tr><th id="571">571</th><td>	emit_rr(as, XO_MOVDto, (irt_isnum(ir-&gt;t) ? REX_64 : <var>0</var>) | (fpr+n),</td></tr>
<tr><th id="572">572</th><td>		((gprs &gt;&gt; (n*<var>5</var>)) &amp; <var>31</var>));  <i>/* Either MOVD or MOVQ. */</i></td></tr>
<tr><th id="573">573</th><td>    }</td></tr>
<tr><th id="574">574</th><td><u>#<span data-ppcond="567">else</span></u></td></tr>
<tr><th id="575">575</th><td>    <a class="local col5 ref" href="#485patchnfpr" title='patchnfpr' data-ref="485patchnfpr" data-ref-filename="485patchnfpr">patchnfpr</a> = --<a class="local col7 ref" href="#477as" title='as' data-ref="477as" data-ref-filename="477as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcp" title='ASMState::mcp' data-use='w' data-ref="ASMState::mcp" data-ref-filename="ASMState..mcp">mcp</a>;  <i>/* Indicate number of used FPRs in register al. */</i></td></tr>
<tr><th id="576">576</th><td>    *--<a class="local col7 ref" href="#477as" title='as' data-ref="477as" data-ref-filename="477as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcp" title='ASMState::mcp' data-use='w' data-ref="ASMState::mcp" data-ref-filename="ASMState..mcp">mcp</a> = <a class="enum" href="lj_target_x86.h.html#XI_MOVrib" title='XI_MOVrib' data-ref="XI_MOVrib" data-ref-filename="XI_MOVrib">XI_MOVrib</a> | <a class="enum" href="lj_target_x86.h.html#30" title='RID_EAX' data-ref="RID_EAX" data-ref-filename="RID_EAX">RID_EAX</a>;</td></tr>
<tr><th id="577">577</th><td><u>#<span data-ppcond="567">endif</span></u></td></tr>
<tr><th id="578">578</th><td>  }</td></tr>
<tr><th id="579">579</th><td><u>#<span data-ppcond="565">endif</span></u></td></tr>
<tr><th id="580">580</th><td>  <b>for</b> (<a class="local col0 ref" href="#480n" title='n' data-ref="480n" data-ref-filename="480n">n</a> = <var>0</var>; <a class="local col0 ref" href="#480n" title='n' data-ref="480n" data-ref-filename="480n">n</a> &lt; <a class="local col1 ref" href="#481nargs" title='nargs' data-ref="481nargs" data-ref-filename="481nargs">nargs</a>; <a class="local col0 ref" href="#480n" title='n' data-ref="480n" data-ref-filename="480n">n</a>++) {  <i>/* Setup args. */</i></td></tr>
<tr><th id="581">581</th><td>    <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col6 decl" id="486ref" title='ref' data-type='IRRef' data-ref="486ref" data-ref-filename="486ref">ref</dfn> = <a class="local col9 ref" href="#479args" title='args' data-ref="479args" data-ref-filename="479args">args</a>[<a class="local col0 ref" href="#480n" title='n' data-ref="480n" data-ref-filename="480n">n</a>];</td></tr>
<tr><th id="582">582</th><td>    <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col7 decl" id="487ir" title='ir' data-type='IRIns *' data-ref="487ir" data-ref-filename="487ir">ir</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ref)])" data-ref="_M/IR">IR</a>(<a class="local col6 ref" href="#486ref" title='ref' data-ref="486ref" data-ref-filename="486ref">ref</a>);</td></tr>
<tr><th id="583">583</th><td>    <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col8 decl" id="488r" title='r' data-type='Reg' data-ref="488r" data-ref-filename="488r">r</dfn>;</td></tr>
<tr><th id="584">584</th><td><u>#<span data-ppcond="584">if</span> <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp; <a class="macro" href="lj_arch.h.html#622" title="0" data-ref="_M/LJ_ABI_WIN">LJ_ABI_WIN</a></u></td></tr>
<tr><th id="585">585</th><td>    <i>/* Windows/x64 argument registers are strictly positional. */</i></td></tr>
<tr><th id="586">586</th><td>    r = irt_isfp(ir-&gt;t) ? (fpr &lt;= REGARG_LASTFPR ? fpr : <var>0</var>) : (gprs &amp; <var>31</var>);</td></tr>
<tr><th id="587">587</th><td>    fpr++; gprs &gt;&gt;= <var>5</var>;</td></tr>
<tr><th id="588">588</th><td><u>#<span data-ppcond="584">elif</span> <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a></u></td></tr>
<tr><th id="589">589</th><td>    <i>/* POSIX/x64 argument registers are used in order of appearance. */</i></td></tr>
<tr><th id="590">590</th><td>    <b>if</b> (<a class="macro" href="lj_ir.h.html#373" title="((((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM) || (((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_FLOAT))" data-ref="_M/irt_isfp">irt_isfp</a>(<a class="local col7 ref" href="#487ir" title='ir' data-ref="487ir" data-ref-filename="487ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="591">591</th><td>      <a class="local col8 ref" href="#488r" title='r' data-ref="488r" data-ref-filename="488r">r</a> = <a class="local col4 ref" href="#484fpr" title='fpr' data-ref="484fpr" data-ref-filename="484fpr">fpr</a> &lt;= <a class="macro" href="lj_target_x86.h.html#106" title="RID_XMM7" data-ref="_M/REGARG_LASTFPR">REGARG_LASTFPR</a> ? <a class="local col4 ref" href="#484fpr" title='fpr' data-ref="484fpr" data-ref-filename="484fpr">fpr</a>++ : <var>0</var>;</td></tr>
<tr><th id="592">592</th><td>    } <b>else</b> {</td></tr>
<tr><th id="593">593</th><td>      <a class="local col8 ref" href="#488r" title='r' data-ref="488r" data-ref-filename="488r">r</a> = <a class="local col3 ref" href="#483gprs" title='gprs' data-ref="483gprs" data-ref-filename="483gprs">gprs</a> &amp; <var>31</var>; <a class="local col3 ref" href="#483gprs" title='gprs' data-ref="483gprs" data-ref-filename="483gprs">gprs</a> &gt;&gt;= <var>5</var>;</td></tr>
<tr><th id="594">594</th><td>    }</td></tr>
<tr><th id="595">595</th><td><u>#<span data-ppcond="584">else</span></u></td></tr>
<tr><th id="596">596</th><td>    <b>if</b> (ref &amp;&amp; irt_isfp(ir-&gt;t)) {</td></tr>
<tr><th id="597">597</th><td>      r = <var>0</var>;</td></tr>
<tr><th id="598">598</th><td>    } <b>else</b> {</td></tr>
<tr><th id="599">599</th><td>      r = gprs &amp; <var>31</var>; gprs &gt;&gt;= <var>5</var>;</td></tr>
<tr><th id="600">600</th><td>      <b>if</b> (!ref) <b>continue</b>;</td></tr>
<tr><th id="601">601</th><td>    }</td></tr>
<tr><th id="602">602</th><td><u>#<span data-ppcond="584">endif</span></u></td></tr>
<tr><th id="603">603</th><td>    <b>if</b> (<a class="local col8 ref" href="#488r" title='r' data-ref="488r" data-ref-filename="488r">r</a>) {  <i>/* Argument is in a register. */</i></td></tr>
<tr><th id="604">604</th><td>      <b>if</b> (<a class="local col8 ref" href="#488r" title='r' data-ref="488r" data-ref-filename="488r">r</a> &lt; <a class="enum" href="lj_target_x86.h.html#RID_MAX_GPR" title='RID_MAX_GPR' data-ref="RID_MAX_GPR" data-ref-filename="RID_MAX_GPR">RID_MAX_GPR</a> &amp;&amp; <a class="local col6 ref" href="#486ref" title='ref' data-ref="486ref" data-ref-filename="486ref">ref</a> &lt; <a class="macro" href="lj_asm.c.html#111" title="REF_TRUE" data-ref="_M/ASMREF_TMP1">ASMREF_TMP1</a>) {</td></tr>
<tr><th id="605">605</th><td><u>#<span data-ppcond="605">if</span> <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a></u></td></tr>
<tr><th id="606">606</th><td>	<b>if</b> (<a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a> ? !(<a class="local col7 ref" href="#487ir" title='ir' data-ref="487ir" data-ref-filename="487ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_KINT' data-ref="IR_KINT" data-ref-filename="IR_KINT">IR_KINT</a> || <a class="local col7 ref" href="#487ir" title='ir' data-ref="487ir" data-ref-filename="487ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_KNULL' data-ref="IR_KNULL" data-ref-filename="IR_KNULL">IR_KNULL</a>) : <a class="local col7 ref" href="#487ir" title='ir' data-ref="487ir" data-ref-filename="487ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_KINT64' data-ref="IR_KINT64" data-ref-filename="IR_KINT64">IR_KINT64</a>)</td></tr>
<tr><th id="607">607</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_loadu64" title='emit_loadu64' data-ref="emit_loadu64" data-ref-filename="emit_loadu64">emit_loadu64</a>(<a class="local col7 ref" href="#477as" title='as' data-ref="477as" data-ref-filename="477as">as</a>, <a class="local col8 ref" href="#488r" title='r' data-ref="488r" data-ref-filename="488r">r</a>, <a class="macro" href="lj_ir.h.html#578" title="(&amp;(ir)[1].tv)" data-ref="_M/ir_k64">ir_k64</a>(<a class="local col7 ref" href="#487ir" title='ir' data-ref="487ir" data-ref-filename="487ir">ir</a>)-&gt;<a class="ref field" href="lj_obj.h.html#TValue::u64" title='TValue::u64' data-ref="TValue::u64" data-ref-filename="TValue..u64">u64</a>);</td></tr>
<tr><th id="608">608</th><td>	<b>else</b></td></tr>
<tr><th id="609">609</th><td><u>#<span data-ppcond="605">endif</span></u></td></tr>
<tr><th id="610">610</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_loadi" title='emit_loadi' data-ref="emit_loadi" data-ref-filename="emit_loadi">emit_loadi</a>(<a class="local col7 ref" href="#477as" title='as' data-ref="477as" data-ref-filename="477as">as</a>, <a class="local col8 ref" href="#488r" title='r' data-ref="488r" data-ref-filename="488r">r</a>, <a class="local col7 ref" href="#487ir" title='ir' data-ref="487ir" data-ref-filename="487ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#IRIns::i" title='IRIns::i' data-ref="IRIns::i" data-ref-filename="IRIns..i">i</a>);</td></tr>
<tr><th id="611">611</th><td>      } <b>else</b> {</td></tr>
<tr><th id="612">612</th><td>	<i>/* Must have been evicted. */</i></td></tr>
<tr><th id="613">613</th><td>	<a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(rset_test(as-&gt;freeset, r), <q>"reg %d not free"</q>, r);</td></tr>
<tr><th id="614">614</th><td>	<b>if</b> (<a class="macro" href="lj_target.h.html#28" title="(!((ir-&gt;r) &amp; 0x80))" data-ref="_M/ra_hasreg">ra_hasreg</a>(<a class="local col7 ref" href="#487ir" title='ir' data-ref="487ir" data-ref-filename="487ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>)) {</td></tr>
<tr><th id="615">615</th><td>	  <a class="macro" href="lj_asm.c.html#307" title="(as-&gt;weakset &amp;= ~(((RegSet)1) &lt;&lt; ((ir-&gt;r))))" data-ref="_M/ra_noweak">ra_noweak</a>(<a class="local col7 ref" href="#477as" title='as' data-ref="477as" data-ref-filename="477as">as</a>, <a class="local col7 ref" href="#487ir" title='ir' data-ref="487ir" data-ref-filename="487ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>);</td></tr>
<tr><th id="616">616</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_movrr" title='emit_movrr' data-ref="emit_movrr" data-ref-filename="emit_movrr">emit_movrr</a>(<a class="local col7 ref" href="#477as" title='as' data-ref="477as" data-ref-filename="477as">as</a>, <a class="local col7 ref" href="#487ir" title='ir' data-ref="487ir" data-ref-filename="487ir">ir</a>, <a class="local col8 ref" href="#488r" title='r' data-ref="488r" data-ref-filename="488r">r</a>, <a class="local col7 ref" href="#487ir" title='ir' data-ref="487ir" data-ref-filename="487ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>);</td></tr>
<tr><th id="617">617</th><td>	} <b>else</b> {</td></tr>
<tr><th id="618">618</th><td>	  <a class="tu ref fn" href="lj_asm.c.html#ra_allocref" title='ra_allocref' data-use='c' data-ref="ra_allocref" data-ref-filename="ra_allocref">ra_allocref</a>(<a class="local col7 ref" href="#477as" title='as' data-ref="477as" data-ref-filename="477as">as</a>, <a class="local col6 ref" href="#486ref" title='ref' data-ref="486ref" data-ref-filename="486ref">ref</a>, <a class="macro" href="lj_target.h.html#64" title="(((RegSet)1) &lt;&lt; (r))" data-ref="_M/RID2RSET">RID2RSET</a>(<a class="local col8 ref" href="#488r" title='r' data-ref="488r" data-ref-filename="488r">r</a>));</td></tr>
<tr><th id="619">619</th><td>	}</td></tr>
<tr><th id="620">620</th><td>      }</td></tr>
<tr><th id="621">621</th><td>    } <b>else</b> <b>if</b> (<a class="macro" href="lj_ir.h.html#373" title="((((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM) || (((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_FLOAT))" data-ref="_M/irt_isfp">irt_isfp</a>(<a class="local col7 ref" href="#487ir" title='ir' data-ref="487ir" data-ref-filename="487ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {  <i>/* FP argument is on stack. */</i></td></tr>
<tr><th id="622">622</th><td>      <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(!(irt_isfloat(ir-&gt;t) &amp;&amp; irref_isk(ref)),</td></tr>
<tr><th id="623">623</th><td>		 <q>"unexpected float constant"</q>);</td></tr>
<tr><th id="624">624</th><td>      <b>if</b> (<a class="macro" href="lj_arch.h.html#599" title="0" data-ref="_M/LJ_32">LJ_32</a> &amp;&amp; (<a class="local col2 ref" href="#482ofs" title='ofs' data-ref="482ofs" data-ref-filename="482ofs">ofs</a> &amp; <var>4</var>) &amp;&amp; <a class="macro" href="lj_ir.h.html#470" title="((ref) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col6 ref" href="#486ref" title='ref' data-ref="486ref" data-ref-filename="486ref">ref</a>)) {</td></tr>
<tr><th id="625">625</th><td>	<i>/* Split stores for unaligned FP consts. */</i></td></tr>
<tr><th id="626">626</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_movmroi" title='emit_movmroi' data-ref="emit_movmroi" data-ref-filename="emit_movmroi">emit_movmroi</a>(<a class="local col7 ref" href="#477as" title='as' data-ref="477as" data-ref-filename="477as">as</a>, <a class="enum" href="lj_target_x86.h.html#30" title='RID_ESP' data-ref="RID_ESP" data-ref-filename="RID_ESP">RID_ESP</a>, <a class="local col2 ref" href="#482ofs" title='ofs' data-ref="482ofs" data-ref-filename="482ofs">ofs</a>, (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<a class="macro" href="lj_ir.h.html#576" title="(&amp;(ir)[1].tv)" data-ref="_M/ir_knum">ir_knum</a>(<a class="local col7 ref" href="#487ir" title='ir' data-ref="487ir" data-ref-filename="487ir">ir</a>)-&gt;<a class="ref field" href="lj_obj.h.html#TValue::u32" title='TValue::u32' data-ref="TValue::u32" data-ref-filename="TValue..u32">u32</a>.<a class="ref field" href="lj_obj.h.html#208" title='TValue::(anonymous struct)::lo' data-ref="TValue::(anonymous)::lo" data-ref-filename="TValue..(anonymous)..lo">lo</a>);</td></tr>
<tr><th id="627">627</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_movmroi" title='emit_movmroi' data-ref="emit_movmroi" data-ref-filename="emit_movmroi">emit_movmroi</a>(<a class="local col7 ref" href="#477as" title='as' data-ref="477as" data-ref-filename="477as">as</a>, <a class="enum" href="lj_target_x86.h.html#30" title='RID_ESP' data-ref="RID_ESP" data-ref-filename="RID_ESP">RID_ESP</a>, <a class="local col2 ref" href="#482ofs" title='ofs' data-ref="482ofs" data-ref-filename="482ofs">ofs</a>+<var>4</var>, (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<a class="macro" href="lj_ir.h.html#576" title="(&amp;(ir)[1].tv)" data-ref="_M/ir_knum">ir_knum</a>(<a class="local col7 ref" href="#487ir" title='ir' data-ref="487ir" data-ref-filename="487ir">ir</a>)-&gt;<a class="ref field" href="lj_obj.h.html#TValue::u32" title='TValue::u32' data-ref="TValue::u32" data-ref-filename="TValue..u32">u32</a>.<a class="ref field" href="lj_obj.h.html#208" title='TValue::(anonymous struct)::hi' data-ref="TValue::(anonymous)::hi" data-ref-filename="TValue..(anonymous)..hi">hi</a>);</td></tr>
<tr><th id="628">628</th><td>      } <b>else</b> {</td></tr>
<tr><th id="629">629</th><td>	<a class="local col8 ref" href="#488r" title='r' data-ref="488r" data-ref-filename="488r">r</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col7 ref" href="#477as" title='as' data-ref="477as" data-ref-filename="477as">as</a>, <a class="local col6 ref" href="#486ref" title='ref' data-ref="486ref" data-ref-filename="486ref">ref</a>, <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>);</td></tr>
<tr><th id="630">630</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col7 ref" href="#477as" title='as' data-ref="477as" data-ref-filename="477as">as</a>, <a class="macro" href="lj_ir.h.html#363" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM)" data-ref="_M/irt_isnum">irt_isnum</a>(<a class="local col7 ref" href="#487ir" title='ir' data-ref="487ir" data-ref-filename="487ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) ? <a class="enum" href="lj_target_x86.h.html#XO_MOVSDto" title='XO_MOVSDto' data-ref="XO_MOVSDto" data-ref-filename="XO_MOVSDto">XO_MOVSDto</a> : <a class="enum" href="lj_target_x86.h.html#XO_MOVSSto" title='XO_MOVSSto' data-ref="XO_MOVSSto" data-ref-filename="XO_MOVSSto">XO_MOVSSto</a>,</td></tr>
<tr><th id="631">631</th><td>		  <a class="local col8 ref" href="#488r" title='r' data-ref="488r" data-ref-filename="488r">r</a>, <a class="enum" href="lj_target_x86.h.html#30" title='RID_ESP' data-ref="RID_ESP" data-ref-filename="RID_ESP">RID_ESP</a>, <a class="local col2 ref" href="#482ofs" title='ofs' data-ref="482ofs" data-ref-filename="482ofs">ofs</a>);</td></tr>
<tr><th id="632">632</th><td>      }</td></tr>
<tr><th id="633">633</th><td>      <a class="local col2 ref" href="#482ofs" title='ofs' data-ref="482ofs" data-ref-filename="482ofs">ofs</a> += (<a class="macro" href="lj_arch.h.html#599" title="0" data-ref="_M/LJ_32">LJ_32</a> &amp;&amp; <a class="macro" href="lj_ir.h.html#362" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_FLOAT)" data-ref="_M/irt_isfloat">irt_isfloat</a>(<a class="local col7 ref" href="#487ir" title='ir' data-ref="487ir" data-ref-filename="487ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) ? <var>4</var> : <var>8</var>;</td></tr>
<tr><th id="634">634</th><td>    } <b>else</b> {  <i>/* Non-FP argument is on stack. */</i></td></tr>
<tr><th id="635">635</th><td>      <b>if</b> (<a class="macro" href="lj_arch.h.html#599" title="0" data-ref="_M/LJ_32">LJ_32</a> &amp;&amp; <a class="local col6 ref" href="#486ref" title='ref' data-ref="486ref" data-ref-filename="486ref">ref</a> &lt; <a class="macro" href="lj_asm.c.html#111" title="REF_TRUE" data-ref="_M/ASMREF_TMP1">ASMREF_TMP1</a>) {</td></tr>
<tr><th id="636">636</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_movmroi" title='emit_movmroi' data-ref="emit_movmroi" data-ref-filename="emit_movmroi">emit_movmroi</a>(<a class="local col7 ref" href="#477as" title='as' data-ref="477as" data-ref-filename="477as">as</a>, <a class="enum" href="lj_target_x86.h.html#30" title='RID_ESP' data-ref="RID_ESP" data-ref-filename="RID_ESP">RID_ESP</a>, <a class="local col2 ref" href="#482ofs" title='ofs' data-ref="482ofs" data-ref-filename="482ofs">ofs</a>, <a class="local col7 ref" href="#487ir" title='ir' data-ref="487ir" data-ref-filename="487ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#IRIns::i" title='IRIns::i' data-ref="IRIns::i" data-ref-filename="IRIns..i">i</a>);</td></tr>
<tr><th id="637">637</th><td>      } <b>else</b> {</td></tr>
<tr><th id="638">638</th><td>	<a class="local col8 ref" href="#488r" title='r' data-ref="488r" data-ref-filename="488r">r</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col7 ref" href="#477as" title='as' data-ref="477as" data-ref-filename="477as">as</a>, <a class="local col6 ref" href="#486ref" title='ref' data-ref="486ref" data-ref-filename="486ref">ref</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="639">639</th><td>	<a class="macro" href="lj_emit_x86.h.html#262" title="emit_rmro(as, XO_MOVto, ((0x200|0x080000) + r), (RID_ESP), (ofs))" data-ref="_M/emit_movtomro">emit_movtomro</a>(<a class="local col7 ref" href="#477as" title='as' data-ref="477as" data-ref-filename="477as">as</a>, <a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a> + <a class="local col8 ref" href="#488r" title='r' data-ref="488r" data-ref-filename="488r">r</a>, <a class="enum" href="lj_target_x86.h.html#30" title='RID_ESP' data-ref="RID_ESP" data-ref-filename="RID_ESP">RID_ESP</a>, <a class="local col2 ref" href="#482ofs" title='ofs' data-ref="482ofs" data-ref-filename="482ofs">ofs</a>);</td></tr>
<tr><th id="640">640</th><td>      }</td></tr>
<tr><th id="641">641</th><td>      <a class="local col2 ref" href="#482ofs" title='ofs' data-ref="482ofs" data-ref-filename="482ofs">ofs</a> += <b>sizeof</b>(<a class="typedef" href="../include/stdint.h.html#intptr_t" title='intptr_t' data-type='long' data-ref="intptr_t" data-ref-filename="intptr_t">intptr_t</a>);</td></tr>
<tr><th id="642">642</th><td>    }</td></tr>
<tr><th id="643">643</th><td>    <a class="tu ref fn" href="lj_asm.c.html#checkmclim" title='checkmclim' data-use='c' data-ref="checkmclim" data-ref-filename="checkmclim">checkmclim</a>(<a class="local col7 ref" href="#477as" title='as' data-ref="477as" data-ref-filename="477as">as</a>);</td></tr>
<tr><th id="644">644</th><td>  }</td></tr>
<tr><th id="645">645</th><td><u>#<span data-ppcond="645">if</span> <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp; !<a class="macro" href="lj_arch.h.html#622" title="0" data-ref="_M/LJ_ABI_WIN">LJ_ABI_WIN</a></u></td></tr>
<tr><th id="646">646</th><td>  <b>if</b> (<a class="local col5 ref" href="#485patchnfpr" title='patchnfpr' data-ref="485patchnfpr" data-ref-filename="485patchnfpr">patchnfpr</a>) *<a class="local col5 ref" href="#485patchnfpr" title='patchnfpr' data-ref="485patchnfpr" data-ref-filename="485patchnfpr">patchnfpr</a> = <a class="local col4 ref" href="#484fpr" title='fpr' data-ref="484fpr" data-ref-filename="484fpr">fpr</a> - <a class="macro" href="lj_target_x86.h.html#105" title="RID_XMM0" data-ref="_M/REGARG_FIRSTFPR">REGARG_FIRSTFPR</a>;</td></tr>
<tr><th id="647">647</th><td><u>#<span data-ppcond="645">endif</span></u></td></tr>
<tr><th id="648">648</th><td>}</td></tr>
<tr><th id="649">649</th><td></td></tr>
<tr><th id="650">650</th><td><i>/* Setup result reg/sp for call. Evict scratch regs. */</i></td></tr>
<tr><th id="651">651</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_setupresult" title='asm_setupresult' data-ref="asm_setupresult" data-ref-filename="asm_setupresult">asm_setupresult</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col9 decl" id="489as" title='as' data-type='ASMState *' data-ref="489as" data-ref-filename="489as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col0 decl" id="490ir" title='ir' data-type='IRIns *' data-ref="490ir" data-ref-filename="490ir">ir</dfn>, <em>const</em> <a class="typedef" href="lj_ircall.h.html#CCallInfo" title='CCallInfo' data-type='struct CCallInfo' data-ref="CCallInfo" data-ref-filename="CCallInfo">CCallInfo</a> *<dfn class="local col1 decl" id="491ci" title='ci' data-type='const CCallInfo *' data-ref="491ci" data-ref-filename="491ci">ci</dfn>)</td></tr>
<tr><th id="652">652</th><td>{</td></tr>
<tr><th id="653">653</th><td>  <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col2 decl" id="492drop" title='drop' data-type='RegSet' data-ref="492drop" data-ref-filename="492drop">drop</dfn> = <a class="macro" href="lj_target_x86.h.html#98" title="(((((RegSet)1) &lt;&lt; (RID_EAX))|(((RegSet)1) &lt;&lt; (RID_ECX))|(((RegSet)1) &lt;&lt; (RID_EDX)))|(((((RegSet)1) &lt;&lt; ((RID_R11D+1)-(RID_ESI)))-1) &lt;&lt; (RID_ESI))|((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR))))" data-ref="_M/RSET_SCRATCH">RSET_SCRATCH</a>;</td></tr>
<tr><th id="654">654</th><td>  <em>int</em> <dfn class="local col3 decl" id="493hiop" title='hiop' data-type='int' data-ref="493hiop" data-ref-filename="493hiop">hiop</dfn> = (<a class="macro" href="lj_arch.h.html#599" title="0" data-ref="_M/LJ_32">LJ_32</a> &amp;&amp; (<a class="local col0 ref" href="#490ir" title='ir' data-ref="490ir" data-ref-filename="490ir">ir</a>+<var>1</var>)-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_HIOP' data-ref="IR_HIOP" data-ref-filename="IR_HIOP">IR_HIOP</a> &amp;&amp; !<a class="macro" href="lj_ir.h.html#356" title="(((IRType)(((ir+1)-&gt;t).irt &amp; IRT_TYPE)) == IRT_NIL)" data-ref="_M/irt_isnil">irt_isnil</a>((<a class="local col0 ref" href="#490ir" title='ir' data-ref="490ir" data-ref-filename="490ir">ir</a>+<var>1</var>)-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>));</td></tr>
<tr><th id="655">655</th><td>  <b>if</b> ((<a class="local col1 ref" href="#491ci" title='ci' data-ref="491ci" data-ref-filename="491ci">ci</a>-&gt;<a class="ref field" href="lj_ircall.h.html#CCallInfo::flags" title='CCallInfo::flags' data-ref="CCallInfo::flags" data-ref-filename="CCallInfo..flags">flags</a> &amp; <a class="macro" href="lj_ircall.h.html#41" title="0x0400" data-ref="_M/CCI_NOFPRCLOBBER">CCI_NOFPRCLOBBER</a>))</td></tr>
<tr><th id="656">656</th><td>    <a class="local col2 ref" href="#492drop" title='drop' data-ref="492drop" data-ref-filename="492drop">drop</a> &amp;= ~<a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>;</td></tr>
<tr><th id="657">657</th><td>  <b>if</b> (<a class="macro" href="lj_target.h.html#28" title="(!((ir-&gt;r) &amp; 0x80))" data-ref="_M/ra_hasreg">ra_hasreg</a>(<a class="local col0 ref" href="#490ir" title='ir' data-ref="490ir" data-ref-filename="490ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>))</td></tr>
<tr><th id="658">658</th><td>    <a class="macro" href="lj_target.h.html#70" title="(drop &amp;= ~(((RegSet)1) &lt;&lt; (ir-&gt;r)))" data-ref="_M/rset_clear">rset_clear</a>(<a class="local col2 ref" href="#492drop" title='drop' data-ref="492drop" data-ref-filename="492drop">drop</a>, <a class="local col0 ref" href="#490ir" title='ir' data-ref="490ir" data-ref-filename="490ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>);  <i>/* Dest reg handled below. */</i></td></tr>
<tr><th id="659">659</th><td>  <b>if</b> (<a class="local col3 ref" href="#493hiop" title='hiop' data-ref="493hiop" data-ref-filename="493hiop">hiop</a> &amp;&amp; <a class="macro" href="lj_target.h.html#28" title="(!(((ir+1)-&gt;r) &amp; 0x80))" data-ref="_M/ra_hasreg">ra_hasreg</a>((<a class="local col0 ref" href="#490ir" title='ir' data-ref="490ir" data-ref-filename="490ir">ir</a>+<var>1</var>)-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>))</td></tr>
<tr><th id="660">660</th><td>    <a class="macro" href="lj_target.h.html#70" title="(drop &amp;= ~(((RegSet)1) &lt;&lt; ((ir+1)-&gt;r)))" data-ref="_M/rset_clear">rset_clear</a>(<a class="local col2 ref" href="#492drop" title='drop' data-ref="492drop" data-ref-filename="492drop">drop</a>, (<a class="local col0 ref" href="#490ir" title='ir' data-ref="490ir" data-ref-filename="490ir">ir</a>+<var>1</var>)-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>);  <i>/* Dest reg handled below. */</i></td></tr>
<tr><th id="661">661</th><td>  <a class="tu ref fn" href="lj_asm.c.html#ra_evictset" title='ra_evictset' data-use='c' data-ref="ra_evictset" data-ref-filename="ra_evictset">ra_evictset</a>(<a class="local col9 ref" href="#489as" title='as' data-ref="489as" data-ref-filename="489as">as</a>, <a class="local col2 ref" href="#492drop" title='drop' data-ref="492drop" data-ref-filename="492drop">drop</a>);  <i>/* Evictions must be performed first. */</i></td></tr>
<tr><th id="662">662</th><td>  <b>if</b> (<a class="macro" href="lj_asm.c.html#309" title="((!(((ir)-&gt;r) &amp; 0x80)) || (((ir)-&gt;s) != 0))" data-ref="_M/ra_used">ra_used</a>(<a class="local col0 ref" href="#490ir" title='ir' data-ref="490ir" data-ref-filename="490ir">ir</a>)) {</td></tr>
<tr><th id="663">663</th><td>    <b>if</b> (<a class="macro" href="lj_ir.h.html#373" title="((((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM) || (((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_FLOAT))" data-ref="_M/irt_isfp">irt_isfp</a>(<a class="local col0 ref" href="#490ir" title='ir' data-ref="490ir" data-ref-filename="490ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="664">664</th><td>      <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> <dfn class="local col4 decl" id="494ofs" title='ofs' data-type='int32_t' data-ref="494ofs" data-ref-filename="494ofs">ofs</dfn> = <a class="macro" href="lj_target_x86.h.html#152" title="(4 * (int32_t)(ir-&gt;s))" data-ref="_M/sps_scale">sps_scale</a>(<a class="local col0 ref" href="#490ir" title='ir' data-ref="490ir" data-ref-filename="490ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::s' data-ref="IRIns::(anonymous)::s" data-ref-filename="IRIns..(anonymous)..s">s</a>);  <i>/* Use spill slot or temp slots. */</i></td></tr>
<tr><th id="665">665</th><td><u>#<span data-ppcond="665">if</span> <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a></u></td></tr>
<tr><th id="666">666</th><td>      <b>if</b> ((<a class="local col1 ref" href="#491ci" title='ci' data-ref="491ci" data-ref-filename="491ci">ci</a>-&gt;<a class="ref field" href="lj_ircall.h.html#CCallInfo::flags" title='CCallInfo::flags' data-ref="CCallInfo::flags" data-ref-filename="CCallInfo..flags">flags</a> &amp; <a class="macro" href="lj_ircall.h.html#40" title="0x0200" data-ref="_M/CCI_CASTU64">CCI_CASTU64</a>)) {</td></tr>
<tr><th id="667">667</th><td>	<a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col5 decl" id="495dest" title='dest' data-type='Reg' data-ref="495dest" data-ref-filename="495dest">dest</dfn> = <a class="local col0 ref" href="#490ir" title='ir' data-ref="490ir" data-ref-filename="490ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>;</td></tr>
<tr><th id="668">668</th><td>	<b>if</b> (<a class="macro" href="lj_target.h.html#28" title="(!((dest) &amp; 0x80))" data-ref="_M/ra_hasreg">ra_hasreg</a>(<a class="local col5 ref" href="#495dest" title='dest' data-ref="495dest" data-ref-filename="495dest">dest</a>)) {</td></tr>
<tr><th id="669">669</th><td>	  <a class="macro" href="lj_asm.c.html#304" title="(as-&gt;freeset |= (((RegSet)1) &lt;&lt; ((dest))))" data-ref="_M/ra_free">ra_free</a>(<a class="local col9 ref" href="#489as" title='as' data-ref="489as" data-ref-filename="489as">as</a>, <a class="local col5 ref" href="#495dest" title='dest' data-ref="495dest" data-ref-filename="495dest">dest</a>);</td></tr>
<tr><th id="670">670</th><td>	  <a class="macro" href="lj_asm.c.html#305" title="(as-&gt;modset |= (((RegSet)1) &lt;&lt; ((dest))))" data-ref="_M/ra_modified">ra_modified</a>(<a class="local col9 ref" href="#489as" title='as' data-ref="489as" data-ref-filename="489as">as</a>, <a class="local col5 ref" href="#495dest" title='dest' data-ref="495dest" data-ref-filename="495dest">dest</a>);</td></tr>
<tr><th id="671">671</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col9 ref" href="#489as" title='as' data-ref="489as" data-ref-filename="489as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOVD" title='XO_MOVD' data-ref="XO_MOVD" data-ref-filename="XO_MOVD">XO_MOVD</a>, <a class="local col5 ref" href="#495dest" title='dest' data-ref="495dest" data-ref-filename="495dest">dest</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="enum" href="lj_target_x86.h.html#RID_RET" title='RID_RET' data-ref="RID_RET" data-ref-filename="RID_RET">RID_RET</a>);  <i>/* Really MOVQ. */</i></td></tr>
<tr><th id="672">672</th><td>	}</td></tr>
<tr><th id="673">673</th><td>	<b>if</b> (<a class="local col4 ref" href="#494ofs" title='ofs' data-ref="494ofs" data-ref-filename="494ofs">ofs</a>) <a class="macro" href="lj_emit_x86.h.html#262" title="emit_rmro(as, XO_MOVto, (RID_RET|(0x200|0x080000)), (RID_ESP), (ofs))" data-ref="_M/emit_movtomro">emit_movtomro</a>(<a class="local col9 ref" href="#489as" title='as' data-ref="489as" data-ref-filename="489as">as</a>, <a class="enum" href="lj_target_x86.h.html#RID_RET" title='RID_RET' data-ref="RID_RET" data-ref-filename="RID_RET">RID_RET</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="enum" href="lj_target_x86.h.html#30" title='RID_ESP' data-ref="RID_ESP" data-ref-filename="RID_ESP">RID_ESP</a>, <a class="local col4 ref" href="#494ofs" title='ofs' data-ref="494ofs" data-ref-filename="494ofs">ofs</a>);</td></tr>
<tr><th id="674">674</th><td>      } <b>else</b> {</td></tr>
<tr><th id="675">675</th><td>	<a class="tu ref fn" href="lj_asm.c.html#ra_destreg" title='ra_destreg' data-use='c' data-ref="ra_destreg" data-ref-filename="ra_destreg">ra_destreg</a>(<a class="local col9 ref" href="#489as" title='as' data-ref="489as" data-ref-filename="489as">as</a>, <a class="local col0 ref" href="#490ir" title='ir' data-ref="490ir" data-ref-filename="490ir">ir</a>, <a class="enum" href="lj_target_x86.h.html#RID_FPRET" title='RID_FPRET' data-ref="RID_FPRET" data-ref-filename="RID_FPRET">RID_FPRET</a>);</td></tr>
<tr><th id="676">676</th><td>      }</td></tr>
<tr><th id="677">677</th><td><u>#<span data-ppcond="665">else</span></u></td></tr>
<tr><th id="678">678</th><td>      <i>/* Number result is in x87 st0 for x86 calling convention. */</i></td></tr>
<tr><th id="679">679</th><td>      Reg dest = ir-&gt;r;</td></tr>
<tr><th id="680">680</th><td>      <b>if</b> (ra_hasreg(dest)) {</td></tr>
<tr><th id="681">681</th><td>	ra_free(as, dest);</td></tr>
<tr><th id="682">682</th><td>	ra_modified(as, dest);</td></tr>
<tr><th id="683">683</th><td>	emit_rmro(as, irt_isnum(ir-&gt;t) ? XO_MOVSD : XO_MOVSS,</td></tr>
<tr><th id="684">684</th><td>		  dest, RID_ESP, ofs);</td></tr>
<tr><th id="685">685</th><td>      }</td></tr>
<tr><th id="686">686</th><td>      <b>if</b> ((ci-&gt;flags &amp; CCI_CASTU64)) {</td></tr>
<tr><th id="687">687</th><td>	emit_movtomro(as, RID_RETLO, RID_ESP, ofs);</td></tr>
<tr><th id="688">688</th><td>	emit_movtomro(as, RID_RETHI, RID_ESP, ofs+<var>4</var>);</td></tr>
<tr><th id="689">689</th><td>      } <b>else</b> {</td></tr>
<tr><th id="690">690</th><td>	emit_rmro(as, irt_isnum(ir-&gt;t) ? XO_FSTPq : XO_FSTPd,</td></tr>
<tr><th id="691">691</th><td>		  irt_isnum(ir-&gt;t) ? XOg_FSTPq : XOg_FSTPd, RID_ESP, ofs);</td></tr>
<tr><th id="692">692</th><td>      }</td></tr>
<tr><th id="693">693</th><td><u>#<span data-ppcond="665">endif</span></u></td></tr>
<tr><th id="694">694</th><td><u>#<span data-ppcond="694">if</span> <a class="macro" href="lj_arch.h.html#599" title="0" data-ref="_M/LJ_32">LJ_32</a></u></td></tr>
<tr><th id="695">695</th><td>    } <b>else</b> <b>if</b> (hiop) {</td></tr>
<tr><th id="696">696</th><td>      ra_destpair(as, ir);</td></tr>
<tr><th id="697">697</th><td><u>#<span data-ppcond="694">endif</span></u></td></tr>
<tr><th id="698">698</th><td>    } <b>else</b> {</td></tr>
<tr><th id="699">699</th><td>      <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(!irt_ispri(ir-&gt;t), <q>"PRI dest"</q>);</td></tr>
<tr><th id="700">700</th><td>      <a class="tu ref fn" href="lj_asm.c.html#ra_destreg" title='ra_destreg' data-use='c' data-ref="ra_destreg" data-ref-filename="ra_destreg">ra_destreg</a>(<a class="local col9 ref" href="#489as" title='as' data-ref="489as" data-ref-filename="489as">as</a>, <a class="local col0 ref" href="#490ir" title='ir' data-ref="490ir" data-ref-filename="490ir">ir</a>, <a class="enum" href="lj_target_x86.h.html#RID_RET" title='RID_RET' data-ref="RID_RET" data-ref-filename="RID_RET">RID_RET</a>);</td></tr>
<tr><th id="701">701</th><td>    }</td></tr>
<tr><th id="702">702</th><td>  } <b>else</b> <b>if</b> (<a class="macro" href="lj_arch.h.html#599" title="0" data-ref="_M/LJ_32">LJ_32</a> &amp;&amp; <a class="macro" href="lj_ir.h.html#373" title="((((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM) || (((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_FLOAT))" data-ref="_M/irt_isfp">irt_isfp</a>(<a class="local col0 ref" href="#490ir" title='ir' data-ref="490ir" data-ref-filename="490ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) &amp;&amp; !(<a class="local col1 ref" href="#491ci" title='ci' data-ref="491ci" data-ref-filename="491ci">ci</a>-&gt;<a class="ref field" href="lj_ircall.h.html#CCallInfo::flags" title='CCallInfo::flags' data-ref="CCallInfo::flags" data-ref-filename="CCallInfo..flags">flags</a> &amp; <a class="macro" href="lj_ircall.h.html#40" title="0x0200" data-ref="_M/CCI_CASTU64">CCI_CASTU64</a>)) {</td></tr>
<tr><th id="703">703</th><td>    <a class="macro" href="lj_emit_x86.h.html#33" title="(*(uint16_t *)(as-&gt;mcp-2) = (uint16_t)(XI_FPOP), as-&gt;mcp -= 2)" data-ref="_M/emit_x87op">emit_x87op</a>(<a class="local col9 ref" href="#489as" title='as' data-ref="489as" data-ref-filename="489as">as</a>, <a class="enum" href="lj_target_x86.h.html#XI_FPOP" title='XI_FPOP' data-ref="XI_FPOP" data-ref-filename="XI_FPOP">XI_FPOP</a>);  <i>/* Pop unused result from x87 st0. */</i></td></tr>
<tr><th id="704">704</th><td>  }</td></tr>
<tr><th id="705">705</th><td>}</td></tr>
<tr><th id="706">706</th><td></td></tr>
<tr><th id="707">707</th><td><i>/* Return a constant function pointer or NULL for indirect calls. */</i></td></tr>
<tr><th id="708">708</th><td><em>static</em> <em>void</em> *<dfn class="decl def fn" id="asm_callx_func" title='asm_callx_func' data-ref="asm_callx_func" data-ref-filename="asm_callx_func">asm_callx_func</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col6 decl" id="496as" title='as' data-type='ASMState *' data-ref="496as" data-ref-filename="496as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col7 decl" id="497irf" title='irf' data-type='IRIns *' data-ref="497irf" data-ref-filename="497irf">irf</dfn>, <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col8 decl" id="498func" title='func' data-type='IRRef' data-ref="498func" data-ref-filename="498func">func</dfn>)</td></tr>
<tr><th id="709">709</th><td>{</td></tr>
<tr><th id="710">710</th><td><u>#<span data-ppcond="710">if</span> <a class="macro" href="lj_arch.h.html#599" title="0" data-ref="_M/LJ_32">LJ_32</a></u></td></tr>
<tr><th id="711">711</th><td>  UNUSED(as);</td></tr>
<tr><th id="712">712</th><td>  <b>if</b> (irref_isk(func))</td></tr>
<tr><th id="713">713</th><td>    <b>return</b> (<em>void</em> *)irf-&gt;i;</td></tr>
<tr><th id="714">714</th><td><u>#<span data-ppcond="710">else</span></u></td></tr>
<tr><th id="715">715</th><td>  <b>if</b> (<a class="macro" href="lj_ir.h.html#470" title="((func) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col8 ref" href="#498func" title='func' data-ref="498func" data-ref-filename="498func">func</a>)) {</td></tr>
<tr><th id="716">716</th><td>    <a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *<dfn class="local col9 decl" id="499p" title='p' data-type='MCode *' data-ref="499p" data-ref-filename="499p">p</dfn>;</td></tr>
<tr><th id="717">717</th><td>    <b>if</b> (<a class="local col7 ref" href="#497irf" title='irf' data-ref="497irf" data-ref-filename="497irf">irf</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_KINT64' data-ref="IR_KINT64" data-ref-filename="IR_KINT64">IR_KINT64</a>)</td></tr>
<tr><th id="718">718</th><td>      <a class="local col9 ref" href="#499p" title='p' data-ref="499p" data-ref-filename="499p">p</a> = (<a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *)(<em>void</em> *)<a class="macro" href="lj_ir.h.html#578" title="(&amp;(irf)[1].tv)" data-ref="_M/ir_k64">ir_k64</a>(<a class="local col7 ref" href="#497irf" title='irf' data-ref="497irf" data-ref-filename="497irf">irf</a>)-&gt;<a class="ref field" href="lj_obj.h.html#TValue::u64" title='TValue::u64' data-ref="TValue::u64" data-ref-filename="TValue..u64">u64</a>;</td></tr>
<tr><th id="719">719</th><td>    <b>else</b></td></tr>
<tr><th id="720">720</th><td>      <a class="local col9 ref" href="#499p" title='p' data-ref="499p" data-ref-filename="499p">p</a> = (<a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *)(<em>void</em> *)(<a class="typedef" href="../include/stdint.h.html#uintptr_t" title='uintptr_t' data-type='unsigned long' data-ref="uintptr_t" data-ref-filename="uintptr_t">uintptr_t</a>)(<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a>)<a class="local col7 ref" href="#497irf" title='irf' data-ref="497irf" data-ref-filename="497irf">irf</a>-&gt;<a class="ref field" href="lj_ir.h.html#IRIns::i" title='IRIns::i' data-ref="IRIns::i" data-ref-filename="IRIns..i">i</a>;</td></tr>
<tr><th id="721">721</th><td>    <b>if</b> (<a class="local col9 ref" href="#499p" title='p' data-ref="499p" data-ref-filename="499p">p</a> - <a class="local col6 ref" href="#496as" title='as' data-ref="496as" data-ref-filename="496as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcp" title='ASMState::mcp' data-use='r' data-ref="ASMState::mcp" data-ref-filename="ASMState..mcp">mcp</a> == (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)(<a class="local col9 ref" href="#499p" title='p' data-ref="499p" data-ref-filename="499p">p</a> - <a class="local col6 ref" href="#496as" title='as' data-ref="496as" data-ref-filename="496as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcp" title='ASMState::mcp' data-use='r' data-ref="ASMState::mcp" data-ref-filename="ASMState..mcp">mcp</a>))</td></tr>
<tr><th id="722">722</th><td>      <b>return</b> <a class="local col9 ref" href="#499p" title='p' data-ref="499p" data-ref-filename="499p">p</a>;  <i>/* Call target is still in +-2GB range. */</i></td></tr>
<tr><th id="723">723</th><td>    <i>/* Avoid the indirect case of emit_call(). Try to hoist func addr. */</i></td></tr>
<tr><th id="724">724</th><td>  }</td></tr>
<tr><th id="725">725</th><td><u>#<span data-ppcond="710">endif</span></u></td></tr>
<tr><th id="726">726</th><td>  <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="727">727</th><td>}</td></tr>
<tr><th id="728">728</th><td></td></tr>
<tr><th id="729">729</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_callx" title='asm_callx' data-ref="asm_callx" data-ref-filename="asm_callx">asm_callx</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col0 decl" id="500as" title='as' data-type='ASMState *' data-ref="500as" data-ref-filename="500as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col1 decl" id="501ir" title='ir' data-type='IRIns *' data-ref="501ir" data-ref-filename="501ir">ir</dfn>)</td></tr>
<tr><th id="730">730</th><td>{</td></tr>
<tr><th id="731">731</th><td>  <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col2 decl" id="502args" title='args' data-type='IRRef [64]' data-ref="502args" data-ref-filename="502args">args</dfn>[<a class="macro" href="lj_ircall.h.html#20" title="32" data-ref="_M/CCI_NARGS_MAX">CCI_NARGS_MAX</a>*<var>2</var>];</td></tr>
<tr><th id="732">732</th><td>  <a class="typedef" href="lj_ircall.h.html#CCallInfo" title='CCallInfo' data-type='struct CCallInfo' data-ref="CCallInfo" data-ref-filename="CCallInfo">CCallInfo</a> <dfn class="local col3 decl" id="503ci" title='ci' data-type='CCallInfo' data-ref="503ci" data-ref-filename="503ci">ci</dfn>;</td></tr>
<tr><th id="733">733</th><td>  <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col4 decl" id="504func" title='func' data-type='IRRef' data-ref="504func" data-ref-filename="504func">func</dfn>;</td></tr>
<tr><th id="734">734</th><td>  <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col5 decl" id="505irf" title='irf' data-type='IRIns *' data-ref="505irf" data-ref-filename="505irf">irf</dfn>;</td></tr>
<tr><th id="735">735</th><td>  <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> <dfn class="local col6 decl" id="506spadj" title='spadj' data-type='int32_t' data-ref="506spadj" data-ref-filename="506spadj">spadj</dfn> = <var>0</var>;</td></tr>
<tr><th id="736">736</th><td>  <a class="local col3 ref" href="#503ci" title='ci' data-ref="503ci" data-ref-filename="503ci">ci</a>.<a class="ref field" href="lj_ircall.h.html#CCallInfo::flags" title='CCallInfo::flags' data-ref="CCallInfo::flags" data-ref-filename="CCallInfo..flags">flags</a> = <a class="tu ref fn" href="lj_asm.c.html#asm_callx_flags" title='asm_callx_flags' data-use='c' data-ref="asm_callx_flags" data-ref-filename="asm_callx_flags">asm_callx_flags</a>(<a class="local col0 ref" href="#500as" title='as' data-ref="500as" data-ref-filename="500as">as</a>, <a class="local col1 ref" href="#501ir" title='ir' data-ref="501ir" data-ref-filename="501ir">ir</a>);</td></tr>
<tr><th id="737">737</th><td>  <a class="tu ref fn" href="lj_asm.c.html#asm_collectargs" title='asm_collectargs' data-use='c' data-ref="asm_collectargs" data-ref-filename="asm_collectargs">asm_collectargs</a>(<a class="local col0 ref" href="#500as" title='as' data-ref="500as" data-ref-filename="500as">as</a>, <a class="local col1 ref" href="#501ir" title='ir' data-ref="501ir" data-ref-filename="501ir">ir</a>, &amp;<a class="local col3 ref" href="#503ci" title='ci' data-ref="503ci" data-ref-filename="503ci">ci</a>, <a class="local col2 ref" href="#502args" title='args' data-ref="502args" data-ref-filename="502args">args</a>);</td></tr>
<tr><th id="738">738</th><td>  <a class="ref fn" href="#asm_setupresult" title='asm_setupresult' data-ref="asm_setupresult" data-ref-filename="asm_setupresult">asm_setupresult</a>(<a class="local col0 ref" href="#500as" title='as' data-ref="500as" data-ref-filename="500as">as</a>, <a class="local col1 ref" href="#501ir" title='ir' data-ref="501ir" data-ref-filename="501ir">ir</a>, &amp;<a class="local col3 ref" href="#503ci" title='ci' data-ref="503ci" data-ref-filename="503ci">ci</a>);</td></tr>
<tr><th id="739">739</th><td><u>#<span data-ppcond="739">if</span> <a class="macro" href="lj_arch.h.html#599" title="0" data-ref="_M/LJ_32">LJ_32</a></u></td></tr>
<tr><th id="740">740</th><td>  <i>/* Have to readjust stack after non-cdecl calls due to callee cleanup. */</i></td></tr>
<tr><th id="741">741</th><td>  <b>if</b> ((ci.flags &amp; CCI_CC_MASK) != CCI_CC_CDECL)</td></tr>
<tr><th id="742">742</th><td>    spadj = <var>4</var> * asm_count_call_slots(as, &amp;ci, args);</td></tr>
<tr><th id="743">743</th><td><u>#<span data-ppcond="739">endif</span></u></td></tr>
<tr><th id="744">744</th><td>  <a class="local col4 ref" href="#504func" title='func' data-ref="504func" data-ref-filename="504func">func</a> = <a class="local col1 ref" href="#501ir" title='ir' data-ref="501ir" data-ref-filename="501ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>; <a class="local col5 ref" href="#505irf" title='irf' data-ref="505irf" data-ref-filename="505irf">irf</a> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(func)])" data-ref="_M/IR">IR</a>(<a class="local col4 ref" href="#504func" title='func' data-ref="504func" data-ref-filename="504func">func</a>);</td></tr>
<tr><th id="745">745</th><td>  <b>if</b> (<a class="local col5 ref" href="#505irf" title='irf' data-ref="505irf" data-ref-filename="505irf">irf</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_CARG' data-ref="IR_CARG" data-ref-filename="IR_CARG">IR_CARG</a>) { <a class="local col4 ref" href="#504func" title='func' data-ref="504func" data-ref-filename="504func">func</a> = <a class="local col5 ref" href="#505irf" title='irf' data-ref="505irf" data-ref-filename="505irf">irf</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>; <a class="local col5 ref" href="#505irf" title='irf' data-ref="505irf" data-ref-filename="505irf">irf</a> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(func)])" data-ref="_M/IR">IR</a>(<a class="local col4 ref" href="#504func" title='func' data-ref="504func" data-ref-filename="504func">func</a>); }</td></tr>
<tr><th id="746">746</th><td>  <a class="local col3 ref" href="#503ci" title='ci' data-ref="503ci" data-ref-filename="503ci">ci</a>.<a class="ref field" href="lj_ircall.h.html#CCallInfo::func" title='CCallInfo::func' data-ref="CCallInfo::func" data-ref-filename="CCallInfo..func">func</a> = (<a class="typedef" href="lj_obj.h.html#ASMFunction" title='ASMFunction' data-type='void (*)(void)' data-ref="ASMFunction" data-ref-filename="ASMFunction">ASMFunction</a>)<a class="ref fn" href="#asm_callx_func" title='asm_callx_func' data-ref="asm_callx_func" data-ref-filename="asm_callx_func">asm_callx_func</a>(<a class="local col0 ref" href="#500as" title='as' data-ref="500as" data-ref-filename="500as">as</a>, <a class="local col5 ref" href="#505irf" title='irf' data-ref="505irf" data-ref-filename="505irf">irf</a>, <a class="local col4 ref" href="#504func" title='func' data-ref="504func" data-ref-filename="504func">func</a>);</td></tr>
<tr><th id="747">747</th><td>  <b>if</b> (!(<em>void</em> *)<a class="local col3 ref" href="#503ci" title='ci' data-ref="503ci" data-ref-filename="503ci">ci</a>.<a class="ref field" href="lj_ircall.h.html#CCallInfo::func" title='CCallInfo::func' data-ref="CCallInfo::func" data-ref-filename="CCallInfo..func">func</a>) {</td></tr>
<tr><th id="748">748</th><td>    <i>/* Use a (hoistable) non-scratch register for indirect calls. */</i></td></tr>
<tr><th id="749">749</th><td>    <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col7 decl" id="507allow" title='allow' data-type='RegSet' data-ref="507allow" data-ref-filename="507allow">allow</dfn> = (<a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a> &amp; ~<a class="macro" href="lj_target_x86.h.html#98" title="(((((RegSet)1) &lt;&lt; (RID_EAX))|(((RegSet)1) &lt;&lt; (RID_ECX))|(((RegSet)1) &lt;&lt; (RID_EDX)))|(((((RegSet)1) &lt;&lt; ((RID_R11D+1)-(RID_ESI)))-1) &lt;&lt; (RID_ESI))|((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR))))" data-ref="_M/RSET_SCRATCH">RSET_SCRATCH</a>);</td></tr>
<tr><th id="750">750</th><td>    <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col8 decl" id="508r" title='r' data-type='Reg' data-ref="508r" data-ref-filename="508r">r</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col0 ref" href="#500as" title='as' data-ref="500as" data-ref-filename="500as">as</a>, <a class="local col4 ref" href="#504func" title='func' data-ref="504func" data-ref-filename="504func">func</a>, <a class="local col7 ref" href="#507allow" title='allow' data-ref="507allow" data-ref-filename="507allow">allow</a>);</td></tr>
<tr><th id="751">751</th><td>    <b>if</b> (<a class="macro" href="lj_arch.h.html#599" title="0" data-ref="_M/LJ_32">LJ_32</a>) <a class="macro" href="lj_emit_x86.h.html#568" title="emit_addptr(as, RID_ESP|(0x200|0x080000), -(spadj))" data-ref="_M/emit_spsub">emit_spsub</a>(<a class="local col0 ref" href="#500as" title='as' data-ref="500as" data-ref-filename="500as">as</a>, <a class="local col6 ref" href="#506spadj" title='spadj' data-ref="506spadj" data-ref-filename="506spadj">spadj</a>);  <i>/* Above code may cause restores! */</i></td></tr>
<tr><th id="752">752</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col0 ref" href="#500as" title='as' data-ref="500as" data-ref-filename="500as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_GROUP5" title='XO_GROUP5' data-ref="XO_GROUP5" data-ref-filename="XO_GROUP5">XO_GROUP5</a>, <a class="enum" href="lj_target_x86.h.html#XOg_CALL" title='XOg_CALL' data-ref="XOg_CALL" data-ref-filename="XOg_CALL">XOg_CALL</a>, <a class="local col8 ref" href="#508r" title='r' data-ref="508r" data-ref-filename="508r">r</a>);</td></tr>
<tr><th id="753">753</th><td>  } <b>else</b> <b>if</b> (<a class="macro" href="lj_arch.h.html#599" title="0" data-ref="_M/LJ_32">LJ_32</a>) {</td></tr>
<tr><th id="754">754</th><td>    <a class="macro" href="lj_emit_x86.h.html#568" title="emit_addptr(as, RID_ESP|(0x200|0x080000), -(spadj))" data-ref="_M/emit_spsub">emit_spsub</a>(<a class="local col0 ref" href="#500as" title='as' data-ref="500as" data-ref-filename="500as">as</a>, <a class="local col6 ref" href="#506spadj" title='spadj' data-ref="506spadj" data-ref-filename="506spadj">spadj</a>);</td></tr>
<tr><th id="755">755</th><td>  }</td></tr>
<tr><th id="756">756</th><td>  <a class="ref fn" href="#asm_gencall" title='asm_gencall' data-ref="asm_gencall" data-ref-filename="asm_gencall">asm_gencall</a>(<a class="local col0 ref" href="#500as" title='as' data-ref="500as" data-ref-filename="500as">as</a>, &amp;<a class="local col3 ref" href="#503ci" title='ci' data-ref="503ci" data-ref-filename="503ci">ci</a>, <a class="local col2 ref" href="#502args" title='args' data-ref="502args" data-ref-filename="502args">args</a>);</td></tr>
<tr><th id="757">757</th><td>}</td></tr>
<tr><th id="758">758</th><td></td></tr>
<tr><th id="759">759</th><td><i>/* -- Returns ------------------------------------------------------------- */</i></td></tr>
<tr><th id="760">760</th><td></td></tr>
<tr><th id="761">761</th><td><i>/* Return to lower frame. Guard that it goes to the right spot. */</i></td></tr>
<tr><th id="762">762</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_retf" title='asm_retf' data-ref="asm_retf" data-ref-filename="asm_retf">asm_retf</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col9 decl" id="509as" title='as' data-type='ASMState *' data-ref="509as" data-ref-filename="509as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col0 decl" id="510ir" title='ir' data-type='IRIns *' data-ref="510ir" data-ref-filename="510ir">ir</dfn>)</td></tr>
<tr><th id="763">763</th><td>{</td></tr>
<tr><th id="764">764</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col1 decl" id="511base" title='base' data-type='Reg' data-ref="511base" data-ref-filename="511base">base</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col9 ref" href="#509as" title='as' data-ref="509as" data-ref-filename="509as">as</a>, <a class="enum" href="lj_ir.h.html#REF_BASE" title='REF_BASE' data-ref="REF_BASE" data-ref-filename="REF_BASE">REF_BASE</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="765">765</th><td><u>#<span data-ppcond="765">if</span> <a class="macro" href="lj_arch.h.html#533" title="1" data-ref="_M/LJ_FR2">LJ_FR2</a></u></td></tr>
<tr><th id="766">766</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col2 decl" id="512rpc" title='rpc' data-type='Reg' data-ref="512rpc" data-ref-filename="512rpc">rpc</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_scratch" title='ra_scratch' data-use='c' data-ref="ra_scratch" data-ref-filename="ra_scratch">ra_scratch</a>(<a class="local col9 ref" href="#509as" title='as' data-ref="509as" data-ref-filename="509as">as</a>, <a class="macro" href="lj_target.h.html#71" title="(((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH))) &amp; ~(((RegSet)1) &lt;&lt; (base)))" data-ref="_M/rset_exclude">rset_exclude</a>(<a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>, <a class="local col1 ref" href="#511base" title='base' data-ref="511base" data-ref-filename="511base">base</a>));</td></tr>
<tr><th id="767">767</th><td><u>#<span data-ppcond="765">endif</span></u></td></tr>
<tr><th id="768">768</th><td>  <em>void</em> *<dfn class="local col3 decl" id="513pc" title='pc' data-type='void *' data-ref="513pc" data-ref-filename="513pc">pc</dfn> = <a class="macro" href="lj_ir.h.html#579" title="(((void *)(void *)(((&amp;as-&gt;ir[(ir-&gt;op2)]))[1].ptr).ptr64))" data-ref="_M/ir_kptr">ir_kptr</a>(<a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ir-&gt;op2)])" data-ref="_M/IR">IR</a>(<a class="local col0 ref" href="#510ir" title='ir' data-ref="510ir" data-ref-filename="510ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>));</td></tr>
<tr><th id="769">769</th><td>  <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> <dfn class="local col4 decl" id="514delta" title='delta' data-type='int32_t' data-ref="514delta" data-ref-filename="514delta">delta</dfn> = <var>1</var>+<a class="macro" href="lj_arch.h.html#533" title="1" data-ref="_M/LJ_FR2">LJ_FR2</a>+<a class="macro" href="lj_bc.h.html#35" title="((BCReg)(((*((const BCIns *)pc - 1))&gt;&gt;8)&amp;0xff))" data-ref="_M/bc_a">bc_a</a>(*((<em>const</em> <a class="typedef" href="lj_obj.h.html#BCIns" title='BCIns' data-type='uint32_t' data-ref="BCIns" data-ref-filename="BCIns">BCIns</a> *)<a class="local col3 ref" href="#513pc" title='pc' data-ref="513pc" data-ref-filename="513pc">pc</a> - <var>1</var>));</td></tr>
<tr><th id="770">770</th><td>  <a class="local col9 ref" href="#509as" title='as' data-ref="509as" data-ref-filename="509as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::topslot" title='ASMState::topslot' data-use='w' data-ref="ASMState::topslot" data-ref-filename="ASMState..topslot">topslot</a> -= (<a class="typedef" href="lj_obj.h.html#BCReg" title='BCReg' data-type='uint32_t' data-ref="BCReg" data-ref-filename="BCReg">BCReg</a>)<a class="local col4 ref" href="#514delta" title='delta' data-ref="514delta" data-ref-filename="514delta">delta</a>;</td></tr>
<tr><th id="771">771</th><td>  <b>if</b> ((<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<a class="local col9 ref" href="#509as" title='as' data-ref="509as" data-ref-filename="509as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::topslot" title='ASMState::topslot' data-use='r' data-ref="ASMState::topslot" data-ref-filename="ASMState..topslot">topslot</a> &lt; <var>0</var>) <a class="local col9 ref" href="#509as" title='as' data-ref="509as" data-ref-filename="509as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::topslot" title='ASMState::topslot' data-use='w' data-ref="ASMState::topslot" data-ref-filename="ASMState..topslot">topslot</a> = <var>0</var>;</td></tr>
<tr><th id="772">772</th><td>  <a class="macro" href="lj_ir.h.html#431" title="(((&amp;as-&gt;ir[(REF_BASE)])-&gt;t).irt |= IRT_MARK)" data-ref="_M/irt_setmark">irt_setmark</a>(<a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(REF_BASE)])" data-ref="_M/IR">IR</a>(<a class="enum" href="lj_ir.h.html#REF_BASE" title='REF_BASE' data-ref="REF_BASE" data-ref-filename="REF_BASE">REF_BASE</a>)-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>);  <i>/* Children must not coalesce with BASE reg. */</i></td></tr>
<tr><th id="773">773</th><td>  <a class="macro" href="lj_emit_x86.h.html#269" title="emit_rma(as, (XO_MOVto), ((base)|(0x200|0x080000)), (void *)&amp;(&amp;((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;g)-&gt;jit_base)" data-ref="_M/emit_setgl">emit_setgl</a>(<a class="local col9 ref" href="#509as" title='as' data-ref="509as" data-ref-filename="509as">as</a>, <a class="local col1 ref" href="#511base" title='base' data-ref="511base" data-ref-filename="511base">base</a>, <a class="ref field" href="lj_obj.h.html#global_State::jit_base" title='global_State::jit_base' data-ref="global_State::jit_base" data-ref-filename="global_State..jit_base">jit_base</a>);</td></tr>
<tr><th id="774">774</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_addptr" title='emit_addptr' data-ref="emit_addptr" data-ref-filename="emit_addptr">emit_addptr</a>(<a class="local col9 ref" href="#509as" title='as' data-ref="509as" data-ref-filename="509as">as</a>, <a class="local col1 ref" href="#511base" title='base' data-ref="511base" data-ref-filename="511base">base</a>, -<var>8</var>*<a class="local col4 ref" href="#514delta" title='delta' data-ref="514delta" data-ref-filename="514delta">delta</a>);</td></tr>
<tr><th id="775">775</th><td>  <a class="ref fn" href="#asm_guardcc" title='asm_guardcc' data-ref="asm_guardcc" data-ref-filename="asm_guardcc">asm_guardcc</a>(<a class="local col9 ref" href="#509as" title='as' data-ref="509as" data-ref-filename="509as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_NE" title='CC_NE' data-ref="CC_NE" data-ref-filename="CC_NE">CC_NE</a>);</td></tr>
<tr><th id="776">776</th><td><u>#<span data-ppcond="776">if</span> <a class="macro" href="lj_arch.h.html#533" title="1" data-ref="_M/LJ_FR2">LJ_FR2</a></u></td></tr>
<tr><th id="777">777</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col9 ref" href="#509as" title='as' data-ref="509as" data-ref-filename="509as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_CMP" title='XO_CMP' data-ref="XO_CMP" data-ref-filename="XO_CMP">XO_CMP</a>, <a class="local col2 ref" href="#512rpc" title='rpc' data-ref="512rpc" data-ref-filename="512rpc">rpc</a>|<a class="macro" href="lj_emit_x86.h.html#24" title="(0x200|0x080000)" data-ref="_M/REX_GC64">REX_GC64</a>, <a class="local col1 ref" href="#511base" title='base' data-ref="511base" data-ref-filename="511base">base</a>, -<var>8</var>);</td></tr>
<tr><th id="778">778</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_loadu64" title='emit_loadu64' data-ref="emit_loadu64" data-ref-filename="emit_loadu64">emit_loadu64</a>(<a class="local col9 ref" href="#509as" title='as' data-ref="509as" data-ref-filename="509as">as</a>, <a class="local col2 ref" href="#512rpc" title='rpc' data-ref="512rpc" data-ref-filename="512rpc">rpc</a>, <a class="macro" href="lj_def.h.html#98" title="((uint64_t)(intptr_t)(void *)(pc))" data-ref="_M/u64ptr">u64ptr</a>(<a class="local col3 ref" href="#513pc" title='pc' data-ref="513pc" data-ref-filename="513pc">pc</a>));</td></tr>
<tr><th id="779">779</th><td><u>#<span data-ppcond="776">else</span></u></td></tr>
<tr><th id="780">780</th><td>  emit_gmroi(as, XG_ARITHi(XOg_CMP), base, -<var>4</var>, ptr2addr(pc));</td></tr>
<tr><th id="781">781</th><td><u>#<span data-ppcond="776">endif</span></u></td></tr>
<tr><th id="782">782</th><td>}</td></tr>
<tr><th id="783">783</th><td></td></tr>
<tr><th id="784">784</th><td><i>/* -- Type conversions ---------------------------------------------------- */</i></td></tr>
<tr><th id="785">785</th><td></td></tr>
<tr><th id="786">786</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_tointg" title='asm_tointg' data-ref="asm_tointg" data-ref-filename="asm_tointg">asm_tointg</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col5 decl" id="515as" title='as' data-type='ASMState *' data-ref="515as" data-ref-filename="515as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col6 decl" id="516ir" title='ir' data-type='IRIns *' data-ref="516ir" data-ref-filename="516ir">ir</dfn>, <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col7 decl" id="517left" title='left' data-type='Reg' data-ref="517left" data-ref-filename="517left">left</dfn>)</td></tr>
<tr><th id="787">787</th><td>{</td></tr>
<tr><th id="788">788</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col8 decl" id="518tmp" title='tmp' data-type='Reg' data-ref="518tmp" data-ref-filename="518tmp">tmp</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_scratch" title='ra_scratch' data-use='c' data-ref="ra_scratch" data-ref-filename="ra_scratch">ra_scratch</a>(<a class="local col5 ref" href="#515as" title='as' data-ref="515as" data-ref-filename="515as">as</a>, <a class="macro" href="lj_target.h.html#71" title="(((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR))) &amp; ~(((RegSet)1) &lt;&lt; (left)))" data-ref="_M/rset_exclude">rset_exclude</a>(<a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>, <a class="local col7 ref" href="#517left" title='left' data-ref="517left" data-ref-filename="517left">left</a>));</td></tr>
<tr><th id="789">789</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col9 decl" id="519dest" title='dest' data-type='Reg' data-ref="519dest" data-ref-filename="519dest">dest</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col5 ref" href="#515as" title='as' data-ref="515as" data-ref-filename="515as">as</a>, <a class="local col6 ref" href="#516ir" title='ir' data-ref="516ir" data-ref-filename="516ir">ir</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="790">790</th><td>  <a class="ref fn" href="#asm_guardcc" title='asm_guardcc' data-ref="asm_guardcc" data-ref-filename="asm_guardcc">asm_guardcc</a>(<a class="local col5 ref" href="#515as" title='as' data-ref="515as" data-ref-filename="515as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_P" title='CC_P' data-ref="CC_P" data-ref-filename="CC_P">CC_P</a>);</td></tr>
<tr><th id="791">791</th><td>  <a class="ref fn" href="#asm_guardcc" title='asm_guardcc' data-ref="asm_guardcc" data-ref-filename="asm_guardcc">asm_guardcc</a>(<a class="local col5 ref" href="#515as" title='as' data-ref="515as" data-ref-filename="515as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_NE" title='CC_NE' data-ref="CC_NE" data-ref-filename="CC_NE">CC_NE</a>);</td></tr>
<tr><th id="792">792</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col5 ref" href="#515as" title='as' data-ref="515as" data-ref-filename="515as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_UCOMISD" title='XO_UCOMISD' data-ref="XO_UCOMISD" data-ref-filename="XO_UCOMISD">XO_UCOMISD</a>, <a class="local col7 ref" href="#517left" title='left' data-ref="517left" data-ref-filename="517left">left</a>, <a class="local col8 ref" href="#518tmp" title='tmp' data-ref="518tmp" data-ref-filename="518tmp">tmp</a>);</td></tr>
<tr><th id="793">793</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col5 ref" href="#515as" title='as' data-ref="515as" data-ref-filename="515as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_CVTSI2SD" title='XO_CVTSI2SD' data-ref="XO_CVTSI2SD" data-ref-filename="XO_CVTSI2SD">XO_CVTSI2SD</a>, <a class="local col8 ref" href="#518tmp" title='tmp' data-ref="518tmp" data-ref-filename="518tmp">tmp</a>, <a class="local col9 ref" href="#519dest" title='dest' data-ref="519dest" data-ref-filename="519dest">dest</a>);</td></tr>
<tr><th id="794">794</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col5 ref" href="#515as" title='as' data-ref="515as" data-ref-filename="515as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_XORPS" title='XO_XORPS' data-ref="XO_XORPS" data-ref-filename="XO_XORPS">XO_XORPS</a>, <a class="local col8 ref" href="#518tmp" title='tmp' data-ref="518tmp" data-ref-filename="518tmp">tmp</a>, <a class="local col8 ref" href="#518tmp" title='tmp' data-ref="518tmp" data-ref-filename="518tmp">tmp</a>);  <i>/* Avoid partial register stall. */</i></td></tr>
<tr><th id="795">795</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col5 ref" href="#515as" title='as' data-ref="515as" data-ref-filename="515as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_CVTTSD2SI" title='XO_CVTTSD2SI' data-ref="XO_CVTTSD2SI" data-ref-filename="XO_CVTTSD2SI">XO_CVTTSD2SI</a>, <a class="local col9 ref" href="#519dest" title='dest' data-ref="519dest" data-ref-filename="519dest">dest</a>, <a class="local col7 ref" href="#517left" title='left' data-ref="517left" data-ref-filename="517left">left</a>);</td></tr>
<tr><th id="796">796</th><td>  <i>/* Can't fuse since left is needed twice. */</i></td></tr>
<tr><th id="797">797</th><td>}</td></tr>
<tr><th id="798">798</th><td></td></tr>
<tr><th id="799">799</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_tobit" title='asm_tobit' data-ref="asm_tobit" data-ref-filename="asm_tobit">asm_tobit</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col0 decl" id="520as" title='as' data-type='ASMState *' data-ref="520as" data-ref-filename="520as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col1 decl" id="521ir" title='ir' data-type='IRIns *' data-ref="521ir" data-ref-filename="521ir">ir</dfn>)</td></tr>
<tr><th id="800">800</th><td>{</td></tr>
<tr><th id="801">801</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col2 decl" id="522dest" title='dest' data-type='Reg' data-ref="522dest" data-ref-filename="522dest">dest</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col0 ref" href="#520as" title='as' data-ref="520as" data-ref-filename="520as">as</a>, <a class="local col1 ref" href="#521ir" title='ir' data-ref="521ir" data-ref-filename="521ir">ir</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="802">802</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col3 decl" id="523tmp" title='tmp' data-type='Reg' data-ref="523tmp" data-ref-filename="523tmp">tmp</dfn> = <a class="macro" href="lj_target.h.html#27" title="(((&amp;as-&gt;ir[(ir-&gt;op1)])-&gt;r) &amp; 0x80)" data-ref="_M/ra_noreg">ra_noreg</a>(<a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ir-&gt;op1)])" data-ref="_M/IR">IR</a>(<a class="local col1 ref" href="#521ir" title='ir' data-ref="521ir" data-ref-filename="521ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>)-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>) ?</td></tr>
<tr><th id="803">803</th><td>	      <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col0 ref" href="#520as" title='as' data-ref="520as" data-ref-filename="520as">as</a>, <a class="local col1 ref" href="#521ir" title='ir' data-ref="521ir" data-ref-filename="521ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>) :</td></tr>
<tr><th id="804">804</th><td>	      <a class="tu ref fn" href="lj_asm.c.html#ra_scratch" title='ra_scratch' data-use='c' data-ref="ra_scratch" data-ref-filename="ra_scratch">ra_scratch</a>(<a class="local col0 ref" href="#520as" title='as' data-ref="520as" data-ref-filename="520as">as</a>, <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>);</td></tr>
<tr><th id="805">805</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col4 decl" id="524right" title='right' data-type='Reg' data-ref="524right" data-ref-filename="524right">right</dfn>;</td></tr>
<tr><th id="806">806</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col0 ref" href="#520as" title='as' data-ref="520as" data-ref-filename="520as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOVDto" title='XO_MOVDto' data-ref="XO_MOVDto" data-ref-filename="XO_MOVDto">XO_MOVDto</a>, <a class="local col3 ref" href="#523tmp" title='tmp' data-ref="523tmp" data-ref-filename="523tmp">tmp</a>, <a class="local col2 ref" href="#522dest" title='dest' data-ref="522dest" data-ref-filename="522dest">dest</a>);</td></tr>
<tr><th id="807">807</th><td>  <a class="local col4 ref" href="#524right" title='right' data-ref="524right" data-ref-filename="524right">right</a> = <a class="ref fn" href="#asm_fuseload" title='asm_fuseload' data-ref="asm_fuseload" data-ref-filename="asm_fuseload">asm_fuseload</a>(<a class="local col0 ref" href="#520as" title='as' data-ref="520as" data-ref-filename="520as">as</a>, <a class="local col1 ref" href="#521ir" title='ir' data-ref="521ir" data-ref-filename="521ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>, <a class="macro" href="lj_target.h.html#71" title="(((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR))) &amp; ~(((RegSet)1) &lt;&lt; (tmp)))" data-ref="_M/rset_exclude">rset_exclude</a>(<a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>, <a class="local col3 ref" href="#523tmp" title='tmp' data-ref="523tmp" data-ref-filename="523tmp">tmp</a>));</td></tr>
<tr><th id="808">808</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col0 ref" href="#520as" title='as' data-ref="520as" data-ref-filename="520as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_ADDSD" title='XO_ADDSD' data-ref="XO_ADDSD" data-ref-filename="XO_ADDSD">XO_ADDSD</a>, <a class="local col3 ref" href="#523tmp" title='tmp' data-ref="523tmp" data-ref-filename="523tmp">tmp</a>, <a class="local col4 ref" href="#524right" title='right' data-ref="524right" data-ref-filename="524right">right</a>);</td></tr>
<tr><th id="809">809</th><td>  <a class="tu ref fn" href="lj_asm.c.html#ra_left" title='ra_left' data-use='c' data-ref="ra_left" data-ref-filename="ra_left">ra_left</a>(<a class="local col0 ref" href="#520as" title='as' data-ref="520as" data-ref-filename="520as">as</a>, <a class="local col3 ref" href="#523tmp" title='tmp' data-ref="523tmp" data-ref-filename="523tmp">tmp</a>, <a class="local col1 ref" href="#521ir" title='ir' data-ref="521ir" data-ref-filename="521ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>);</td></tr>
<tr><th id="810">810</th><td>}</td></tr>
<tr><th id="811">811</th><td></td></tr>
<tr><th id="812">812</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_conv" title='asm_conv' data-ref="asm_conv" data-ref-filename="asm_conv">asm_conv</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col5 decl" id="525as" title='as' data-type='ASMState *' data-ref="525as" data-ref-filename="525as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col6 decl" id="526ir" title='ir' data-type='IRIns *' data-ref="526ir" data-ref-filename="526ir">ir</dfn>)</td></tr>
<tr><th id="813">813</th><td>{</td></tr>
<tr><th id="814">814</th><td>  <a class="typedef" href="lj_ir.h.html#IRType" title='IRType' data-type='enum IRType' data-ref="IRType" data-ref-filename="IRType">IRType</a> <dfn class="local col7 decl" id="527st" title='st' data-type='IRType' data-ref="527st" data-ref-filename="527st">st</dfn> = (<a class="typedef" href="lj_ir.h.html#IRType" title='IRType' data-type='enum IRType' data-ref="IRType" data-ref-filename="IRType">IRType</a>)(<a class="local col6 ref" href="#526ir" title='ir' data-ref="526ir" data-ref-filename="526ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a> &amp; <a class="macro" href="lj_ir.h.html#239" title="0x001f" data-ref="_M/IRCONV_SRCMASK">IRCONV_SRCMASK</a>);</td></tr>
<tr><th id="815">815</th><td>  <em>int</em> <dfn class="local col8 decl" id="528st64" title='st64' data-type='int' data-ref="528st64" data-ref-filename="528st64">st64</dfn> = (<a class="local col7 ref" href="#527st" title='st' data-ref="527st" data-ref-filename="527st">st</a> == <a class="enum" href="lj_ir.h.html#318" title='IRT_I64' data-ref="IRT_I64" data-ref-filename="IRT_I64">IRT_I64</a> || <a class="local col7 ref" href="#527st" title='st' data-ref="527st" data-ref-filename="527st">st</a> == <a class="enum" href="lj_ir.h.html#318" title='IRT_U64' data-ref="IRT_U64" data-ref-filename="IRT_U64">IRT_U64</a> || (<a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp; <a class="local col7 ref" href="#527st" title='st' data-ref="527st" data-ref-filename="527st">st</a> == <a class="enum" href="lj_ir.h.html#318" title='IRT_P64' data-ref="IRT_P64" data-ref-filename="IRT_P64">IRT_P64</a>));</td></tr>
<tr><th id="816">816</th><td>  <em>int</em> <dfn class="local col9 decl" id="529stfp" title='stfp' data-type='int' data-ref="529stfp" data-ref-filename="529stfp">stfp</dfn> = (<a class="local col7 ref" href="#527st" title='st' data-ref="527st" data-ref-filename="527st">st</a> == <a class="enum" href="lj_ir.h.html#318" title='IRT_NUM' data-ref="IRT_NUM" data-ref-filename="IRT_NUM">IRT_NUM</a> || <a class="local col7 ref" href="#527st" title='st' data-ref="527st" data-ref-filename="527st">st</a> == <a class="enum" href="lj_ir.h.html#318" title='IRT_FLOAT' data-ref="IRT_FLOAT" data-ref-filename="IRT_FLOAT">IRT_FLOAT</a>);</td></tr>
<tr><th id="817">817</th><td>  <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col0 decl" id="530lref" title='lref' data-type='IRRef' data-ref="530lref" data-ref-filename="530lref">lref</dfn> = <a class="local col6 ref" href="#526ir" title='ir' data-ref="526ir" data-ref-filename="526ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>;</td></tr>
<tr><th id="818">818</th><td>  <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(irt_type(ir-&gt;t) != st, <q>"inconsistent types for CONV"</q>);</td></tr>
<tr><th id="819">819</th><td>  <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(!(LJ_32 &amp;&amp; (irt_isint64(ir-&gt;t) || st64)),</td></tr>
<tr><th id="820">820</th><td>	     <q>"IR %04d has unsplit 64 bit type"</q>,</td></tr>
<tr><th id="821">821</th><td>	     (<em>int</em>)(ir - as-&gt;ir) - REF_BIAS);</td></tr>
<tr><th id="822">822</th><td>  <b>if</b> (<a class="macro" href="lj_ir.h.html#373" title="((((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM) || (((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_FLOAT))" data-ref="_M/irt_isfp">irt_isfp</a>(<a class="local col6 ref" href="#526ir" title='ir' data-ref="526ir" data-ref-filename="526ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="823">823</th><td>    <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col1 decl" id="531dest" title='dest' data-type='Reg' data-ref="531dest" data-ref-filename="531dest">dest</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col6 ref" href="#526ir" title='ir' data-ref="526ir" data-ref-filename="526ir">ir</a>, <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>);</td></tr>
<tr><th id="824">824</th><td>    <b>if</b> (<a class="local col9 ref" href="#529stfp" title='stfp' data-ref="529stfp" data-ref-filename="529stfp">stfp</a>) {  <i>/* FP to FP conversion. */</i></td></tr>
<tr><th id="825">825</th><td>      <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col2 decl" id="532left" title='left' data-type='Reg' data-ref="532left" data-ref-filename="532left">left</dfn> = <a class="ref fn" href="#asm_fuseload" title='asm_fuseload' data-ref="asm_fuseload" data-ref-filename="asm_fuseload">asm_fuseload</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col0 ref" href="#530lref" title='lref' data-ref="530lref" data-ref-filename="530lref">lref</a>, <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>);</td></tr>
<tr><th id="826">826</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col7 ref" href="#527st" title='st' data-ref="527st" data-ref-filename="527st">st</a> == <a class="enum" href="lj_ir.h.html#318" title='IRT_NUM' data-ref="IRT_NUM" data-ref-filename="IRT_NUM">IRT_NUM</a> ? <a class="enum" href="lj_target_x86.h.html#XO_CVTSD2SS" title='XO_CVTSD2SS' data-ref="XO_CVTSD2SS" data-ref-filename="XO_CVTSD2SS">XO_CVTSD2SS</a> : <a class="enum" href="lj_target_x86.h.html#XO_CVTSS2SD" title='XO_CVTSS2SD' data-ref="XO_CVTSS2SD" data-ref-filename="XO_CVTSS2SD">XO_CVTSS2SD</a>, <a class="local col1 ref" href="#531dest" title='dest' data-ref="531dest" data-ref-filename="531dest">dest</a>, <a class="local col2 ref" href="#532left" title='left' data-ref="532left" data-ref-filename="532left">left</a>);</td></tr>
<tr><th id="827">827</th><td>      <b>if</b> (<a class="local col2 ref" href="#532left" title='left' data-ref="532left" data-ref-filename="532left">left</a> == <a class="local col1 ref" href="#531dest" title='dest' data-ref="531dest" data-ref-filename="531dest">dest</a>) <b>return</b>;  <i>/* Avoid the XO_XORPS. */</i></td></tr>
<tr><th id="828">828</th><td>    } <b>else</b> <b>if</b> (<a class="macro" href="lj_arch.h.html#599" title="0" data-ref="_M/LJ_32">LJ_32</a> &amp;&amp; <a class="local col7 ref" href="#527st" title='st' data-ref="527st" data-ref-filename="527st">st</a> == <a class="enum" href="lj_ir.h.html#318" title='IRT_U32' data-ref="IRT_U32" data-ref-filename="IRT_U32">IRT_U32</a>) {  <i>/* U32 to FP conversion on x86. */</i></td></tr>
<tr><th id="829">829</th><td>      <i>/* number = (2^52+2^51 .. u32) - (2^52+2^51) */</i></td></tr>
<tr><th id="830">830</th><td>      <a class="typedef" href="lj_obj.h.html#cTValue" title='cTValue' data-type='const TValue' data-ref="cTValue" data-ref-filename="cTValue">cTValue</a> *<dfn class="local col3 decl" id="533k" title='k' data-type='cTValue *' data-ref="533k" data-ref-filename="533k">k</dfn> = &amp;<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>-&gt;<a class="ref field" href="lj_jit.h.html#jit_State::k64" title='jit_State::k64' data-ref="jit_State::k64" data-ref-filename="jit_State..k64">k64</a>[<a class="enum" href="lj_jit.h.html#LJ_K64_TOBIT" title='LJ_K64_TOBIT' data-ref="LJ_K64_TOBIT" data-ref-filename="LJ_K64_TOBIT">LJ_K64_TOBIT</a>];</td></tr>
<tr><th id="831">831</th><td>      <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col4 decl" id="534bias" title='bias' data-type='Reg' data-ref="534bias" data-ref-filename="534bias">bias</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_scratch" title='ra_scratch' data-use='c' data-ref="ra_scratch" data-ref-filename="ra_scratch">ra_scratch</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="macro" href="lj_target.h.html#71" title="(((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR))) &amp; ~(((RegSet)1) &lt;&lt; (dest)))" data-ref="_M/rset_exclude">rset_exclude</a>(<a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>, <a class="local col1 ref" href="#531dest" title='dest' data-ref="531dest" data-ref-filename="531dest">dest</a>));</td></tr>
<tr><th id="832">832</th><td>      <b>if</b> (<a class="macro" href="lj_ir.h.html#362" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_FLOAT)" data-ref="_M/irt_isfloat">irt_isfloat</a>(<a class="local col6 ref" href="#526ir" title='ir' data-ref="526ir" data-ref-filename="526ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>))</td></tr>
<tr><th id="833">833</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_CVTSD2SS" title='XO_CVTSD2SS' data-ref="XO_CVTSD2SS" data-ref-filename="XO_CVTSD2SS">XO_CVTSD2SS</a>, <a class="local col1 ref" href="#531dest" title='dest' data-ref="531dest" data-ref-filename="531dest">dest</a>, <a class="local col1 ref" href="#531dest" title='dest' data-ref="531dest" data-ref-filename="531dest">dest</a>);</td></tr>
<tr><th id="834">834</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_SUBSD" title='XO_SUBSD' data-ref="XO_SUBSD" data-ref-filename="XO_SUBSD">XO_SUBSD</a>, <a class="local col1 ref" href="#531dest" title='dest' data-ref="531dest" data-ref-filename="531dest">dest</a>, <a class="local col4 ref" href="#534bias" title='bias' data-ref="534bias" data-ref-filename="534bias">bias</a>);  <i>/* Subtract 2^52+2^51 bias. */</i></td></tr>
<tr><th id="835">835</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_XORPS" title='XO_XORPS' data-ref="XO_XORPS" data-ref-filename="XO_XORPS">XO_XORPS</a>, <a class="local col1 ref" href="#531dest" title='dest' data-ref="531dest" data-ref-filename="531dest">dest</a>, <a class="local col4 ref" href="#534bias" title='bias' data-ref="534bias" data-ref-filename="534bias">bias</a>);  <i>/* Merge bias and integer. */</i></td></tr>
<tr><th id="836">836</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rma" title='emit_rma' data-ref="emit_rma" data-ref-filename="emit_rma">emit_rma</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOVSD" title='XO_MOVSD' data-ref="XO_MOVSD" data-ref-filename="XO_MOVSD">XO_MOVSD</a>, <a class="local col4 ref" href="#534bias" title='bias' data-ref="534bias" data-ref-filename="534bias">bias</a>, <a class="local col3 ref" href="#533k" title='k' data-ref="533k" data-ref-filename="533k">k</a>);</td></tr>
<tr><th id="837">837</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOVD" title='XO_MOVD' data-ref="XO_MOVD" data-ref-filename="XO_MOVD">XO_MOVD</a>, <a class="local col1 ref" href="#531dest" title='dest' data-ref="531dest" data-ref-filename="531dest">dest</a>, <a class="ref fn" href="#asm_fuseload" title='asm_fuseload' data-ref="asm_fuseload" data-ref-filename="asm_fuseload">asm_fuseload</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col0 ref" href="#530lref" title='lref' data-ref="530lref" data-ref-filename="530lref">lref</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>));</td></tr>
<tr><th id="838">838</th><td>      <b>return</b>;</td></tr>
<tr><th id="839">839</th><td>    } <b>else</b> {  <i>/* Integer to FP conversion. */</i></td></tr>
<tr><th id="840">840</th><td>      <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col5 decl" id="535left" title='left' data-type='Reg' data-ref="535left" data-ref-filename="535left">left</dfn> = (<a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp; (<a class="local col7 ref" href="#527st" title='st' data-ref="527st" data-ref-filename="527st">st</a> == <a class="enum" href="lj_ir.h.html#318" title='IRT_U32' data-ref="IRT_U32" data-ref-filename="IRT_U32">IRT_U32</a> || <a class="local col7 ref" href="#527st" title='st' data-ref="527st" data-ref-filename="527st">st</a> == <a class="enum" href="lj_ir.h.html#318" title='IRT_U64' data-ref="IRT_U64" data-ref-filename="IRT_U64">IRT_U64</a>)) ?</td></tr>
<tr><th id="841">841</th><td>		 <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col0 ref" href="#530lref" title='lref' data-ref="530lref" data-ref-filename="530lref">lref</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>) :</td></tr>
<tr><th id="842">842</th><td>		 <a class="ref fn" href="#asm_fuseloadm" title='asm_fuseloadm' data-ref="asm_fuseloadm" data-ref-filename="asm_fuseloadm">asm_fuseloadm</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col0 ref" href="#530lref" title='lref' data-ref="530lref" data-ref-filename="530lref">lref</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>, <a class="local col8 ref" href="#528st64" title='st64' data-ref="528st64" data-ref-filename="528st64">st64</a>);</td></tr>
<tr><th id="843">843</th><td>      <b>if</b> (<a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp; <a class="local col7 ref" href="#527st" title='st' data-ref="527st" data-ref-filename="527st">st</a> == <a class="enum" href="lj_ir.h.html#318" title='IRT_U64' data-ref="IRT_U64" data-ref-filename="IRT_U64">IRT_U64</a>) {</td></tr>
<tr><th id="844">844</th><td>	<a class="typedef" href="lj_emit_x86.h.html#MCLabel" title='MCLabel' data-type='MCode *' data-ref="MCLabel" data-ref-filename="MCLabel">MCLabel</a> <dfn class="local col6 decl" id="536l_end" title='l_end' data-type='MCLabel' data-ref="536l_end" data-ref-filename="536l_end">l_end</dfn> = <a class="macro" href="lj_emit_x86.h.html#472" title="((as)-&gt;mcp)" data-ref="_M/emit_label">emit_label</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>);</td></tr>
<tr><th id="845">845</th><td>	<a class="typedef" href="lj_obj.h.html#cTValue" title='cTValue' data-type='const TValue' data-ref="cTValue" data-ref-filename="cTValue">cTValue</a> *<dfn class="local col7 decl" id="537k" title='k' data-type='cTValue *' data-ref="537k" data-ref-filename="537k">k</dfn> = &amp;<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>-&gt;<a class="ref field" href="lj_jit.h.html#jit_State::k64" title='jit_State::k64' data-ref="jit_State::k64" data-ref-filename="jit_State..k64">k64</a>[<a class="enum" href="lj_jit.h.html#LJ_K64_2P64" title='LJ_K64_2P64' data-ref="LJ_K64_2P64" data-ref-filename="LJ_K64_2P64">LJ_K64_2P64</a>];</td></tr>
<tr><th id="846">846</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_rma" title='emit_rma' data-ref="emit_rma" data-ref-filename="emit_rma">emit_rma</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_ADDSD" title='XO_ADDSD' data-ref="XO_ADDSD" data-ref-filename="XO_ADDSD">XO_ADDSD</a>, <a class="local col1 ref" href="#531dest" title='dest' data-ref="531dest" data-ref-filename="531dest">dest</a>, <a class="local col7 ref" href="#537k" title='k' data-ref="537k" data-ref-filename="537k">k</a>);  <i>/* Add 2^64 to compensate. */</i></td></tr>
<tr><th id="847">847</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_sjcc" title='emit_sjcc' data-ref="emit_sjcc" data-ref-filename="emit_sjcc">emit_sjcc</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_NS" title='CC_NS' data-ref="CC_NS" data-ref-filename="CC_NS">CC_NS</a>, <a class="local col6 ref" href="#536l_end" title='l_end' data-ref="536l_end" data-ref-filename="536l_end">l_end</a>);</td></tr>
<tr><th id="848">848</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_TEST" title='XO_TEST' data-ref="XO_TEST" data-ref-filename="XO_TEST">XO_TEST</a>, <a class="local col5 ref" href="#535left" title='left' data-ref="535left" data-ref-filename="535left">left</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="local col5 ref" href="#535left" title='left' data-ref="535left" data-ref-filename="535left">left</a>);  <i>/* Check if u64 &gt;= 2^63. */</i></td></tr>
<tr><th id="849">849</th><td>      }</td></tr>
<tr><th id="850">850</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="macro" href="lj_ir.h.html#363" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM)" data-ref="_M/irt_isnum">irt_isnum</a>(<a class="local col6 ref" href="#526ir" title='ir' data-ref="526ir" data-ref-filename="526ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) ? <a class="enum" href="lj_target_x86.h.html#XO_CVTSI2SD" title='XO_CVTSI2SD' data-ref="XO_CVTSI2SD" data-ref-filename="XO_CVTSI2SD">XO_CVTSI2SD</a> : <a class="enum" href="lj_target_x86.h.html#XO_CVTSI2SS" title='XO_CVTSI2SS' data-ref="XO_CVTSI2SS" data-ref-filename="XO_CVTSI2SS">XO_CVTSI2SS</a>,</td></tr>
<tr><th id="851">851</th><td>	       <a class="local col1 ref" href="#531dest" title='dest' data-ref="531dest" data-ref-filename="531dest">dest</a>|((<a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp; (<a class="local col8 ref" href="#528st64" title='st64' data-ref="528st64" data-ref-filename="528st64">st64</a> || <a class="local col7 ref" href="#527st" title='st' data-ref="527st" data-ref-filename="527st">st</a> == <a class="enum" href="lj_ir.h.html#318" title='IRT_U32' data-ref="IRT_U32" data-ref-filename="IRT_U32">IRT_U32</a>)) ? <a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a> : <var>0</var>), <a class="local col5 ref" href="#535left" title='left' data-ref="535left" data-ref-filename="535left">left</a>);</td></tr>
<tr><th id="852">852</th><td>    }</td></tr>
<tr><th id="853">853</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_XORPS" title='XO_XORPS' data-ref="XO_XORPS" data-ref-filename="XO_XORPS">XO_XORPS</a>, <a class="local col1 ref" href="#531dest" title='dest' data-ref="531dest" data-ref-filename="531dest">dest</a>, <a class="local col1 ref" href="#531dest" title='dest' data-ref="531dest" data-ref-filename="531dest">dest</a>);  <i>/* Avoid partial register stall. */</i></td></tr>
<tr><th id="854">854</th><td>  } <b>else</b> <b>if</b> (<a class="local col9 ref" href="#529stfp" title='stfp' data-ref="529stfp" data-ref-filename="529stfp">stfp</a>) {  <i>/* FP to integer conversion. */</i></td></tr>
<tr><th id="855">855</th><td>    <b>if</b> (<a class="macro" href="lj_ir.h.html#429" title="((ir-&gt;t).irt &amp; IRT_GUARD)" data-ref="_M/irt_isguard">irt_isguard</a>(<a class="local col6 ref" href="#526ir" title='ir' data-ref="526ir" data-ref-filename="526ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="856">856</th><td>      <i>/* Checked conversions are only supported from number to int. */</i></td></tr>
<tr><th id="857">857</th><td>      <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(irt_isint(ir-&gt;t) &amp;&amp; st == IRT_NUM,</td></tr>
<tr><th id="858">858</th><td>		 <q>"bad type for checked CONV"</q>);</td></tr>
<tr><th id="859">859</th><td>      <a class="ref fn" href="#asm_tointg" title='asm_tointg' data-ref="asm_tointg" data-ref-filename="asm_tointg">asm_tointg</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col6 ref" href="#526ir" title='ir' data-ref="526ir" data-ref-filename="526ir">ir</a>, <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col0 ref" href="#530lref" title='lref' data-ref="530lref" data-ref-filename="530lref">lref</a>, <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>));</td></tr>
<tr><th id="860">860</th><td>    } <b>else</b> {</td></tr>
<tr><th id="861">861</th><td>      <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col8 decl" id="538dest" title='dest' data-type='Reg' data-ref="538dest" data-ref-filename="538dest">dest</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col6 ref" href="#526ir" title='ir' data-ref="526ir" data-ref-filename="526ir">ir</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="862">862</th><td>      <a class="typedef" href="lj_target_x86.h.html#x86Op" title='x86Op' data-type='enum x86Op' data-ref="x86Op" data-ref-filename="x86Op">x86Op</a> <dfn class="local col9 decl" id="539op" title='op' data-type='x86Op' data-ref="539op" data-ref-filename="539op">op</dfn> = <a class="local col7 ref" href="#527st" title='st' data-ref="527st" data-ref-filename="527st">st</a> == <a class="enum" href="lj_ir.h.html#318" title='IRT_NUM' data-ref="IRT_NUM" data-ref-filename="IRT_NUM">IRT_NUM</a> ? <a class="enum" href="lj_target_x86.h.html#XO_CVTTSD2SI" title='XO_CVTTSD2SI' data-ref="XO_CVTTSD2SI" data-ref-filename="XO_CVTTSD2SI">XO_CVTTSD2SI</a> : <a class="enum" href="lj_target_x86.h.html#XO_CVTTSS2SI" title='XO_CVTTSS2SI' data-ref="XO_CVTTSS2SI" data-ref-filename="XO_CVTTSS2SI">XO_CVTTSS2SI</a>;</td></tr>
<tr><th id="863">863</th><td>      <b>if</b> (<a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> ? <a class="macro" href="lj_ir.h.html#371" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_U64)" data-ref="_M/irt_isu64">irt_isu64</a>(<a class="local col6 ref" href="#526ir" title='ir' data-ref="526ir" data-ref-filename="526ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) : <a class="macro" href="lj_ir.h.html#369" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_U32)" data-ref="_M/irt_isu32">irt_isu32</a>(<a class="local col6 ref" href="#526ir" title='ir' data-ref="526ir" data-ref-filename="526ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="864">864</th><td>	<i>/* LJ_64: For inputs &gt;= 2^63 add -2^64, convert again. */</i></td></tr>
<tr><th id="865">865</th><td>	<i>/* LJ_32: For inputs &gt;= 2^31 add -2^31, convert again and add 2^31. */</i></td></tr>
<tr><th id="866">866</th><td>	<a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col0 decl" id="540tmp" title='tmp' data-type='Reg' data-ref="540tmp" data-ref-filename="540tmp">tmp</dfn> = <a class="macro" href="lj_target.h.html#27" title="(((&amp;as-&gt;ir[(lref)])-&gt;r) &amp; 0x80)" data-ref="_M/ra_noreg">ra_noreg</a>(<a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(lref)])" data-ref="_M/IR">IR</a>(<a class="local col0 ref" href="#530lref" title='lref' data-ref="530lref" data-ref-filename="530lref">lref</a>)-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>) ? <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col0 ref" href="#530lref" title='lref' data-ref="530lref" data-ref-filename="530lref">lref</a>, <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>) :</td></tr>
<tr><th id="867">867</th><td>					  <a class="tu ref fn" href="lj_asm.c.html#ra_scratch" title='ra_scratch' data-use='c' data-ref="ra_scratch" data-ref-filename="ra_scratch">ra_scratch</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>);</td></tr>
<tr><th id="868">868</th><td>	<a class="typedef" href="lj_emit_x86.h.html#MCLabel" title='MCLabel' data-type='MCode *' data-ref="MCLabel" data-ref-filename="MCLabel">MCLabel</a> <dfn class="local col1 decl" id="541l_end" title='l_end' data-type='MCLabel' data-ref="541l_end" data-ref-filename="541l_end">l_end</dfn> = <a class="macro" href="lj_emit_x86.h.html#472" title="((as)-&gt;mcp)" data-ref="_M/emit_label">emit_label</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>);</td></tr>
<tr><th id="869">869</th><td>	<b>if</b> (<a class="macro" href="lj_arch.h.html#599" title="0" data-ref="_M/LJ_32">LJ_32</a>)</td></tr>
<tr><th id="870">870</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_gri" title='emit_gri' data-ref="emit_gri" data-ref-filename="emit_gri">emit_gri</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="macro" href="lj_target_x86.h.html#324" title="((x86Group)(((XI_ARITHi8) &lt;&lt; 16) + ((XI_ARITHi) &lt;&lt; 8) + (XOg_ADD)))" data-ref="_M/XG_ARITHi">XG_ARITHi</a>(<a class="enum" href="lj_target_x86.h.html#XOg_ADD" title='XOg_ADD' data-ref="XOg_ADD" data-ref-filename="XOg_ADD">XOg_ADD</a>), <a class="local col8 ref" href="#538dest" title='dest' data-ref="538dest" data-ref-filename="538dest">dest</a>, (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<var>0x80000000</var>);</td></tr>
<tr><th id="871">871</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col9 ref" href="#539op" title='op' data-ref="539op" data-ref-filename="539op">op</a>, <a class="local col8 ref" href="#538dest" title='dest' data-ref="538dest" data-ref-filename="538dest">dest</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="local col0 ref" href="#540tmp" title='tmp' data-ref="540tmp" data-ref-filename="540tmp">tmp</a>);</td></tr>
<tr><th id="872">872</th><td>	<b>if</b> (<a class="local col7 ref" href="#527st" title='st' data-ref="527st" data-ref-filename="527st">st</a> == <a class="enum" href="lj_ir.h.html#318" title='IRT_NUM' data-ref="IRT_NUM" data-ref-filename="IRT_NUM">IRT_NUM</a>)</td></tr>
<tr><th id="873">873</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_rma" title='emit_rma' data-ref="emit_rma" data-ref-filename="emit_rma">emit_rma</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_ADDSD" title='XO_ADDSD' data-ref="XO_ADDSD" data-ref-filename="XO_ADDSD">XO_ADDSD</a>, <a class="local col0 ref" href="#540tmp" title='tmp' data-ref="540tmp" data-ref-filename="540tmp">tmp</a>, &amp;<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>-&gt;<a class="ref field" href="lj_jit.h.html#jit_State::k64" title='jit_State::k64' data-ref="jit_State::k64" data-ref-filename="jit_State..k64">k64</a>[<a class="enum" href="lj_jit.h.html#LJ_K64_M2P64_31" title='LJ_K64_M2P64_31' data-ref="LJ_K64_M2P64_31" data-ref-filename="LJ_K64_M2P64_31">LJ_K64_M2P64_31</a>]);</td></tr>
<tr><th id="874">874</th><td>	<b>else</b></td></tr>
<tr><th id="875">875</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_rma" title='emit_rma' data-ref="emit_rma" data-ref-filename="emit_rma">emit_rma</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_ADDSS" title='XO_ADDSS' data-ref="XO_ADDSS" data-ref-filename="XO_ADDSS">XO_ADDSS</a>, <a class="local col0 ref" href="#540tmp" title='tmp' data-ref="540tmp" data-ref-filename="540tmp">tmp</a>, &amp;<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>-&gt;<a class="ref field" href="lj_jit.h.html#jit_State::k32" title='jit_State::k32' data-ref="jit_State::k32" data-ref-filename="jit_State..k32">k32</a>[<a class="enum" href="lj_jit.h.html#LJ_K32_M2P64_31" title='LJ_K32_M2P64_31' data-ref="LJ_K32_M2P64_31" data-ref-filename="LJ_K32_M2P64_31">LJ_K32_M2P64_31</a>]);</td></tr>
<tr><th id="876">876</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_sjcc" title='emit_sjcc' data-ref="emit_sjcc" data-ref-filename="emit_sjcc">emit_sjcc</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_NS" title='CC_NS' data-ref="CC_NS" data-ref-filename="CC_NS">CC_NS</a>, <a class="local col1 ref" href="#541l_end" title='l_end' data-ref="541l_end" data-ref-filename="541l_end">l_end</a>);</td></tr>
<tr><th id="877">877</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_TEST" title='XO_TEST' data-ref="XO_TEST" data-ref-filename="XO_TEST">XO_TEST</a>, <a class="local col8 ref" href="#538dest" title='dest' data-ref="538dest" data-ref-filename="538dest">dest</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="local col8 ref" href="#538dest" title='dest' data-ref="538dest" data-ref-filename="538dest">dest</a>);  <i>/* Check if dest negative. */</i></td></tr>
<tr><th id="878">878</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col9 ref" href="#539op" title='op' data-ref="539op" data-ref-filename="539op">op</a>, <a class="local col8 ref" href="#538dest" title='dest' data-ref="538dest" data-ref-filename="538dest">dest</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="local col0 ref" href="#540tmp" title='tmp' data-ref="540tmp" data-ref-filename="540tmp">tmp</a>);</td></tr>
<tr><th id="879">879</th><td>	<a class="tu ref fn" href="lj_asm.c.html#ra_left" title='ra_left' data-use='c' data-ref="ra_left" data-ref-filename="ra_left">ra_left</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col0 ref" href="#540tmp" title='tmp' data-ref="540tmp" data-ref-filename="540tmp">tmp</a>, <a class="local col0 ref" href="#530lref" title='lref' data-ref="530lref" data-ref-filename="530lref">lref</a>);</td></tr>
<tr><th id="880">880</th><td>      } <b>else</b> {</td></tr>
<tr><th id="881">881</th><td>	<b>if</b> (<a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp; <a class="macro" href="lj_ir.h.html#369" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_U32)" data-ref="_M/irt_isu32">irt_isu32</a>(<a class="local col6 ref" href="#526ir" title='ir' data-ref="526ir" data-ref-filename="526ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>))</td></tr>
<tr><th id="882">882</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col8 ref" href="#538dest" title='dest' data-ref="538dest" data-ref-filename="538dest">dest</a>, <a class="local col8 ref" href="#538dest" title='dest' data-ref="538dest" data-ref-filename="538dest">dest</a>);  <i>/* Zero hiword. */</i></td></tr>
<tr><th id="883">883</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col9 ref" href="#539op" title='op' data-ref="539op" data-ref-filename="539op">op</a>,</td></tr>
<tr><th id="884">884</th><td>		 <a class="local col8 ref" href="#538dest" title='dest' data-ref="538dest" data-ref-filename="538dest">dest</a>|((<a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp;</td></tr>
<tr><th id="885">885</th><td>			(<a class="macro" href="lj_ir.h.html#394" title="((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)((ir-&gt;t).irt &amp; IRT_TYPE))) &amp; 1)" data-ref="_M/irt_is64">irt_is64</a>(<a class="local col6 ref" href="#526ir" title='ir' data-ref="526ir" data-ref-filename="526ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) || <a class="macro" href="lj_ir.h.html#369" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_U32)" data-ref="_M/irt_isu32">irt_isu32</a>(<a class="local col6 ref" href="#526ir" title='ir' data-ref="526ir" data-ref-filename="526ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>))) ? <a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a> : <var>0</var>),</td></tr>
<tr><th id="886">886</th><td>		 <a class="ref fn" href="#asm_fuseload" title='asm_fuseload' data-ref="asm_fuseload" data-ref-filename="asm_fuseload">asm_fuseload</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col0 ref" href="#530lref" title='lref' data-ref="530lref" data-ref-filename="530lref">lref</a>, <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>));</td></tr>
<tr><th id="887">887</th><td>      }</td></tr>
<tr><th id="888">888</th><td>    }</td></tr>
<tr><th id="889">889</th><td>  } <b>else</b> <b>if</b> (<a class="local col7 ref" href="#527st" title='st' data-ref="527st" data-ref-filename="527st">st</a> &gt;= <a class="enum" href="lj_ir.h.html#318" title='IRT_I8' data-ref="IRT_I8" data-ref-filename="IRT_I8">IRT_I8</a> &amp;&amp; <a class="local col7 ref" href="#527st" title='st' data-ref="527st" data-ref-filename="527st">st</a> &lt;= <a class="enum" href="lj_ir.h.html#318" title='IRT_U16' data-ref="IRT_U16" data-ref-filename="IRT_U16">IRT_U16</a>) {  <i>/* Extend to 32 bit integer. */</i></td></tr>
<tr><th id="890">890</th><td>    <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col2 decl" id="542left" title='left' data-type='Reg' data-ref="542left" data-ref-filename="542left">left</dfn>, <dfn class="local col3 decl" id="543dest" title='dest' data-type='Reg' data-ref="543dest" data-ref-filename="543dest">dest</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col6 ref" href="#526ir" title='ir' data-ref="526ir" data-ref-filename="526ir">ir</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="891">891</th><td>    <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col4 decl" id="544allow" title='allow' data-type='RegSet' data-ref="544allow" data-ref-filename="544allow">allow</dfn> = <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>;</td></tr>
<tr><th id="892">892</th><td>    <a class="typedef" href="lj_target_x86.h.html#x86Op" title='x86Op' data-type='enum x86Op' data-ref="x86Op" data-ref-filename="x86Op">x86Op</a> <dfn class="local col5 decl" id="545op" title='op' data-type='x86Op' data-ref="545op" data-ref-filename="545op">op</dfn>;</td></tr>
<tr><th id="893">893</th><td>    <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(irt_isint(ir-&gt;t) || irt_isu32(ir-&gt;t), <q>"bad type for CONV EXT"</q>);</td></tr>
<tr><th id="894">894</th><td>    <b>if</b> (<a class="local col7 ref" href="#527st" title='st' data-ref="527st" data-ref-filename="527st">st</a> == <a class="enum" href="lj_ir.h.html#318" title='IRT_I8' data-ref="IRT_I8" data-ref-filename="IRT_I8">IRT_I8</a>) {</td></tr>
<tr><th id="895">895</th><td>      <a class="local col5 ref" href="#545op" title='op' data-ref="545op" data-ref-filename="545op">op</a> = <a class="enum" href="lj_target_x86.h.html#XO_MOVSXb" title='XO_MOVSXb' data-ref="XO_MOVSXb" data-ref-filename="XO_MOVSXb">XO_MOVSXb</a>; <a class="local col4 ref" href="#544allow" title='allow' data-ref="544allow" data-ref-filename="544allow">allow</a> = <a class="macro" href="lj_target_x86.h.html#77" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR8">RSET_GPR8</a>; <a class="local col3 ref" href="#543dest" title='dest' data-ref="543dest" data-ref-filename="543dest">dest</a> |= <a class="macro" href="lj_emit_x86.h.html#14" title="0x200" data-ref="_M/FORCE_REX">FORCE_REX</a>;</td></tr>
<tr><th id="896">896</th><td>    } <b>else</b> <b>if</b> (<a class="local col7 ref" href="#527st" title='st' data-ref="527st" data-ref-filename="527st">st</a> == <a class="enum" href="lj_ir.h.html#318" title='IRT_U8' data-ref="IRT_U8" data-ref-filename="IRT_U8">IRT_U8</a>) {</td></tr>
<tr><th id="897">897</th><td>      <a class="local col5 ref" href="#545op" title='op' data-ref="545op" data-ref-filename="545op">op</a> = <a class="enum" href="lj_target_x86.h.html#XO_MOVZXb" title='XO_MOVZXb' data-ref="XO_MOVZXb" data-ref-filename="XO_MOVZXb">XO_MOVZXb</a>; <a class="local col4 ref" href="#544allow" title='allow' data-ref="544allow" data-ref-filename="544allow">allow</a> = <a class="macro" href="lj_target_x86.h.html#77" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR8">RSET_GPR8</a>; <a class="local col3 ref" href="#543dest" title='dest' data-ref="543dest" data-ref-filename="543dest">dest</a> |= <a class="macro" href="lj_emit_x86.h.html#14" title="0x200" data-ref="_M/FORCE_REX">FORCE_REX</a>;</td></tr>
<tr><th id="898">898</th><td>    } <b>else</b> <b>if</b> (<a class="local col7 ref" href="#527st" title='st' data-ref="527st" data-ref-filename="527st">st</a> == <a class="enum" href="lj_ir.h.html#318" title='IRT_I16' data-ref="IRT_I16" data-ref-filename="IRT_I16">IRT_I16</a>) {</td></tr>
<tr><th id="899">899</th><td>      <a class="local col5 ref" href="#545op" title='op' data-ref="545op" data-ref-filename="545op">op</a> = <a class="enum" href="lj_target_x86.h.html#XO_MOVSXw" title='XO_MOVSXw' data-ref="XO_MOVSXw" data-ref-filename="XO_MOVSXw">XO_MOVSXw</a>;</td></tr>
<tr><th id="900">900</th><td>    } <b>else</b> {</td></tr>
<tr><th id="901">901</th><td>      <a class="local col5 ref" href="#545op" title='op' data-ref="545op" data-ref-filename="545op">op</a> = <a class="enum" href="lj_target_x86.h.html#XO_MOVZXw" title='XO_MOVZXw' data-ref="XO_MOVZXw" data-ref-filename="XO_MOVZXw">XO_MOVZXw</a>;</td></tr>
<tr><th id="902">902</th><td>    }</td></tr>
<tr><th id="903">903</th><td>    <a class="local col2 ref" href="#542left" title='left' data-ref="542left" data-ref-filename="542left">left</a> = <a class="ref fn" href="#asm_fuseload" title='asm_fuseload' data-ref="asm_fuseload" data-ref-filename="asm_fuseload">asm_fuseload</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col0 ref" href="#530lref" title='lref' data-ref="530lref" data-ref-filename="530lref">lref</a>, <a class="local col4 ref" href="#544allow" title='allow' data-ref="544allow" data-ref-filename="544allow">allow</a>);</td></tr>
<tr><th id="904">904</th><td>    <i>/* Add extra MOV if source is already in wrong register. */</i></td></tr>
<tr><th id="905">905</th><td>    <b>if</b> (!<a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp; <a class="local col2 ref" href="#542left" title='left' data-ref="542left" data-ref-filename="542left">left</a> != <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a> &amp;&amp; !<a class="macro" href="lj_target.h.html#68" title="((int)((allow) &gt;&gt; (left)) &amp; 1)" data-ref="_M/rset_test">rset_test</a>(<a class="local col4 ref" href="#544allow" title='allow' data-ref="544allow" data-ref-filename="544allow">allow</a>, <a class="local col2 ref" href="#542left" title='left' data-ref="542left" data-ref-filename="542left">left</a>)) {</td></tr>
<tr><th id="906">906</th><td>      <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col6 decl" id="546tmp" title='tmp' data-type='Reg' data-ref="546tmp" data-ref-filename="546tmp">tmp</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_scratch" title='ra_scratch' data-use='c' data-ref="ra_scratch" data-ref-filename="ra_scratch">ra_scratch</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col4 ref" href="#544allow" title='allow' data-ref="544allow" data-ref-filename="544allow">allow</a>);</td></tr>
<tr><th id="907">907</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col5 ref" href="#545op" title='op' data-ref="545op" data-ref-filename="545op">op</a>, <a class="local col3 ref" href="#543dest" title='dest' data-ref="543dest" data-ref-filename="543dest">dest</a>, <a class="local col6 ref" href="#546tmp" title='tmp' data-ref="546tmp" data-ref-filename="546tmp">tmp</a>);</td></tr>
<tr><th id="908">908</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col6 ref" href="#546tmp" title='tmp' data-ref="546tmp" data-ref-filename="546tmp">tmp</a>, <a class="local col2 ref" href="#542left" title='left' data-ref="542left" data-ref-filename="542left">left</a>);</td></tr>
<tr><th id="909">909</th><td>    } <b>else</b> {</td></tr>
<tr><th id="910">910</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col5 ref" href="#545op" title='op' data-ref="545op" data-ref-filename="545op">op</a>, <a class="local col3 ref" href="#543dest" title='dest' data-ref="543dest" data-ref-filename="543dest">dest</a>, <a class="local col2 ref" href="#542left" title='left' data-ref="542left" data-ref-filename="542left">left</a>);</td></tr>
<tr><th id="911">911</th><td>    }</td></tr>
<tr><th id="912">912</th><td>  } <b>else</b> {  <i>/* 32/64 bit integer conversions. */</i></td></tr>
<tr><th id="913">913</th><td>    <b>if</b> (<a class="macro" href="lj_arch.h.html#599" title="0" data-ref="_M/LJ_32">LJ_32</a>) {  <i>/* Only need to handle 32/32 bit no-op (cast) on x86. */</i></td></tr>
<tr><th id="914">914</th><td>      <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col7 decl" id="547dest" title='dest' data-type='Reg' data-ref="547dest" data-ref-filename="547dest">dest</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col6 ref" href="#526ir" title='ir' data-ref="526ir" data-ref-filename="526ir">ir</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="915">915</th><td>      <a class="tu ref fn" href="lj_asm.c.html#ra_left" title='ra_left' data-use='c' data-ref="ra_left" data-ref-filename="ra_left">ra_left</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col7 ref" href="#547dest" title='dest' data-ref="547dest" data-ref-filename="547dest">dest</a>, <a class="local col0 ref" href="#530lref" title='lref' data-ref="530lref" data-ref-filename="530lref">lref</a>);  <i>/* Do nothing, but may need to move regs. */</i></td></tr>
<tr><th id="916">916</th><td>    } <b>else</b> <b>if</b> (<a class="macro" href="lj_ir.h.html#394" title="((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)((ir-&gt;t).irt &amp; IRT_TYPE))) &amp; 1)" data-ref="_M/irt_is64">irt_is64</a>(<a class="local col6 ref" href="#526ir" title='ir' data-ref="526ir" data-ref-filename="526ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="917">917</th><td>      <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col8 decl" id="548dest" title='dest' data-type='Reg' data-ref="548dest" data-ref-filename="548dest">dest</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col6 ref" href="#526ir" title='ir' data-ref="526ir" data-ref-filename="526ir">ir</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="918">918</th><td>      <b>if</b> (<a class="local col8 ref" href="#528st64" title='st64' data-ref="528st64" data-ref-filename="528st64">st64</a> || !(<a class="local col6 ref" href="#526ir" title='ir' data-ref="526ir" data-ref-filename="526ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a> &amp; <a class="macro" href="lj_ir.h.html#244" title="0x0800" data-ref="_M/IRCONV_SEXT">IRCONV_SEXT</a>)) {</td></tr>
<tr><th id="919">919</th><td>	<i>/* 64/64 bit no-op (cast) or 32 to 64 bit zero extension. */</i></td></tr>
<tr><th id="920">920</th><td>	<a class="tu ref fn" href="lj_asm.c.html#ra_left" title='ra_left' data-use='c' data-ref="ra_left" data-ref-filename="ra_left">ra_left</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col8 ref" href="#548dest" title='dest' data-ref="548dest" data-ref-filename="548dest">dest</a>, <a class="local col0 ref" href="#530lref" title='lref' data-ref="530lref" data-ref-filename="530lref">lref</a>);  <i>/* Do nothing, but may need to move regs. */</i></td></tr>
<tr><th id="921">921</th><td>      } <b>else</b> {  <i>/* 32 to 64 bit sign extension. */</i></td></tr>
<tr><th id="922">922</th><td>	<a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col9 decl" id="549left" title='left' data-type='Reg' data-ref="549left" data-ref-filename="549left">left</dfn> = <a class="ref fn" href="#asm_fuseload" title='asm_fuseload' data-ref="asm_fuseload" data-ref-filename="asm_fuseload">asm_fuseload</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col0 ref" href="#530lref" title='lref' data-ref="530lref" data-ref-filename="530lref">lref</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="923">923</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOVSXd" title='XO_MOVSXd' data-ref="XO_MOVSXd" data-ref-filename="XO_MOVSXd">XO_MOVSXd</a>, <a class="local col8 ref" href="#548dest" title='dest' data-ref="548dest" data-ref-filename="548dest">dest</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="local col9 ref" href="#549left" title='left' data-ref="549left" data-ref-filename="549left">left</a>);</td></tr>
<tr><th id="924">924</th><td>      }</td></tr>
<tr><th id="925">925</th><td>    } <b>else</b> {</td></tr>
<tr><th id="926">926</th><td>      <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col0 decl" id="550dest" title='dest' data-type='Reg' data-ref="550dest" data-ref-filename="550dest">dest</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col6 ref" href="#526ir" title='ir' data-ref="526ir" data-ref-filename="526ir">ir</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="927">927</th><td>      <b>if</b> (<a class="local col8 ref" href="#528st64" title='st64' data-ref="528st64" data-ref-filename="528st64">st64</a>) {</td></tr>
<tr><th id="928">928</th><td>	<a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col1 decl" id="551left" title='left' data-type='Reg' data-ref="551left" data-ref-filename="551left">left</dfn> = <a class="ref fn" href="#asm_fuseload" title='asm_fuseload' data-ref="asm_fuseload" data-ref-filename="asm_fuseload">asm_fuseload</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col0 ref" href="#530lref" title='lref' data-ref="530lref" data-ref-filename="530lref">lref</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="929">929</th><td>	<i>/* This is either a 32 bit reg/reg mov which zeroes the hiword</i></td></tr>
<tr><th id="930">930</th><td><i>	** or a load of the loword from a 64 bit address.</i></td></tr>
<tr><th id="931">931</th><td><i>	*/</i></td></tr>
<tr><th id="932">932</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col0 ref" href="#550dest" title='dest' data-ref="550dest" data-ref-filename="550dest">dest</a>, <a class="local col1 ref" href="#551left" title='left' data-ref="551left" data-ref-filename="551left">left</a>);</td></tr>
<tr><th id="933">933</th><td>      } <b>else</b> {  <i>/* 32/32 bit no-op (cast). */</i></td></tr>
<tr><th id="934">934</th><td>	<a class="tu ref fn" href="lj_asm.c.html#ra_left" title='ra_left' data-use='c' data-ref="ra_left" data-ref-filename="ra_left">ra_left</a>(<a class="local col5 ref" href="#525as" title='as' data-ref="525as" data-ref-filename="525as">as</a>, <a class="local col0 ref" href="#550dest" title='dest' data-ref="550dest" data-ref-filename="550dest">dest</a>, <a class="local col0 ref" href="#530lref" title='lref' data-ref="530lref" data-ref-filename="530lref">lref</a>);  <i>/* Do nothing, but may need to move regs. */</i></td></tr>
<tr><th id="935">935</th><td>      }</td></tr>
<tr><th id="936">936</th><td>    }</td></tr>
<tr><th id="937">937</th><td>  }</td></tr>
<tr><th id="938">938</th><td>}</td></tr>
<tr><th id="939">939</th><td></td></tr>
<tr><th id="940">940</th><td><u>#<span data-ppcond="940">if</span> <a class="macro" href="lj_arch.h.html#599" title="0" data-ref="_M/LJ_32">LJ_32</a> &amp;&amp; <a class="macro" href="lj_arch.h.html#549" title="1" data-ref="_M/LJ_HASFFI">LJ_HASFFI</a></u></td></tr>
<tr><th id="941">941</th><td><i>/* No SSE conversions to/from 64 bit on x86, so resort to ugly x87 code. */</i></td></tr>
<tr><th id="942">942</th><td></td></tr>
<tr><th id="943">943</th><td><i>/* 64 bit integer to FP conversion in 32 bit mode. */</i></td></tr>
<tr><th id="944">944</th><td><em>static</em> <em>void</em> asm_conv_fp_int64(ASMState *as, IRIns *ir)</td></tr>
<tr><th id="945">945</th><td>{</td></tr>
<tr><th id="946">946</th><td>  Reg hi = ra_alloc1(as, ir-&gt;op1, RSET_GPR);</td></tr>
<tr><th id="947">947</th><td>  Reg lo = ra_alloc1(as, (ir-<var>1</var>)-&gt;op1, rset_exclude(RSET_GPR, hi));</td></tr>
<tr><th id="948">948</th><td>  int32_t ofs = sps_scale(ir-&gt;s);  <i>/* Use spill slot or temp slots. */</i></td></tr>
<tr><th id="949">949</th><td>  Reg dest = ir-&gt;r;</td></tr>
<tr><th id="950">950</th><td>  <b>if</b> (ra_hasreg(dest)) {</td></tr>
<tr><th id="951">951</th><td>    ra_free(as, dest);</td></tr>
<tr><th id="952">952</th><td>    ra_modified(as, dest);</td></tr>
<tr><th id="953">953</th><td>    emit_rmro(as, irt_isnum(ir-&gt;t) ? XO_MOVSD : XO_MOVSS, dest, RID_ESP, ofs);</td></tr>
<tr><th id="954">954</th><td>  }</td></tr>
<tr><th id="955">955</th><td>  emit_rmro(as, irt_isnum(ir-&gt;t) ? XO_FSTPq : XO_FSTPd,</td></tr>
<tr><th id="956">956</th><td>	    irt_isnum(ir-&gt;t) ? XOg_FSTPq : XOg_FSTPd, RID_ESP, ofs);</td></tr>
<tr><th id="957">957</th><td>  <b>if</b> (((ir-<var>1</var>)-&gt;op2 &amp; IRCONV_SRCMASK) == IRT_U64) {</td></tr>
<tr><th id="958">958</th><td>    <i>/* For inputs in [2^63,2^64-1] add 2^64 to compensate. */</i></td></tr>
<tr><th id="959">959</th><td>    MCLabel l_end = emit_label(as);</td></tr>
<tr><th id="960">960</th><td>    emit_rma(as, XO_FADDq, XOg_FADDq, &amp;as-&gt;J-&gt;k64[LJ_K64_2P64]);</td></tr>
<tr><th id="961">961</th><td>    emit_sjcc(as, CC_NS, l_end);</td></tr>
<tr><th id="962">962</th><td>    emit_rr(as, XO_TEST, hi, hi);  <i>/* Check if u64 &gt;= 2^63. */</i></td></tr>
<tr><th id="963">963</th><td>  } <b>else</b> {</td></tr>
<tr><th id="964">964</th><td>    lj_assertA(((ir-<var>1</var>)-&gt;op2 &amp; IRCONV_SRCMASK) == IRT_I64, <q>"bad type for CONV"</q>);</td></tr>
<tr><th id="965">965</th><td>  }</td></tr>
<tr><th id="966">966</th><td>  emit_rmro(as, XO_FILDq, XOg_FILDq, RID_ESP, <var>0</var>);</td></tr>
<tr><th id="967">967</th><td>  <i>/* NYI: Avoid narrow-to-wide store-to-load forwarding stall. */</i></td></tr>
<tr><th id="968">968</th><td>  emit_rmro(as, XO_MOVto, hi, RID_ESP, <var>4</var>);</td></tr>
<tr><th id="969">969</th><td>  emit_rmro(as, XO_MOVto, lo, RID_ESP, <var>0</var>);</td></tr>
<tr><th id="970">970</th><td>}</td></tr>
<tr><th id="971">971</th><td></td></tr>
<tr><th id="972">972</th><td><i>/* FP to 64 bit integer conversion in 32 bit mode. */</i></td></tr>
<tr><th id="973">973</th><td><em>static</em> <em>void</em> asm_conv_int64_fp(ASMState *as, IRIns *ir)</td></tr>
<tr><th id="974">974</th><td>{</td></tr>
<tr><th id="975">975</th><td>  IRType st = (IRType)((ir-<var>1</var>)-&gt;op2 &amp; IRCONV_SRCMASK);</td></tr>
<tr><th id="976">976</th><td>  IRType dt = (((ir-<var>1</var>)-&gt;op2 &amp; IRCONV_DSTMASK) &gt;&gt; IRCONV_DSH);</td></tr>
<tr><th id="977">977</th><td>  Reg lo, hi;</td></tr>
<tr><th id="978">978</th><td>  lj_assertA(st == IRT_NUM || st == IRT_FLOAT, <q>"bad type for CONV"</q>);</td></tr>
<tr><th id="979">979</th><td>  lj_assertA(dt == IRT_I64 || dt == IRT_U64, <q>"bad type for CONV"</q>);</td></tr>
<tr><th id="980">980</th><td>  hi = ra_dest(as, ir, RSET_GPR);</td></tr>
<tr><th id="981">981</th><td>  lo = ra_dest(as, ir-<var>1</var>, rset_exclude(RSET_GPR, hi));</td></tr>
<tr><th id="982">982</th><td>  <b>if</b> (ra_used(ir-<var>1</var>)) emit_rmro(as, XO_MOV, lo, RID_ESP, <var>0</var>);</td></tr>
<tr><th id="983">983</th><td>  <i>/* NYI: Avoid wide-to-narrow store-to-load forwarding stall. */</i></td></tr>
<tr><th id="984">984</th><td>  <b>if</b> (!(as-&gt;flags &amp; JIT_F_SSE3)) {  <i>/* Set FPU rounding mode to default. */</i></td></tr>
<tr><th id="985">985</th><td>    emit_rmro(as, XO_FLDCW, XOg_FLDCW, RID_ESP, <var>4</var>);</td></tr>
<tr><th id="986">986</th><td>    emit_rmro(as, XO_MOVto, lo, RID_ESP, <var>4</var>);</td></tr>
<tr><th id="987">987</th><td>    emit_gri(as, XG_ARITHi(XOg_AND), lo, <var>0xf3ff</var>);</td></tr>
<tr><th id="988">988</th><td>  }</td></tr>
<tr><th id="989">989</th><td>  <b>if</b> (dt == IRT_U64) {</td></tr>
<tr><th id="990">990</th><td>    <i>/* For inputs in [2^63,2^64-1] add -2^64 and convert again. */</i></td></tr>
<tr><th id="991">991</th><td>    MCLabel l_pop, l_end = emit_label(as);</td></tr>
<tr><th id="992">992</th><td>    emit_x87op(as, XI_FPOP);</td></tr>
<tr><th id="993">993</th><td>    l_pop = emit_label(as);</td></tr>
<tr><th id="994">994</th><td>    emit_sjmp(as, l_end);</td></tr>
<tr><th id="995">995</th><td>    emit_rmro(as, XO_MOV, hi, RID_ESP, <var>4</var>);</td></tr>
<tr><th id="996">996</th><td>    <b>if</b> ((as-&gt;flags &amp; JIT_F_SSE3))</td></tr>
<tr><th id="997">997</th><td>      emit_rmro(as, XO_FISTTPq, XOg_FISTTPq, RID_ESP, <var>0</var>);</td></tr>
<tr><th id="998">998</th><td>    <b>else</b></td></tr>
<tr><th id="999">999</th><td>      emit_rmro(as, XO_FISTPq, XOg_FISTPq, RID_ESP, <var>0</var>);</td></tr>
<tr><th id="1000">1000</th><td>    emit_rma(as, XO_FADDq, XOg_FADDq, &amp;as-&gt;J-&gt;k64[LJ_K64_M2P64]);</td></tr>
<tr><th id="1001">1001</th><td>    emit_sjcc(as, CC_NS, l_pop);</td></tr>
<tr><th id="1002">1002</th><td>    emit_rr(as, XO_TEST, hi, hi);  <i>/* Check if out-of-range (2^63). */</i></td></tr>
<tr><th id="1003">1003</th><td>  }</td></tr>
<tr><th id="1004">1004</th><td>  emit_rmro(as, XO_MOV, hi, RID_ESP, <var>4</var>);</td></tr>
<tr><th id="1005">1005</th><td>  <b>if</b> ((as-&gt;flags &amp; JIT_F_SSE3)) {  <i>/* Truncation is easy with SSE3. */</i></td></tr>
<tr><th id="1006">1006</th><td>    emit_rmro(as, XO_FISTTPq, XOg_FISTTPq, RID_ESP, <var>0</var>);</td></tr>
<tr><th id="1007">1007</th><td>  } <b>else</b> {  <i>/* Otherwise set FPU rounding mode to truncate before the store. */</i></td></tr>
<tr><th id="1008">1008</th><td>    emit_rmro(as, XO_FISTPq, XOg_FISTPq, RID_ESP, <var>0</var>);</td></tr>
<tr><th id="1009">1009</th><td>    emit_rmro(as, XO_FLDCW, XOg_FLDCW, RID_ESP, <var>0</var>);</td></tr>
<tr><th id="1010">1010</th><td>    emit_rmro(as, XO_MOVtow, lo, RID_ESP, <var>0</var>);</td></tr>
<tr><th id="1011">1011</th><td>    emit_rmro(as, XO_ARITHw(XOg_OR), lo, RID_ESP, <var>0</var>);</td></tr>
<tr><th id="1012">1012</th><td>    emit_loadi(as, lo, <var>0xc00</var>);</td></tr>
<tr><th id="1013">1013</th><td>    emit_rmro(as, XO_FNSTCW, XOg_FNSTCW, RID_ESP, <var>0</var>);</td></tr>
<tr><th id="1014">1014</th><td>  }</td></tr>
<tr><th id="1015">1015</th><td>  <b>if</b> (dt == IRT_U64)</td></tr>
<tr><th id="1016">1016</th><td>    emit_x87op(as, XI_FDUP);</td></tr>
<tr><th id="1017">1017</th><td>  emit_mrm(as, st == IRT_NUM ? XO_FLDq : XO_FLDd,</td></tr>
<tr><th id="1018">1018</th><td>	   st == IRT_NUM ? XOg_FLDq: XOg_FLDd,</td></tr>
<tr><th id="1019">1019</th><td>	   asm_fuseload(as, ir-&gt;op1, RSET_EMPTY));</td></tr>
<tr><th id="1020">1020</th><td>}</td></tr>
<tr><th id="1021">1021</th><td></td></tr>
<tr><th id="1022">1022</th><td><em>static</em> <em>void</em> asm_conv64(ASMState *as, IRIns *ir)</td></tr>
<tr><th id="1023">1023</th><td>{</td></tr>
<tr><th id="1024">1024</th><td>  <b>if</b> (irt_isfp(ir-&gt;t))</td></tr>
<tr><th id="1025">1025</th><td>    asm_conv_fp_int64(as, ir);</td></tr>
<tr><th id="1026">1026</th><td>  <b>else</b></td></tr>
<tr><th id="1027">1027</th><td>    asm_conv_int64_fp(as, ir);</td></tr>
<tr><th id="1028">1028</th><td>}</td></tr>
<tr><th id="1029">1029</th><td><u>#<span data-ppcond="940">endif</span></u></td></tr>
<tr><th id="1030">1030</th><td></td></tr>
<tr><th id="1031">1031</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_strto" title='asm_strto' data-ref="asm_strto" data-ref-filename="asm_strto">asm_strto</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col2 decl" id="552as" title='as' data-type='ASMState *' data-ref="552as" data-ref-filename="552as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col3 decl" id="553ir" title='ir' data-type='IRIns *' data-ref="553ir" data-ref-filename="553ir">ir</dfn>)</td></tr>
<tr><th id="1032">1032</th><td>{</td></tr>
<tr><th id="1033">1033</th><td>  <i>/* Force a spill slot for the destination register (if any). */</i></td></tr>
<tr><th id="1034">1034</th><td>  <em>const</em> <a class="typedef" href="lj_ircall.h.html#CCallInfo" title='CCallInfo' data-type='struct CCallInfo' data-ref="CCallInfo" data-ref-filename="CCallInfo">CCallInfo</a> *<dfn class="local col4 decl" id="554ci" title='ci' data-type='const CCallInfo *' data-ref="554ci" data-ref-filename="554ci">ci</dfn> = &amp;<a class="ref" href="lj_ircall.h.html#lj_ir_callinfo" title='lj_ir_callinfo' data-ref="lj_ir_callinfo" data-ref-filename="lj_ir_callinfo">lj_ir_callinfo</a>[<a class="enum" href="lj_ircall.h.html#254" title='IRCALL_lj_strscan_num' data-ref="IRCALL_lj_strscan_num" data-ref-filename="IRCALL_lj_strscan_num">IRCALL_lj_strscan_num</a>];</td></tr>
<tr><th id="1035">1035</th><td>  <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col5 decl" id="555args" title='args' data-type='IRRef [2]' data-ref="555args" data-ref-filename="555args">args</dfn>[<var>2</var>];</td></tr>
<tr><th id="1036">1036</th><td>  <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col6 decl" id="556drop" title='drop' data-type='RegSet' data-ref="556drop" data-ref-filename="556drop">drop</dfn> = <a class="macro" href="lj_target_x86.h.html#98" title="(((((RegSet)1) &lt;&lt; (RID_EAX))|(((RegSet)1) &lt;&lt; (RID_ECX))|(((RegSet)1) &lt;&lt; (RID_EDX)))|(((((RegSet)1) &lt;&lt; ((RID_R11D+1)-(RID_ESI)))-1) &lt;&lt; (RID_ESI))|((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR))))" data-ref="_M/RSET_SCRATCH">RSET_SCRATCH</a>;</td></tr>
<tr><th id="1037">1037</th><td>  <b>if</b> ((<a class="local col6 ref" href="#556drop" title='drop' data-ref="556drop" data-ref-filename="556drop">drop</a> &amp; <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>) != <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a> &amp;&amp; <a class="macro" href="lj_target.h.html#28" title="(!((ir-&gt;r) &amp; 0x80))" data-ref="_M/ra_hasreg">ra_hasreg</a>(<a class="local col3 ref" href="#553ir" title='ir' data-ref="553ir" data-ref-filename="553ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>))</td></tr>
<tr><th id="1038">1038</th><td>    <a class="macro" href="lj_target.h.html#69" title="(drop |= (((RegSet)1) &lt;&lt; (ir-&gt;r)))" data-ref="_M/rset_set">rset_set</a>(<a class="local col6 ref" href="#556drop" title='drop' data-ref="556drop" data-ref-filename="556drop">drop</a>, <a class="local col3 ref" href="#553ir" title='ir' data-ref="553ir" data-ref-filename="553ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>);  <i>/* WIN64 doesn't spill all FPRs. */</i></td></tr>
<tr><th id="1039">1039</th><td>  <a class="tu ref fn" href="lj_asm.c.html#ra_evictset" title='ra_evictset' data-use='c' data-ref="ra_evictset" data-ref-filename="ra_evictset">ra_evictset</a>(<a class="local col2 ref" href="#552as" title='as' data-ref="552as" data-ref-filename="552as">as</a>, <a class="local col6 ref" href="#556drop" title='drop' data-ref="556drop" data-ref-filename="556drop">drop</a>);</td></tr>
<tr><th id="1040">1040</th><td>  <a class="ref fn" href="#asm_guardcc" title='asm_guardcc' data-ref="asm_guardcc" data-ref-filename="asm_guardcc">asm_guardcc</a>(<a class="local col2 ref" href="#552as" title='as' data-ref="552as" data-ref-filename="552as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_E" title='CC_E' data-ref="CC_E" data-ref-filename="CC_E">CC_E</a>);</td></tr>
<tr><th id="1041">1041</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col2 ref" href="#552as" title='as' data-ref="552as" data-ref-filename="552as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_TEST" title='XO_TEST' data-ref="XO_TEST" data-ref-filename="XO_TEST">XO_TEST</a>, <a class="enum" href="lj_target_x86.h.html#RID_RET" title='RID_RET' data-ref="RID_RET" data-ref-filename="RID_RET">RID_RET</a>, <a class="enum" href="lj_target_x86.h.html#RID_RET" title='RID_RET' data-ref="RID_RET" data-ref-filename="RID_RET">RID_RET</a>);  <i>/* Test return status. */</i></td></tr>
<tr><th id="1042">1042</th><td>  <a class="local col5 ref" href="#555args" title='args' data-ref="555args" data-ref-filename="555args">args</a>[<var>0</var>] = <a class="local col3 ref" href="#553ir" title='ir' data-ref="553ir" data-ref-filename="553ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>;      <i>/* GCstr *str */</i></td></tr>
<tr><th id="1043">1043</th><td>  <a class="local col5 ref" href="#555args" title='args' data-ref="555args" data-ref-filename="555args">args</a>[<var>1</var>] = <a class="macro" href="lj_asm.c.html#111" title="REF_TRUE" data-ref="_M/ASMREF_TMP1">ASMREF_TMP1</a>;  <i>/* TValue *n  */</i></td></tr>
<tr><th id="1044">1044</th><td>  <a class="ref fn" href="#asm_gencall" title='asm_gencall' data-ref="asm_gencall" data-ref-filename="asm_gencall">asm_gencall</a>(<a class="local col2 ref" href="#552as" title='as' data-ref="552as" data-ref-filename="552as">as</a>, <a class="local col4 ref" href="#554ci" title='ci' data-ref="554ci" data-ref-filename="554ci">ci</a>, <a class="local col5 ref" href="#555args" title='args' data-ref="555args" data-ref-filename="555args">args</a>);</td></tr>
<tr><th id="1045">1045</th><td>  <i>/* Store the result to the spill slot or temp slots. */</i></td></tr>
<tr><th id="1046">1046</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col2 ref" href="#552as" title='as' data-ref="552as" data-ref-filename="552as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_LEA" title='XO_LEA' data-ref="XO_LEA" data-ref-filename="XO_LEA">XO_LEA</a>, <a class="tu ref fn" href="lj_asm.c.html#ra_releasetmp" title='ra_releasetmp' data-use='c' data-ref="ra_releasetmp" data-ref-filename="ra_releasetmp">ra_releasetmp</a>(<a class="local col2 ref" href="#552as" title='as' data-ref="552as" data-ref-filename="552as">as</a>, <a class="macro" href="lj_asm.c.html#111" title="REF_TRUE" data-ref="_M/ASMREF_TMP1">ASMREF_TMP1</a>)|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>,</td></tr>
<tr><th id="1047">1047</th><td>	    <a class="enum" href="lj_target_x86.h.html#30" title='RID_ESP' data-ref="RID_ESP" data-ref-filename="RID_ESP">RID_ESP</a>, <a class="macro" href="lj_target_x86.h.html#152" title="(4 * (int32_t)(ir-&gt;s))" data-ref="_M/sps_scale">sps_scale</a>(<a class="local col3 ref" href="#553ir" title='ir' data-ref="553ir" data-ref-filename="553ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::s' data-ref="IRIns::(anonymous)::s" data-ref-filename="IRIns..(anonymous)..s">s</a>));</td></tr>
<tr><th id="1048">1048</th><td>}</td></tr>
<tr><th id="1049">1049</th><td></td></tr>
<tr><th id="1050">1050</th><td><i>/* -- Memory references --------------------------------------------------- */</i></td></tr>
<tr><th id="1051">1051</th><td></td></tr>
<tr><th id="1052">1052</th><td><i>/* Get pointer to TValue. */</i></td></tr>
<tr><th id="1053">1053</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_tvptr" title='asm_tvptr' data-ref="asm_tvptr" data-ref-filename="asm_tvptr">asm_tvptr</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col7 decl" id="557as" title='as' data-type='ASMState *' data-ref="557as" data-ref-filename="557as">as</dfn>, <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col8 decl" id="558dest" title='dest' data-type='Reg' data-ref="558dest" data-ref-filename="558dest">dest</dfn>, <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col9 decl" id="559ref" title='ref' data-type='IRRef' data-ref="559ref" data-ref-filename="559ref">ref</dfn>)</td></tr>
<tr><th id="1054">1054</th><td>{</td></tr>
<tr><th id="1055">1055</th><td>  <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col0 decl" id="560ir" title='ir' data-type='IRIns *' data-ref="560ir" data-ref-filename="560ir">ir</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ref)])" data-ref="_M/IR">IR</a>(<a class="local col9 ref" href="#559ref" title='ref' data-ref="559ref" data-ref-filename="559ref">ref</a>);</td></tr>
<tr><th id="1056">1056</th><td>  <b>if</b> (<a class="macro" href="lj_ir.h.html#363" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM)" data-ref="_M/irt_isnum">irt_isnum</a>(<a class="local col0 ref" href="#560ir" title='ir' data-ref="560ir" data-ref-filename="560ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="1057">1057</th><td>    <i>/* For numbers use the constant itself or a spill slot as a TValue. */</i></td></tr>
<tr><th id="1058">1058</th><td>    <b>if</b> (<a class="macro" href="lj_ir.h.html#470" title="((ref) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col9 ref" href="#559ref" title='ref' data-ref="559ref" data-ref-filename="559ref">ref</a>))</td></tr>
<tr><th id="1059">1059</th><td>      <a class="macro" href="lj_emit_x86.h.html#302" title="emit_loadu64(as, (dest), (uintptr_t)((&amp;(ir)[1].tv)))" data-ref="_M/emit_loada">emit_loada</a>(<a class="local col7 ref" href="#557as" title='as' data-ref="557as" data-ref-filename="557as">as</a>, <a class="local col8 ref" href="#558dest" title='dest' data-ref="558dest" data-ref-filename="558dest">dest</a>, <a class="macro" href="lj_ir.h.html#576" title="(&amp;(ir)[1].tv)" data-ref="_M/ir_knum">ir_knum</a>(<a class="local col0 ref" href="#560ir" title='ir' data-ref="560ir" data-ref-filename="560ir">ir</a>));</td></tr>
<tr><th id="1060">1060</th><td>    <b>else</b></td></tr>
<tr><th id="1061">1061</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col7 ref" href="#557as" title='as' data-ref="557as" data-ref-filename="557as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_LEA" title='XO_LEA' data-ref="XO_LEA" data-ref-filename="XO_LEA">XO_LEA</a>, <a class="local col8 ref" href="#558dest" title='dest' data-ref="558dest" data-ref-filename="558dest">dest</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="enum" href="lj_target_x86.h.html#30" title='RID_ESP' data-ref="RID_ESP" data-ref-filename="RID_ESP">RID_ESP</a>, <a class="tu ref fn" href="lj_asm.c.html#ra_spill" title='ra_spill' data-use='c' data-ref="ra_spill" data-ref-filename="ra_spill">ra_spill</a>(<a class="local col7 ref" href="#557as" title='as' data-ref="557as" data-ref-filename="557as">as</a>, <a class="local col0 ref" href="#560ir" title='ir' data-ref="560ir" data-ref-filename="560ir">ir</a>));</td></tr>
<tr><th id="1062">1062</th><td>  } <b>else</b> {</td></tr>
<tr><th id="1063">1063</th><td>    <i>/* Otherwise use g-&gt;tmptv to hold the TValue. */</i></td></tr>
<tr><th id="1064">1064</th><td><u>#<span data-ppcond="1064">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="1065">1065</th><td>    <b>if</b> (<a class="macro" href="lj_ir.h.html#470" title="((ref) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col9 ref" href="#559ref" title='ref' data-ref="559ref" data-ref-filename="559ref">ref</a>)) {</td></tr>
<tr><th id="1066">1066</th><td>      <a class="typedef" href="lj_obj.h.html#TValue" title='TValue' data-type='union TValue' data-ref="TValue" data-ref-filename="TValue">TValue</a> <dfn class="local col1 decl" id="561k" title='k' data-type='TValue' data-ref="561k" data-ref-filename="561k">k</dfn>;</td></tr>
<tr><th id="1067">1067</th><td>      <a class="ref fn" href="lj_iropt.h.html#lj_ir_kvalue" title='lj_ir_kvalue' data-ref="lj_ir_kvalue" data-ref-filename="lj_ir_kvalue">lj_ir_kvalue</a>(<a class="local col7 ref" href="#557as" title='as' data-ref="557as" data-ref-filename="557as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>-&gt;<a class="ref field" href="lj_jit.h.html#jit_State::L" title='jit_State::L' data-ref="jit_State::L" data-ref-filename="jit_State..L">L</a>, &amp;<a class="local col1 ref" href="#561k" title='k' data-ref="561k" data-ref-filename="561k">k</a>, <a class="local col0 ref" href="#560ir" title='ir' data-ref="560ir" data-ref-filename="560ir">ir</a>);</td></tr>
<tr><th id="1068">1068</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_movmroi" title='emit_movmroi' data-ref="emit_movmroi" data-ref-filename="emit_movmroi">emit_movmroi</a>(<a class="local col7 ref" href="#557as" title='as' data-ref="557as" data-ref-filename="557as">as</a>, <a class="local col8 ref" href="#558dest" title='dest' data-ref="558dest" data-ref-filename="558dest">dest</a>, <var>4</var>, <a class="local col1 ref" href="#561k" title='k' data-ref="561k" data-ref-filename="561k">k</a>.<a class="ref field" href="lj_obj.h.html#TValue::u32" title='TValue::u32' data-ref="TValue::u32" data-ref-filename="TValue..u32">u32</a>.<a class="ref field" href="lj_obj.h.html#208" title='TValue::(anonymous struct)::hi' data-ref="TValue::(anonymous)::hi" data-ref-filename="TValue..(anonymous)..hi">hi</a>);</td></tr>
<tr><th id="1069">1069</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_movmroi" title='emit_movmroi' data-ref="emit_movmroi" data-ref-filename="emit_movmroi">emit_movmroi</a>(<a class="local col7 ref" href="#557as" title='as' data-ref="557as" data-ref-filename="557as">as</a>, <a class="local col8 ref" href="#558dest" title='dest' data-ref="558dest" data-ref-filename="558dest">dest</a>, <var>0</var>, <a class="local col1 ref" href="#561k" title='k' data-ref="561k" data-ref-filename="561k">k</a>.<a class="ref field" href="lj_obj.h.html#TValue::u32" title='TValue::u32' data-ref="TValue::u32" data-ref-filename="TValue..u32">u32</a>.<a class="ref field" href="lj_obj.h.html#208" title='TValue::(anonymous struct)::lo' data-ref="TValue::(anonymous)::lo" data-ref-filename="TValue..(anonymous)..lo">lo</a>);</td></tr>
<tr><th id="1070">1070</th><td>    } <b>else</b> {</td></tr>
<tr><th id="1071">1071</th><td>      <i>/* TODO: 64 bit store + 32 bit load-modify-store is suboptimal. */</i></td></tr>
<tr><th id="1072">1072</th><td>      <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col2 decl" id="562src" title='src' data-type='Reg' data-ref="562src" data-ref-filename="562src">src</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col7 ref" href="#557as" title='as' data-ref="557as" data-ref-filename="557as">as</a>, <a class="local col9 ref" href="#559ref" title='ref' data-ref="559ref" data-ref-filename="559ref">ref</a>, <a class="macro" href="lj_target.h.html#71" title="(((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH))) &amp; ~(((RegSet)1) &lt;&lt; (dest)))" data-ref="_M/rset_exclude">rset_exclude</a>(<a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>, <a class="local col8 ref" href="#558dest" title='dest' data-ref="558dest" data-ref-filename="558dest">dest</a>));</td></tr>
<tr><th id="1073">1073</th><td>      <b>if</b> (<a class="macro" href="lj_ir.h.html#394" title="((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)((ir-&gt;t).irt &amp; IRT_TYPE))) &amp; 1)" data-ref="_M/irt_is64">irt_is64</a>(<a class="local col0 ref" href="#560ir" title='ir' data-ref="560ir" data-ref-filename="560ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="1074">1074</th><td>	<a class="macro" href="lj_emit_x86.h.html#31" title="(*(uint32_t *)(as-&gt;mcp-4) = (irt_toitype_(((IRType)(((ir-&gt;t)).irt &amp; IRT_TYPE))) &lt;&lt; 15), as-&gt;mcp -= 4)" data-ref="_M/emit_u32">emit_u32</a>(<a class="local col7 ref" href="#557as" title='as' data-ref="557as" data-ref-filename="557as">as</a>, <a class="macro" href="lj_ir.h.html#427" title="irt_toitype_(((IRType)(((ir-&gt;t)).irt &amp; IRT_TYPE)))" data-ref="_M/irt_toitype">irt_toitype</a>(<a class="local col0 ref" href="#560ir" title='ir' data-ref="560ir" data-ref-filename="560ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) &lt;&lt; <var>15</var>);</td></tr>
<tr><th id="1075">1075</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col7 ref" href="#557as" title='as' data-ref="557as" data-ref-filename="557as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_ARITHi" title='XO_ARITHi' data-ref="XO_ARITHi" data-ref-filename="XO_ARITHi">XO_ARITHi</a>, <a class="enum" href="lj_target_x86.h.html#XOg_OR" title='XOg_OR' data-ref="XOg_OR" data-ref-filename="XOg_OR">XOg_OR</a>, <a class="local col8 ref" href="#558dest" title='dest' data-ref="558dest" data-ref-filename="558dest">dest</a>, <var>4</var>);</td></tr>
<tr><th id="1076">1076</th><td>      } <b>else</b> {</td></tr>
<tr><th id="1077">1077</th><td>	<i>/* Currently, no caller passes integers that might end up here. */</i></td></tr>
<tr><th id="1078">1078</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_movmroi" title='emit_movmroi' data-ref="emit_movmroi" data-ref-filename="emit_movmroi">emit_movmroi</a>(<a class="local col7 ref" href="#557as" title='as' data-ref="557as" data-ref-filename="557as">as</a>, <a class="local col8 ref" href="#558dest" title='dest' data-ref="558dest" data-ref-filename="558dest">dest</a>, <var>4</var>, (<a class="macro" href="lj_ir.h.html#427" title="irt_toitype_(((IRType)(((ir-&gt;t)).irt &amp; IRT_TYPE)))" data-ref="_M/irt_toitype">irt_toitype</a>(<a class="local col0 ref" href="#560ir" title='ir' data-ref="560ir" data-ref-filename="560ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) &lt;&lt; <var>15</var>));</td></tr>
<tr><th id="1079">1079</th><td>      }</td></tr>
<tr><th id="1080">1080</th><td>      <a class="macro" href="lj_emit_x86.h.html#262" title="emit_rmro(as, XO_MOVto, (((src) + (((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)(((ir)-&gt;t).irt &amp; IRT_TYPE))) &amp; 1) ? (0x200|0x080000) : 0))), (dest), (0))" data-ref="_M/emit_movtomro">emit_movtomro</a>(<a class="local col7 ref" href="#557as" title='as' data-ref="557as" data-ref-filename="557as">as</a>, <a class="macro" href="lj_emit_x86.h.html#525" title="((src) + (((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)(((ir)-&gt;t).irt &amp; IRT_TYPE))) &amp; 1) ? (0x200|0x080000) : 0))" data-ref="_M/REX_64IR">REX_64IR</a>(<a class="local col0 ref" href="#560ir" title='ir' data-ref="560ir" data-ref-filename="560ir">ir</a>, <a class="local col2 ref" href="#562src" title='src' data-ref="562src" data-ref-filename="562src">src</a>), <a class="local col8 ref" href="#558dest" title='dest' data-ref="558dest" data-ref-filename="558dest">dest</a>, <var>0</var>);</td></tr>
<tr><th id="1081">1081</th><td>    }</td></tr>
<tr><th id="1082">1082</th><td><u>#<span data-ppcond="1064">else</span></u></td></tr>
<tr><th id="1083">1083</th><td>    <b>if</b> (!irref_isk(ref)) {</td></tr>
<tr><th id="1084">1084</th><td>      Reg src = ra_alloc1(as, ref, rset_exclude(RSET_GPR, dest));</td></tr>
<tr><th id="1085">1085</th><td>      emit_movtomro(as, REX_64IR(ir, src), dest, <var>0</var>);</td></tr>
<tr><th id="1086">1086</th><td>    } <b>else</b> <b>if</b> (!irt_ispri(ir-&gt;t)) {</td></tr>
<tr><th id="1087">1087</th><td>      emit_movmroi(as, dest, <var>0</var>, ir-&gt;i);</td></tr>
<tr><th id="1088">1088</th><td>    }</td></tr>
<tr><th id="1089">1089</th><td>    <b>if</b> (!(LJ_64 &amp;&amp; irt_islightud(ir-&gt;t)))</td></tr>
<tr><th id="1090">1090</th><td>      emit_movmroi(as, dest, <var>4</var>, irt_toitype(ir-&gt;t));</td></tr>
<tr><th id="1091">1091</th><td><u>#<span data-ppcond="1064">endif</span></u></td></tr>
<tr><th id="1092">1092</th><td>    <a class="macro" href="lj_emit_x86.h.html#302" title="emit_loadu64(as, (dest), (uintptr_t)(&amp;(&amp;((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;g)-&gt;tmptv))" data-ref="_M/emit_loada">emit_loada</a>(<a class="local col7 ref" href="#557as" title='as' data-ref="557as" data-ref-filename="557as">as</a>, <a class="local col8 ref" href="#558dest" title='dest' data-ref="558dest" data-ref-filename="558dest">dest</a>, &amp;<a class="macro" href="lj_dispatch.h.html#115" title="(&amp;((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;g)" data-ref="_M/J2G">J2G</a>(<a class="local col7 ref" href="#557as" title='as' data-ref="557as" data-ref-filename="557as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>)-&gt;<a class="ref field" href="lj_obj.h.html#global_State::tmptv" title='global_State::tmptv' data-ref="global_State::tmptv" data-ref-filename="global_State..tmptv">tmptv</a>);</td></tr>
<tr><th id="1093">1093</th><td>  }</td></tr>
<tr><th id="1094">1094</th><td>}</td></tr>
<tr><th id="1095">1095</th><td></td></tr>
<tr><th id="1096">1096</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_aref" title='asm_aref' data-ref="asm_aref" data-ref-filename="asm_aref">asm_aref</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col3 decl" id="563as" title='as' data-type='ASMState *' data-ref="563as" data-ref-filename="563as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col4 decl" id="564ir" title='ir' data-type='IRIns *' data-ref="564ir" data-ref-filename="564ir">ir</dfn>)</td></tr>
<tr><th id="1097">1097</th><td>{</td></tr>
<tr><th id="1098">1098</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col5 decl" id="565dest" title='dest' data-type='Reg' data-ref="565dest" data-ref-filename="565dest">dest</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col3 ref" href="#563as" title='as' data-ref="563as" data-ref-filename="563as">as</a>, <a class="local col4 ref" href="#564ir" title='ir' data-ref="564ir" data-ref-filename="564ir">ir</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="1099">1099</th><td>  <a class="ref fn" href="#asm_fusearef" title='asm_fusearef' data-ref="asm_fusearef" data-ref-filename="asm_fusearef">asm_fusearef</a>(<a class="local col3 ref" href="#563as" title='as' data-ref="563as" data-ref-filename="563as">as</a>, <a class="local col4 ref" href="#564ir" title='ir' data-ref="564ir" data-ref-filename="564ir">ir</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="1100">1100</th><td>  <b>if</b> (!(<a class="local col3 ref" href="#563as" title='as' data-ref="563as" data-ref-filename="563as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::idx" title='(anonymous struct)::idx' data-ref="(anonymous)::idx" data-ref-filename="(anonymous)..idx">idx</a> == <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a> &amp;&amp; <a class="local col3 ref" href="#563as" title='as' data-ref="563as" data-ref-filename="563as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> == <var>0</var>))</td></tr>
<tr><th id="1101">1101</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col3 ref" href="#563as" title='as' data-ref="563as" data-ref-filename="563as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_LEA" title='XO_LEA' data-ref="XO_LEA" data-ref-filename="XO_LEA">XO_LEA</a>, <a class="local col5 ref" href="#565dest" title='dest' data-ref="565dest" data-ref-filename="565dest">dest</a>|<a class="macro" href="lj_emit_x86.h.html#24" title="(0x200|0x080000)" data-ref="_M/REX_GC64">REX_GC64</a>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="1102">1102</th><td>  <b>else</b> <b>if</b> (<a class="local col3 ref" href="#563as" title='as' data-ref="563as" data-ref-filename="563as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> != <a class="local col5 ref" href="#565dest" title='dest' data-ref="565dest" data-ref-filename="565dest">dest</a>)</td></tr>
<tr><th id="1103">1103</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col3 ref" href="#563as" title='as' data-ref="563as" data-ref-filename="563as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col5 ref" href="#565dest" title='dest' data-ref="565dest" data-ref-filename="565dest">dest</a>|<a class="macro" href="lj_emit_x86.h.html#24" title="(0x200|0x080000)" data-ref="_M/REX_GC64">REX_GC64</a>, <a class="local col3 ref" href="#563as" title='as' data-ref="563as" data-ref-filename="563as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a>);</td></tr>
<tr><th id="1104">1104</th><td>}</td></tr>
<tr><th id="1105">1105</th><td></td></tr>
<tr><th id="1106">1106</th><td><i>/* Inlined hash lookup. Specialized for key type and for const keys.</i></td></tr>
<tr><th id="1107">1107</th><td><i>** The equivalent C code is:</i></td></tr>
<tr><th id="1108">1108</th><td><i>**   Node *n = hashkey(t, key);</i></td></tr>
<tr><th id="1109">1109</th><td><i>**   do {</i></td></tr>
<tr><th id="1110">1110</th><td><i>**     if (lj_obj_equal(&amp;n-&gt;key, key)) return &amp;n-&gt;val;</i></td></tr>
<tr><th id="1111">1111</th><td><i>**   } while ((n = nextnode(n)));</i></td></tr>
<tr><th id="1112">1112</th><td><i>**   return niltv(L);</i></td></tr>
<tr><th id="1113">1113</th><td><i>*/</i></td></tr>
<tr><th id="1114">1114</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_href" title='asm_href' data-ref="asm_href" data-ref-filename="asm_href">asm_href</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col6 decl" id="566as" title='as' data-type='ASMState *' data-ref="566as" data-ref-filename="566as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col7 decl" id="567ir" title='ir' data-type='IRIns *' data-ref="567ir" data-ref-filename="567ir">ir</dfn>, <a class="typedef" href="lj_ir.h.html#IROp" title='IROp' data-type='enum IROp' data-ref="IROp" data-ref-filename="IROp">IROp</a> <dfn class="local col8 decl" id="568merge" title='merge' data-type='IROp' data-ref="568merge" data-ref-filename="568merge">merge</dfn>)</td></tr>
<tr><th id="1115">1115</th><td>{</td></tr>
<tr><th id="1116">1116</th><td>  <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col9 decl" id="569allow" title='allow' data-type='RegSet' data-ref="569allow" data-ref-filename="569allow">allow</dfn> = <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>;</td></tr>
<tr><th id="1117">1117</th><td>  <em>int</em> <dfn class="local col0 decl" id="570destused" title='destused' data-type='int' data-ref="570destused" data-ref-filename="570destused">destused</dfn> = <a class="macro" href="lj_asm.c.html#309" title="((!(((ir)-&gt;r) &amp; 0x80)) || (((ir)-&gt;s) != 0))" data-ref="_M/ra_used">ra_used</a>(<a class="local col7 ref" href="#567ir" title='ir' data-ref="567ir" data-ref-filename="567ir">ir</a>);</td></tr>
<tr><th id="1118">1118</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col1 decl" id="571dest" title='dest' data-type='Reg' data-ref="571dest" data-ref-filename="571dest">dest</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="local col7 ref" href="#567ir" title='ir' data-ref="567ir" data-ref-filename="567ir">ir</a>, <a class="local col9 ref" href="#569allow" title='allow' data-ref="569allow" data-ref-filename="569allow">allow</a>);</td></tr>
<tr><th id="1119">1119</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col2 decl" id="572tab" title='tab' data-type='Reg' data-ref="572tab" data-ref-filename="572tab">tab</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="local col7 ref" href="#567ir" title='ir' data-ref="567ir" data-ref-filename="567ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="macro" href="lj_target.h.html#70" title="(allow &amp;= ~(((RegSet)1) &lt;&lt; (dest)))" data-ref="_M/rset_clear">rset_clear</a>(<a class="local col9 ref" href="#569allow" title='allow' data-ref="569allow" data-ref-filename="569allow">allow</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>));</td></tr>
<tr><th id="1120">1120</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col3 decl" id="573key" title='key' data-type='Reg' data-ref="573key" data-ref-filename="573key">key</dfn> = <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a>, <dfn class="local col4 decl" id="574tmp" title='tmp' data-type='Reg' data-ref="574tmp" data-ref-filename="574tmp">tmp</dfn> = <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a>;</td></tr>
<tr><th id="1121">1121</th><td>  <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col5 decl" id="575irkey" title='irkey' data-type='IRIns *' data-ref="575irkey" data-ref-filename="575irkey">irkey</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ir-&gt;op2)])" data-ref="_M/IR">IR</a>(<a class="local col7 ref" href="#567ir" title='ir' data-ref="567ir" data-ref-filename="567ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>);</td></tr>
<tr><th id="1122">1122</th><td>  <em>int</em> <dfn class="local col6 decl" id="576isk" title='isk' data-type='int' data-ref="576isk" data-ref-filename="576isk">isk</dfn> = <a class="macro" href="lj_ir.h.html#470" title="((ir-&gt;op2) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col7 ref" href="#567ir" title='ir' data-ref="567ir" data-ref-filename="567ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>);</td></tr>
<tr><th id="1123">1123</th><td>  <a class="typedef" href="lj_ir.h.html#IRType1" title='IRType1' data-type='struct IRType1' data-ref="IRType1" data-ref-filename="IRType1">IRType1</a> <dfn class="local col7 decl" id="577kt" title='kt' data-type='IRType1' data-ref="577kt" data-ref-filename="577kt">kt</dfn> = <a class="local col5 ref" href="#575irkey" title='irkey' data-ref="575irkey" data-ref-filename="575irkey">irkey</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>;</td></tr>
<tr><th id="1124">1124</th><td>  <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a> <dfn class="local col8 decl" id="578khash" title='khash' data-type='uint32_t' data-ref="578khash" data-ref-filename="578khash">khash</dfn>;</td></tr>
<tr><th id="1125">1125</th><td>  <a class="typedef" href="lj_emit_x86.h.html#MCLabel" title='MCLabel' data-type='MCode *' data-ref="MCLabel" data-ref-filename="MCLabel">MCLabel</a> <dfn class="local col9 decl" id="579l_end" title='l_end' data-type='MCLabel' data-ref="579l_end" data-ref-filename="579l_end">l_end</dfn>, <dfn class="local col0 decl" id="580l_loop" title='l_loop' data-type='MCLabel' data-ref="580l_loop" data-ref-filename="580l_loop">l_loop</dfn>, <dfn class="local col1 decl" id="581l_next" title='l_next' data-type='MCLabel' data-ref="581l_next" data-ref-filename="581l_next">l_next</dfn>;</td></tr>
<tr><th id="1126">1126</th><td></td></tr>
<tr><th id="1127">1127</th><td>  <b>if</b> (!<a class="local col6 ref" href="#576isk" title='isk' data-ref="576isk" data-ref-filename="576isk">isk</a>) {</td></tr>
<tr><th id="1128">1128</th><td>    <a class="macro" href="lj_target.h.html#70" title="(allow &amp;= ~(((RegSet)1) &lt;&lt; (tab)))" data-ref="_M/rset_clear">rset_clear</a>(<a class="local col9 ref" href="#569allow" title='allow' data-ref="569allow" data-ref-filename="569allow">allow</a>, <a class="local col2 ref" href="#572tab" title='tab' data-ref="572tab" data-ref-filename="572tab">tab</a>);</td></tr>
<tr><th id="1129">1129</th><td>    <a class="local col3 ref" href="#573key" title='key' data-ref="573key" data-ref-filename="573key">key</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="local col7 ref" href="#567ir" title='ir' data-ref="567ir" data-ref-filename="567ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>, <a class="macro" href="lj_ir.h.html#363" title="(((IRType)((kt).irt &amp; IRT_TYPE)) == IRT_NUM)" data-ref="_M/irt_isnum">irt_isnum</a>(<a class="local col7 ref" href="#577kt" title='kt' data-ref="577kt" data-ref-filename="577kt">kt</a>) ? <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a> : <a class="local col9 ref" href="#569allow" title='allow' data-ref="569allow" data-ref-filename="569allow">allow</a>);</td></tr>
<tr><th id="1130">1130</th><td>    <b>if</b> (<a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a> || !<a class="macro" href="lj_ir.h.html#359" title="(((IRType)((kt).irt &amp; IRT_TYPE)) == IRT_STR)" data-ref="_M/irt_isstr">irt_isstr</a>(<a class="local col7 ref" href="#577kt" title='kt' data-ref="577kt" data-ref-filename="577kt">kt</a>))</td></tr>
<tr><th id="1131">1131</th><td>      <a class="local col4 ref" href="#574tmp" title='tmp' data-ref="574tmp" data-ref-filename="574tmp">tmp</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_scratch" title='ra_scratch' data-use='c' data-ref="ra_scratch" data-ref-filename="ra_scratch">ra_scratch</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="macro" href="lj_target.h.html#71" title="(allow &amp; ~(((RegSet)1) &lt;&lt; (key)))" data-ref="_M/rset_exclude">rset_exclude</a>(<a class="local col9 ref" href="#569allow" title='allow' data-ref="569allow" data-ref-filename="569allow">allow</a>, <a class="local col3 ref" href="#573key" title='key' data-ref="573key" data-ref-filename="573key">key</a>));</td></tr>
<tr><th id="1132">1132</th><td>  }</td></tr>
<tr><th id="1133">1133</th><td></td></tr>
<tr><th id="1134">1134</th><td>  <i>/* Key not found in chain: jump to exit (if merged) or load niltv. */</i></td></tr>
<tr><th id="1135">1135</th><td>  <a class="local col9 ref" href="#579l_end" title='l_end' data-ref="579l_end" data-ref-filename="579l_end">l_end</a> = <a class="macro" href="lj_emit_x86.h.html#472" title="((as)-&gt;mcp)" data-ref="_M/emit_label">emit_label</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>);</td></tr>
<tr><th id="1136">1136</th><td>  <b>if</b> (<a class="local col8 ref" href="#568merge" title='merge' data-ref="568merge" data-ref-filename="568merge">merge</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_NE' data-ref="IR_NE" data-ref-filename="IR_NE">IR_NE</a>)</td></tr>
<tr><th id="1137">1137</th><td>    <a class="ref fn" href="#asm_guardcc" title='asm_guardcc' data-ref="asm_guardcc" data-ref-filename="asm_guardcc">asm_guardcc</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_E" title='CC_E' data-ref="CC_E" data-ref-filename="CC_E">CC_E</a>);  <i>/* XI_JMP is not found by lj_asm_patchexit. */</i></td></tr>
<tr><th id="1138">1138</th><td>  <b>else</b> <b>if</b> (<a class="local col0 ref" href="#570destused" title='destused' data-ref="570destused" data-ref-filename="570destused">destused</a>)</td></tr>
<tr><th id="1139">1139</th><td>    <a class="macro" href="lj_emit_x86.h.html#302" title="emit_loadu64(as, (dest), (uintptr_t)((&amp;((&amp;((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;g))-&gt;nilnode.val)))" data-ref="_M/emit_loada">emit_loada</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <a class="macro" href="lj_obj.h.html#662" title="(&amp;((&amp;((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;g))-&gt;nilnode.val)" data-ref="_M/niltvg">niltvg</a>(<a class="macro" href="lj_dispatch.h.html#115" title="(&amp;((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;g)" data-ref="_M/J2G">J2G</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>)));</td></tr>
<tr><th id="1140">1140</th><td></td></tr>
<tr><th id="1141">1141</th><td>  <i>/* Follow hash chain until the end. */</i></td></tr>
<tr><th id="1142">1142</th><td>  <a class="local col0 ref" href="#580l_loop" title='l_loop' data-ref="580l_loop" data-ref-filename="580l_loop">l_loop</a> = <a class="ref fn" href="lj_emit_x86.h.html#emit_sjcc_label" title='emit_sjcc_label' data-ref="emit_sjcc_label" data-ref-filename="emit_sjcc_label">emit_sjcc_label</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_NZ" title='CC_NZ' data-ref="CC_NZ" data-ref-filename="CC_NZ">CC_NZ</a>);</td></tr>
<tr><th id="1143">1143</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_TEST" title='XO_TEST' data-ref="XO_TEST" data-ref-filename="XO_TEST">XO_TEST</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>|<a class="macro" href="lj_emit_x86.h.html#24" title="(0x200|0x080000)" data-ref="_M/REX_GC64">REX_GC64</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>);</td></tr>
<tr><th id="1144">1144</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>|<a class="macro" href="lj_emit_x86.h.html#24" title="(0x200|0x080000)" data-ref="_M/REX_GC64">REX_GC64</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <span class="macro" title="__builtin_offsetof(Node, next)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#Node" title='Node' data-type='struct Node' data-ref="Node" data-ref-filename="Node">Node</a>, next));</td></tr>
<tr><th id="1145">1145</th><td>  <a class="local col1 ref" href="#581l_next" title='l_next' data-ref="581l_next" data-ref-filename="581l_next">l_next</a> = <a class="macro" href="lj_emit_x86.h.html#472" title="((as)-&gt;mcp)" data-ref="_M/emit_label">emit_label</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>);</td></tr>
<tr><th id="1146">1146</th><td></td></tr>
<tr><th id="1147">1147</th><td>  <i>/* Type and value comparison. */</i></td></tr>
<tr><th id="1148">1148</th><td>  <b>if</b> (<a class="local col8 ref" href="#568merge" title='merge' data-ref="568merge" data-ref-filename="568merge">merge</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_EQ' data-ref="IR_EQ" data-ref-filename="IR_EQ">IR_EQ</a>)</td></tr>
<tr><th id="1149">1149</th><td>    <a class="ref fn" href="#asm_guardcc" title='asm_guardcc' data-ref="asm_guardcc" data-ref-filename="asm_guardcc">asm_guardcc</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_E" title='CC_E' data-ref="CC_E" data-ref-filename="CC_E">CC_E</a>);</td></tr>
<tr><th id="1150">1150</th><td>  <b>else</b></td></tr>
<tr><th id="1151">1151</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_sjcc" title='emit_sjcc' data-ref="emit_sjcc" data-ref-filename="emit_sjcc">emit_sjcc</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_E" title='CC_E' data-ref="CC_E" data-ref-filename="CC_E">CC_E</a>, <a class="local col9 ref" href="#579l_end" title='l_end' data-ref="579l_end" data-ref-filename="579l_end">l_end</a>);</td></tr>
<tr><th id="1152">1152</th><td>  <b>if</b> (<a class="macro" href="lj_ir.h.html#363" title="(((IRType)((kt).irt &amp; IRT_TYPE)) == IRT_NUM)" data-ref="_M/irt_isnum">irt_isnum</a>(<a class="local col7 ref" href="#577kt" title='kt' data-ref="577kt" data-ref-filename="577kt">kt</a>)) {</td></tr>
<tr><th id="1153">1153</th><td>    <b>if</b> (<a class="local col6 ref" href="#576isk" title='isk' data-ref="576isk" data-ref-filename="576isk">isk</a>) {</td></tr>
<tr><th id="1154">1154</th><td>      <i>/* Assumes -0.0 is already canonicalized to +0.0. */</i></td></tr>
<tr><th id="1155">1155</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_gmroi" title='emit_gmroi' data-ref="emit_gmroi" data-ref-filename="emit_gmroi">emit_gmroi</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="macro" href="lj_target_x86.h.html#324" title="((x86Group)(((XI_ARITHi8) &lt;&lt; 16) + ((XI_ARITHi) &lt;&lt; 8) + (XOg_CMP)))" data-ref="_M/XG_ARITHi">XG_ARITHi</a>(<a class="enum" href="lj_target_x86.h.html#XOg_CMP" title='XOg_CMP' data-ref="XOg_CMP" data-ref-filename="XOg_CMP">XOg_CMP</a>), <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <span class="macro" title="__builtin_offsetof(Node, key.u32.lo)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#Node" title='Node' data-type='struct Node' data-ref="Node" data-ref-filename="Node">Node</a>, key.u32.lo),</td></tr>
<tr><th id="1156">1156</th><td>		 (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<a class="macro" href="lj_ir.h.html#576" title="(&amp;(irkey)[1].tv)" data-ref="_M/ir_knum">ir_knum</a>(<a class="local col5 ref" href="#575irkey" title='irkey' data-ref="575irkey" data-ref-filename="575irkey">irkey</a>)-&gt;<a class="ref field" href="lj_obj.h.html#TValue::u32" title='TValue::u32' data-ref="TValue::u32" data-ref-filename="TValue..u32">u32</a>.<a class="ref field" href="lj_obj.h.html#208" title='TValue::(anonymous struct)::lo' data-ref="TValue::(anonymous)::lo" data-ref-filename="TValue..(anonymous)..lo">lo</a>);</td></tr>
<tr><th id="1157">1157</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_sjcc" title='emit_sjcc' data-ref="emit_sjcc" data-ref-filename="emit_sjcc">emit_sjcc</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_NE" title='CC_NE' data-ref="CC_NE" data-ref-filename="CC_NE">CC_NE</a>, <a class="local col1 ref" href="#581l_next" title='l_next' data-ref="581l_next" data-ref-filename="581l_next">l_next</a>);</td></tr>
<tr><th id="1158">1158</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_gmroi" title='emit_gmroi' data-ref="emit_gmroi" data-ref-filename="emit_gmroi">emit_gmroi</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="macro" href="lj_target_x86.h.html#324" title="((x86Group)(((XI_ARITHi8) &lt;&lt; 16) + ((XI_ARITHi) &lt;&lt; 8) + (XOg_CMP)))" data-ref="_M/XG_ARITHi">XG_ARITHi</a>(<a class="enum" href="lj_target_x86.h.html#XOg_CMP" title='XOg_CMP' data-ref="XOg_CMP" data-ref-filename="XOg_CMP">XOg_CMP</a>), <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <span class="macro" title="__builtin_offsetof(Node, key.u32.hi)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#Node" title='Node' data-type='struct Node' data-ref="Node" data-ref-filename="Node">Node</a>, key.u32.hi),</td></tr>
<tr><th id="1159">1159</th><td>		 (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<a class="macro" href="lj_ir.h.html#576" title="(&amp;(irkey)[1].tv)" data-ref="_M/ir_knum">ir_knum</a>(<a class="local col5 ref" href="#575irkey" title='irkey' data-ref="575irkey" data-ref-filename="575irkey">irkey</a>)-&gt;<a class="ref field" href="lj_obj.h.html#TValue::u32" title='TValue::u32' data-ref="TValue::u32" data-ref-filename="TValue..u32">u32</a>.<a class="ref field" href="lj_obj.h.html#208" title='TValue::(anonymous struct)::hi' data-ref="TValue::(anonymous)::hi" data-ref-filename="TValue..(anonymous)..hi">hi</a>);</td></tr>
<tr><th id="1160">1160</th><td>    } <b>else</b> {</td></tr>
<tr><th id="1161">1161</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_sjcc" title='emit_sjcc' data-ref="emit_sjcc" data-ref-filename="emit_sjcc">emit_sjcc</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_P" title='CC_P' data-ref="CC_P" data-ref-filename="CC_P">CC_P</a>, <a class="local col1 ref" href="#581l_next" title='l_next' data-ref="581l_next" data-ref-filename="581l_next">l_next</a>);</td></tr>
<tr><th id="1162">1162</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_UCOMISD" title='XO_UCOMISD' data-ref="XO_UCOMISD" data-ref-filename="XO_UCOMISD">XO_UCOMISD</a>, <a class="local col3 ref" href="#573key" title='key' data-ref="573key" data-ref-filename="573key">key</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <span class="macro" title="__builtin_offsetof(Node, key.n)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#Node" title='Node' data-type='struct Node' data-ref="Node" data-ref-filename="Node">Node</a>, key.n));</td></tr>
<tr><th id="1163">1163</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_sjcc" title='emit_sjcc' data-ref="emit_sjcc" data-ref-filename="emit_sjcc">emit_sjcc</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_AE" title='CC_AE' data-ref="CC_AE" data-ref-filename="CC_AE">CC_AE</a>, <a class="local col1 ref" href="#581l_next" title='l_next' data-ref="581l_next" data-ref-filename="581l_next">l_next</a>);</td></tr>
<tr><th id="1164">1164</th><td>      <i>/* The type check avoids NaN penalties and complaints from Valgrind. */</i></td></tr>
<tr><th id="1165">1165</th><td><u>#<span data-ppcond="1165">if</span> <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp; !<a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="1166">1166</th><td>      emit_u32(as, LJ_TISNUM);</td></tr>
<tr><th id="1167">1167</th><td>      emit_rmro(as, XO_ARITHi, XOg_CMP, dest, offsetof(Node, key.it));</td></tr>
<tr><th id="1168">1168</th><td><u>#<span data-ppcond="1165">else</span></u></td></tr>
<tr><th id="1169">1169</th><td>      <a class="macro" href="lj_emit_x86.h.html#29" title="(*--as-&gt;mcp = (MCode)((~13u)))" data-ref="_M/emit_i8">emit_i8</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="macro" href="lj_obj.h.html#280" title="(~13u)" data-ref="_M/LJ_TISNUM">LJ_TISNUM</a>);</td></tr>
<tr><th id="1170">1170</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_ARITHi8" title='XO_ARITHi8' data-ref="XO_ARITHi8" data-ref-filename="XO_ARITHi8">XO_ARITHi8</a>, <a class="enum" href="lj_target_x86.h.html#XOg_CMP" title='XOg_CMP' data-ref="XOg_CMP" data-ref-filename="XOg_CMP">XOg_CMP</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <span class="macro" title="__builtin_offsetof(Node, key.it)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#Node" title='Node' data-type='struct Node' data-ref="Node" data-ref-filename="Node">Node</a>, key.it));</td></tr>
<tr><th id="1171">1171</th><td><u>#<span data-ppcond="1165">endif</span></u></td></tr>
<tr><th id="1172">1172</th><td>    }</td></tr>
<tr><th id="1173">1173</th><td><u>#<span data-ppcond="1173">if</span> <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp; !<a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="1174">1174</th><td>  } <b>else</b> <b>if</b> (irt_islightud(kt)) {</td></tr>
<tr><th id="1175">1175</th><td>    emit_rmro(as, XO_CMP, key|REX_64, dest, offsetof(Node, key.u64));</td></tr>
<tr><th id="1176">1176</th><td><u>#<span data-ppcond="1173">endif</span></u></td></tr>
<tr><th id="1177">1177</th><td><u>#<span data-ppcond="1177">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="1178">1178</th><td>  } <b>else</b> <b>if</b> (<a class="macro" href="lj_ir.h.html#376" title="(((uint32_t)(((kt)).irt &amp; IRT_TYPE) - (uint32_t)(IRT_LIGHTUD) &lt;= (uint32_t)(IRT_UDATA-IRT_LIGHTUD)))" data-ref="_M/irt_isaddr">irt_isaddr</a>(<a class="local col7 ref" href="#577kt" title='kt' data-ref="577kt" data-ref-filename="577kt">kt</a>)) {</td></tr>
<tr><th id="1179">1179</th><td>    <b>if</b> (<a class="local col6 ref" href="#576isk" title='isk' data-ref="576isk" data-ref-filename="576isk">isk</a>) {</td></tr>
<tr><th id="1180">1180</th><td>      <a class="typedef" href="lj_obj.h.html#TValue" title='TValue' data-type='union TValue' data-ref="TValue" data-ref-filename="TValue">TValue</a> <dfn class="local col2 decl" id="582k" title='k' data-type='TValue' data-ref="582k" data-ref-filename="582k">k</dfn>;</td></tr>
<tr><th id="1181">1181</th><td>      <a class="local col2 ref" href="#582k" title='k' data-ref="582k" data-ref-filename="582k">k</a>.<a class="ref field" href="lj_obj.h.html#TValue::u64" title='TValue::u64' data-ref="TValue::u64" data-ref-filename="TValue..u64">u64</a> = ((<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a>)<a class="macro" href="lj_ir.h.html#427" title="irt_toitype_(((IRType)(((irkey-&gt;t)).irt &amp; IRT_TYPE)))" data-ref="_M/irt_toitype">irt_toitype</a>(<a class="local col5 ref" href="#575irkey" title='irkey' data-ref="575irkey" data-ref-filename="575irkey">irkey</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) &lt;&lt; <var>47</var>) | <a class="local col5 ref" href="#575irkey" title='irkey' data-ref="575irkey" data-ref-filename="575irkey">irkey</a>[<var>1</var>].<a class="ref field" href="lj_ir.h.html#IRIns::tv" title='IRIns::tv' data-ref="IRIns::tv" data-ref-filename="IRIns..tv">tv</a>.<a class="ref field" href="lj_obj.h.html#TValue::u64" title='TValue::u64' data-ref="TValue::u64" data-ref-filename="TValue..u64">u64</a>;</td></tr>
<tr><th id="1182">1182</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_gmroi" title='emit_gmroi' data-ref="emit_gmroi" data-ref-filename="emit_gmroi">emit_gmroi</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="macro" href="lj_target_x86.h.html#324" title="((x86Group)(((XI_ARITHi8) &lt;&lt; 16) + ((XI_ARITHi) &lt;&lt; 8) + (XOg_CMP)))" data-ref="_M/XG_ARITHi">XG_ARITHi</a>(<a class="enum" href="lj_target_x86.h.html#XOg_CMP" title='XOg_CMP' data-ref="XOg_CMP" data-ref-filename="XOg_CMP">XOg_CMP</a>), <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <span class="macro" title="__builtin_offsetof(Node, key.u32.lo)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#Node" title='Node' data-type='struct Node' data-ref="Node" data-ref-filename="Node">Node</a>, key.u32.lo),</td></tr>
<tr><th id="1183">1183</th><td>		 <a class="local col2 ref" href="#582k" title='k' data-ref="582k" data-ref-filename="582k">k</a>.<a class="ref field" href="lj_obj.h.html#TValue::u32" title='TValue::u32' data-ref="TValue::u32" data-ref-filename="TValue..u32">u32</a>.<a class="ref field" href="lj_obj.h.html#208" title='TValue::(anonymous struct)::lo' data-ref="TValue::(anonymous)::lo" data-ref-filename="TValue..(anonymous)..lo">lo</a>);</td></tr>
<tr><th id="1184">1184</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_sjcc" title='emit_sjcc' data-ref="emit_sjcc" data-ref-filename="emit_sjcc">emit_sjcc</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_NE" title='CC_NE' data-ref="CC_NE" data-ref-filename="CC_NE">CC_NE</a>, <a class="local col1 ref" href="#581l_next" title='l_next' data-ref="581l_next" data-ref-filename="581l_next">l_next</a>);</td></tr>
<tr><th id="1185">1185</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_gmroi" title='emit_gmroi' data-ref="emit_gmroi" data-ref-filename="emit_gmroi">emit_gmroi</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="macro" href="lj_target_x86.h.html#324" title="((x86Group)(((XI_ARITHi8) &lt;&lt; 16) + ((XI_ARITHi) &lt;&lt; 8) + (XOg_CMP)))" data-ref="_M/XG_ARITHi">XG_ARITHi</a>(<a class="enum" href="lj_target_x86.h.html#XOg_CMP" title='XOg_CMP' data-ref="XOg_CMP" data-ref-filename="XOg_CMP">XOg_CMP</a>), <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <span class="macro" title="__builtin_offsetof(Node, key.u32.hi)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#Node" title='Node' data-type='struct Node' data-ref="Node" data-ref-filename="Node">Node</a>, key.u32.hi),</td></tr>
<tr><th id="1186">1186</th><td>		 <a class="local col2 ref" href="#582k" title='k' data-ref="582k" data-ref-filename="582k">k</a>.<a class="ref field" href="lj_obj.h.html#TValue::u32" title='TValue::u32' data-ref="TValue::u32" data-ref-filename="TValue..u32">u32</a>.<a class="ref field" href="lj_obj.h.html#208" title='TValue::(anonymous struct)::hi' data-ref="TValue::(anonymous)::hi" data-ref-filename="TValue..(anonymous)..hi">hi</a>);</td></tr>
<tr><th id="1187">1187</th><td>    } <b>else</b> {</td></tr>
<tr><th id="1188">1188</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_CMP" title='XO_CMP' data-ref="XO_CMP" data-ref-filename="XO_CMP">XO_CMP</a>, <a class="local col4 ref" href="#574tmp" title='tmp' data-ref="574tmp" data-ref-filename="574tmp">tmp</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <span class="macro" title="__builtin_offsetof(Node, key.u64)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#Node" title='Node' data-type='struct Node' data-ref="Node" data-ref-filename="Node">Node</a>, key.u64));</td></tr>
<tr><th id="1189">1189</th><td>    }</td></tr>
<tr><th id="1190">1190</th><td>  } <b>else</b> {</td></tr>
<tr><th id="1191">1191</th><td>    <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(irt_ispri(kt) &amp;&amp; !irt_isnil(kt), <q>"bad HREF key type"</q>);</td></tr>
<tr><th id="1192">1192</th><td>    <a class="macro" href="lj_emit_x86.h.html#31" title="(*(uint32_t *)(as-&gt;mcp-4) = ((irt_toitype_(((IRType)(((kt)).irt &amp; IRT_TYPE)))&lt;&lt;15)|0x7fff), as-&gt;mcp -= 4)" data-ref="_M/emit_u32">emit_u32</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, (<a class="macro" href="lj_ir.h.html#427" title="irt_toitype_(((IRType)(((kt)).irt &amp; IRT_TYPE)))" data-ref="_M/irt_toitype">irt_toitype</a>(<a class="local col7 ref" href="#577kt" title='kt' data-ref="577kt" data-ref-filename="577kt">kt</a>)&lt;&lt;<var>15</var>)|<var>0x7fff</var>);</td></tr>
<tr><th id="1193">1193</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_ARITHi" title='XO_ARITHi' data-ref="XO_ARITHi" data-ref-filename="XO_ARITHi">XO_ARITHi</a>, <a class="enum" href="lj_target_x86.h.html#XOg_CMP" title='XOg_CMP' data-ref="XOg_CMP" data-ref-filename="XOg_CMP">XOg_CMP</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <span class="macro" title="__builtin_offsetof(Node, key.it)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#Node" title='Node' data-type='struct Node' data-ref="Node" data-ref-filename="Node">Node</a>, key.it));</td></tr>
<tr><th id="1194">1194</th><td><u>#<span data-ppcond="1177">else</span></u></td></tr>
<tr><th id="1195">1195</th><td>  } <b>else</b> {</td></tr>
<tr><th id="1196">1196</th><td>    <b>if</b> (!irt_ispri(kt)) {</td></tr>
<tr><th id="1197">1197</th><td>      lj_assertA(irt_isaddr(kt), <q>"bad HREF key type"</q>);</td></tr>
<tr><th id="1198">1198</th><td>      <b>if</b> (isk)</td></tr>
<tr><th id="1199">1199</th><td>	emit_gmroi(as, XG_ARITHi(XOg_CMP), dest, offsetof(Node, key.gcr),</td></tr>
<tr><th id="1200">1200</th><td>		   ptr2addr(ir_kgc(irkey)));</td></tr>
<tr><th id="1201">1201</th><td>      <b>else</b></td></tr>
<tr><th id="1202">1202</th><td>	emit_rmro(as, XO_CMP, key, dest, offsetof(Node, key.gcr));</td></tr>
<tr><th id="1203">1203</th><td>      emit_sjcc(as, CC_NE, l_next);</td></tr>
<tr><th id="1204">1204</th><td>    }</td></tr>
<tr><th id="1205">1205</th><td>    lj_assertA(!irt_isnil(kt), <q>"bad HREF key type"</q>);</td></tr>
<tr><th id="1206">1206</th><td>    emit_i8(as, irt_toitype(kt));</td></tr>
<tr><th id="1207">1207</th><td>    emit_rmro(as, XO_ARITHi8, XOg_CMP, dest, offsetof(Node, key.it));</td></tr>
<tr><th id="1208">1208</th><td><u>#<span data-ppcond="1177">endif</span></u></td></tr>
<tr><th id="1209">1209</th><td>  }</td></tr>
<tr><th id="1210">1210</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_sfixup" title='emit_sfixup' data-ref="emit_sfixup" data-ref-filename="emit_sfixup">emit_sfixup</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="local col0 ref" href="#580l_loop" title='l_loop' data-ref="580l_loop" data-ref-filename="580l_loop">l_loop</a>);</td></tr>
<tr><th id="1211">1211</th><td>  <a class="tu ref fn" href="lj_asm.c.html#checkmclim" title='checkmclim' data-use='c' data-ref="checkmclim" data-ref-filename="checkmclim">checkmclim</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>);</td></tr>
<tr><th id="1212">1212</th><td><u>#<span data-ppcond="1212">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="1213">1213</th><td>  <b>if</b> (!<a class="local col6 ref" href="#576isk" title='isk' data-ref="576isk" data-ref-filename="576isk">isk</a> &amp;&amp; <a class="macro" href="lj_ir.h.html#376" title="(((uint32_t)(((kt)).irt &amp; IRT_TYPE) - (uint32_t)(IRT_LIGHTUD) &lt;= (uint32_t)(IRT_UDATA-IRT_LIGHTUD)))" data-ref="_M/irt_isaddr">irt_isaddr</a>(<a class="local col7 ref" href="#577kt" title='kt' data-ref="577kt" data-ref-filename="577kt">kt</a>)) {</td></tr>
<tr><th id="1214">1214</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_OR" title='XO_OR' data-ref="XO_OR" data-ref-filename="XO_OR">XO_OR</a>, <a class="local col4 ref" href="#574tmp" title='tmp' data-ref="574tmp" data-ref-filename="574tmp">tmp</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="local col3 ref" href="#573key" title='key' data-ref="573key" data-ref-filename="573key">key</a>);</td></tr>
<tr><th id="1215">1215</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_loadu64" title='emit_loadu64' data-ref="emit_loadu64" data-ref-filename="emit_loadu64">emit_loadu64</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="local col4 ref" href="#574tmp" title='tmp' data-ref="574tmp" data-ref-filename="574tmp">tmp</a>, (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a>)<a class="macro" href="lj_ir.h.html#427" title="irt_toitype_(((IRType)(((kt)).irt &amp; IRT_TYPE)))" data-ref="_M/irt_toitype">irt_toitype</a>(<a class="local col7 ref" href="#577kt" title='kt' data-ref="577kt" data-ref-filename="577kt">kt</a>) &lt;&lt; <var>47</var>);</td></tr>
<tr><th id="1216">1216</th><td>  }</td></tr>
<tr><th id="1217">1217</th><td><u>#<span data-ppcond="1212">endif</span></u></td></tr>
<tr><th id="1218">1218</th><td></td></tr>
<tr><th id="1219">1219</th><td>  <i>/* Load main position relative to tab-&gt;node into dest. */</i></td></tr>
<tr><th id="1220">1220</th><td>  <a class="local col8 ref" href="#578khash" title='khash' data-ref="578khash" data-ref-filename="578khash">khash</a> = <a class="local col6 ref" href="#576isk" title='isk' data-ref="576isk" data-ref-filename="576isk">isk</a> ? <a class="tu ref fn" href="lj_asm.c.html#ir_khash" title='ir_khash' data-use='c' data-ref="ir_khash" data-ref-filename="ir_khash">ir_khash</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="local col5 ref" href="#575irkey" title='irkey' data-ref="575irkey" data-ref-filename="575irkey">irkey</a>) : <var>1</var>;</td></tr>
<tr><th id="1221">1221</th><td>  <b>if</b> (<a class="local col8 ref" href="#578khash" title='khash' data-ref="578khash" data-ref-filename="578khash">khash</a> == <var>0</var>) {</td></tr>
<tr><th id="1222">1222</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>|<a class="macro" href="lj_emit_x86.h.html#24" title="(0x200|0x080000)" data-ref="_M/REX_GC64">REX_GC64</a>, <a class="local col2 ref" href="#572tab" title='tab' data-ref="572tab" data-ref-filename="572tab">tab</a>, <span class="macro" title="__builtin_offsetof(GCtab, node)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#GCtab" title='GCtab' data-type='struct GCtab' data-ref="GCtab" data-ref-filename="GCtab">GCtab</a>, node));</td></tr>
<tr><th id="1223">1223</th><td>  } <b>else</b> {</td></tr>
<tr><th id="1224">1224</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="macro" href="lj_target_x86.h.html#328" title="((x86Op)(0x030000fe + ((XOg_ADD)&lt;&lt;27)))" data-ref="_M/XO_ARITH">XO_ARITH</a>(<a class="enum" href="lj_target_x86.h.html#XOg_ADD" title='XOg_ADD' data-ref="XOg_ADD" data-ref-filename="XOg_ADD">XOg_ADD</a>), <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>|<a class="macro" href="lj_emit_x86.h.html#24" title="(0x200|0x080000)" data-ref="_M/REX_GC64">REX_GC64</a>, <a class="local col2 ref" href="#572tab" title='tab' data-ref="572tab" data-ref-filename="572tab">tab</a>, <span class="macro" title="__builtin_offsetof(GCtab, node)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#GCtab" title='GCtab' data-type='struct GCtab' data-ref="GCtab" data-ref-filename="GCtab">GCtab</a>,node));</td></tr>
<tr><th id="1225">1225</th><td>    <a class="macro" href="lj_emit_x86.h.html#189" title="((*--as-&gt;mcp = (MCode)((3))), emit_rr(as, XO_SHIFTi, (Reg)(XOg_SHL), (dest)))" data-ref="_M/emit_shifti">emit_shifti</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#XOg_SHL" title='XOg_SHL' data-ref="XOg_SHL" data-ref-filename="XOg_SHL">XOg_SHL</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <var>3</var>);</td></tr>
<tr><th id="1226">1226</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_rmrxo" title='emit_rmrxo' data-ref="emit_rmrxo" data-ref-filename="emit_rmrxo">emit_rmrxo</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_LEA" title='XO_LEA' data-ref="XO_LEA" data-ref-filename="XO_LEA">XO_LEA</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <a class="enum" href="lj_target_x86.h.html#XM_SCALE2" title='XM_SCALE2' data-ref="XM_SCALE2" data-ref-filename="XM_SCALE2">XM_SCALE2</a>, <var>0</var>);</td></tr>
<tr><th id="1227">1227</th><td>    <b>if</b> (<a class="local col6 ref" href="#576isk" title='isk' data-ref="576isk" data-ref-filename="576isk">isk</a>) {</td></tr>
<tr><th id="1228">1228</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_gri" title='emit_gri' data-ref="emit_gri" data-ref-filename="emit_gri">emit_gri</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="macro" href="lj_target_x86.h.html#324" title="((x86Group)(((XI_ARITHi8) &lt;&lt; 16) + ((XI_ARITHi) &lt;&lt; 8) + (XOg_AND)))" data-ref="_M/XG_ARITHi">XG_ARITHi</a>(<a class="enum" href="lj_target_x86.h.html#XOg_AND" title='XOg_AND' data-ref="XOg_AND" data-ref-filename="XOg_AND">XOg_AND</a>), <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<a class="local col8 ref" href="#578khash" title='khash' data-ref="578khash" data-ref-filename="578khash">khash</a>);</td></tr>
<tr><th id="1229">1229</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <a class="local col2 ref" href="#572tab" title='tab' data-ref="572tab" data-ref-filename="572tab">tab</a>, <span class="macro" title="__builtin_offsetof(GCtab, hmask)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#GCtab" title='GCtab' data-type='struct GCtab' data-ref="GCtab" data-ref-filename="GCtab">GCtab</a>, hmask));</td></tr>
<tr><th id="1230">1230</th><td>    } <b>else</b> <b>if</b> (<a class="macro" href="lj_ir.h.html#359" title="(((IRType)((kt).irt &amp; IRT_TYPE)) == IRT_STR)" data-ref="_M/irt_isstr">irt_isstr</a>(<a class="local col7 ref" href="#577kt" title='kt' data-ref="577kt" data-ref-filename="577kt">kt</a>)) {</td></tr>
<tr><th id="1231">1231</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="macro" href="lj_target_x86.h.html#328" title="((x86Op)(0x030000fe + ((XOg_AND)&lt;&lt;27)))" data-ref="_M/XO_ARITH">XO_ARITH</a>(<a class="enum" href="lj_target_x86.h.html#XOg_AND" title='XOg_AND' data-ref="XOg_AND" data-ref-filename="XOg_AND">XOg_AND</a>), <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <a class="local col3 ref" href="#573key" title='key' data-ref="573key" data-ref-filename="573key">key</a>, <span class="macro" title="__builtin_offsetof(GCstr, sid)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#GCstr" title='GCstr' data-type='struct GCstr' data-ref="GCstr" data-ref-filename="GCstr">GCstr</a>, sid));</td></tr>
<tr><th id="1232">1232</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <a class="local col2 ref" href="#572tab" title='tab' data-ref="572tab" data-ref-filename="572tab">tab</a>, <span class="macro" title="__builtin_offsetof(GCtab, hmask)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#GCtab" title='GCtab' data-type='struct GCtab' data-ref="GCtab" data-ref-filename="GCtab">GCtab</a>, hmask));</td></tr>
<tr><th id="1233">1233</th><td>    } <b>else</b> {  <i>/* Must match with hashrot() in lj_tab.c. */</i></td></tr>
<tr><th id="1234">1234</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="macro" href="lj_target_x86.h.html#328" title="((x86Op)(0x030000fe + ((XOg_AND)&lt;&lt;27)))" data-ref="_M/XO_ARITH">XO_ARITH</a>(<a class="enum" href="lj_target_x86.h.html#XOg_AND" title='XOg_AND' data-ref="XOg_AND" data-ref-filename="XOg_AND">XOg_AND</a>), <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <a class="local col2 ref" href="#572tab" title='tab' data-ref="572tab" data-ref-filename="572tab">tab</a>, <span class="macro" title="__builtin_offsetof(GCtab, hmask)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#GCtab" title='GCtab' data-type='struct GCtab' data-ref="GCtab" data-ref-filename="GCtab">GCtab</a>, hmask));</td></tr>
<tr><th id="1235">1235</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="macro" href="lj_target_x86.h.html#328" title="((x86Op)(0x030000fe + ((XOg_SUB)&lt;&lt;27)))" data-ref="_M/XO_ARITH">XO_ARITH</a>(<a class="enum" href="lj_target_x86.h.html#XOg_SUB" title='XOg_SUB' data-ref="XOg_SUB" data-ref-filename="XOg_SUB">XOg_SUB</a>), <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <a class="local col4 ref" href="#574tmp" title='tmp' data-ref="574tmp" data-ref-filename="574tmp">tmp</a>);</td></tr>
<tr><th id="1236">1236</th><td>      <a class="macro" href="lj_emit_x86.h.html#189" title="((*--as-&gt;mcp = (MCode)((13))), emit_rr(as, XO_SHIFTi, (Reg)(XOg_ROL), (tmp)))" data-ref="_M/emit_shifti">emit_shifti</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#XOg_ROL" title='XOg_ROL' data-ref="XOg_ROL" data-ref-filename="XOg_ROL">XOg_ROL</a>, <a class="local col4 ref" href="#574tmp" title='tmp' data-ref="574tmp" data-ref-filename="574tmp">tmp</a>, <a class="macro" href="lj_tab.h.html#15" title="13" data-ref="_M/HASH_ROT3">HASH_ROT3</a>);</td></tr>
<tr><th id="1237">1237</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="macro" href="lj_target_x86.h.html#328" title="((x86Op)(0x030000fe + ((XOg_XOR)&lt;&lt;27)))" data-ref="_M/XO_ARITH">XO_ARITH</a>(<a class="enum" href="lj_target_x86.h.html#XOg_XOR" title='XOg_XOR' data-ref="XOg_XOR" data-ref-filename="XOg_XOR">XOg_XOR</a>), <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <a class="local col4 ref" href="#574tmp" title='tmp' data-ref="574tmp" data-ref-filename="574tmp">tmp</a>);</td></tr>
<tr><th id="1238">1238</th><td>      <a class="macro" href="lj_emit_x86.h.html#189" title="((*--as-&gt;mcp = (MCode)((5))), emit_rr(as, XO_SHIFTi, (Reg)(XOg_ROL), (dest)))" data-ref="_M/emit_shifti">emit_shifti</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#XOg_ROL" title='XOg_ROL' data-ref="XOg_ROL" data-ref-filename="XOg_ROL">XOg_ROL</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <a class="macro" href="lj_tab.h.html#14" title="5" data-ref="_M/HASH_ROT2">HASH_ROT2</a>);</td></tr>
<tr><th id="1239">1239</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="macro" href="lj_target_x86.h.html#328" title="((x86Op)(0x030000fe + ((XOg_SUB)&lt;&lt;27)))" data-ref="_M/XO_ARITH">XO_ARITH</a>(<a class="enum" href="lj_target_x86.h.html#XOg_SUB" title='XOg_SUB' data-ref="XOg_SUB" data-ref-filename="XOg_SUB">XOg_SUB</a>), <a class="local col4 ref" href="#574tmp" title='tmp' data-ref="574tmp" data-ref-filename="574tmp">tmp</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>);</td></tr>
<tr><th id="1240">1240</th><td>      <a class="macro" href="lj_emit_x86.h.html#189" title="((*--as-&gt;mcp = (MCode)((14))), emit_rr(as, XO_SHIFTi, (Reg)(XOg_ROL), (dest)))" data-ref="_M/emit_shifti">emit_shifti</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#XOg_ROL" title='XOg_ROL' data-ref="XOg_ROL" data-ref-filename="XOg_ROL">XOg_ROL</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <a class="macro" href="lj_tab.h.html#13" title="14" data-ref="_M/HASH_ROT1">HASH_ROT1</a>);</td></tr>
<tr><th id="1241">1241</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="macro" href="lj_target_x86.h.html#328" title="((x86Op)(0x030000fe + ((XOg_XOR)&lt;&lt;27)))" data-ref="_M/XO_ARITH">XO_ARITH</a>(<a class="enum" href="lj_target_x86.h.html#XOg_XOR" title='XOg_XOR' data-ref="XOg_XOR" data-ref-filename="XOg_XOR">XOg_XOR</a>), <a class="local col4 ref" href="#574tmp" title='tmp' data-ref="574tmp" data-ref-filename="574tmp">tmp</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>);</td></tr>
<tr><th id="1242">1242</th><td>      <b>if</b> (<a class="macro" href="lj_ir.h.html#363" title="(((IRType)((kt).irt &amp; IRT_TYPE)) == IRT_NUM)" data-ref="_M/irt_isnum">irt_isnum</a>(<a class="local col7 ref" href="#577kt" title='kt' data-ref="577kt" data-ref-filename="577kt">kt</a>)) {</td></tr>
<tr><th id="1243">1243</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="macro" href="lj_target_x86.h.html#328" title="((x86Op)(0x030000fe + ((XOg_ADD)&lt;&lt;27)))" data-ref="_M/XO_ARITH">XO_ARITH</a>(<a class="enum" href="lj_target_x86.h.html#XOg_ADD" title='XOg_ADD' data-ref="XOg_ADD" data-ref-filename="XOg_ADD">XOg_ADD</a>), <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>);</td></tr>
<tr><th id="1244">1244</th><td><u>#<span data-ppcond="1244">if</span> <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a></u></td></tr>
<tr><th id="1245">1245</th><td>	<a class="macro" href="lj_emit_x86.h.html#189" title="((*--as-&gt;mcp = (MCode)((32))), emit_rr(as, XO_SHIFTi, (Reg)(XOg_SHR|(0x200|0x080000)), (dest)))" data-ref="_M/emit_shifti">emit_shifti</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#XOg_SHR" title='XOg_SHR' data-ref="XOg_SHR" data-ref-filename="XOg_SHR">XOg_SHR</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <var>32</var>);</td></tr>
<tr><th id="1246">1246</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col4 ref" href="#574tmp" title='tmp' data-ref="574tmp" data-ref-filename="574tmp">tmp</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>);</td></tr>
<tr><th id="1247">1247</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOVDto" title='XO_MOVDto' data-ref="XO_MOVDto" data-ref-filename="XO_MOVDto">XO_MOVDto</a>, <a class="local col3 ref" href="#573key" title='key' data-ref="573key" data-ref-filename="573key">key</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>);</td></tr>
<tr><th id="1248">1248</th><td><u>#<span data-ppcond="1244">else</span></u></td></tr>
<tr><th id="1249">1249</th><td>	emit_rmro(as, XO_MOV, dest, RID_ESP, ra_spill(as, irkey)+<var>4</var>);</td></tr>
<tr><th id="1250">1250</th><td>	emit_rr(as, XO_MOVDto, key, tmp);</td></tr>
<tr><th id="1251">1251</th><td><u>#<span data-ppcond="1244">endif</span></u></td></tr>
<tr><th id="1252">1252</th><td>      } <b>else</b> {</td></tr>
<tr><th id="1253">1253</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col4 ref" href="#574tmp" title='tmp' data-ref="574tmp" data-ref-filename="574tmp">tmp</a>, <a class="local col3 ref" href="#573key" title='key' data-ref="573key" data-ref-filename="573key">key</a>);</td></tr>
<tr><th id="1254">1254</th><td><u>#<span data-ppcond="1254">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="1255">1255</th><td>	<a class="tu ref fn" href="lj_asm.c.html#checkmclim" title='checkmclim' data-use='c' data-ref="checkmclim" data-ref-filename="checkmclim">checkmclim</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>);</td></tr>
<tr><th id="1256">1256</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_gri" title='emit_gri' data-ref="emit_gri" data-ref-filename="emit_gri">emit_gri</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="macro" href="lj_target_x86.h.html#324" title="((x86Group)(((XI_ARITHi8) &lt;&lt; 16) + ((XI_ARITHi) &lt;&lt; 8) + (XOg_XOR)))" data-ref="_M/XG_ARITHi">XG_ARITHi</a>(<a class="enum" href="lj_target_x86.h.html#XOg_XOR" title='XOg_XOR' data-ref="XOg_XOR" data-ref-filename="XOg_XOR">XOg_XOR</a>), <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <a class="macro" href="lj_ir.h.html#427" title="irt_toitype_(((IRType)(((kt)).irt &amp; IRT_TYPE)))" data-ref="_M/irt_toitype">irt_toitype</a>(<a class="local col7 ref" href="#577kt" title='kt' data-ref="577kt" data-ref-filename="577kt">kt</a>) &lt;&lt; <var>15</var>);</td></tr>
<tr><th id="1257">1257</th><td>	<b>if</b> ((<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::flags" title='ASMState::flags' data-use='r' data-ref="ASMState::flags" data-ref-filename="ASMState..flags">flags</a> &amp; <a class="macro" href="lj_jit.h.html#24" title="(0x00000010 &lt;&lt; 2)" data-ref="_M/JIT_F_BMI2">JIT_F_BMI2</a>)) {</td></tr>
<tr><th id="1258">1258</th><td>	  <a class="macro" href="lj_emit_x86.h.html#29" title="(*--as-&gt;mcp = (MCode)(32))" data-ref="_M/emit_i8">emit_i8</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <var>32</var>);</td></tr>
<tr><th id="1259">1259</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#XV_RORX" title='XV_RORX' data-ref="XV_RORX" data-ref-filename="XV_RORX">XV_RORX</a>|<a class="macro" href="lj_emit_x86.h.html#16" title="0x800000" data-ref="_M/VEX_64">VEX_64</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <a class="local col3 ref" href="#573key" title='key' data-ref="573key" data-ref-filename="573key">key</a>);</td></tr>
<tr><th id="1260">1260</th><td>	} <b>else</b> {</td></tr>
<tr><th id="1261">1261</th><td>	  <a class="macro" href="lj_emit_x86.h.html#189" title="((*--as-&gt;mcp = (MCode)((32))), emit_rr(as, XO_SHIFTi, (Reg)(XOg_SHR|(0x200|0x080000)), (dest)))" data-ref="_M/emit_shifti">emit_shifti</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#XOg_SHR" title='XOg_SHR' data-ref="XOg_SHR" data-ref-filename="XOg_SHR">XOg_SHR</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>, <var>32</var>);</td></tr>
<tr><th id="1262">1262</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col6 ref" href="#566as" title='as' data-ref="566as" data-ref-filename="566as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col1 ref" href="#571dest" title='dest' data-ref="571dest" data-ref-filename="571dest">dest</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="local col3 ref" href="#573key" title='key' data-ref="573key" data-ref-filename="573key">key</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>);</td></tr>
<tr><th id="1263">1263</th><td>	}</td></tr>
<tr><th id="1264">1264</th><td><u>#<span data-ppcond="1254">else</span></u></td></tr>
<tr><th id="1265">1265</th><td>	emit_rmro(as, XO_LEA, dest, key, HASH_BIAS);</td></tr>
<tr><th id="1266">1266</th><td><u>#<span data-ppcond="1254">endif</span></u></td></tr>
<tr><th id="1267">1267</th><td>      }</td></tr>
<tr><th id="1268">1268</th><td>    }</td></tr>
<tr><th id="1269">1269</th><td>  }</td></tr>
<tr><th id="1270">1270</th><td>}</td></tr>
<tr><th id="1271">1271</th><td></td></tr>
<tr><th id="1272">1272</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_hrefk" title='asm_hrefk' data-ref="asm_hrefk" data-ref-filename="asm_hrefk">asm_hrefk</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col3 decl" id="583as" title='as' data-type='ASMState *' data-ref="583as" data-ref-filename="583as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col4 decl" id="584ir" title='ir' data-type='IRIns *' data-ref="584ir" data-ref-filename="584ir">ir</dfn>)</td></tr>
<tr><th id="1273">1273</th><td>{</td></tr>
<tr><th id="1274">1274</th><td>  <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col5 decl" id="585kslot" title='kslot' data-type='IRIns *' data-ref="585kslot" data-ref-filename="585kslot">kslot</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ir-&gt;op2)])" data-ref="_M/IR">IR</a>(<a class="local col4 ref" href="#584ir" title='ir' data-ref="584ir" data-ref-filename="584ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>);</td></tr>
<tr><th id="1275">1275</th><td>  <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col6 decl" id="586irkey" title='irkey' data-type='IRIns *' data-ref="586irkey" data-ref-filename="586irkey">irkey</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(kslot-&gt;op1)])" data-ref="_M/IR">IR</a>(<a class="local col5 ref" href="#585kslot" title='kslot' data-ref="585kslot" data-ref-filename="585kslot">kslot</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>);</td></tr>
<tr><th id="1276">1276</th><td>  <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> <dfn class="local col7 decl" id="587ofs" title='ofs' data-type='int32_t' data-ref="587ofs" data-ref-filename="587ofs">ofs</dfn> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)(<a class="local col5 ref" href="#585kslot" title='kslot' data-ref="585kslot" data-ref-filename="585kslot">kslot</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a> * <b>sizeof</b>(<a class="typedef" href="lj_obj.h.html#Node" title='Node' data-type='struct Node' data-ref="Node" data-ref-filename="Node">Node</a>));</td></tr>
<tr><th id="1277">1277</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col8 decl" id="588dest" title='dest' data-type='Reg' data-ref="588dest" data-ref-filename="588dest">dest</dfn> = <a class="macro" href="lj_asm.c.html#309" title="((!(((ir)-&gt;r) &amp; 0x80)) || (((ir)-&gt;s) != 0))" data-ref="_M/ra_used">ra_used</a>(<a class="local col4 ref" href="#584ir" title='ir' data-ref="584ir" data-ref-filename="584ir">ir</a>) ? <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col3 ref" href="#583as" title='as' data-ref="583as" data-ref-filename="583as">as</a>, <a class="local col4 ref" href="#584ir" title='ir' data-ref="584ir" data-ref-filename="584ir">ir</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>) : <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a>;</td></tr>
<tr><th id="1278">1278</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col9 decl" id="589node" title='node' data-type='Reg' data-ref="589node" data-ref-filename="589node">node</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col3 ref" href="#583as" title='as' data-ref="583as" data-ref-filename="583as">as</a>, <a class="local col4 ref" href="#584ir" title='ir' data-ref="584ir" data-ref-filename="584ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="1279">1279</th><td><u>#<span data-ppcond="1279">if</span> !<a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a></u></td></tr>
<tr><th id="1280">1280</th><td>  MCLabel l_exit;</td></tr>
<tr><th id="1281">1281</th><td><u>#<span data-ppcond="1279">endif</span></u></td></tr>
<tr><th id="1282">1282</th><td>  <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(ofs % <b>sizeof</b>(Node) == <var>0</var>, <q>"unaligned HREFK slot"</q>);</td></tr>
<tr><th id="1283">1283</th><td>  <b>if</b> (<a class="macro" href="lj_target.h.html#28" title="(!((dest) &amp; 0x80))" data-ref="_M/ra_hasreg">ra_hasreg</a>(<a class="local col8 ref" href="#588dest" title='dest' data-ref="588dest" data-ref-filename="588dest">dest</a>)) {</td></tr>
<tr><th id="1284">1284</th><td>    <b>if</b> (<a class="local col7 ref" href="#587ofs" title='ofs' data-ref="587ofs" data-ref-filename="587ofs">ofs</a> != <var>0</var>) {</td></tr>
<tr><th id="1285">1285</th><td>      <b>if</b> (<a class="local col8 ref" href="#588dest" title='dest' data-ref="588dest" data-ref-filename="588dest">dest</a> == <a class="local col9 ref" href="#589node" title='node' data-ref="589node" data-ref-filename="589node">node</a>)</td></tr>
<tr><th id="1286">1286</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_gri" title='emit_gri' data-ref="emit_gri" data-ref-filename="emit_gri">emit_gri</a>(<a class="local col3 ref" href="#583as" title='as' data-ref="583as" data-ref-filename="583as">as</a>, <a class="macro" href="lj_target_x86.h.html#324" title="((x86Group)(((XI_ARITHi8) &lt;&lt; 16) + ((XI_ARITHi) &lt;&lt; 8) + (XOg_ADD)))" data-ref="_M/XG_ARITHi">XG_ARITHi</a>(<a class="enum" href="lj_target_x86.h.html#XOg_ADD" title='XOg_ADD' data-ref="XOg_ADD" data-ref-filename="XOg_ADD">XOg_ADD</a>), <a class="local col8 ref" href="#588dest" title='dest' data-ref="588dest" data-ref-filename="588dest">dest</a>|<a class="macro" href="lj_emit_x86.h.html#24" title="(0x200|0x080000)" data-ref="_M/REX_GC64">REX_GC64</a>, <a class="local col7 ref" href="#587ofs" title='ofs' data-ref="587ofs" data-ref-filename="587ofs">ofs</a>);</td></tr>
<tr><th id="1287">1287</th><td>      <b>else</b></td></tr>
<tr><th id="1288">1288</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col3 ref" href="#583as" title='as' data-ref="583as" data-ref-filename="583as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_LEA" title='XO_LEA' data-ref="XO_LEA" data-ref-filename="XO_LEA">XO_LEA</a>, <a class="local col8 ref" href="#588dest" title='dest' data-ref="588dest" data-ref-filename="588dest">dest</a>|<a class="macro" href="lj_emit_x86.h.html#24" title="(0x200|0x080000)" data-ref="_M/REX_GC64">REX_GC64</a>, <a class="local col9 ref" href="#589node" title='node' data-ref="589node" data-ref-filename="589node">node</a>, <a class="local col7 ref" href="#587ofs" title='ofs' data-ref="587ofs" data-ref-filename="587ofs">ofs</a>);</td></tr>
<tr><th id="1289">1289</th><td>    } <b>else</b> <b>if</b> (<a class="local col8 ref" href="#588dest" title='dest' data-ref="588dest" data-ref-filename="588dest">dest</a> != <a class="local col9 ref" href="#589node" title='node' data-ref="589node" data-ref-filename="589node">node</a>) {</td></tr>
<tr><th id="1290">1290</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col3 ref" href="#583as" title='as' data-ref="583as" data-ref-filename="583as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col8 ref" href="#588dest" title='dest' data-ref="588dest" data-ref-filename="588dest">dest</a>|<a class="macro" href="lj_emit_x86.h.html#24" title="(0x200|0x080000)" data-ref="_M/REX_GC64">REX_GC64</a>, <a class="local col9 ref" href="#589node" title='node' data-ref="589node" data-ref-filename="589node">node</a>);</td></tr>
<tr><th id="1291">1291</th><td>    }</td></tr>
<tr><th id="1292">1292</th><td>  }</td></tr>
<tr><th id="1293">1293</th><td>  <a class="ref fn" href="#asm_guardcc" title='asm_guardcc' data-ref="asm_guardcc" data-ref-filename="asm_guardcc">asm_guardcc</a>(<a class="local col3 ref" href="#583as" title='as' data-ref="583as" data-ref-filename="583as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_NE" title='CC_NE' data-ref="CC_NE" data-ref-filename="CC_NE">CC_NE</a>);</td></tr>
<tr><th id="1294">1294</th><td><u>#<span data-ppcond="1294">if</span> <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a></u></td></tr>
<tr><th id="1295">1295</th><td>  <b>if</b> (!<a class="macro" href="lj_ir.h.html#357" title="((uint32_t)((IRType)((irkey-&gt;t).irt &amp; IRT_TYPE)) &lt;= IRT_TRUE)" data-ref="_M/irt_ispri">irt_ispri</a>(<a class="local col6 ref" href="#586irkey" title='irkey' data-ref="586irkey" data-ref-filename="586irkey">irkey</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="1296">1296</th><td>    <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col0 decl" id="590key" title='key' data-type='Reg' data-ref="590key" data-ref-filename="590key">key</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_scratch" title='ra_scratch' data-use='c' data-ref="ra_scratch" data-ref-filename="ra_scratch">ra_scratch</a>(<a class="local col3 ref" href="#583as" title='as' data-ref="583as" data-ref-filename="583as">as</a>, <a class="macro" href="lj_target.h.html#71" title="(((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH))) &amp; ~(((RegSet)1) &lt;&lt; (node)))" data-ref="_M/rset_exclude">rset_exclude</a>(<a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>, <a class="local col9 ref" href="#589node" title='node' data-ref="589node" data-ref-filename="589node">node</a>));</td></tr>
<tr><th id="1297">1297</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col3 ref" href="#583as" title='as' data-ref="583as" data-ref-filename="583as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_CMP" title='XO_CMP' data-ref="XO_CMP" data-ref-filename="XO_CMP">XO_CMP</a>, <a class="local col0 ref" href="#590key" title='key' data-ref="590key" data-ref-filename="590key">key</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="local col9 ref" href="#589node" title='node' data-ref="589node" data-ref-filename="589node">node</a>,</td></tr>
<tr><th id="1298">1298</th><td>	       <a class="local col7 ref" href="#587ofs" title='ofs' data-ref="587ofs" data-ref-filename="587ofs">ofs</a> + (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<span class="macro" title="__builtin_offsetof(Node, key.u64)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#Node" title='Node' data-type='struct Node' data-ref="Node" data-ref-filename="Node">Node</a>, key.u64));</td></tr>
<tr><th id="1299">1299</th><td>    <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(irt_isnum(irkey-&gt;t) || irt_isgcv(irkey-&gt;t),</td></tr>
<tr><th id="1300">1300</th><td>	       <q>"bad HREFK key type"</q>);</td></tr>
<tr><th id="1301">1301</th><td>    <i>/* Assumes -0.0 is already canonicalized to +0.0. */</i></td></tr>
<tr><th id="1302">1302</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_loadu64" title='emit_loadu64' data-ref="emit_loadu64" data-ref-filename="emit_loadu64">emit_loadu64</a>(<a class="local col3 ref" href="#583as" title='as' data-ref="583as" data-ref-filename="583as">as</a>, <a class="local col0 ref" href="#590key" title='key' data-ref="590key" data-ref-filename="590key">key</a>, <a class="macro" href="lj_ir.h.html#363" title="(((IRType)((irkey-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM)" data-ref="_M/irt_isnum">irt_isnum</a>(<a class="local col6 ref" href="#586irkey" title='irkey' data-ref="586irkey" data-ref-filename="586irkey">irkey</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) ? <a class="macro" href="lj_ir.h.html#576" title="(&amp;(irkey)[1].tv)" data-ref="_M/ir_knum">ir_knum</a>(<a class="local col6 ref" href="#586irkey" title='irkey' data-ref="586irkey" data-ref-filename="586irkey">irkey</a>)-&gt;<a class="ref field" href="lj_obj.h.html#TValue::u64" title='TValue::u64' data-ref="TValue::u64" data-ref-filename="TValue..u64">u64</a> :</td></tr>
<tr><th id="1303">1303</th><td><u>#<span data-ppcond="1303">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="1304">1304</th><td>			  ((<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a>)<a class="macro" href="lj_ir.h.html#427" title="irt_toitype_(((IRType)(((irkey-&gt;t)).irt &amp; IRT_TYPE)))" data-ref="_M/irt_toitype">irt_toitype</a>(<a class="local col6 ref" href="#586irkey" title='irkey' data-ref="586irkey" data-ref-filename="586irkey">irkey</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) &lt;&lt; <var>47</var>) |</td></tr>
<tr><th id="1305">1305</th><td>			  (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a>)<a class="macro" href="lj_ir.h.html#571" title="(((GCobj *)((irkey)[1].gcr).gcptr64))" data-ref="_M/ir_kgc">ir_kgc</a>(<a class="local col6 ref" href="#586irkey" title='irkey' data-ref="586irkey" data-ref-filename="586irkey">irkey</a>));</td></tr>
<tr><th id="1306">1306</th><td><u>#<span data-ppcond="1303">else</span></u></td></tr>
<tr><th id="1307">1307</th><td>			  ((uint64_t)irt_toitype(irkey-&gt;t) &lt;&lt; <var>32</var>) |</td></tr>
<tr><th id="1308">1308</th><td>			  (uint64_t)(uint32_t)ptr2addr(ir_kgc(irkey)));</td></tr>
<tr><th id="1309">1309</th><td><u>#<span data-ppcond="1303">endif</span></u></td></tr>
<tr><th id="1310">1310</th><td>  } <b>else</b> {</td></tr>
<tr><th id="1311">1311</th><td>    <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(!irt_isnil(irkey-&gt;t), <q>"bad HREFK key type"</q>);</td></tr>
<tr><th id="1312">1312</th><td><u>#<span data-ppcond="1312">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="1313">1313</th><td>    <a class="macro" href="lj_emit_x86.h.html#30" title="(*(int32_t *)(as-&gt;mcp-4) = ((irt_toitype_(((IRType)(((irkey-&gt;t)).irt &amp; IRT_TYPE)))&lt;&lt;15)|0x7fff), as-&gt;mcp -= 4)" data-ref="_M/emit_i32">emit_i32</a>(<a class="local col3 ref" href="#583as" title='as' data-ref="583as" data-ref-filename="583as">as</a>, (<a class="macro" href="lj_ir.h.html#427" title="irt_toitype_(((IRType)(((irkey-&gt;t)).irt &amp; IRT_TYPE)))" data-ref="_M/irt_toitype">irt_toitype</a>(<a class="local col6 ref" href="#586irkey" title='irkey' data-ref="586irkey" data-ref-filename="586irkey">irkey</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)&lt;&lt;<var>15</var>)|<var>0x7fff</var>);</td></tr>
<tr><th id="1314">1314</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col3 ref" href="#583as" title='as' data-ref="583as" data-ref-filename="583as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_ARITHi" title='XO_ARITHi' data-ref="XO_ARITHi" data-ref-filename="XO_ARITHi">XO_ARITHi</a>, <a class="enum" href="lj_target_x86.h.html#XOg_CMP" title='XOg_CMP' data-ref="XOg_CMP" data-ref-filename="XOg_CMP">XOg_CMP</a>, <a class="local col9 ref" href="#589node" title='node' data-ref="589node" data-ref-filename="589node">node</a>,</td></tr>
<tr><th id="1315">1315</th><td>	      <a class="local col7 ref" href="#587ofs" title='ofs' data-ref="587ofs" data-ref-filename="587ofs">ofs</a> + (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<span class="macro" title="__builtin_offsetof(Node, key.it)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#Node" title='Node' data-type='struct Node' data-ref="Node" data-ref-filename="Node">Node</a>, key.it));</td></tr>
<tr><th id="1316">1316</th><td><u>#<span data-ppcond="1312">else</span></u></td></tr>
<tr><th id="1317">1317</th><td>    emit_i8(as, irt_toitype(irkey-&gt;t));</td></tr>
<tr><th id="1318">1318</th><td>    emit_rmro(as, XO_ARITHi8, XOg_CMP, node,</td></tr>
<tr><th id="1319">1319</th><td>	      ofs + (int32_t)offsetof(Node, key.it));</td></tr>
<tr><th id="1320">1320</th><td><u>#<span data-ppcond="1312">endif</span></u></td></tr>
<tr><th id="1321">1321</th><td>  }</td></tr>
<tr><th id="1322">1322</th><td><u>#<span data-ppcond="1294">else</span></u></td></tr>
<tr><th id="1323">1323</th><td>  l_exit = emit_label(as);</td></tr>
<tr><th id="1324">1324</th><td>  <b>if</b> (irt_isnum(irkey-&gt;t)) {</td></tr>
<tr><th id="1325">1325</th><td>    <i>/* Assumes -0.0 is already canonicalized to +0.0. */</i></td></tr>
<tr><th id="1326">1326</th><td>    emit_gmroi(as, XG_ARITHi(XOg_CMP), node,</td></tr>
<tr><th id="1327">1327</th><td>	       ofs + (int32_t)offsetof(Node, key.u32.lo),</td></tr>
<tr><th id="1328">1328</th><td>	       (int32_t)ir_knum(irkey)-&gt;u32.lo);</td></tr>
<tr><th id="1329">1329</th><td>    emit_sjcc(as, CC_NE, l_exit);</td></tr>
<tr><th id="1330">1330</th><td>    emit_gmroi(as, XG_ARITHi(XOg_CMP), node,</td></tr>
<tr><th id="1331">1331</th><td>	       ofs + (int32_t)offsetof(Node, key.u32.hi),</td></tr>
<tr><th id="1332">1332</th><td>	       (int32_t)ir_knum(irkey)-&gt;u32.hi);</td></tr>
<tr><th id="1333">1333</th><td>  } <b>else</b> {</td></tr>
<tr><th id="1334">1334</th><td>    <b>if</b> (!irt_ispri(irkey-&gt;t)) {</td></tr>
<tr><th id="1335">1335</th><td>      lj_assertA(irt_isgcv(irkey-&gt;t), <q>"bad HREFK key type"</q>);</td></tr>
<tr><th id="1336">1336</th><td>      emit_gmroi(as, XG_ARITHi(XOg_CMP), node,</td></tr>
<tr><th id="1337">1337</th><td>		 ofs + (int32_t)offsetof(Node, key.gcr),</td></tr>
<tr><th id="1338">1338</th><td>		 ptr2addr(ir_kgc(irkey)));</td></tr>
<tr><th id="1339">1339</th><td>      emit_sjcc(as, CC_NE, l_exit);</td></tr>
<tr><th id="1340">1340</th><td>    }</td></tr>
<tr><th id="1341">1341</th><td>    lj_assertA(!irt_isnil(irkey-&gt;t), <q>"bad HREFK key type"</q>);</td></tr>
<tr><th id="1342">1342</th><td>    emit_i8(as, irt_toitype(irkey-&gt;t));</td></tr>
<tr><th id="1343">1343</th><td>    emit_rmro(as, XO_ARITHi8, XOg_CMP, node,</td></tr>
<tr><th id="1344">1344</th><td>	      ofs + (int32_t)offsetof(Node, key.it));</td></tr>
<tr><th id="1345">1345</th><td>  }</td></tr>
<tr><th id="1346">1346</th><td><u>#<span data-ppcond="1294">endif</span></u></td></tr>
<tr><th id="1347">1347</th><td>}</td></tr>
<tr><th id="1348">1348</th><td></td></tr>
<tr><th id="1349">1349</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_uref" title='asm_uref' data-ref="asm_uref" data-ref-filename="asm_uref">asm_uref</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col1 decl" id="591as" title='as' data-type='ASMState *' data-ref="591as" data-ref-filename="591as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col2 decl" id="592ir" title='ir' data-type='IRIns *' data-ref="592ir" data-ref-filename="592ir">ir</dfn>)</td></tr>
<tr><th id="1350">1350</th><td>{</td></tr>
<tr><th id="1351">1351</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col3 decl" id="593dest" title='dest' data-type='Reg' data-ref="593dest" data-ref-filename="593dest">dest</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col1 ref" href="#591as" title='as' data-ref="591as" data-ref-filename="591as">as</a>, <a class="local col2 ref" href="#592ir" title='ir' data-ref="592ir" data-ref-filename="592ir">ir</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="1352">1352</th><td>  <b>if</b> (<a class="macro" href="lj_ir.h.html#470" title="((ir-&gt;op1) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col2 ref" href="#592ir" title='ir' data-ref="592ir" data-ref-filename="592ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>)) {</td></tr>
<tr><th id="1353">1353</th><td>    <a class="typedef" href="lj_obj.h.html#GCfunc" title='GCfunc' data-type='union GCfunc' data-ref="GCfunc" data-ref-filename="GCfunc">GCfunc</a> *<dfn class="local col4 decl" id="594fn" title='fn' data-type='GCfunc *' data-ref="594fn" data-ref-filename="594fn">fn</dfn> = <a class="macro" href="lj_ir.h.html#574" title="((&amp;((((GCobj *)((((&amp;as-&gt;ir[(ir-&gt;op1)])))[1].gcr).gcptr64)))-&gt;fn))" data-ref="_M/ir_kfunc">ir_kfunc</a>(<a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ir-&gt;op1)])" data-ref="_M/IR">IR</a>(<a class="local col2 ref" href="#592ir" title='ir' data-ref="592ir" data-ref-filename="592ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>));</td></tr>
<tr><th id="1354">1354</th><td>    <a class="typedef" href="lj_obj.h.html#MRef" title='MRef' data-type='struct MRef' data-ref="MRef" data-ref-filename="MRef">MRef</a> *<dfn class="local col5 decl" id="595v" title='v' data-type='MRef *' data-ref="595v" data-ref-filename="595v">v</dfn> = &amp;<a class="macro" href="lj_obj.h.html#67" title="((GCobj *)(fn-&gt;l.uvptr[(ir-&gt;op2 &gt;&gt; 8)]).gcptr64)" data-ref="_M/gcref">gcref</a>(<a class="local col4 ref" href="#594fn" title='fn' data-ref="594fn" data-ref-filename="594fn">fn</a>-&gt;<a class="ref field" href="lj_obj.h.html#GCfunc::l" title='GCfunc::l' data-ref="GCfunc::l" data-ref-filename="GCfunc..l">l</a>.<a class="ref field" href="lj_obj.h.html#GCfuncL::uvptr" title='GCfuncL::uvptr' data-ref="GCfuncL::uvptr" data-ref-filename="GCfuncL..uvptr">uvptr</a>[(<a class="local col2 ref" href="#592ir" title='ir' data-ref="592ir" data-ref-filename="592ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a> &gt;&gt; <var>8</var>)])-&gt;<a class="ref field" href="lj_obj.h.html#GCobj::uv" title='GCobj::uv' data-ref="GCobj::uv" data-ref-filename="GCobj..uv">uv</a>.<a class="ref field" href="lj_obj.h.html#GCupval::v" title='GCupval::v' data-ref="GCupval::v" data-ref-filename="GCupval..v">v</a>;</td></tr>
<tr><th id="1355">1355</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_rma" title='emit_rma' data-ref="emit_rma" data-ref-filename="emit_rma">emit_rma</a>(<a class="local col1 ref" href="#591as" title='as' data-ref="591as" data-ref-filename="591as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col3 ref" href="#593dest" title='dest' data-ref="593dest" data-ref-filename="593dest">dest</a>|<a class="macro" href="lj_emit_x86.h.html#24" title="(0x200|0x080000)" data-ref="_M/REX_GC64">REX_GC64</a>, <a class="local col5 ref" href="#595v" title='v' data-ref="595v" data-ref-filename="595v">v</a>);</td></tr>
<tr><th id="1356">1356</th><td>  } <b>else</b> {</td></tr>
<tr><th id="1357">1357</th><td>    <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col6 decl" id="596uv" title='uv' data-type='Reg' data-ref="596uv" data-ref-filename="596uv">uv</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_scratch" title='ra_scratch' data-use='c' data-ref="ra_scratch" data-ref-filename="ra_scratch">ra_scratch</a>(<a class="local col1 ref" href="#591as" title='as' data-ref="591as" data-ref-filename="591as">as</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="1358">1358</th><td>    <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col7 decl" id="597func" title='func' data-type='Reg' data-ref="597func" data-ref-filename="597func">func</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col1 ref" href="#591as" title='as' data-ref="591as" data-ref-filename="591as">as</a>, <a class="local col2 ref" href="#592ir" title='ir' data-ref="592ir" data-ref-filename="592ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="1359">1359</th><td>    <b>if</b> (<a class="local col2 ref" href="#592ir" title='ir' data-ref="592ir" data-ref-filename="592ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_UREFC' data-ref="IR_UREFC" data-ref-filename="IR_UREFC">IR_UREFC</a>) {</td></tr>
<tr><th id="1360">1360</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col1 ref" href="#591as" title='as' data-ref="591as" data-ref-filename="591as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_LEA" title='XO_LEA' data-ref="XO_LEA" data-ref-filename="XO_LEA">XO_LEA</a>, <a class="local col3 ref" href="#593dest" title='dest' data-ref="593dest" data-ref-filename="593dest">dest</a>|<a class="macro" href="lj_emit_x86.h.html#24" title="(0x200|0x080000)" data-ref="_M/REX_GC64">REX_GC64</a>, <a class="local col6 ref" href="#596uv" title='uv' data-ref="596uv" data-ref-filename="596uv">uv</a>, <span class="macro" title="__builtin_offsetof(GCupval, tv)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#GCupval" title='GCupval' data-type='struct GCupval' data-ref="GCupval" data-ref-filename="GCupval">GCupval</a>, tv));</td></tr>
<tr><th id="1361">1361</th><td>      <a class="ref fn" href="#asm_guardcc" title='asm_guardcc' data-ref="asm_guardcc" data-ref-filename="asm_guardcc">asm_guardcc</a>(<a class="local col1 ref" href="#591as" title='as' data-ref="591as" data-ref-filename="591as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_NE" title='CC_NE' data-ref="CC_NE" data-ref-filename="CC_NE">CC_NE</a>);</td></tr>
<tr><th id="1362">1362</th><td>      <a class="macro" href="lj_emit_x86.h.html#29" title="(*--as-&gt;mcp = (MCode)(1))" data-ref="_M/emit_i8">emit_i8</a>(<a class="local col1 ref" href="#591as" title='as' data-ref="591as" data-ref-filename="591as">as</a>, <var>1</var>);</td></tr>
<tr><th id="1363">1363</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col1 ref" href="#591as" title='as' data-ref="591as" data-ref-filename="591as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_ARITHib" title='XO_ARITHib' data-ref="XO_ARITHib" data-ref-filename="XO_ARITHib">XO_ARITHib</a>, <a class="enum" href="lj_target_x86.h.html#XOg_CMP" title='XOg_CMP' data-ref="XOg_CMP" data-ref-filename="XOg_CMP">XOg_CMP</a>, <a class="local col6 ref" href="#596uv" title='uv' data-ref="596uv" data-ref-filename="596uv">uv</a>, <span class="macro" title="__builtin_offsetof(GCupval, closed)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#GCupval" title='GCupval' data-type='struct GCupval' data-ref="GCupval" data-ref-filename="GCupval">GCupval</a>, closed));</td></tr>
<tr><th id="1364">1364</th><td>    } <b>else</b> {</td></tr>
<tr><th id="1365">1365</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col1 ref" href="#591as" title='as' data-ref="591as" data-ref-filename="591as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col3 ref" href="#593dest" title='dest' data-ref="593dest" data-ref-filename="593dest">dest</a>|<a class="macro" href="lj_emit_x86.h.html#24" title="(0x200|0x080000)" data-ref="_M/REX_GC64">REX_GC64</a>, <a class="local col6 ref" href="#596uv" title='uv' data-ref="596uv" data-ref-filename="596uv">uv</a>, <span class="macro" title="__builtin_offsetof(GCupval, v)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#GCupval" title='GCupval' data-type='struct GCupval' data-ref="GCupval" data-ref-filename="GCupval">GCupval</a>, v));</td></tr>
<tr><th id="1366">1366</th><td>    }</td></tr>
<tr><th id="1367">1367</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col1 ref" href="#591as" title='as' data-ref="591as" data-ref-filename="591as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col6 ref" href="#596uv" title='uv' data-ref="596uv" data-ref-filename="596uv">uv</a>|<a class="macro" href="lj_emit_x86.h.html#24" title="(0x200|0x080000)" data-ref="_M/REX_GC64">REX_GC64</a>, <a class="local col7 ref" href="#597func" title='func' data-ref="597func" data-ref-filename="597func">func</a>,</td></tr>
<tr><th id="1368">1368</th><td>	      (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<span class="macro" title="__builtin_offsetof(GCfuncL, uvptr)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#GCfuncL" title='GCfuncL' data-type='struct GCfuncL' data-ref="GCfuncL" data-ref-filename="GCfuncL">GCfuncL</a>, uvptr) +</td></tr>
<tr><th id="1369">1369</th><td>	      (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<b>sizeof</b>(<a class="typedef" href="lj_obj.h.html#MRef" title='MRef' data-type='struct MRef' data-ref="MRef" data-ref-filename="MRef">MRef</a>) * (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)(<a class="local col2 ref" href="#592ir" title='ir' data-ref="592ir" data-ref-filename="592ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a> &gt;&gt; <var>8</var>));</td></tr>
<tr><th id="1370">1370</th><td>  }</td></tr>
<tr><th id="1371">1371</th><td>}</td></tr>
<tr><th id="1372">1372</th><td></td></tr>
<tr><th id="1373">1373</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_fref" title='asm_fref' data-ref="asm_fref" data-ref-filename="asm_fref">asm_fref</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col8 decl" id="598as" title='as' data-type='ASMState *' data-ref="598as" data-ref-filename="598as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col9 decl" id="599ir" title='ir' data-type='IRIns *' data-ref="599ir" data-ref-filename="599ir">ir</dfn>)</td></tr>
<tr><th id="1374">1374</th><td>{</td></tr>
<tr><th id="1375">1375</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col0 decl" id="600dest" title='dest' data-type='Reg' data-ref="600dest" data-ref-filename="600dest">dest</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col8 ref" href="#598as" title='as' data-ref="598as" data-ref-filename="598as">as</a>, <a class="local col9 ref" href="#599ir" title='ir' data-ref="599ir" data-ref-filename="599ir">ir</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="1376">1376</th><td>  <a class="ref fn" href="#asm_fusefref" title='asm_fusefref' data-ref="asm_fusefref" data-ref-filename="asm_fusefref">asm_fusefref</a>(<a class="local col8 ref" href="#598as" title='as' data-ref="598as" data-ref-filename="598as">as</a>, <a class="local col9 ref" href="#599ir" title='ir' data-ref="599ir" data-ref-filename="599ir">ir</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="1377">1377</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col8 ref" href="#598as" title='as' data-ref="598as" data-ref-filename="598as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_LEA" title='XO_LEA' data-ref="XO_LEA" data-ref-filename="XO_LEA">XO_LEA</a>, <a class="local col0 ref" href="#600dest" title='dest' data-ref="600dest" data-ref-filename="600dest">dest</a>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="1378">1378</th><td>}</td></tr>
<tr><th id="1379">1379</th><td></td></tr>
<tr><th id="1380">1380</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_strref" title='asm_strref' data-ref="asm_strref" data-ref-filename="asm_strref">asm_strref</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col1 decl" id="601as" title='as' data-type='ASMState *' data-ref="601as" data-ref-filename="601as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col2 decl" id="602ir" title='ir' data-type='IRIns *' data-ref="602ir" data-ref-filename="602ir">ir</dfn>)</td></tr>
<tr><th id="1381">1381</th><td>{</td></tr>
<tr><th id="1382">1382</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col3 decl" id="603dest" title='dest' data-type='Reg' data-ref="603dest" data-ref-filename="603dest">dest</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col1 ref" href="#601as" title='as' data-ref="601as" data-ref-filename="601as">as</a>, <a class="local col2 ref" href="#602ir" title='ir' data-ref="602ir" data-ref-filename="602ir">ir</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="1383">1383</th><td>  <a class="ref fn" href="#asm_fusestrref" title='asm_fusestrref' data-ref="asm_fusestrref" data-ref-filename="asm_fusestrref">asm_fusestrref</a>(<a class="local col1 ref" href="#601as" title='as' data-ref="601as" data-ref-filename="601as">as</a>, <a class="local col2 ref" href="#602ir" title='ir' data-ref="602ir" data-ref-filename="602ir">ir</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="1384">1384</th><td>  <b>if</b> (<a class="local col1 ref" href="#601as" title='as' data-ref="601as" data-ref-filename="601as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> == <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a>)</td></tr>
<tr><th id="1385">1385</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_loadi" title='emit_loadi' data-ref="emit_loadi" data-ref-filename="emit_loadi">emit_loadi</a>(<a class="local col1 ref" href="#601as" title='as' data-ref="601as" data-ref-filename="601as">as</a>, <a class="local col3 ref" href="#603dest" title='dest' data-ref="603dest" data-ref-filename="603dest">dest</a>, <a class="local col1 ref" href="#601as" title='as' data-ref="601as" data-ref-filename="601as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a>);</td></tr>
<tr><th id="1386">1386</th><td>  <b>else</b> <b>if</b> (<a class="local col1 ref" href="#601as" title='as' data-ref="601as" data-ref-filename="601as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> == <a class="local col3 ref" href="#603dest" title='dest' data-ref="603dest" data-ref-filename="603dest">dest</a> &amp;&amp; <a class="local col1 ref" href="#601as" title='as' data-ref="601as" data-ref-filename="601as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::idx" title='(anonymous struct)::idx' data-ref="(anonymous)::idx" data-ref-filename="(anonymous)..idx">idx</a> == <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a>)</td></tr>
<tr><th id="1387">1387</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_gri" title='emit_gri' data-ref="emit_gri" data-ref-filename="emit_gri">emit_gri</a>(<a class="local col1 ref" href="#601as" title='as' data-ref="601as" data-ref-filename="601as">as</a>, <a class="macro" href="lj_target_x86.h.html#324" title="((x86Group)(((XI_ARITHi8) &lt;&lt; 16) + ((XI_ARITHi) &lt;&lt; 8) + (XOg_ADD)))" data-ref="_M/XG_ARITHi">XG_ARITHi</a>(<a class="enum" href="lj_target_x86.h.html#XOg_ADD" title='XOg_ADD' data-ref="XOg_ADD" data-ref-filename="XOg_ADD">XOg_ADD</a>), <a class="local col3 ref" href="#603dest" title='dest' data-ref="603dest" data-ref-filename="603dest">dest</a>|<a class="macro" href="lj_emit_x86.h.html#24" title="(0x200|0x080000)" data-ref="_M/REX_GC64">REX_GC64</a>, <a class="local col1 ref" href="#601as" title='as' data-ref="601as" data-ref-filename="601as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a>);</td></tr>
<tr><th id="1388">1388</th><td>  <b>else</b></td></tr>
<tr><th id="1389">1389</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col1 ref" href="#601as" title='as' data-ref="601as" data-ref-filename="601as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_LEA" title='XO_LEA' data-ref="XO_LEA" data-ref-filename="XO_LEA">XO_LEA</a>, <a class="local col3 ref" href="#603dest" title='dest' data-ref="603dest" data-ref-filename="603dest">dest</a>|<a class="macro" href="lj_emit_x86.h.html#24" title="(0x200|0x080000)" data-ref="_M/REX_GC64">REX_GC64</a>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="1390">1390</th><td>}</td></tr>
<tr><th id="1391">1391</th><td></td></tr>
<tr><th id="1392">1392</th><td><i>/* -- Loads and stores ---------------------------------------------------- */</i></td></tr>
<tr><th id="1393">1393</th><td></td></tr>
<tr><th id="1394">1394</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_fxload" title='asm_fxload' data-ref="asm_fxload" data-ref-filename="asm_fxload">asm_fxload</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col4 decl" id="604as" title='as' data-type='ASMState *' data-ref="604as" data-ref-filename="604as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col5 decl" id="605ir" title='ir' data-type='IRIns *' data-ref="605ir" data-ref-filename="605ir">ir</dfn>)</td></tr>
<tr><th id="1395">1395</th><td>{</td></tr>
<tr><th id="1396">1396</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col6 decl" id="606dest" title='dest' data-type='Reg' data-ref="606dest" data-ref-filename="606dest">dest</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col4 ref" href="#604as" title='as' data-ref="604as" data-ref-filename="604as">as</a>, <a class="local col5 ref" href="#605ir" title='ir' data-ref="605ir" data-ref-filename="605ir">ir</a>, <a class="macro" href="lj_ir.h.html#373" title="((((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM) || (((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_FLOAT))" data-ref="_M/irt_isfp">irt_isfp</a>(<a class="local col5 ref" href="#605ir" title='ir' data-ref="605ir" data-ref-filename="605ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) ? <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a> : <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="1397">1397</th><td>  <a class="typedef" href="lj_target_x86.h.html#x86Op" title='x86Op' data-type='enum x86Op' data-ref="x86Op" data-ref-filename="x86Op">x86Op</a> <dfn class="local col7 decl" id="607xo" title='xo' data-type='x86Op' data-ref="607xo" data-ref-filename="607xo">xo</dfn>;</td></tr>
<tr><th id="1398">1398</th><td>  <b>if</b> (<a class="local col5 ref" href="#605ir" title='ir' data-ref="605ir" data-ref-filename="605ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_FLOAD' data-ref="IR_FLOAD" data-ref-filename="IR_FLOAD">IR_FLOAD</a>)</td></tr>
<tr><th id="1399">1399</th><td>    <a class="ref fn" href="#asm_fusefref" title='asm_fusefref' data-ref="asm_fusefref" data-ref-filename="asm_fusefref">asm_fusefref</a>(<a class="local col4 ref" href="#604as" title='as' data-ref="604as" data-ref-filename="604as">as</a>, <a class="local col5 ref" href="#605ir" title='ir' data-ref="605ir" data-ref-filename="605ir">ir</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="1400">1400</th><td>  <b>else</b></td></tr>
<tr><th id="1401">1401</th><td>    <a class="ref fn" href="#asm_fusexref" title='asm_fusexref' data-ref="asm_fusexref" data-ref-filename="asm_fusexref">asm_fusexref</a>(<a class="local col4 ref" href="#604as" title='as' data-ref="604as" data-ref-filename="604as">as</a>, <a class="local col5 ref" href="#605ir" title='ir' data-ref="605ir" data-ref-filename="605ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="1402">1402</th><td>  <i>/* ir-&gt;op2 is ignored -- unaligned loads are ok on x86. */</i></td></tr>
<tr><th id="1403">1403</th><td>  <b>switch</b> (<a class="macro" href="lj_ir.h.html#351" title="((IRType)((ir-&gt;t).irt &amp; IRT_TYPE))" data-ref="_M/irt_type">irt_type</a>(<a class="local col5 ref" href="#605ir" title='ir' data-ref="605ir" data-ref-filename="605ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="1404">1404</th><td>  <b>case</b> <a class="enum" href="lj_ir.h.html#318" title='IRT_I8' data-ref="IRT_I8" data-ref-filename="IRT_I8">IRT_I8</a>: <a class="local col7 ref" href="#607xo" title='xo' data-ref="607xo" data-ref-filename="607xo">xo</a> = <a class="enum" href="lj_target_x86.h.html#XO_MOVSXb" title='XO_MOVSXb' data-ref="XO_MOVSXb" data-ref-filename="XO_MOVSXb">XO_MOVSXb</a>; <b>break</b>;</td></tr>
<tr><th id="1405">1405</th><td>  <b>case</b> <a class="enum" href="lj_ir.h.html#318" title='IRT_U8' data-ref="IRT_U8" data-ref-filename="IRT_U8">IRT_U8</a>: <a class="local col7 ref" href="#607xo" title='xo' data-ref="607xo" data-ref-filename="607xo">xo</a> = <a class="enum" href="lj_target_x86.h.html#XO_MOVZXb" title='XO_MOVZXb' data-ref="XO_MOVZXb" data-ref-filename="XO_MOVZXb">XO_MOVZXb</a>; <b>break</b>;</td></tr>
<tr><th id="1406">1406</th><td>  <b>case</b> <a class="enum" href="lj_ir.h.html#318" title='IRT_I16' data-ref="IRT_I16" data-ref-filename="IRT_I16">IRT_I16</a>: <a class="local col7 ref" href="#607xo" title='xo' data-ref="607xo" data-ref-filename="607xo">xo</a> = <a class="enum" href="lj_target_x86.h.html#XO_MOVSXw" title='XO_MOVSXw' data-ref="XO_MOVSXw" data-ref-filename="XO_MOVSXw">XO_MOVSXw</a>; <b>break</b>;</td></tr>
<tr><th id="1407">1407</th><td>  <b>case</b> <a class="enum" href="lj_ir.h.html#318" title='IRT_U16' data-ref="IRT_U16" data-ref-filename="IRT_U16">IRT_U16</a>: <a class="local col7 ref" href="#607xo" title='xo' data-ref="607xo" data-ref-filename="607xo">xo</a> = <a class="enum" href="lj_target_x86.h.html#XO_MOVZXw" title='XO_MOVZXw' data-ref="XO_MOVZXw" data-ref-filename="XO_MOVZXw">XO_MOVZXw</a>; <b>break</b>;</td></tr>
<tr><th id="1408">1408</th><td>  <b>case</b> <a class="enum" href="lj_ir.h.html#318" title='IRT_NUM' data-ref="IRT_NUM" data-ref-filename="IRT_NUM">IRT_NUM</a>: <a class="local col7 ref" href="#607xo" title='xo' data-ref="607xo" data-ref-filename="607xo">xo</a> = <a class="enum" href="lj_target_x86.h.html#XO_MOVSD" title='XO_MOVSD' data-ref="XO_MOVSD" data-ref-filename="XO_MOVSD">XO_MOVSD</a>; <b>break</b>;</td></tr>
<tr><th id="1409">1409</th><td>  <b>case</b> <a class="enum" href="lj_ir.h.html#318" title='IRT_FLOAT' data-ref="IRT_FLOAT" data-ref-filename="IRT_FLOAT">IRT_FLOAT</a>: <a class="local col7 ref" href="#607xo" title='xo' data-ref="607xo" data-ref-filename="607xo">xo</a> = <a class="enum" href="lj_target_x86.h.html#XO_MOVSS" title='XO_MOVSS' data-ref="XO_MOVSS" data-ref-filename="XO_MOVSS">XO_MOVSS</a>; <b>break</b>;</td></tr>
<tr><th id="1410">1410</th><td>  <b>default</b>:</td></tr>
<tr><th id="1411">1411</th><td>    <b>if</b> (<a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp; <a class="macro" href="lj_ir.h.html#394" title="((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)((ir-&gt;t).irt &amp; IRT_TYPE))) &amp; 1)" data-ref="_M/irt_is64">irt_is64</a>(<a class="local col5 ref" href="#605ir" title='ir' data-ref="605ir" data-ref-filename="605ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>))</td></tr>
<tr><th id="1412">1412</th><td>      <a class="local col6 ref" href="#606dest" title='dest' data-ref="606dest" data-ref-filename="606dest">dest</a> |= <a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>;</td></tr>
<tr><th id="1413">1413</th><td>    <b>else</b></td></tr>
<tr><th id="1414">1414</th><td>      <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(irt_isint(ir-&gt;t) || irt_isu32(ir-&gt;t) || irt_isaddr(ir-&gt;t),</td></tr>
<tr><th id="1415">1415</th><td>		 <q>"unsplit 64 bit load"</q>);</td></tr>
<tr><th id="1416">1416</th><td>    <a class="local col7 ref" href="#607xo" title='xo' data-ref="607xo" data-ref-filename="607xo">xo</a> = <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>;</td></tr>
<tr><th id="1417">1417</th><td>    <b>break</b>;</td></tr>
<tr><th id="1418">1418</th><td>  }</td></tr>
<tr><th id="1419">1419</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col4 ref" href="#604as" title='as' data-ref="604as" data-ref-filename="604as">as</a>, <a class="local col7 ref" href="#607xo" title='xo' data-ref="607xo" data-ref-filename="607xo">xo</a>, <a class="local col6 ref" href="#606dest" title='dest' data-ref="606dest" data-ref-filename="606dest">dest</a>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="1420">1420</th><td>}</td></tr>
<tr><th id="1421">1421</th><td></td></tr>
<tr><th id="1422">1422</th><td><u>#define <dfn class="macro" id="_M/asm_fload" data-ref="_M/asm_fload">asm_fload</dfn>(as, ir)	asm_fxload(as, ir)</u></td></tr>
<tr><th id="1423">1423</th><td><u>#define <dfn class="macro" id="_M/asm_xload" data-ref="_M/asm_xload">asm_xload</dfn>(as, ir)	asm_fxload(as, ir)</u></td></tr>
<tr><th id="1424">1424</th><td></td></tr>
<tr><th id="1425">1425</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_fxstore" title='asm_fxstore' data-ref="asm_fxstore" data-ref-filename="asm_fxstore">asm_fxstore</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col8 decl" id="608as" title='as' data-type='ASMState *' data-ref="608as" data-ref-filename="608as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col9 decl" id="609ir" title='ir' data-type='IRIns *' data-ref="609ir" data-ref-filename="609ir">ir</dfn>)</td></tr>
<tr><th id="1426">1426</th><td>{</td></tr>
<tr><th id="1427">1427</th><td>  <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col0 decl" id="610allow" title='allow' data-type='RegSet' data-ref="610allow" data-ref-filename="610allow">allow</dfn> = <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>;</td></tr>
<tr><th id="1428">1428</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col1 decl" id="611src" title='src' data-type='Reg' data-ref="611src" data-ref-filename="611src">src</dfn> = <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a>, <dfn class="local col2 decl" id="612osrc" title='osrc' data-type='Reg' data-ref="612osrc" data-ref-filename="612osrc">osrc</dfn> = <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a>;</td></tr>
<tr><th id="1429">1429</th><td>  <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> <dfn class="local col3 decl" id="613k" title='k' data-type='int32_t' data-ref="613k" data-ref-filename="613k">k</dfn> = <var>0</var>;</td></tr>
<tr><th id="1430">1430</th><td>  <b>if</b> (<a class="local col9 ref" href="#609ir" title='ir' data-ref="609ir" data-ref-filename="609ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a> == <a class="macro" href="lj_target.h.html#24" title="((0x80|0x7f)-1)" data-ref="_M/RID_SINK">RID_SINK</a>)</td></tr>
<tr><th id="1431">1431</th><td>    <b>return</b>;</td></tr>
<tr><th id="1432">1432</th><td>  <i>/* The IRT_I16/IRT_U16 stores should never be simplified for constant</i></td></tr>
<tr><th id="1433">1433</th><td><i>  ** values since mov word [mem], imm16 has a length-changing prefix.</i></td></tr>
<tr><th id="1434">1434</th><td><i>  */</i></td></tr>
<tr><th id="1435">1435</th><td>  <b>if</b> (<a class="macro" href="lj_ir.h.html#367" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_I16)" data-ref="_M/irt_isi16">irt_isi16</a>(<a class="local col9 ref" href="#609ir" title='ir' data-ref="609ir" data-ref-filename="609ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) || <a class="macro" href="lj_ir.h.html#368" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_U16)" data-ref="_M/irt_isu16">irt_isu16</a>(<a class="local col9 ref" href="#609ir" title='ir' data-ref="609ir" data-ref-filename="609ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) || <a class="macro" href="lj_ir.h.html#373" title="((((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM) || (((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_FLOAT))" data-ref="_M/irt_isfp">irt_isfp</a>(<a class="local col9 ref" href="#609ir" title='ir' data-ref="609ir" data-ref-filename="609ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) ||</td></tr>
<tr><th id="1436">1436</th><td>      !<a class="ref fn" href="#asm_isk32" title='asm_isk32' data-ref="asm_isk32" data-ref-filename="asm_isk32">asm_isk32</a>(<a class="local col8 ref" href="#608as" title='as' data-ref="608as" data-ref-filename="608as">as</a>, <a class="local col9 ref" href="#609ir" title='ir' data-ref="609ir" data-ref-filename="609ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>, &amp;<a class="local col3 ref" href="#613k" title='k' data-ref="613k" data-ref-filename="613k">k</a>)) {</td></tr>
<tr><th id="1437">1437</th><td>    <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col4 decl" id="614allow8" title='allow8' data-type='RegSet' data-ref="614allow8" data-ref-filename="614allow8">allow8</dfn> = <a class="macro" href="lj_ir.h.html#373" title="((((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM) || (((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_FLOAT))" data-ref="_M/irt_isfp">irt_isfp</a>(<a class="local col9 ref" href="#609ir" title='ir' data-ref="609ir" data-ref-filename="609ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) ? <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a> :</td></tr>
<tr><th id="1438">1438</th><td>		    (<a class="macro" href="lj_ir.h.html#365" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_I8)" data-ref="_M/irt_isi8">irt_isi8</a>(<a class="local col9 ref" href="#609ir" title='ir' data-ref="609ir" data-ref-filename="609ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) || <a class="macro" href="lj_ir.h.html#366" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_U8)" data-ref="_M/irt_isu8">irt_isu8</a>(<a class="local col9 ref" href="#609ir" title='ir' data-ref="609ir" data-ref-filename="609ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) ? <a class="macro" href="lj_target_x86.h.html#77" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR8">RSET_GPR8</a> : <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>;</td></tr>
<tr><th id="1439">1439</th><td>    <a class="local col1 ref" href="#611src" title='src' data-ref="611src" data-ref-filename="611src">src</a> = <a class="local col2 ref" href="#612osrc" title='osrc' data-ref="612osrc" data-ref-filename="612osrc">osrc</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col8 ref" href="#608as" title='as' data-ref="608as" data-ref-filename="608as">as</a>, <a class="local col9 ref" href="#609ir" title='ir' data-ref="609ir" data-ref-filename="609ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>, <a class="local col4 ref" href="#614allow8" title='allow8' data-ref="614allow8" data-ref-filename="614allow8">allow8</a>);</td></tr>
<tr><th id="1440">1440</th><td>    <b>if</b> (!<a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp; !<a class="macro" href="lj_target.h.html#68" title="((int)((allow8) &gt;&gt; (src)) &amp; 1)" data-ref="_M/rset_test">rset_test</a>(<a class="local col4 ref" href="#614allow8" title='allow8' data-ref="614allow8" data-ref-filename="614allow8">allow8</a>, <a class="local col1 ref" href="#611src" title='src' data-ref="611src" data-ref-filename="611src">src</a>)) {  <i>/* Already in wrong register. */</i></td></tr>
<tr><th id="1441">1441</th><td>      <a class="macro" href="lj_target.h.html#70" title="(allow &amp;= ~(((RegSet)1) &lt;&lt; (osrc)))" data-ref="_M/rset_clear">rset_clear</a>(<a class="local col0 ref" href="#610allow" title='allow' data-ref="610allow" data-ref-filename="610allow">allow</a>, <a class="local col2 ref" href="#612osrc" title='osrc' data-ref="612osrc" data-ref-filename="612osrc">osrc</a>);</td></tr>
<tr><th id="1442">1442</th><td>      <a class="local col1 ref" href="#611src" title='src' data-ref="611src" data-ref-filename="611src">src</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_scratch" title='ra_scratch' data-use='c' data-ref="ra_scratch" data-ref-filename="ra_scratch">ra_scratch</a>(<a class="local col8 ref" href="#608as" title='as' data-ref="608as" data-ref-filename="608as">as</a>, <a class="local col4 ref" href="#614allow8" title='allow8' data-ref="614allow8" data-ref-filename="614allow8">allow8</a>);</td></tr>
<tr><th id="1443">1443</th><td>    }</td></tr>
<tr><th id="1444">1444</th><td>    <a class="macro" href="lj_target.h.html#70" title="(allow &amp;= ~(((RegSet)1) &lt;&lt; (src)))" data-ref="_M/rset_clear">rset_clear</a>(<a class="local col0 ref" href="#610allow" title='allow' data-ref="610allow" data-ref-filename="610allow">allow</a>, <a class="local col1 ref" href="#611src" title='src' data-ref="611src" data-ref-filename="611src">src</a>);</td></tr>
<tr><th id="1445">1445</th><td>  }</td></tr>
<tr><th id="1446">1446</th><td>  <b>if</b> (<a class="local col9 ref" href="#609ir" title='ir' data-ref="609ir" data-ref-filename="609ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_FSTORE' data-ref="IR_FSTORE" data-ref-filename="IR_FSTORE">IR_FSTORE</a>) {</td></tr>
<tr><th id="1447">1447</th><td>    <a class="ref fn" href="#asm_fusefref" title='asm_fusefref' data-ref="asm_fusefref" data-ref-filename="asm_fusefref">asm_fusefref</a>(<a class="local col8 ref" href="#608as" title='as' data-ref="608as" data-ref-filename="608as">as</a>, <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ir-&gt;op1)])" data-ref="_M/IR">IR</a>(<a class="local col9 ref" href="#609ir" title='ir' data-ref="609ir" data-ref-filename="609ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>), <a class="local col0 ref" href="#610allow" title='allow' data-ref="610allow" data-ref-filename="610allow">allow</a>);</td></tr>
<tr><th id="1448">1448</th><td>  } <b>else</b> {</td></tr>
<tr><th id="1449">1449</th><td>    <a class="ref fn" href="#asm_fusexref" title='asm_fusexref' data-ref="asm_fusexref" data-ref-filename="asm_fusexref">asm_fusexref</a>(<a class="local col8 ref" href="#608as" title='as' data-ref="608as" data-ref-filename="608as">as</a>, <a class="local col9 ref" href="#609ir" title='ir' data-ref="609ir" data-ref-filename="609ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="local col0 ref" href="#610allow" title='allow' data-ref="610allow" data-ref-filename="610allow">allow</a>);</td></tr>
<tr><th id="1450">1450</th><td>    <b>if</b> (<a class="macro" href="lj_arch.h.html#599" title="0" data-ref="_M/LJ_32">LJ_32</a> &amp;&amp; <a class="local col9 ref" href="#609ir" title='ir' data-ref="609ir" data-ref-filename="609ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_HIOP' data-ref="IR_HIOP" data-ref-filename="IR_HIOP">IR_HIOP</a>) <a class="local col8 ref" href="#608as" title='as' data-ref="608as" data-ref-filename="608as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> += <var>4</var>;</td></tr>
<tr><th id="1451">1451</th><td>  }</td></tr>
<tr><th id="1452">1452</th><td>  <b>if</b> (<a class="macro" href="lj_target.h.html#28" title="(!((src) &amp; 0x80))" data-ref="_M/ra_hasreg">ra_hasreg</a>(<a class="local col1 ref" href="#611src" title='src' data-ref="611src" data-ref-filename="611src">src</a>)) {</td></tr>
<tr><th id="1453">1453</th><td>    <a class="typedef" href="lj_target_x86.h.html#x86Op" title='x86Op' data-type='enum x86Op' data-ref="x86Op" data-ref-filename="x86Op">x86Op</a> <dfn class="local col5 decl" id="615xo" title='xo' data-type='x86Op' data-ref="615xo" data-ref-filename="615xo">xo</dfn>;</td></tr>
<tr><th id="1454">1454</th><td>    <b>switch</b> (<a class="macro" href="lj_ir.h.html#351" title="((IRType)((ir-&gt;t).irt &amp; IRT_TYPE))" data-ref="_M/irt_type">irt_type</a>(<a class="local col9 ref" href="#609ir" title='ir' data-ref="609ir" data-ref-filename="609ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="1455">1455</th><td>    <b>case</b> <a class="enum" href="lj_ir.h.html#318" title='IRT_I8' data-ref="IRT_I8" data-ref-filename="IRT_I8">IRT_I8</a>: <b>case</b> <a class="enum" href="lj_ir.h.html#318" title='IRT_U8' data-ref="IRT_U8" data-ref-filename="IRT_U8">IRT_U8</a>: <a class="local col5 ref" href="#615xo" title='xo' data-ref="615xo" data-ref-filename="615xo">xo</a> = <a class="enum" href="lj_target_x86.h.html#XO_MOVtob" title='XO_MOVtob' data-ref="XO_MOVtob" data-ref-filename="XO_MOVtob">XO_MOVtob</a>; <a class="local col1 ref" href="#611src" title='src' data-ref="611src" data-ref-filename="611src">src</a> |= <a class="macro" href="lj_emit_x86.h.html#14" title="0x200" data-ref="_M/FORCE_REX">FORCE_REX</a>; <b>break</b>;</td></tr>
<tr><th id="1456">1456</th><td>    <b>case</b> <a class="enum" href="lj_ir.h.html#318" title='IRT_I16' data-ref="IRT_I16" data-ref-filename="IRT_I16">IRT_I16</a>: <b>case</b> <a class="enum" href="lj_ir.h.html#318" title='IRT_U16' data-ref="IRT_U16" data-ref-filename="IRT_U16">IRT_U16</a>: <a class="local col5 ref" href="#615xo" title='xo' data-ref="615xo" data-ref-filename="615xo">xo</a> = <a class="enum" href="lj_target_x86.h.html#XO_MOVtow" title='XO_MOVtow' data-ref="XO_MOVtow" data-ref-filename="XO_MOVtow">XO_MOVtow</a>; <b>break</b>;</td></tr>
<tr><th id="1457">1457</th><td>    <b>case</b> <a class="enum" href="lj_ir.h.html#318" title='IRT_NUM' data-ref="IRT_NUM" data-ref-filename="IRT_NUM">IRT_NUM</a>: <a class="local col5 ref" href="#615xo" title='xo' data-ref="615xo" data-ref-filename="615xo">xo</a> = <a class="enum" href="lj_target_x86.h.html#XO_MOVSDto" title='XO_MOVSDto' data-ref="XO_MOVSDto" data-ref-filename="XO_MOVSDto">XO_MOVSDto</a>; <b>break</b>;</td></tr>
<tr><th id="1458">1458</th><td>    <b>case</b> <a class="enum" href="lj_ir.h.html#318" title='IRT_FLOAT' data-ref="IRT_FLOAT" data-ref-filename="IRT_FLOAT">IRT_FLOAT</a>: <a class="local col5 ref" href="#615xo" title='xo' data-ref="615xo" data-ref-filename="615xo">xo</a> = <a class="enum" href="lj_target_x86.h.html#XO_MOVSSto" title='XO_MOVSSto' data-ref="XO_MOVSSto" data-ref-filename="XO_MOVSSto">XO_MOVSSto</a>; <b>break</b>;</td></tr>
<tr><th id="1459">1459</th><td><u>#<span data-ppcond="1459">if</span> <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp; !<a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="1460">1460</th><td>    <b>case</b> IRT_LIGHTUD:</td></tr>
<tr><th id="1461">1461</th><td>      <i>/* NYI: mask 64 bit lightuserdata. */</i></td></tr>
<tr><th id="1462">1462</th><td>      lj_assertA(<var>0</var>, <q>"store of lightuserdata"</q>);</td></tr>
<tr><th id="1463">1463</th><td><u>#<span data-ppcond="1459">endif</span></u></td></tr>
<tr><th id="1464">1464</th><td>    <b>default</b>:</td></tr>
<tr><th id="1465">1465</th><td>      <b>if</b> (<a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp; <a class="macro" href="lj_ir.h.html#394" title="((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)((ir-&gt;t).irt &amp; IRT_TYPE))) &amp; 1)" data-ref="_M/irt_is64">irt_is64</a>(<a class="local col9 ref" href="#609ir" title='ir' data-ref="609ir" data-ref-filename="609ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>))</td></tr>
<tr><th id="1466">1466</th><td>	<a class="local col1 ref" href="#611src" title='src' data-ref="611src" data-ref-filename="611src">src</a> |= <a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>;</td></tr>
<tr><th id="1467">1467</th><td>      <b>else</b></td></tr>
<tr><th id="1468">1468</th><td>	<a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(irt_isint(ir-&gt;t) || irt_isu32(ir-&gt;t) || irt_isaddr(ir-&gt;t),</td></tr>
<tr><th id="1469">1469</th><td>		   <q>"unsplit 64 bit store"</q>);</td></tr>
<tr><th id="1470">1470</th><td>      <a class="local col5 ref" href="#615xo" title='xo' data-ref="615xo" data-ref-filename="615xo">xo</a> = <a class="enum" href="lj_target_x86.h.html#XO_MOVto" title='XO_MOVto' data-ref="XO_MOVto" data-ref-filename="XO_MOVto">XO_MOVto</a>;</td></tr>
<tr><th id="1471">1471</th><td>      <b>break</b>;</td></tr>
<tr><th id="1472">1472</th><td>    }</td></tr>
<tr><th id="1473">1473</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col8 ref" href="#608as" title='as' data-ref="608as" data-ref-filename="608as">as</a>, <a class="local col5 ref" href="#615xo" title='xo' data-ref="615xo" data-ref-filename="615xo">xo</a>, <a class="local col1 ref" href="#611src" title='src' data-ref="611src" data-ref-filename="611src">src</a>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="1474">1474</th><td>    <b>if</b> (!<a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp; <a class="local col1 ref" href="#611src" title='src' data-ref="611src" data-ref-filename="611src">src</a> != <a class="local col2 ref" href="#612osrc" title='osrc' data-ref="612osrc" data-ref-filename="612osrc">osrc</a>) {</td></tr>
<tr><th id="1475">1475</th><td>      <a class="macro" href="lj_asm.c.html#307" title="(as-&gt;weakset &amp;= ~(((RegSet)1) &lt;&lt; ((osrc))))" data-ref="_M/ra_noweak">ra_noweak</a>(<a class="local col8 ref" href="#608as" title='as' data-ref="608as" data-ref-filename="608as">as</a>, <a class="local col2 ref" href="#612osrc" title='osrc' data-ref="612osrc" data-ref-filename="612osrc">osrc</a>);</td></tr>
<tr><th id="1476">1476</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col8 ref" href="#608as" title='as' data-ref="608as" data-ref-filename="608as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col1 ref" href="#611src" title='src' data-ref="611src" data-ref-filename="611src">src</a>, <a class="local col2 ref" href="#612osrc" title='osrc' data-ref="612osrc" data-ref-filename="612osrc">osrc</a>);</td></tr>
<tr><th id="1477">1477</th><td>    }</td></tr>
<tr><th id="1478">1478</th><td>  } <b>else</b> {</td></tr>
<tr><th id="1479">1479</th><td>    <b>if</b> (<a class="macro" href="lj_ir.h.html#365" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_I8)" data-ref="_M/irt_isi8">irt_isi8</a>(<a class="local col9 ref" href="#609ir" title='ir' data-ref="609ir" data-ref-filename="609ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) || <a class="macro" href="lj_ir.h.html#366" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_U8)" data-ref="_M/irt_isu8">irt_isu8</a>(<a class="local col9 ref" href="#609ir" title='ir' data-ref="609ir" data-ref-filename="609ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="1480">1480</th><td>      <a class="macro" href="lj_emit_x86.h.html#29" title="(*--as-&gt;mcp = (MCode)(k))" data-ref="_M/emit_i8">emit_i8</a>(<a class="local col8 ref" href="#608as" title='as' data-ref="608as" data-ref-filename="608as">as</a>, <a class="local col3 ref" href="#613k" title='k' data-ref="613k" data-ref-filename="613k">k</a>);</td></tr>
<tr><th id="1481">1481</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col8 ref" href="#608as" title='as' data-ref="608as" data-ref-filename="608as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOVmib" title='XO_MOVmib' data-ref="XO_MOVmib" data-ref-filename="XO_MOVmib">XO_MOVmib</a>, <var>0</var>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="1482">1482</th><td>    } <b>else</b> {</td></tr>
<tr><th id="1483">1483</th><td>      <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(irt_is64(ir-&gt;t) || irt_isint(ir-&gt;t) || irt_isu32(ir-&gt;t) ||</td></tr>
<tr><th id="1484">1484</th><td>		 irt_isaddr(ir-&gt;t), <q>"bad store type"</q>);</td></tr>
<tr><th id="1485">1485</th><td>      <a class="macro" href="lj_emit_x86.h.html#30" title="(*(int32_t *)(as-&gt;mcp-4) = (k), as-&gt;mcp -= 4)" data-ref="_M/emit_i32">emit_i32</a>(<a class="local col8 ref" href="#608as" title='as' data-ref="608as" data-ref-filename="608as">as</a>, <a class="local col3 ref" href="#613k" title='k' data-ref="613k" data-ref-filename="613k">k</a>);</td></tr>
<tr><th id="1486">1486</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col8 ref" href="#608as" title='as' data-ref="608as" data-ref-filename="608as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOVmi" title='XO_MOVmi' data-ref="XO_MOVmi" data-ref-filename="XO_MOVmi">XO_MOVmi</a>, <a class="macro" href="lj_emit_x86.h.html#525" title="((0) + (((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)(((ir)-&gt;t).irt &amp; IRT_TYPE))) &amp; 1) ? (0x200|0x080000) : 0))" data-ref="_M/REX_64IR">REX_64IR</a>(<a class="local col9 ref" href="#609ir" title='ir' data-ref="609ir" data-ref-filename="609ir">ir</a>, <var>0</var>), <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="1487">1487</th><td>    }</td></tr>
<tr><th id="1488">1488</th><td>  }</td></tr>
<tr><th id="1489">1489</th><td>}</td></tr>
<tr><th id="1490">1490</th><td></td></tr>
<tr><th id="1491">1491</th><td><u>#define <dfn class="macro" id="_M/asm_fstore" data-ref="_M/asm_fstore">asm_fstore</dfn>(as, ir)	asm_fxstore(as, ir)</u></td></tr>
<tr><th id="1492">1492</th><td><u>#define <dfn class="macro" id="_M/asm_xstore" data-ref="_M/asm_xstore">asm_xstore</dfn>(as, ir)	asm_fxstore(as, ir)</u></td></tr>
<tr><th id="1493">1493</th><td></td></tr>
<tr><th id="1494">1494</th><td><u>#<span data-ppcond="1494">if</span> <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp; !<a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="1495">1495</th><td><em>static</em> Reg asm_load_lightud64(ASMState *as, IRIns *ir, <em>int</em> typecheck)</td></tr>
<tr><th id="1496">1496</th><td>{</td></tr>
<tr><th id="1497">1497</th><td>  <b>if</b> (ra_used(ir) || typecheck) {</td></tr>
<tr><th id="1498">1498</th><td>    Reg dest = ra_dest(as, ir, RSET_GPR);</td></tr>
<tr><th id="1499">1499</th><td>    <b>if</b> (typecheck) {</td></tr>
<tr><th id="1500">1500</th><td>      Reg tmp = ra_scratch(as, rset_exclude(RSET_GPR, dest));</td></tr>
<tr><th id="1501">1501</th><td>      asm_guardcc(as, CC_NE);</td></tr>
<tr><th id="1502">1502</th><td>      emit_i8(as, -<var>2</var>);</td></tr>
<tr><th id="1503">1503</th><td>      emit_rr(as, XO_ARITHi8, XOg_CMP, tmp);</td></tr>
<tr><th id="1504">1504</th><td>      emit_shifti(as, XOg_SAR|REX_64, tmp, <var>47</var>);</td></tr>
<tr><th id="1505">1505</th><td>      emit_rr(as, XO_MOV, tmp|REX_64, dest);</td></tr>
<tr><th id="1506">1506</th><td>    }</td></tr>
<tr><th id="1507">1507</th><td>    <b>return</b> dest;</td></tr>
<tr><th id="1508">1508</th><td>  } <b>else</b> {</td></tr>
<tr><th id="1509">1509</th><td>    <b>return</b> RID_NONE;</td></tr>
<tr><th id="1510">1510</th><td>  }</td></tr>
<tr><th id="1511">1511</th><td>}</td></tr>
<tr><th id="1512">1512</th><td><u>#<span data-ppcond="1494">endif</span></u></td></tr>
<tr><th id="1513">1513</th><td></td></tr>
<tr><th id="1514">1514</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_ahuvload" title='asm_ahuvload' data-ref="asm_ahuvload" data-ref-filename="asm_ahuvload">asm_ahuvload</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col6 decl" id="616as" title='as' data-type='ASMState *' data-ref="616as" data-ref-filename="616as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col7 decl" id="617ir" title='ir' data-type='IRIns *' data-ref="617ir" data-ref-filename="617ir">ir</dfn>)</td></tr>
<tr><th id="1515">1515</th><td>{</td></tr>
<tr><th id="1516">1516</th><td><u>#<span data-ppcond="1516">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="1517">1517</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col8 decl" id="618tmp" title='tmp' data-type='Reg' data-ref="618tmp" data-ref-filename="618tmp">tmp</dfn> = <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a>;</td></tr>
<tr><th id="1518">1518</th><td><u>#<span data-ppcond="1516">endif</span></u></td></tr>
<tr><th id="1519">1519</th><td>  <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(irt_isnum(ir-&gt;t) || irt_ispri(ir-&gt;t) || irt_isaddr(ir-&gt;t) ||</td></tr>
<tr><th id="1520">1520</th><td>	     (LJ_DUALNUM &amp;&amp; irt_isint(ir-&gt;t)),</td></tr>
<tr><th id="1521">1521</th><td>	     <q>"bad load type %d"</q>, irt_type(ir-&gt;t));</td></tr>
<tr><th id="1522">1522</th><td><u>#<span data-ppcond="1522">if</span> <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp; !<a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="1523">1523</th><td>  <b>if</b> (irt_islightud(ir-&gt;t)) {</td></tr>
<tr><th id="1524">1524</th><td>    Reg dest = asm_load_lightud64(as, ir, <var>1</var>);</td></tr>
<tr><th id="1525">1525</th><td>    <b>if</b> (ra_hasreg(dest)) {</td></tr>
<tr><th id="1526">1526</th><td>      asm_fuseahuref(as, ir-&gt;op1, RSET_GPR);</td></tr>
<tr><th id="1527">1527</th><td>      emit_mrm(as, XO_MOV, dest|REX_64, RID_MRM);</td></tr>
<tr><th id="1528">1528</th><td>    }</td></tr>
<tr><th id="1529">1529</th><td>    <b>return</b>;</td></tr>
<tr><th id="1530">1530</th><td>  } <b>else</b></td></tr>
<tr><th id="1531">1531</th><td><u>#<span data-ppcond="1522">endif</span></u></td></tr>
<tr><th id="1532">1532</th><td>  <b>if</b> (<a class="macro" href="lj_asm.c.html#309" title="((!(((ir)-&gt;r) &amp; 0x80)) || (((ir)-&gt;s) != 0))" data-ref="_M/ra_used">ra_used</a>(<a class="local col7 ref" href="#617ir" title='ir' data-ref="617ir" data-ref-filename="617ir">ir</a>)) {</td></tr>
<tr><th id="1533">1533</th><td>    <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col9 decl" id="619allow" title='allow' data-type='RegSet' data-ref="619allow" data-ref-filename="619allow">allow</dfn> = <a class="macro" href="lj_ir.h.html#363" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM)" data-ref="_M/irt_isnum">irt_isnum</a>(<a class="local col7 ref" href="#617ir" title='ir' data-ref="617ir" data-ref-filename="617ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) ? <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a> : <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>;</td></tr>
<tr><th id="1534">1534</th><td>    <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col0 decl" id="620dest" title='dest' data-type='Reg' data-ref="620dest" data-ref-filename="620dest">dest</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, <a class="local col7 ref" href="#617ir" title='ir' data-ref="617ir" data-ref-filename="617ir">ir</a>, <a class="local col9 ref" href="#619allow" title='allow' data-ref="619allow" data-ref-filename="619allow">allow</a>);</td></tr>
<tr><th id="1535">1535</th><td>    <a class="ref fn" href="#asm_fuseahuref" title='asm_fuseahuref' data-ref="asm_fuseahuref" data-ref-filename="asm_fuseahuref">asm_fuseahuref</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, <a class="local col7 ref" href="#617ir" title='ir' data-ref="617ir" data-ref-filename="617ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="1536">1536</th><td><u>#<span data-ppcond="1536">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="1537">1537</th><td>    <b>if</b> (<a class="macro" href="lj_ir.h.html#376" title="(((uint32_t)(((ir-&gt;t)).irt &amp; IRT_TYPE) - (uint32_t)(IRT_LIGHTUD) &lt;= (uint32_t)(IRT_UDATA-IRT_LIGHTUD)))" data-ref="_M/irt_isaddr">irt_isaddr</a>(<a class="local col7 ref" href="#617ir" title='ir' data-ref="617ir" data-ref-filename="617ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="1538">1538</th><td>      <a class="macro" href="lj_emit_x86.h.html#189" title="((*--as-&gt;mcp = (MCode)((17))), emit_rr(as, XO_SHIFTi, (Reg)(XOg_SHR|(0x200|0x080000)), (dest)))" data-ref="_M/emit_shifti">emit_shifti</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, <a class="enum" href="lj_target_x86.h.html#XOg_SHR" title='XOg_SHR' data-ref="XOg_SHR" data-ref-filename="XOg_SHR">XOg_SHR</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="local col0 ref" href="#620dest" title='dest' data-ref="620dest" data-ref-filename="620dest">dest</a>, <var>17</var>);</td></tr>
<tr><th id="1539">1539</th><td>      <a class="ref fn" href="#asm_guardcc" title='asm_guardcc' data-ref="asm_guardcc" data-ref-filename="asm_guardcc">asm_guardcc</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_NE" title='CC_NE' data-ref="CC_NE" data-ref-filename="CC_NE">CC_NE</a>);</td></tr>
<tr><th id="1540">1540</th><td>      <a class="macro" href="lj_emit_x86.h.html#29" title="(*--as-&gt;mcp = (MCode)(irt_toitype_(((IRType)(((ir-&gt;t)).irt &amp; IRT_TYPE)))))" data-ref="_M/emit_i8">emit_i8</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, <a class="macro" href="lj_ir.h.html#427" title="irt_toitype_(((IRType)(((ir-&gt;t)).irt &amp; IRT_TYPE)))" data-ref="_M/irt_toitype">irt_toitype</a>(<a class="local col7 ref" href="#617ir" title='ir' data-ref="617ir" data-ref-filename="617ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>));</td></tr>
<tr><th id="1541">1541</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_ARITHi8" title='XO_ARITHi8' data-ref="XO_ARITHi8" data-ref-filename="XO_ARITHi8">XO_ARITHi8</a>, <a class="enum" href="lj_target_x86.h.html#XOg_CMP" title='XOg_CMP' data-ref="XOg_CMP" data-ref-filename="XOg_CMP">XOg_CMP</a>, <a class="local col0 ref" href="#620dest" title='dest' data-ref="620dest" data-ref-filename="620dest">dest</a>);</td></tr>
<tr><th id="1542">1542</th><td>      <a class="macro" href="lj_emit_x86.h.html#29" title="(*--as-&gt;mcp = (MCode)(XI_O16))" data-ref="_M/emit_i8">emit_i8</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, <a class="enum" href="lj_target_x86.h.html#XI_O16" title='XI_O16' data-ref="XI_O16" data-ref-filename="XI_O16">XI_O16</a>);</td></tr>
<tr><th id="1543">1543</th><td>      <b>if</b> ((<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::flags" title='ASMState::flags' data-use='r' data-ref="ASMState::flags" data-ref-filename="ASMState..flags">flags</a> &amp; <a class="macro" href="lj_jit.h.html#24" title="(0x00000010 &lt;&lt; 2)" data-ref="_M/JIT_F_BMI2">JIT_F_BMI2</a>)) {</td></tr>
<tr><th id="1544">1544</th><td>	<a class="macro" href="lj_emit_x86.h.html#29" title="(*--as-&gt;mcp = (MCode)(47))" data-ref="_M/emit_i8">emit_i8</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, <var>47</var>);</td></tr>
<tr><th id="1545">1545</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, <a class="enum" href="lj_target_x86.h.html#XV_RORX" title='XV_RORX' data-ref="XV_RORX" data-ref-filename="XV_RORX">XV_RORX</a>|<a class="macro" href="lj_emit_x86.h.html#16" title="0x800000" data-ref="_M/VEX_64">VEX_64</a>, <a class="local col0 ref" href="#620dest" title='dest' data-ref="620dest" data-ref-filename="620dest">dest</a>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="1546">1546</th><td>      } <b>else</b> {</td></tr>
<tr><th id="1547">1547</th><td>	<a class="macro" href="lj_emit_x86.h.html#189" title="((*--as-&gt;mcp = (MCode)((47))), emit_rr(as, XO_SHIFTi, (Reg)(XOg_ROR|(0x200|0x080000)), (dest)))" data-ref="_M/emit_shifti">emit_shifti</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, <a class="enum" href="lj_target_x86.h.html#XOg_ROR" title='XOg_ROR' data-ref="XOg_ROR" data-ref-filename="XOg_ROR">XOg_ROR</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="local col0 ref" href="#620dest" title='dest' data-ref="620dest" data-ref-filename="620dest">dest</a>, <var>47</var>);</td></tr>
<tr><th id="1548">1548</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col0 ref" href="#620dest" title='dest' data-ref="620dest" data-ref-filename="620dest">dest</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="1549">1549</th><td>      }</td></tr>
<tr><th id="1550">1550</th><td>      <b>return</b>;</td></tr>
<tr><th id="1551">1551</th><td>    } <b>else</b></td></tr>
<tr><th id="1552">1552</th><td><u>#<span data-ppcond="1536">endif</span></u></td></tr>
<tr><th id="1553">1553</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, <a class="local col0 ref" href="#620dest" title='dest' data-ref="620dest" data-ref-filename="620dest">dest</a> &lt; <a class="enum" href="lj_target_x86.h.html#RID_MAX_GPR" title='RID_MAX_GPR' data-ref="RID_MAX_GPR" data-ref-filename="RID_MAX_GPR">RID_MAX_GPR</a> ? <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a> : <a class="enum" href="lj_target_x86.h.html#XO_MOVSD" title='XO_MOVSD' data-ref="XO_MOVSD" data-ref-filename="XO_MOVSD">XO_MOVSD</a>, <a class="local col0 ref" href="#620dest" title='dest' data-ref="620dest" data-ref-filename="620dest">dest</a>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="1554">1554</th><td>  } <b>else</b> {</td></tr>
<tr><th id="1555">1555</th><td>    <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col1 decl" id="621gpr" title='gpr' data-type='RegSet' data-ref="621gpr" data-ref-filename="621gpr">gpr</dfn> = <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>;</td></tr>
<tr><th id="1556">1556</th><td><u>#<span data-ppcond="1556">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="1557">1557</th><td>    <b>if</b> (<a class="macro" href="lj_ir.h.html#376" title="(((uint32_t)(((ir-&gt;t)).irt &amp; IRT_TYPE) - (uint32_t)(IRT_LIGHTUD) &lt;= (uint32_t)(IRT_UDATA-IRT_LIGHTUD)))" data-ref="_M/irt_isaddr">irt_isaddr</a>(<a class="local col7 ref" href="#617ir" title='ir' data-ref="617ir" data-ref-filename="617ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="1558">1558</th><td>      <a class="local col8 ref" href="#618tmp" title='tmp' data-ref="618tmp" data-ref-filename="618tmp">tmp</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_scratch" title='ra_scratch' data-use='c' data-ref="ra_scratch" data-ref-filename="ra_scratch">ra_scratch</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="1559">1559</th><td>      <a class="local col1 ref" href="#621gpr" title='gpr' data-ref="621gpr" data-ref-filename="621gpr">gpr</a> = <a class="macro" href="lj_target.h.html#71" title="(gpr &amp; ~(((RegSet)1) &lt;&lt; (tmp)))" data-ref="_M/rset_exclude">rset_exclude</a>(<a class="local col1 ref" href="#621gpr" title='gpr' data-ref="621gpr" data-ref-filename="621gpr">gpr</a>, <a class="local col8 ref" href="#618tmp" title='tmp' data-ref="618tmp" data-ref-filename="618tmp">tmp</a>);</td></tr>
<tr><th id="1560">1560</th><td>    }</td></tr>
<tr><th id="1561">1561</th><td><u>#<span data-ppcond="1556">endif</span></u></td></tr>
<tr><th id="1562">1562</th><td>    <a class="ref fn" href="#asm_fuseahuref" title='asm_fuseahuref' data-ref="asm_fuseahuref" data-ref-filename="asm_fuseahuref">asm_fuseahuref</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, <a class="local col7 ref" href="#617ir" title='ir' data-ref="617ir" data-ref-filename="617ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="local col1 ref" href="#621gpr" title='gpr' data-ref="621gpr" data-ref-filename="621gpr">gpr</a>);</td></tr>
<tr><th id="1563">1563</th><td>  }</td></tr>
<tr><th id="1564">1564</th><td>  <i>/* Always do the type check, even if the load result is unused. */</i></td></tr>
<tr><th id="1565">1565</th><td>  <a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> += <var>4</var>;</td></tr>
<tr><th id="1566">1566</th><td>  <a class="ref fn" href="#asm_guardcc" title='asm_guardcc' data-ref="asm_guardcc" data-ref-filename="asm_guardcc">asm_guardcc</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, <a class="macro" href="lj_ir.h.html#363" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM)" data-ref="_M/irt_isnum">irt_isnum</a>(<a class="local col7 ref" href="#617ir" title='ir' data-ref="617ir" data-ref-filename="617ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) ? <a class="enum" href="lj_target_x86.h.html#CC_AE" title='CC_AE' data-ref="CC_AE" data-ref-filename="CC_AE">CC_AE</a> : <a class="enum" href="lj_target_x86.h.html#CC_NE" title='CC_NE' data-ref="CC_NE" data-ref-filename="CC_NE">CC_NE</a>);</td></tr>
<tr><th id="1567">1567</th><td>  <b>if</b> (<a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp; <a class="macro" href="lj_ir.h.html#351" title="((IRType)((ir-&gt;t).irt &amp; IRT_TYPE))" data-ref="_M/irt_type">irt_type</a>(<a class="local col7 ref" href="#617ir" title='ir' data-ref="617ir" data-ref-filename="617ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) &gt;= <a class="enum" href="lj_ir.h.html#318" title='IRT_NUM' data-ref="IRT_NUM" data-ref-filename="IRT_NUM">IRT_NUM</a>) {</td></tr>
<tr><th id="1568">1568</th><td>    <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(irt_isinteger(ir-&gt;t) || irt_isnum(ir-&gt;t),</td></tr>
<tr><th id="1569">1569</th><td>	       <q>"bad load type %d"</q>, irt_type(ir-&gt;t));</td></tr>
<tr><th id="1570">1570</th><td><u>#<span data-ppcond="1570">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="1571">1571</th><td>    <a class="macro" href="lj_emit_x86.h.html#31" title="(*(uint32_t *)(as-&gt;mcp-4) = ((~13u) &lt;&lt; 15), as-&gt;mcp -= 4)" data-ref="_M/emit_u32">emit_u32</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, <a class="macro" href="lj_obj.h.html#280" title="(~13u)" data-ref="_M/LJ_TISNUM">LJ_TISNUM</a> &lt;&lt; <var>15</var>);</td></tr>
<tr><th id="1572">1572</th><td><u>#<span data-ppcond="1570">else</span></u></td></tr>
<tr><th id="1573">1573</th><td>    emit_u32(as, LJ_TISNUM);</td></tr>
<tr><th id="1574">1574</th><td><u>#<span data-ppcond="1570">endif</span></u></td></tr>
<tr><th id="1575">1575</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_ARITHi" title='XO_ARITHi' data-ref="XO_ARITHi" data-ref-filename="XO_ARITHi">XO_ARITHi</a>, <a class="enum" href="lj_target_x86.h.html#XOg_CMP" title='XOg_CMP' data-ref="XOg_CMP" data-ref-filename="XOg_CMP">XOg_CMP</a>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="1576">1576</th><td><u>#<span data-ppcond="1576">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="1577">1577</th><td>  } <b>else</b> <b>if</b> (<a class="macro" href="lj_ir.h.html#376" title="(((uint32_t)(((ir-&gt;t)).irt &amp; IRT_TYPE) - (uint32_t)(IRT_LIGHTUD) &lt;= (uint32_t)(IRT_UDATA-IRT_LIGHTUD)))" data-ref="_M/irt_isaddr">irt_isaddr</a>(<a class="local col7 ref" href="#617ir" title='ir' data-ref="617ir" data-ref-filename="617ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="1578">1578</th><td>    <a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> -= <var>4</var>;</td></tr>
<tr><th id="1579">1579</th><td>    <a class="macro" href="lj_emit_x86.h.html#29" title="(*--as-&gt;mcp = (MCode)(irt_toitype_(((IRType)(((ir-&gt;t)).irt &amp; IRT_TYPE)))))" data-ref="_M/emit_i8">emit_i8</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, <a class="macro" href="lj_ir.h.html#427" title="irt_toitype_(((IRType)(((ir-&gt;t)).irt &amp; IRT_TYPE)))" data-ref="_M/irt_toitype">irt_toitype</a>(<a class="local col7 ref" href="#617ir" title='ir' data-ref="617ir" data-ref-filename="617ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>));</td></tr>
<tr><th id="1580">1580</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_ARITHi8" title='XO_ARITHi8' data-ref="XO_ARITHi8" data-ref-filename="XO_ARITHi8">XO_ARITHi8</a>, <a class="enum" href="lj_target_x86.h.html#XOg_CMP" title='XOg_CMP' data-ref="XOg_CMP" data-ref-filename="XOg_CMP">XOg_CMP</a>, <a class="local col8 ref" href="#618tmp" title='tmp' data-ref="618tmp" data-ref-filename="618tmp">tmp</a>);</td></tr>
<tr><th id="1581">1581</th><td>    <a class="macro" href="lj_emit_x86.h.html#189" title="((*--as-&gt;mcp = (MCode)((47))), emit_rr(as, XO_SHIFTi, (Reg)(XOg_SAR|(0x200|0x080000)), (tmp)))" data-ref="_M/emit_shifti">emit_shifti</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, <a class="enum" href="lj_target_x86.h.html#XOg_SAR" title='XOg_SAR' data-ref="XOg_SAR" data-ref-filename="XOg_SAR">XOg_SAR</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="local col8 ref" href="#618tmp" title='tmp' data-ref="618tmp" data-ref-filename="618tmp">tmp</a>, <var>47</var>);</td></tr>
<tr><th id="1582">1582</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col8 ref" href="#618tmp" title='tmp' data-ref="618tmp" data-ref-filename="618tmp">tmp</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="1583">1583</th><td>  } <b>else</b> <b>if</b> (<a class="macro" href="lj_ir.h.html#356" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_NIL)" data-ref="_M/irt_isnil">irt_isnil</a>(<a class="local col7 ref" href="#617ir" title='ir' data-ref="617ir" data-ref-filename="617ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="1584">1584</th><td>    <a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> -= <var>4</var>;</td></tr>
<tr><th id="1585">1585</th><td>    <a class="macro" href="lj_emit_x86.h.html#29" title="(*--as-&gt;mcp = (MCode)(-1))" data-ref="_M/emit_i8">emit_i8</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, -<var>1</var>);</td></tr>
<tr><th id="1586">1586</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_ARITHi8" title='XO_ARITHi8' data-ref="XO_ARITHi8" data-ref-filename="XO_ARITHi8">XO_ARITHi8</a>, <a class="enum" href="lj_target_x86.h.html#XOg_CMP" title='XOg_CMP' data-ref="XOg_CMP" data-ref-filename="XOg_CMP">XOg_CMP</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="1587">1587</th><td>  } <b>else</b> {</td></tr>
<tr><th id="1588">1588</th><td>    <a class="macro" href="lj_emit_x86.h.html#31" title="(*(uint32_t *)(as-&gt;mcp-4) = ((irt_toitype_(((IRType)(((ir-&gt;t)).irt &amp; IRT_TYPE))) &lt;&lt; 15) | 0x7fff), as-&gt;mcp -= 4)" data-ref="_M/emit_u32">emit_u32</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, (<a class="macro" href="lj_ir.h.html#427" title="irt_toitype_(((IRType)(((ir-&gt;t)).irt &amp; IRT_TYPE)))" data-ref="_M/irt_toitype">irt_toitype</a>(<a class="local col7 ref" href="#617ir" title='ir' data-ref="617ir" data-ref-filename="617ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) &lt;&lt; <var>15</var>) | <var>0x7fff</var>);</td></tr>
<tr><th id="1589">1589</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col6 ref" href="#616as" title='as' data-ref="616as" data-ref-filename="616as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_ARITHi" title='XO_ARITHi' data-ref="XO_ARITHi" data-ref-filename="XO_ARITHi">XO_ARITHi</a>, <a class="enum" href="lj_target_x86.h.html#XOg_CMP" title='XOg_CMP' data-ref="XOg_CMP" data-ref-filename="XOg_CMP">XOg_CMP</a>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="1590">1590</th><td><u>#<span data-ppcond="1576">else</span></u></td></tr>
<tr><th id="1591">1591</th><td>  } <b>else</b> {</td></tr>
<tr><th id="1592">1592</th><td>    emit_i8(as, irt_toitype(ir-&gt;t));</td></tr>
<tr><th id="1593">1593</th><td>    emit_mrm(as, XO_ARITHi8, XOg_CMP, RID_MRM);</td></tr>
<tr><th id="1594">1594</th><td><u>#<span data-ppcond="1576">endif</span></u></td></tr>
<tr><th id="1595">1595</th><td>  }</td></tr>
<tr><th id="1596">1596</th><td>}</td></tr>
<tr><th id="1597">1597</th><td></td></tr>
<tr><th id="1598">1598</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_ahustore" title='asm_ahustore' data-ref="asm_ahustore" data-ref-filename="asm_ahustore">asm_ahustore</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col2 decl" id="622as" title='as' data-type='ASMState *' data-ref="622as" data-ref-filename="622as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col3 decl" id="623ir" title='ir' data-type='IRIns *' data-ref="623ir" data-ref-filename="623ir">ir</dfn>)</td></tr>
<tr><th id="1599">1599</th><td>{</td></tr>
<tr><th id="1600">1600</th><td>  <b>if</b> (<a class="local col3 ref" href="#623ir" title='ir' data-ref="623ir" data-ref-filename="623ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a> == <a class="macro" href="lj_target.h.html#24" title="((0x80|0x7f)-1)" data-ref="_M/RID_SINK">RID_SINK</a>)</td></tr>
<tr><th id="1601">1601</th><td>    <b>return</b>;</td></tr>
<tr><th id="1602">1602</th><td>  <b>if</b> (<a class="macro" href="lj_ir.h.html#363" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM)" data-ref="_M/irt_isnum">irt_isnum</a>(<a class="local col3 ref" href="#623ir" title='ir' data-ref="623ir" data-ref-filename="623ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="1603">1603</th><td>    <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col4 decl" id="624src" title='src' data-type='Reg' data-ref="624src" data-ref-filename="624src">src</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>, <a class="local col3 ref" href="#623ir" title='ir' data-ref="623ir" data-ref-filename="623ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>, <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>);</td></tr>
<tr><th id="1604">1604</th><td>    <a class="ref fn" href="#asm_fuseahuref" title='asm_fuseahuref' data-ref="asm_fuseahuref" data-ref-filename="asm_fuseahuref">asm_fuseahuref</a>(<a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>, <a class="local col3 ref" href="#623ir" title='ir' data-ref="623ir" data-ref-filename="623ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="1605">1605</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOVSDto" title='XO_MOVSDto' data-ref="XO_MOVSDto" data-ref-filename="XO_MOVSDto">XO_MOVSDto</a>, <a class="local col4 ref" href="#624src" title='src' data-ref="624src" data-ref-filename="624src">src</a>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="1606">1606</th><td><u>#<span data-ppcond="1606">if</span> <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp; !<a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="1607">1607</th><td>  } <b>else</b> <b>if</b> (irt_islightud(ir-&gt;t)) {</td></tr>
<tr><th id="1608">1608</th><td>    Reg src = ra_alloc1(as, ir-&gt;op2, RSET_GPR);</td></tr>
<tr><th id="1609">1609</th><td>    asm_fuseahuref(as, ir-&gt;op1, rset_exclude(RSET_GPR, src));</td></tr>
<tr><th id="1610">1610</th><td>    emit_mrm(as, XO_MOVto, src|REX_64, RID_MRM);</td></tr>
<tr><th id="1611">1611</th><td><u>#<span data-ppcond="1606">endif</span></u></td></tr>
<tr><th id="1612">1612</th><td><u>#<span data-ppcond="1612">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="1613">1613</th><td>  } <b>else</b> <b>if</b> (<a class="macro" href="lj_ir.h.html#470" title="((ir-&gt;op2) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col3 ref" href="#623ir" title='ir' data-ref="623ir" data-ref-filename="623ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>)) {</td></tr>
<tr><th id="1614">1614</th><td>    <a class="typedef" href="lj_obj.h.html#TValue" title='TValue' data-type='union TValue' data-ref="TValue" data-ref-filename="TValue">TValue</a> <dfn class="local col5 decl" id="625k" title='k' data-type='TValue' data-ref="625k" data-ref-filename="625k">k</dfn>;</td></tr>
<tr><th id="1615">1615</th><td>    <a class="ref fn" href="lj_iropt.h.html#lj_ir_kvalue" title='lj_ir_kvalue' data-ref="lj_ir_kvalue" data-ref-filename="lj_ir_kvalue">lj_ir_kvalue</a>(<a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>-&gt;<a class="ref field" href="lj_jit.h.html#jit_State::L" title='jit_State::L' data-ref="jit_State::L" data-ref-filename="jit_State..L">L</a>, &amp;<a class="local col5 ref" href="#625k" title='k' data-ref="625k" data-ref-filename="625k">k</a>, <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ir-&gt;op2)])" data-ref="_M/IR">IR</a>(<a class="local col3 ref" href="#623ir" title='ir' data-ref="623ir" data-ref-filename="623ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>));</td></tr>
<tr><th id="1616">1616</th><td>    <a class="ref fn" href="#asm_fuseahuref" title='asm_fuseahuref' data-ref="asm_fuseahuref" data-ref-filename="asm_fuseahuref">asm_fuseahuref</a>(<a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>, <a class="local col3 ref" href="#623ir" title='ir' data-ref="623ir" data-ref-filename="623ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="1617">1617</th><td>    <b>if</b> (<a class="macro" href="lj_obj.h.html#776" title="((&amp;k)-&gt;it64 == -1)" data-ref="_M/tvisnil">tvisnil</a>(&amp;<a class="local col5 ref" href="#625k" title='k' data-ref="625k" data-ref-filename="625k">k</a>)) {</td></tr>
<tr><th id="1618">1618</th><td>      <a class="macro" href="lj_emit_x86.h.html#30" title="(*(int32_t *)(as-&gt;mcp-4) = (-1), as-&gt;mcp -= 4)" data-ref="_M/emit_i32">emit_i32</a>(<a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>, -<var>1</var>);</td></tr>
<tr><th id="1619">1619</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOVmi" title='XO_MOVmi' data-ref="XO_MOVmi" data-ref-filename="XO_MOVmi">XO_MOVmi</a>, <a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="1620">1620</th><td>    } <b>else</b> {</td></tr>
<tr><th id="1621">1621</th><td>      <a class="macro" href="lj_emit_x86.h.html#31" title="(*(uint32_t *)(as-&gt;mcp-4) = (k.u32.lo), as-&gt;mcp -= 4)" data-ref="_M/emit_u32">emit_u32</a>(<a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>, <a class="local col5 ref" href="#625k" title='k' data-ref="625k" data-ref-filename="625k">k</a>.<a class="ref field" href="lj_obj.h.html#TValue::u32" title='TValue::u32' data-ref="TValue::u32" data-ref-filename="TValue..u32">u32</a>.<a class="ref field" href="lj_obj.h.html#208" title='TValue::(anonymous struct)::lo' data-ref="TValue::(anonymous)::lo" data-ref-filename="TValue..(anonymous)..lo">lo</a>);</td></tr>
<tr><th id="1622">1622</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOVmi" title='XO_MOVmi' data-ref="XO_MOVmi" data-ref-filename="XO_MOVmi">XO_MOVmi</a>, <var>0</var>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="1623">1623</th><td>      <a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> += <var>4</var>;</td></tr>
<tr><th id="1624">1624</th><td>      <a class="macro" href="lj_emit_x86.h.html#31" title="(*(uint32_t *)(as-&gt;mcp-4) = (k.u32.hi), as-&gt;mcp -= 4)" data-ref="_M/emit_u32">emit_u32</a>(<a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>, <a class="local col5 ref" href="#625k" title='k' data-ref="625k" data-ref-filename="625k">k</a>.<a class="ref field" href="lj_obj.h.html#TValue::u32" title='TValue::u32' data-ref="TValue::u32" data-ref-filename="TValue..u32">u32</a>.<a class="ref field" href="lj_obj.h.html#208" title='TValue::(anonymous struct)::hi' data-ref="TValue::(anonymous)::hi" data-ref-filename="TValue..(anonymous)..hi">hi</a>);</td></tr>
<tr><th id="1625">1625</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOVmi" title='XO_MOVmi' data-ref="XO_MOVmi" data-ref-filename="XO_MOVmi">XO_MOVmi</a>, <var>0</var>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="1626">1626</th><td>    }</td></tr>
<tr><th id="1627">1627</th><td><u>#<span data-ppcond="1612">endif</span></u></td></tr>
<tr><th id="1628">1628</th><td>  } <b>else</b> {</td></tr>
<tr><th id="1629">1629</th><td>    <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col6 decl" id="626irr" title='irr' data-type='IRIns *' data-ref="626irr" data-ref-filename="626irr">irr</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ir-&gt;op2)])" data-ref="_M/IR">IR</a>(<a class="local col3 ref" href="#623ir" title='ir' data-ref="623ir" data-ref-filename="623ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>);</td></tr>
<tr><th id="1630">1630</th><td>    <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col7 decl" id="627allow" title='allow' data-type='RegSet' data-ref="627allow" data-ref-filename="627allow">allow</dfn> = <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>;</td></tr>
<tr><th id="1631">1631</th><td>    <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col8 decl" id="628src" title='src' data-type='Reg' data-ref="628src" data-ref-filename="628src">src</dfn> = <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a>;</td></tr>
<tr><th id="1632">1632</th><td>    <b>if</b> (!<a class="macro" href="lj_ir.h.html#470" title="((ir-&gt;op2) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col3 ref" href="#623ir" title='ir' data-ref="623ir" data-ref-filename="623ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>)) {</td></tr>
<tr><th id="1633">1633</th><td>      <a class="local col8 ref" href="#628src" title='src' data-ref="628src" data-ref-filename="628src">src</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>, <a class="local col3 ref" href="#623ir" title='ir' data-ref="623ir" data-ref-filename="623ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>, <a class="local col7 ref" href="#627allow" title='allow' data-ref="627allow" data-ref-filename="627allow">allow</a>);</td></tr>
<tr><th id="1634">1634</th><td>      <a class="macro" href="lj_target.h.html#70" title="(allow &amp;= ~(((RegSet)1) &lt;&lt; (src)))" data-ref="_M/rset_clear">rset_clear</a>(<a class="local col7 ref" href="#627allow" title='allow' data-ref="627allow" data-ref-filename="627allow">allow</a>, <a class="local col8 ref" href="#628src" title='src' data-ref="628src" data-ref-filename="628src">src</a>);</td></tr>
<tr><th id="1635">1635</th><td>    }</td></tr>
<tr><th id="1636">1636</th><td>    <a class="ref fn" href="#asm_fuseahuref" title='asm_fuseahuref' data-ref="asm_fuseahuref" data-ref-filename="asm_fuseahuref">asm_fuseahuref</a>(<a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>, <a class="local col3 ref" href="#623ir" title='ir' data-ref="623ir" data-ref-filename="623ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="local col7 ref" href="#627allow" title='allow' data-ref="627allow" data-ref-filename="627allow">allow</a>);</td></tr>
<tr><th id="1637">1637</th><td>    <b>if</b> (<a class="macro" href="lj_target.h.html#28" title="(!((src) &amp; 0x80))" data-ref="_M/ra_hasreg">ra_hasreg</a>(<a class="local col8 ref" href="#628src" title='src' data-ref="628src" data-ref-filename="628src">src</a>)) {</td></tr>
<tr><th id="1638">1638</th><td><u>#<span data-ppcond="1638">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="1639">1639</th><td>      <b>if</b> (!(<a class="macro" href="lj_arch.h.html#513" title="0" data-ref="_M/LJ_DUALNUM">LJ_DUALNUM</a> &amp;&amp; <a class="macro" href="lj_ir.h.html#374" title="(((uint32_t)(((ir-&gt;t)).irt &amp; IRT_TYPE) - (uint32_t)(IRT_I8) &lt;= (uint32_t)(IRT_INT-IRT_I8)))" data-ref="_M/irt_isinteger">irt_isinteger</a>(<a class="local col3 ref" href="#623ir" title='ir' data-ref="623ir" data-ref-filename="623ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>))) {</td></tr>
<tr><th id="1640">1640</th><td>	<i>/* TODO: 64 bit store + 32 bit load-modify-store is suboptimal. */</i></td></tr>
<tr><th id="1641">1641</th><td>	<a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> += <var>4</var>;</td></tr>
<tr><th id="1642">1642</th><td>	<a class="macro" href="lj_emit_x86.h.html#31" title="(*(uint32_t *)(as-&gt;mcp-4) = (irt_toitype_(((IRType)(((ir-&gt;t)).irt &amp; IRT_TYPE))) &lt;&lt; 15), as-&gt;mcp -= 4)" data-ref="_M/emit_u32">emit_u32</a>(<a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>, <a class="macro" href="lj_ir.h.html#427" title="irt_toitype_(((IRType)(((ir-&gt;t)).irt &amp; IRT_TYPE)))" data-ref="_M/irt_toitype">irt_toitype</a>(<a class="local col3 ref" href="#623ir" title='ir' data-ref="623ir" data-ref-filename="623ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) &lt;&lt; <var>15</var>);</td></tr>
<tr><th id="1643">1643</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_ARITHi" title='XO_ARITHi' data-ref="XO_ARITHi" data-ref-filename="XO_ARITHi">XO_ARITHi</a>, <a class="enum" href="lj_target_x86.h.html#XOg_OR" title='XOg_OR' data-ref="XOg_OR" data-ref-filename="XOg_OR">XOg_OR</a>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="1644">1644</th><td>	<a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> -= <var>4</var>;</td></tr>
<tr><th id="1645">1645</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOVto" title='XO_MOVto' data-ref="XO_MOVto" data-ref-filename="XO_MOVto">XO_MOVto</a>, <a class="local col8 ref" href="#628src" title='src' data-ref="628src" data-ref-filename="628src">src</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="1646">1646</th><td>	<b>return</b>;</td></tr>
<tr><th id="1647">1647</th><td>      }</td></tr>
<tr><th id="1648">1648</th><td><u>#<span data-ppcond="1638">endif</span></u></td></tr>
<tr><th id="1649">1649</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOVto" title='XO_MOVto' data-ref="XO_MOVto" data-ref-filename="XO_MOVto">XO_MOVto</a>, <a class="local col8 ref" href="#628src" title='src' data-ref="628src" data-ref-filename="628src">src</a>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="1650">1650</th><td>    } <b>else</b> <b>if</b> (!<a class="macro" href="lj_ir.h.html#357" title="((uint32_t)((IRType)((irr-&gt;t).irt &amp; IRT_TYPE)) &lt;= IRT_TRUE)" data-ref="_M/irt_ispri">irt_ispri</a>(<a class="local col6 ref" href="#626irr" title='irr' data-ref="626irr" data-ref-filename="626irr">irr</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="1651">1651</th><td>      <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(irt_isaddr(ir-&gt;t) || (LJ_DUALNUM &amp;&amp; irt_isinteger(ir-&gt;t)),</td></tr>
<tr><th id="1652">1652</th><td>		 <q>"bad store type"</q>);</td></tr>
<tr><th id="1653">1653</th><td>      <a class="macro" href="lj_emit_x86.h.html#30" title="(*(int32_t *)(as-&gt;mcp-4) = (irr-&gt;i), as-&gt;mcp -= 4)" data-ref="_M/emit_i32">emit_i32</a>(<a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>, <a class="local col6 ref" href="#626irr" title='irr' data-ref="626irr" data-ref-filename="626irr">irr</a>-&gt;<a class="ref field" href="lj_ir.h.html#IRIns::i" title='IRIns::i' data-ref="IRIns::i" data-ref-filename="IRIns..i">i</a>);</td></tr>
<tr><th id="1654">1654</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOVmi" title='XO_MOVmi' data-ref="XO_MOVmi" data-ref-filename="XO_MOVmi">XO_MOVmi</a>, <var>0</var>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="1655">1655</th><td>    }</td></tr>
<tr><th id="1656">1656</th><td>    <a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> += <var>4</var>;</td></tr>
<tr><th id="1657">1657</th><td><u>#<span data-ppcond="1657">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="1658">1658</th><td>    <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(LJ_DUALNUM &amp;&amp; irt_isinteger(ir-&gt;t), <q>"bad store type"</q>);</td></tr>
<tr><th id="1659">1659</th><td>    <a class="macro" href="lj_emit_x86.h.html#30" title="(*(int32_t *)(as-&gt;mcp-4) = ((~13u) &lt;&lt; 15), as-&gt;mcp -= 4)" data-ref="_M/emit_i32">emit_i32</a>(<a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>, <a class="macro" href="lj_obj.h.html#274" title="(~13u)" data-ref="_M/LJ_TNUMX">LJ_TNUMX</a> &lt;&lt; <var>15</var>);</td></tr>
<tr><th id="1660">1660</th><td><u>#<span data-ppcond="1657">else</span></u></td></tr>
<tr><th id="1661">1661</th><td>    emit_i32(as, (int32_t)irt_toitype(ir-&gt;t));</td></tr>
<tr><th id="1662">1662</th><td><u>#<span data-ppcond="1657">endif</span></u></td></tr>
<tr><th id="1663">1663</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col2 ref" href="#622as" title='as' data-ref="622as" data-ref-filename="622as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOVmi" title='XO_MOVmi' data-ref="XO_MOVmi" data-ref-filename="XO_MOVmi">XO_MOVmi</a>, <var>0</var>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="1664">1664</th><td>  }</td></tr>
<tr><th id="1665">1665</th><td>}</td></tr>
<tr><th id="1666">1666</th><td></td></tr>
<tr><th id="1667">1667</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_sload" title='asm_sload' data-ref="asm_sload" data-ref-filename="asm_sload">asm_sload</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col9 decl" id="629as" title='as' data-type='ASMState *' data-ref="629as" data-ref-filename="629as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col0 decl" id="630ir" title='ir' data-type='IRIns *' data-ref="630ir" data-ref-filename="630ir">ir</dfn>)</td></tr>
<tr><th id="1668">1668</th><td>{</td></tr>
<tr><th id="1669">1669</th><td>  <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> <dfn class="local col1 decl" id="631ofs" title='ofs' data-type='int32_t' data-ref="631ofs" data-ref-filename="631ofs">ofs</dfn> = <var>8</var>*((<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<a class="local col0 ref" href="#630ir" title='ir' data-ref="630ir" data-ref-filename="630ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>-<var>1</var>-<a class="macro" href="lj_arch.h.html#533" title="1" data-ref="_M/LJ_FR2">LJ_FR2</a>) +</td></tr>
<tr><th id="1670">1670</th><td>		(!<a class="macro" href="lj_arch.h.html#533" title="1" data-ref="_M/LJ_FR2">LJ_FR2</a> &amp;&amp; (<a class="local col0 ref" href="#630ir" title='ir' data-ref="630ir" data-ref-filename="630ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a> &amp; <a class="macro" href="lj_ir.h.html#223" title="0x02" data-ref="_M/IRSLOAD_FRAME">IRSLOAD_FRAME</a>) ? <var>4</var> : <var>0</var>);</td></tr>
<tr><th id="1671">1671</th><td>  <a class="typedef" href="lj_ir.h.html#IRType1" title='IRType1' data-type='struct IRType1' data-ref="IRType1" data-ref-filename="IRType1">IRType1</a> <dfn class="local col2 decl" id="632t" title='t' data-type='IRType1' data-ref="632t" data-ref-filename="632t">t</dfn> = <a class="local col0 ref" href="#630ir" title='ir' data-ref="630ir" data-ref-filename="630ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>;</td></tr>
<tr><th id="1672">1672</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col3 decl" id="633base" title='base' data-type='Reg' data-ref="633base" data-ref-filename="633base">base</dfn>;</td></tr>
<tr><th id="1673">1673</th><td>  <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(!(ir-&gt;op2 &amp; IRSLOAD_PARENT),</td></tr>
<tr><th id="1674">1674</th><td>	     <q>"bad parent SLOAD"</q>); <i>/* Handled by asm_head_side(). */</i></td></tr>
<tr><th id="1675">1675</th><td>  <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(irt_isguard(t) || !(ir-&gt;op2 &amp; IRSLOAD_TYPECHECK),</td></tr>
<tr><th id="1676">1676</th><td>	     <q>"inconsistent SLOAD variant"</q>);</td></tr>
<tr><th id="1677">1677</th><td>  <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(LJ_DUALNUM ||</td></tr>
<tr><th id="1678">1678</th><td>	     !irt_isint(t) || (ir-&gt;op2 &amp; (IRSLOAD_CONVERT|IRSLOAD_FRAME)),</td></tr>
<tr><th id="1679">1679</th><td>	     <q>"bad SLOAD type"</q>);</td></tr>
<tr><th id="1680">1680</th><td>  <b>if</b> ((<a class="local col0 ref" href="#630ir" title='ir' data-ref="630ir" data-ref-filename="630ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a> &amp; <a class="macro" href="lj_ir.h.html#225" title="0x08" data-ref="_M/IRSLOAD_CONVERT">IRSLOAD_CONVERT</a>) &amp;&amp; <a class="macro" href="lj_ir.h.html#429" title="((t).irt &amp; IRT_GUARD)" data-ref="_M/irt_isguard">irt_isguard</a>(<a class="local col2 ref" href="#632t" title='t' data-ref="632t" data-ref-filename="632t">t</a>) &amp;&amp; <a class="macro" href="lj_ir.h.html#364" title="(((IRType)((t).irt &amp; IRT_TYPE)) == IRT_INT)" data-ref="_M/irt_isint">irt_isint</a>(<a class="local col2 ref" href="#632t" title='t' data-ref="632t" data-ref-filename="632t">t</a>)) {</td></tr>
<tr><th id="1681">1681</th><td>    <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col4 decl" id="634left" title='left' data-type='Reg' data-ref="634left" data-ref-filename="634left">left</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_scratch" title='ra_scratch' data-use='c' data-ref="ra_scratch" data-ref-filename="ra_scratch">ra_scratch</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>);</td></tr>
<tr><th id="1682">1682</th><td>    <a class="ref fn" href="#asm_tointg" title='asm_tointg' data-ref="asm_tointg" data-ref-filename="asm_tointg">asm_tointg</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="local col0 ref" href="#630ir" title='ir' data-ref="630ir" data-ref-filename="630ir">ir</a>, <a class="local col4 ref" href="#634left" title='left' data-ref="634left" data-ref-filename="634left">left</a>);  <i>/* Frees dest reg. Do this before base alloc. */</i></td></tr>
<tr><th id="1683">1683</th><td>    <a class="local col3 ref" href="#633base" title='base' data-ref="633base" data-ref-filename="633base">base</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="enum" href="lj_ir.h.html#REF_BASE" title='REF_BASE' data-ref="REF_BASE" data-ref-filename="REF_BASE">REF_BASE</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="1684">1684</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOVSD" title='XO_MOVSD' data-ref="XO_MOVSD" data-ref-filename="XO_MOVSD">XO_MOVSD</a>, <a class="local col4 ref" href="#634left" title='left' data-ref="634left" data-ref-filename="634left">left</a>, <a class="local col3 ref" href="#633base" title='base' data-ref="633base" data-ref-filename="633base">base</a>, <a class="local col1 ref" href="#631ofs" title='ofs' data-ref="631ofs" data-ref-filename="631ofs">ofs</a>);</td></tr>
<tr><th id="1685">1685</th><td>    <a class="local col2 ref" href="#632t" title='t' data-ref="632t" data-ref-filename="632t">t</a>.<a class="ref field" href="lj_ir.h.html#IRType1::irt" title='IRType1::irt' data-ref="IRType1::irt" data-ref-filename="IRType1..irt">irt</a> = <a class="enum" href="lj_ir.h.html#318" title='IRT_NUM' data-ref="IRT_NUM" data-ref-filename="IRT_NUM">IRT_NUM</a>;  <i>/* Continue with a regular number type check. */</i></td></tr>
<tr><th id="1686">1686</th><td><u>#<span data-ppcond="1686">if</span> <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp; !<a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="1687">1687</th><td>  } <b>else</b> <b>if</b> (irt_islightud(t)) {</td></tr>
<tr><th id="1688">1688</th><td>    Reg dest = asm_load_lightud64(as, ir, (ir-&gt;op2 &amp; IRSLOAD_TYPECHECK));</td></tr>
<tr><th id="1689">1689</th><td>    <b>if</b> (ra_hasreg(dest)) {</td></tr>
<tr><th id="1690">1690</th><td>      base = ra_alloc1(as, REF_BASE, RSET_GPR);</td></tr>
<tr><th id="1691">1691</th><td>      emit_rmro(as, XO_MOV, dest|REX_64, base, ofs);</td></tr>
<tr><th id="1692">1692</th><td>    }</td></tr>
<tr><th id="1693">1693</th><td>    <b>return</b>;</td></tr>
<tr><th id="1694">1694</th><td><u>#<span data-ppcond="1686">endif</span></u></td></tr>
<tr><th id="1695">1695</th><td>  } <b>else</b> <b>if</b> (<a class="macro" href="lj_asm.c.html#309" title="((!(((ir)-&gt;r) &amp; 0x80)) || (((ir)-&gt;s) != 0))" data-ref="_M/ra_used">ra_used</a>(<a class="local col0 ref" href="#630ir" title='ir' data-ref="630ir" data-ref-filename="630ir">ir</a>)) {</td></tr>
<tr><th id="1696">1696</th><td>    <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col5 decl" id="635allow" title='allow' data-type='RegSet' data-ref="635allow" data-ref-filename="635allow">allow</dfn> = <a class="macro" href="lj_ir.h.html#363" title="(((IRType)((t).irt &amp; IRT_TYPE)) == IRT_NUM)" data-ref="_M/irt_isnum">irt_isnum</a>(<a class="local col2 ref" href="#632t" title='t' data-ref="632t" data-ref-filename="632t">t</a>) ? <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a> : <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>;</td></tr>
<tr><th id="1697">1697</th><td>    <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col6 decl" id="636dest" title='dest' data-type='Reg' data-ref="636dest" data-ref-filename="636dest">dest</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="local col0 ref" href="#630ir" title='ir' data-ref="630ir" data-ref-filename="630ir">ir</a>, <a class="local col5 ref" href="#635allow" title='allow' data-ref="635allow" data-ref-filename="635allow">allow</a>);</td></tr>
<tr><th id="1698">1698</th><td>    <a class="local col3 ref" href="#633base" title='base' data-ref="633base" data-ref-filename="633base">base</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="enum" href="lj_ir.h.html#REF_BASE" title='REF_BASE' data-ref="REF_BASE" data-ref-filename="REF_BASE">REF_BASE</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="1699">1699</th><td>    <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(irt_isnum(t) || irt_isint(t) || irt_isaddr(t),</td></tr>
<tr><th id="1700">1700</th><td>	       <q>"bad SLOAD type %d"</q>, irt_type(t));</td></tr>
<tr><th id="1701">1701</th><td>    <b>if</b> ((<a class="local col0 ref" href="#630ir" title='ir' data-ref="630ir" data-ref-filename="630ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a> &amp; <a class="macro" href="lj_ir.h.html#225" title="0x08" data-ref="_M/IRSLOAD_CONVERT">IRSLOAD_CONVERT</a>)) {</td></tr>
<tr><th id="1702">1702</th><td>      <a class="local col2 ref" href="#632t" title='t' data-ref="632t" data-ref-filename="632t">t</a>.<a class="ref field" href="lj_ir.h.html#IRType1::irt" title='IRType1::irt' data-ref="IRType1::irt" data-ref-filename="IRType1..irt">irt</a> = <a class="macro" href="lj_ir.h.html#364" title="(((IRType)((t).irt &amp; IRT_TYPE)) == IRT_INT)" data-ref="_M/irt_isint">irt_isint</a>(<a class="local col2 ref" href="#632t" title='t' data-ref="632t" data-ref-filename="632t">t</a>) ? <a class="enum" href="lj_ir.h.html#318" title='IRT_NUM' data-ref="IRT_NUM" data-ref-filename="IRT_NUM">IRT_NUM</a> : <a class="enum" href="lj_ir.h.html#318" title='IRT_INT' data-ref="IRT_INT" data-ref-filename="IRT_INT">IRT_INT</a>;  <i>/* Check for original type. */</i></td></tr>
<tr><th id="1703">1703</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="macro" href="lj_ir.h.html#364" title="(((IRType)((t).irt &amp; IRT_TYPE)) == IRT_INT)" data-ref="_M/irt_isint">irt_isint</a>(<a class="local col2 ref" href="#632t" title='t' data-ref="632t" data-ref-filename="632t">t</a>) ? <a class="enum" href="lj_target_x86.h.html#XO_CVTSI2SD" title='XO_CVTSI2SD' data-ref="XO_CVTSI2SD" data-ref-filename="XO_CVTSI2SD">XO_CVTSI2SD</a> : <a class="enum" href="lj_target_x86.h.html#XO_CVTTSD2SI" title='XO_CVTTSD2SI' data-ref="XO_CVTTSD2SI" data-ref-filename="XO_CVTTSD2SI">XO_CVTTSD2SI</a>, <a class="local col6 ref" href="#636dest" title='dest' data-ref="636dest" data-ref-filename="636dest">dest</a>, <a class="local col3 ref" href="#633base" title='base' data-ref="633base" data-ref-filename="633base">base</a>, <a class="local col1 ref" href="#631ofs" title='ofs' data-ref="631ofs" data-ref-filename="631ofs">ofs</a>);</td></tr>
<tr><th id="1704">1704</th><td>    } <b>else</b> {</td></tr>
<tr><th id="1705">1705</th><td><u>#<span data-ppcond="1705">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="1706">1706</th><td>      <b>if</b> (<a class="macro" href="lj_ir.h.html#376" title="(((uint32_t)(((t)).irt &amp; IRT_TYPE) - (uint32_t)(IRT_LIGHTUD) &lt;= (uint32_t)(IRT_UDATA-IRT_LIGHTUD)))" data-ref="_M/irt_isaddr">irt_isaddr</a>(<a class="local col2 ref" href="#632t" title='t' data-ref="632t" data-ref-filename="632t">t</a>)) {</td></tr>
<tr><th id="1707">1707</th><td>	<i>/* LJ_GC64 type check + tag removal without BMI2 and with BMI2:</i></td></tr>
<tr><th id="1708">1708</th><td><i>	**</i></td></tr>
<tr><th id="1709">1709</th><td><i>	**  mov r64, [addr]    rorx r64, [addr], 47</i></td></tr>
<tr><th id="1710">1710</th><td><i>	**  ror r64, 47</i></td></tr>
<tr><th id="1711">1711</th><td><i>	**  cmp r16, itype     cmp r16, itype</i></td></tr>
<tr><th id="1712">1712</th><td><i>	**  jne -&gt;exit         jne -&gt;exit</i></td></tr>
<tr><th id="1713">1713</th><td><i>	**  shr r64, 16        shr r64, 16</i></td></tr>
<tr><th id="1714">1714</th><td><i>	*/</i></td></tr>
<tr><th id="1715">1715</th><td>	<a class="macro" href="lj_emit_x86.h.html#189" title="((*--as-&gt;mcp = (MCode)((17))), emit_rr(as, XO_SHIFTi, (Reg)(XOg_SHR|(0x200|0x080000)), (dest)))" data-ref="_M/emit_shifti">emit_shifti</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="enum" href="lj_target_x86.h.html#XOg_SHR" title='XOg_SHR' data-ref="XOg_SHR" data-ref-filename="XOg_SHR">XOg_SHR</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="local col6 ref" href="#636dest" title='dest' data-ref="636dest" data-ref-filename="636dest">dest</a>, <var>17</var>);</td></tr>
<tr><th id="1716">1716</th><td>	<b>if</b> ((<a class="local col0 ref" href="#630ir" title='ir' data-ref="630ir" data-ref-filename="630ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a> &amp; <a class="macro" href="lj_ir.h.html#224" title="0x04" data-ref="_M/IRSLOAD_TYPECHECK">IRSLOAD_TYPECHECK</a>)) {</td></tr>
<tr><th id="1717">1717</th><td>	  <a class="ref fn" href="#asm_guardcc" title='asm_guardcc' data-ref="asm_guardcc" data-ref-filename="asm_guardcc">asm_guardcc</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_NE" title='CC_NE' data-ref="CC_NE" data-ref-filename="CC_NE">CC_NE</a>);</td></tr>
<tr><th id="1718">1718</th><td>	  <a class="macro" href="lj_emit_x86.h.html#29" title="(*--as-&gt;mcp = (MCode)(irt_toitype_(((IRType)(((t)).irt &amp; IRT_TYPE)))))" data-ref="_M/emit_i8">emit_i8</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="macro" href="lj_ir.h.html#427" title="irt_toitype_(((IRType)(((t)).irt &amp; IRT_TYPE)))" data-ref="_M/irt_toitype">irt_toitype</a>(<a class="local col2 ref" href="#632t" title='t' data-ref="632t" data-ref-filename="632t">t</a>));</td></tr>
<tr><th id="1719">1719</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_ARITHi8" title='XO_ARITHi8' data-ref="XO_ARITHi8" data-ref-filename="XO_ARITHi8">XO_ARITHi8</a>, <a class="enum" href="lj_target_x86.h.html#XOg_CMP" title='XOg_CMP' data-ref="XOg_CMP" data-ref-filename="XOg_CMP">XOg_CMP</a>, <a class="local col6 ref" href="#636dest" title='dest' data-ref="636dest" data-ref-filename="636dest">dest</a>);</td></tr>
<tr><th id="1720">1720</th><td>	  <a class="macro" href="lj_emit_x86.h.html#29" title="(*--as-&gt;mcp = (MCode)(XI_O16))" data-ref="_M/emit_i8">emit_i8</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="enum" href="lj_target_x86.h.html#XI_O16" title='XI_O16' data-ref="XI_O16" data-ref-filename="XI_O16">XI_O16</a>);</td></tr>
<tr><th id="1721">1721</th><td>	}</td></tr>
<tr><th id="1722">1722</th><td>	<b>if</b> ((<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::flags" title='ASMState::flags' data-use='r' data-ref="ASMState::flags" data-ref-filename="ASMState..flags">flags</a> &amp; <a class="macro" href="lj_jit.h.html#24" title="(0x00000010 &lt;&lt; 2)" data-ref="_M/JIT_F_BMI2">JIT_F_BMI2</a>)) {</td></tr>
<tr><th id="1723">1723</th><td>	  <a class="macro" href="lj_emit_x86.h.html#29" title="(*--as-&gt;mcp = (MCode)(47))" data-ref="_M/emit_i8">emit_i8</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <var>47</var>);</td></tr>
<tr><th id="1724">1724</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="enum" href="lj_target_x86.h.html#XV_RORX" title='XV_RORX' data-ref="XV_RORX" data-ref-filename="XV_RORX">XV_RORX</a>|<a class="macro" href="lj_emit_x86.h.html#16" title="0x800000" data-ref="_M/VEX_64">VEX_64</a>, <a class="local col6 ref" href="#636dest" title='dest' data-ref="636dest" data-ref-filename="636dest">dest</a>, <a class="local col3 ref" href="#633base" title='base' data-ref="633base" data-ref-filename="633base">base</a>, <a class="local col1 ref" href="#631ofs" title='ofs' data-ref="631ofs" data-ref-filename="631ofs">ofs</a>);</td></tr>
<tr><th id="1725">1725</th><td>	} <b>else</b> {</td></tr>
<tr><th id="1726">1726</th><td>	  <b>if</b> ((<a class="local col0 ref" href="#630ir" title='ir' data-ref="630ir" data-ref-filename="630ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a> &amp; <a class="macro" href="lj_ir.h.html#224" title="0x04" data-ref="_M/IRSLOAD_TYPECHECK">IRSLOAD_TYPECHECK</a>))</td></tr>
<tr><th id="1727">1727</th><td>	    <a class="macro" href="lj_emit_x86.h.html#189" title="((*--as-&gt;mcp = (MCode)((47))), emit_rr(as, XO_SHIFTi, (Reg)(XOg_ROR|(0x200|0x080000)), (dest)))" data-ref="_M/emit_shifti">emit_shifti</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="enum" href="lj_target_x86.h.html#XOg_ROR" title='XOg_ROR' data-ref="XOg_ROR" data-ref-filename="XOg_ROR">XOg_ROR</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="local col6 ref" href="#636dest" title='dest' data-ref="636dest" data-ref-filename="636dest">dest</a>, <var>47</var>);</td></tr>
<tr><th id="1728">1728</th><td>	  <b>else</b></td></tr>
<tr><th id="1729">1729</th><td>	    <a class="macro" href="lj_emit_x86.h.html#189" title="((*--as-&gt;mcp = (MCode)((17))), emit_rr(as, XO_SHIFTi, (Reg)(XOg_SHL|(0x200|0x080000)), (dest)))" data-ref="_M/emit_shifti">emit_shifti</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="enum" href="lj_target_x86.h.html#XOg_SHL" title='XOg_SHL' data-ref="XOg_SHL" data-ref-filename="XOg_SHL">XOg_SHL</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="local col6 ref" href="#636dest" title='dest' data-ref="636dest" data-ref-filename="636dest">dest</a>, <var>17</var>);</td></tr>
<tr><th id="1730">1730</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col6 ref" href="#636dest" title='dest' data-ref="636dest" data-ref-filename="636dest">dest</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="local col3 ref" href="#633base" title='base' data-ref="633base" data-ref-filename="633base">base</a>, <a class="local col1 ref" href="#631ofs" title='ofs' data-ref="631ofs" data-ref-filename="631ofs">ofs</a>);</td></tr>
<tr><th id="1731">1731</th><td>	}</td></tr>
<tr><th id="1732">1732</th><td>	<b>return</b>;</td></tr>
<tr><th id="1733">1733</th><td>      } <b>else</b></td></tr>
<tr><th id="1734">1734</th><td><u>#<span data-ppcond="1705">endif</span></u></td></tr>
<tr><th id="1735">1735</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="macro" href="lj_ir.h.html#363" title="(((IRType)((t).irt &amp; IRT_TYPE)) == IRT_NUM)" data-ref="_M/irt_isnum">irt_isnum</a>(<a class="local col2 ref" href="#632t" title='t' data-ref="632t" data-ref-filename="632t">t</a>) ? <a class="enum" href="lj_target_x86.h.html#XO_MOVSD" title='XO_MOVSD' data-ref="XO_MOVSD" data-ref-filename="XO_MOVSD">XO_MOVSD</a> : <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col6 ref" href="#636dest" title='dest' data-ref="636dest" data-ref-filename="636dest">dest</a>, <a class="local col3 ref" href="#633base" title='base' data-ref="633base" data-ref-filename="633base">base</a>, <a class="local col1 ref" href="#631ofs" title='ofs' data-ref="631ofs" data-ref-filename="631ofs">ofs</a>);</td></tr>
<tr><th id="1736">1736</th><td>    }</td></tr>
<tr><th id="1737">1737</th><td>  } <b>else</b> {</td></tr>
<tr><th id="1738">1738</th><td>    <b>if</b> (!(<a class="local col0 ref" href="#630ir" title='ir' data-ref="630ir" data-ref-filename="630ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a> &amp; <a class="macro" href="lj_ir.h.html#224" title="0x04" data-ref="_M/IRSLOAD_TYPECHECK">IRSLOAD_TYPECHECK</a>))</td></tr>
<tr><th id="1739">1739</th><td>      <b>return</b>;  <i>/* No type check: avoid base alloc. */</i></td></tr>
<tr><th id="1740">1740</th><td>    <a class="local col3 ref" href="#633base" title='base' data-ref="633base" data-ref-filename="633base">base</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="enum" href="lj_ir.h.html#REF_BASE" title='REF_BASE' data-ref="REF_BASE" data-ref-filename="REF_BASE">REF_BASE</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="1741">1741</th><td>  }</td></tr>
<tr><th id="1742">1742</th><td>  <b>if</b> ((<a class="local col0 ref" href="#630ir" title='ir' data-ref="630ir" data-ref-filename="630ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a> &amp; <a class="macro" href="lj_ir.h.html#224" title="0x04" data-ref="_M/IRSLOAD_TYPECHECK">IRSLOAD_TYPECHECK</a>)) {</td></tr>
<tr><th id="1743">1743</th><td>    <i>/* Need type check, even if the load result is unused. */</i></td></tr>
<tr><th id="1744">1744</th><td>    <a class="ref fn" href="#asm_guardcc" title='asm_guardcc' data-ref="asm_guardcc" data-ref-filename="asm_guardcc">asm_guardcc</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="macro" href="lj_ir.h.html#363" title="(((IRType)((t).irt &amp; IRT_TYPE)) == IRT_NUM)" data-ref="_M/irt_isnum">irt_isnum</a>(<a class="local col2 ref" href="#632t" title='t' data-ref="632t" data-ref-filename="632t">t</a>) ? <a class="enum" href="lj_target_x86.h.html#CC_AE" title='CC_AE' data-ref="CC_AE" data-ref-filename="CC_AE">CC_AE</a> : <a class="enum" href="lj_target_x86.h.html#CC_NE" title='CC_NE' data-ref="CC_NE" data-ref-filename="CC_NE">CC_NE</a>);</td></tr>
<tr><th id="1745">1745</th><td>    <b>if</b> (<a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp; <a class="macro" href="lj_ir.h.html#351" title="((IRType)((t).irt &amp; IRT_TYPE))" data-ref="_M/irt_type">irt_type</a>(<a class="local col2 ref" href="#632t" title='t' data-ref="632t" data-ref-filename="632t">t</a>) &gt;= <a class="enum" href="lj_ir.h.html#318" title='IRT_NUM' data-ref="IRT_NUM" data-ref-filename="IRT_NUM">IRT_NUM</a>) {</td></tr>
<tr><th id="1746">1746</th><td>      <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(irt_isinteger(t) || irt_isnum(t),</td></tr>
<tr><th id="1747">1747</th><td>		 <q>"bad SLOAD type %d"</q>, irt_type(t));</td></tr>
<tr><th id="1748">1748</th><td><u>#<span data-ppcond="1748">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="1749">1749</th><td>      <a class="macro" href="lj_emit_x86.h.html#31" title="(*(uint32_t *)(as-&gt;mcp-4) = ((~13u) &lt;&lt; 15), as-&gt;mcp -= 4)" data-ref="_M/emit_u32">emit_u32</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="macro" href="lj_obj.h.html#280" title="(~13u)" data-ref="_M/LJ_TISNUM">LJ_TISNUM</a> &lt;&lt; <var>15</var>);</td></tr>
<tr><th id="1750">1750</th><td><u>#<span data-ppcond="1748">else</span></u></td></tr>
<tr><th id="1751">1751</th><td>      emit_u32(as, LJ_TISNUM);</td></tr>
<tr><th id="1752">1752</th><td><u>#<span data-ppcond="1748">endif</span></u></td></tr>
<tr><th id="1753">1753</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_ARITHi" title='XO_ARITHi' data-ref="XO_ARITHi" data-ref-filename="XO_ARITHi">XO_ARITHi</a>, <a class="enum" href="lj_target_x86.h.html#XOg_CMP" title='XOg_CMP' data-ref="XOg_CMP" data-ref-filename="XOg_CMP">XOg_CMP</a>, <a class="local col3 ref" href="#633base" title='base' data-ref="633base" data-ref-filename="633base">base</a>, <a class="local col1 ref" href="#631ofs" title='ofs' data-ref="631ofs" data-ref-filename="631ofs">ofs</a>+<var>4</var>);</td></tr>
<tr><th id="1754">1754</th><td><u>#<span data-ppcond="1754">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="1755">1755</th><td>    } <b>else</b> <b>if</b> (<a class="macro" href="lj_ir.h.html#356" title="(((IRType)((t).irt &amp; IRT_TYPE)) == IRT_NIL)" data-ref="_M/irt_isnil">irt_isnil</a>(<a class="local col2 ref" href="#632t" title='t' data-ref="632t" data-ref-filename="632t">t</a>)) {</td></tr>
<tr><th id="1756">1756</th><td>      <i>/* LJ_GC64 type check for nil:</i></td></tr>
<tr><th id="1757">1757</th><td><i>      **</i></td></tr>
<tr><th id="1758">1758</th><td><i>      **   cmp qword [addr], -1</i></td></tr>
<tr><th id="1759">1759</th><td><i>      **   jne -&gt;exit</i></td></tr>
<tr><th id="1760">1760</th><td><i>      */</i></td></tr>
<tr><th id="1761">1761</th><td>      <a class="macro" href="lj_emit_x86.h.html#29" title="(*--as-&gt;mcp = (MCode)(-1))" data-ref="_M/emit_i8">emit_i8</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, -<var>1</var>);</td></tr>
<tr><th id="1762">1762</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_ARITHi8" title='XO_ARITHi8' data-ref="XO_ARITHi8" data-ref-filename="XO_ARITHi8">XO_ARITHi8</a>, <a class="enum" href="lj_target_x86.h.html#XOg_CMP" title='XOg_CMP' data-ref="XOg_CMP" data-ref-filename="XOg_CMP">XOg_CMP</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="local col3 ref" href="#633base" title='base' data-ref="633base" data-ref-filename="633base">base</a>, <a class="local col1 ref" href="#631ofs" title='ofs' data-ref="631ofs" data-ref-filename="631ofs">ofs</a>);</td></tr>
<tr><th id="1763">1763</th><td>    } <b>else</b> <b>if</b> (<a class="macro" href="lj_ir.h.html#357" title="((uint32_t)((IRType)((t).irt &amp; IRT_TYPE)) &lt;= IRT_TRUE)" data-ref="_M/irt_ispri">irt_ispri</a>(<a class="local col2 ref" href="#632t" title='t' data-ref="632t" data-ref-filename="632t">t</a>)) {</td></tr>
<tr><th id="1764">1764</th><td>      <a class="macro" href="lj_emit_x86.h.html#31" title="(*(uint32_t *)(as-&gt;mcp-4) = ((irt_toitype_(((IRType)(((t)).irt &amp; IRT_TYPE))) &lt;&lt; 15) | 0x7fff), as-&gt;mcp -= 4)" data-ref="_M/emit_u32">emit_u32</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, (<a class="macro" href="lj_ir.h.html#427" title="irt_toitype_(((IRType)(((t)).irt &amp; IRT_TYPE)))" data-ref="_M/irt_toitype">irt_toitype</a>(<a class="local col2 ref" href="#632t" title='t' data-ref="632t" data-ref-filename="632t">t</a>) &lt;&lt; <var>15</var>) | <var>0x7fff</var>);</td></tr>
<tr><th id="1765">1765</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_ARITHi" title='XO_ARITHi' data-ref="XO_ARITHi" data-ref-filename="XO_ARITHi">XO_ARITHi</a>, <a class="enum" href="lj_target_x86.h.html#XOg_CMP" title='XOg_CMP' data-ref="XOg_CMP" data-ref-filename="XOg_CMP">XOg_CMP</a>, <a class="local col3 ref" href="#633base" title='base' data-ref="633base" data-ref-filename="633base">base</a>, <a class="local col1 ref" href="#631ofs" title='ofs' data-ref="631ofs" data-ref-filename="631ofs">ofs</a>+<var>4</var>);</td></tr>
<tr><th id="1766">1766</th><td>    } <b>else</b> {</td></tr>
<tr><th id="1767">1767</th><td>      <i>/* LJ_GC64 type check only:</i></td></tr>
<tr><th id="1768">1768</th><td><i>      **</i></td></tr>
<tr><th id="1769">1769</th><td><i>      **   mov r64, [addr]</i></td></tr>
<tr><th id="1770">1770</th><td><i>      **   sar r64, 47</i></td></tr>
<tr><th id="1771">1771</th><td><i>      **   cmp r32, itype</i></td></tr>
<tr><th id="1772">1772</th><td><i>      **   jne -&gt;exit</i></td></tr>
<tr><th id="1773">1773</th><td><i>      */</i></td></tr>
<tr><th id="1774">1774</th><td>      <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col7 decl" id="637tmp" title='tmp' data-type='Reg' data-ref="637tmp" data-ref-filename="637tmp">tmp</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_scratch" title='ra_scratch' data-use='c' data-ref="ra_scratch" data-ref-filename="ra_scratch">ra_scratch</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="macro" href="lj_target.h.html#71" title="(((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH))) &amp; ~(((RegSet)1) &lt;&lt; (base)))" data-ref="_M/rset_exclude">rset_exclude</a>(<a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>, <a class="local col3 ref" href="#633base" title='base' data-ref="633base" data-ref-filename="633base">base</a>));</td></tr>
<tr><th id="1775">1775</th><td>      <a class="macro" href="lj_emit_x86.h.html#29" title="(*--as-&gt;mcp = (MCode)(irt_toitype_(((IRType)(((t)).irt &amp; IRT_TYPE)))))" data-ref="_M/emit_i8">emit_i8</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="macro" href="lj_ir.h.html#427" title="irt_toitype_(((IRType)(((t)).irt &amp; IRT_TYPE)))" data-ref="_M/irt_toitype">irt_toitype</a>(<a class="local col2 ref" href="#632t" title='t' data-ref="632t" data-ref-filename="632t">t</a>));</td></tr>
<tr><th id="1776">1776</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_ARITHi8" title='XO_ARITHi8' data-ref="XO_ARITHi8" data-ref-filename="XO_ARITHi8">XO_ARITHi8</a>, <a class="enum" href="lj_target_x86.h.html#XOg_CMP" title='XOg_CMP' data-ref="XOg_CMP" data-ref-filename="XOg_CMP">XOg_CMP</a>, <a class="local col7 ref" href="#637tmp" title='tmp' data-ref="637tmp" data-ref-filename="637tmp">tmp</a>);</td></tr>
<tr><th id="1777">1777</th><td>      <a class="macro" href="lj_emit_x86.h.html#189" title="((*--as-&gt;mcp = (MCode)((47))), emit_rr(as, XO_SHIFTi, (Reg)(XOg_SAR|(0x200|0x080000)), (tmp)))" data-ref="_M/emit_shifti">emit_shifti</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="enum" href="lj_target_x86.h.html#XOg_SAR" title='XOg_SAR' data-ref="XOg_SAR" data-ref-filename="XOg_SAR">XOg_SAR</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="local col7 ref" href="#637tmp" title='tmp' data-ref="637tmp" data-ref-filename="637tmp">tmp</a>, <var>47</var>);</td></tr>
<tr><th id="1778">1778</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col9 ref" href="#629as" title='as' data-ref="629as" data-ref-filename="629as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col7 ref" href="#637tmp" title='tmp' data-ref="637tmp" data-ref-filename="637tmp">tmp</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="local col3 ref" href="#633base" title='base' data-ref="633base" data-ref-filename="633base">base</a>, <a class="local col1 ref" href="#631ofs" title='ofs' data-ref="631ofs" data-ref-filename="631ofs">ofs</a>);</td></tr>
<tr><th id="1779">1779</th><td><u>#<span data-ppcond="1754">else</span></u></td></tr>
<tr><th id="1780">1780</th><td>    } <b>else</b> {</td></tr>
<tr><th id="1781">1781</th><td>      emit_i8(as, irt_toitype(t));</td></tr>
<tr><th id="1782">1782</th><td>      emit_rmro(as, XO_ARITHi8, XOg_CMP, base, ofs+<var>4</var>);</td></tr>
<tr><th id="1783">1783</th><td><u>#<span data-ppcond="1754">endif</span></u></td></tr>
<tr><th id="1784">1784</th><td>    }</td></tr>
<tr><th id="1785">1785</th><td>  }</td></tr>
<tr><th id="1786">1786</th><td>}</td></tr>
<tr><th id="1787">1787</th><td></td></tr>
<tr><th id="1788">1788</th><td><i>/* -- Allocations --------------------------------------------------------- */</i></td></tr>
<tr><th id="1789">1789</th><td></td></tr>
<tr><th id="1790">1790</th><td><u>#<span data-ppcond="1790">if</span> <a class="macro" href="lj_arch.h.html#549" title="1" data-ref="_M/LJ_HASFFI">LJ_HASFFI</a></u></td></tr>
<tr><th id="1791">1791</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_cnew" title='asm_cnew' data-ref="asm_cnew" data-ref-filename="asm_cnew">asm_cnew</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col8 decl" id="638as" title='as' data-type='ASMState *' data-ref="638as" data-ref-filename="638as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col9 decl" id="639ir" title='ir' data-type='IRIns *' data-ref="639ir" data-ref-filename="639ir">ir</dfn>)</td></tr>
<tr><th id="1792">1792</th><td>{</td></tr>
<tr><th id="1793">1793</th><td>  <a class="typedef" href="lj_ctype.h.html#CTState" title='CTState' data-type='struct CTState' data-ref="CTState" data-ref-filename="CTState">CTState</a> *<dfn class="local col0 decl" id="640cts" title='cts' data-type='CTState *' data-ref="640cts" data-ref-filename="640cts">cts</dfn> = <a class="macro" href="lj_ctype.h.html#383" title="(((CTState *)(void *)(((&amp;((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;g))-&gt;ctype_state).ptr64))" data-ref="_M/ctype_ctsG">ctype_ctsG</a>(<a class="macro" href="lj_dispatch.h.html#115" title="(&amp;((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;g)" data-ref="_M/J2G">J2G</a>(<a class="local col8 ref" href="#638as" title='as' data-ref="638as" data-ref-filename="638as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>));</td></tr>
<tr><th id="1794">1794</th><td>  <a class="typedef" href="lj_ctype.h.html#CTypeID" title='CTypeID' data-type='uint32_t' data-ref="CTypeID" data-ref-filename="CTypeID">CTypeID</a> <dfn class="local col1 decl" id="641id" title='id' data-type='CTypeID' data-ref="641id" data-ref-filename="641id">id</dfn> = (<a class="typedef" href="lj_ctype.h.html#CTypeID" title='CTypeID' data-type='uint32_t' data-ref="CTypeID" data-ref-filename="CTypeID">CTypeID</a>)<a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ir-&gt;op1)])" data-ref="_M/IR">IR</a>(<a class="local col9 ref" href="#639ir" title='ir' data-ref="639ir" data-ref-filename="639ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>)-&gt;<a class="ref field" href="lj_ir.h.html#IRIns::i" title='IRIns::i' data-ref="IRIns::i" data-ref-filename="IRIns..i">i</a>;</td></tr>
<tr><th id="1795">1795</th><td>  <a class="typedef" href="lj_ctype.h.html#CTSize" title='CTSize' data-type='uint32_t' data-ref="CTSize" data-ref-filename="CTSize">CTSize</a> <dfn class="local col2 decl" id="642sz" title='sz' data-type='CTSize' data-ref="642sz" data-ref-filename="642sz">sz</dfn>;</td></tr>
<tr><th id="1796">1796</th><td>  <a class="typedef" href="lj_ctype.h.html#CTInfo" title='CTInfo' data-type='uint32_t' data-ref="CTInfo" data-ref-filename="CTInfo">CTInfo</a> <dfn class="local col3 decl" id="643info" title='info' data-type='CTInfo' data-ref="643info" data-ref-filename="643info">info</dfn> = <a class="ref fn" href="lj_ctype.h.html#lj_ctype_info" title='lj_ctype_info' data-ref="lj_ctype_info" data-ref-filename="lj_ctype_info">lj_ctype_info</a>(<a class="local col0 ref" href="#640cts" title='cts' data-ref="640cts" data-ref-filename="640cts">cts</a>, <a class="local col1 ref" href="#641id" title='id' data-ref="641id" data-ref-filename="641id">id</a>, &amp;<a class="local col2 ref" href="#642sz" title='sz' data-ref="642sz" data-ref-filename="642sz">sz</a>);</td></tr>
<tr><th id="1797">1797</th><td>  <em>const</em> <a class="typedef" href="lj_ircall.h.html#CCallInfo" title='CCallInfo' data-type='struct CCallInfo' data-ref="CCallInfo" data-ref-filename="CCallInfo">CCallInfo</a> *<dfn class="local col4 decl" id="644ci" title='ci' data-type='const CCallInfo *' data-ref="644ci" data-ref-filename="644ci">ci</dfn> = &amp;<a class="ref" href="lj_ircall.h.html#lj_ir_callinfo" title='lj_ir_callinfo' data-ref="lj_ir_callinfo" data-ref-filename="lj_ir_callinfo">lj_ir_callinfo</a>[<a class="enum" href="lj_ircall.h.html#254" title='IRCALL_lj_mem_newgco' data-ref="IRCALL_lj_mem_newgco" data-ref-filename="IRCALL_lj_mem_newgco">IRCALL_lj_mem_newgco</a>];</td></tr>
<tr><th id="1798">1798</th><td>  <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col5 decl" id="645args" title='args' data-type='IRRef [4]' data-ref="645args" data-ref-filename="645args">args</dfn>[<var>4</var>];</td></tr>
<tr><th id="1799">1799</th><td>  <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(sz != CTSIZE_INVALID || (ir-&gt;o == IR_CNEW &amp;&amp; ir-&gt;op2 != REF_NIL),</td></tr>
<tr><th id="1800">1800</th><td>	     <q>"bad CNEW/CNEWI operands"</q>);</td></tr>
<tr><th id="1801">1801</th><td></td></tr>
<tr><th id="1802">1802</th><td>  <a class="local col8 ref" href="#638as" title='as' data-ref="638as" data-ref-filename="638as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::gcsteps" title='ASMState::gcsteps' data-use='w' data-ref="ASMState::gcsteps" data-ref-filename="ASMState..gcsteps">gcsteps</a>++;</td></tr>
<tr><th id="1803">1803</th><td>  <a class="ref fn" href="#asm_setupresult" title='asm_setupresult' data-ref="asm_setupresult" data-ref-filename="asm_setupresult">asm_setupresult</a>(<a class="local col8 ref" href="#638as" title='as' data-ref="638as" data-ref-filename="638as">as</a>, <a class="local col9 ref" href="#639ir" title='ir' data-ref="639ir" data-ref-filename="639ir">ir</a>, <a class="local col4 ref" href="#644ci" title='ci' data-ref="644ci" data-ref-filename="644ci">ci</a>);  <i>/* GCcdata * */</i></td></tr>
<tr><th id="1804">1804</th><td></td></tr>
<tr><th id="1805">1805</th><td>  <i>/* Initialize immutable cdata object. */</i></td></tr>
<tr><th id="1806">1806</th><td>  <b>if</b> (<a class="local col9 ref" href="#639ir" title='ir' data-ref="639ir" data-ref-filename="639ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_CNEWI' data-ref="IR_CNEWI" data-ref-filename="IR_CNEWI">IR_CNEWI</a>) {</td></tr>
<tr><th id="1807">1807</th><td>    <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col6 decl" id="646allow" title='allow' data-type='RegSet' data-ref="646allow" data-ref-filename="646allow">allow</dfn> = (<a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a> &amp; ~<a class="macro" href="lj_target_x86.h.html#98" title="(((((RegSet)1) &lt;&lt; (RID_EAX))|(((RegSet)1) &lt;&lt; (RID_ECX))|(((RegSet)1) &lt;&lt; (RID_EDX)))|(((((RegSet)1) &lt;&lt; ((RID_R11D+1)-(RID_ESI)))-1) &lt;&lt; (RID_ESI))|((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR))))" data-ref="_M/RSET_SCRATCH">RSET_SCRATCH</a>);</td></tr>
<tr><th id="1808">1808</th><td><u>#<span data-ppcond="1808">if</span> <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a></u></td></tr>
<tr><th id="1809">1809</th><td>    <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col7 decl" id="647r64" title='r64' data-type='Reg' data-ref="647r64" data-ref-filename="647r64">r64</dfn> = <a class="local col2 ref" href="#642sz" title='sz' data-ref="642sz" data-ref-filename="642sz">sz</a> == <var>8</var> ? <a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a> : <var>0</var>;</td></tr>
<tr><th id="1810">1810</th><td>    <b>if</b> (<a class="macro" href="lj_ir.h.html#470" title="((ir-&gt;op2) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col9 ref" href="#639ir" title='ir' data-ref="639ir" data-ref-filename="639ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>)) {</td></tr>
<tr><th id="1811">1811</th><td>      <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col8 decl" id="648irk" title='irk' data-type='IRIns *' data-ref="648irk" data-ref-filename="648irk">irk</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ir-&gt;op2)])" data-ref="_M/IR">IR</a>(<a class="local col9 ref" href="#639ir" title='ir' data-ref="639ir" data-ref-filename="639ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>);</td></tr>
<tr><th id="1812">1812</th><td>      <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col9 decl" id="649k" title='k' data-type='uint64_t' data-ref="649k" data-ref-filename="649k">k</dfn> = (<a class="local col8 ref" href="#648irk" title='irk' data-ref="648irk" data-ref-filename="648irk">irk</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_KINT64' data-ref="IR_KINT64" data-ref-filename="IR_KINT64">IR_KINT64</a> ||</td></tr>
<tr><th id="1813">1813</th><td>		    (<a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a> &amp;&amp; (<a class="local col8 ref" href="#648irk" title='irk' data-ref="648irk" data-ref-filename="648irk">irk</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_KPTR' data-ref="IR_KPTR" data-ref-filename="IR_KPTR">IR_KPTR</a> || <a class="local col8 ref" href="#648irk" title='irk' data-ref="648irk" data-ref-filename="648irk">irk</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_KKPTR' data-ref="IR_KKPTR" data-ref-filename="IR_KKPTR">IR_KKPTR</a>))) ?</td></tr>
<tr><th id="1814">1814</th><td>		   <a class="macro" href="lj_ir.h.html#578" title="(&amp;(irk)[1].tv)" data-ref="_M/ir_k64">ir_k64</a>(<a class="local col8 ref" href="#648irk" title='irk' data-ref="648irk" data-ref-filename="648irk">irk</a>)-&gt;<a class="ref field" href="lj_obj.h.html#TValue::u64" title='TValue::u64' data-ref="TValue::u64" data-ref-filename="TValue..u64">u64</a> : (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a>)(<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a>)<a class="local col8 ref" href="#648irk" title='irk' data-ref="648irk" data-ref-filename="648irk">irk</a>-&gt;<a class="ref field" href="lj_ir.h.html#IRIns::i" title='IRIns::i' data-ref="IRIns::i" data-ref-filename="IRIns..i">i</a>;</td></tr>
<tr><th id="1815">1815</th><td>      <b>if</b> (<a class="local col2 ref" href="#642sz" title='sz' data-ref="642sz" data-ref-filename="642sz">sz</a> == <var>4</var> || <a class="macro" href="lj_def.h.html#105" title="(((int64_t)k) == (int32_t)((int64_t)k))" data-ref="_M/checki32">checki32</a>((<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int64_t" title='int64_t' data-type='__int64_t' data-ref="int64_t" data-ref-filename="int64_t">int64_t</a>)<a class="local col9 ref" href="#649k" title='k' data-ref="649k" data-ref-filename="649k">k</a>)) {</td></tr>
<tr><th id="1816">1816</th><td>	<a class="macro" href="lj_emit_x86.h.html#30" title="(*(int32_t *)(as-&gt;mcp-4) = ((int32_t)k), as-&gt;mcp -= 4)" data-ref="_M/emit_i32">emit_i32</a>(<a class="local col8 ref" href="#638as" title='as' data-ref="638as" data-ref-filename="638as">as</a>, (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<a class="local col9 ref" href="#649k" title='k' data-ref="649k" data-ref-filename="649k">k</a>);</td></tr>
<tr><th id="1817">1817</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col8 ref" href="#638as" title='as' data-ref="638as" data-ref-filename="638as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOVmi" title='XO_MOVmi' data-ref="XO_MOVmi" data-ref-filename="XO_MOVmi">XO_MOVmi</a>, <a class="local col7 ref" href="#647r64" title='r64' data-ref="647r64" data-ref-filename="647r64">r64</a>, <a class="enum" href="lj_target_x86.h.html#RID_RET" title='RID_RET' data-ref="RID_RET" data-ref-filename="RID_RET">RID_RET</a>, <b>sizeof</b>(<a class="typedef" href="lj_obj.h.html#GCcdata" title='GCcdata' data-type='struct GCcdata' data-ref="GCcdata" data-ref-filename="GCcdata">GCcdata</a>));</td></tr>
<tr><th id="1818">1818</th><td>      } <b>else</b> {</td></tr>
<tr><th id="1819">1819</th><td>	<a class="macro" href="lj_emit_x86.h.html#262" title="emit_rmro(as, XO_MOVto, (RID_ECX + r64), (RID_RET), (sizeof(GCcdata)))" data-ref="_M/emit_movtomro">emit_movtomro</a>(<a class="local col8 ref" href="#638as" title='as' data-ref="638as" data-ref-filename="638as">as</a>, <a class="enum" href="lj_target_x86.h.html#30" title='RID_ECX' data-ref="RID_ECX" data-ref-filename="RID_ECX">RID_ECX</a> + <a class="local col7 ref" href="#647r64" title='r64' data-ref="647r64" data-ref-filename="647r64">r64</a>, <a class="enum" href="lj_target_x86.h.html#RID_RET" title='RID_RET' data-ref="RID_RET" data-ref-filename="RID_RET">RID_RET</a>, <b>sizeof</b>(<a class="typedef" href="lj_obj.h.html#GCcdata" title='GCcdata' data-type='struct GCcdata' data-ref="GCcdata" data-ref-filename="GCcdata">GCcdata</a>));</td></tr>
<tr><th id="1820">1820</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_loadu64" title='emit_loadu64' data-ref="emit_loadu64" data-ref-filename="emit_loadu64">emit_loadu64</a>(<a class="local col8 ref" href="#638as" title='as' data-ref="638as" data-ref-filename="638as">as</a>, <a class="enum" href="lj_target_x86.h.html#30" title='RID_ECX' data-ref="RID_ECX" data-ref-filename="RID_ECX">RID_ECX</a>, <a class="local col9 ref" href="#649k" title='k' data-ref="649k" data-ref-filename="649k">k</a>);</td></tr>
<tr><th id="1821">1821</th><td>      }</td></tr>
<tr><th id="1822">1822</th><td>    } <b>else</b> {</td></tr>
<tr><th id="1823">1823</th><td>      <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col0 decl" id="650r" title='r' data-type='Reg' data-ref="650r" data-ref-filename="650r">r</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col8 ref" href="#638as" title='as' data-ref="638as" data-ref-filename="638as">as</a>, <a class="local col9 ref" href="#639ir" title='ir' data-ref="639ir" data-ref-filename="639ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>, <a class="local col6 ref" href="#646allow" title='allow' data-ref="646allow" data-ref-filename="646allow">allow</a>);</td></tr>
<tr><th id="1824">1824</th><td>      <a class="macro" href="lj_emit_x86.h.html#262" title="emit_rmro(as, XO_MOVto, (r + r64), (RID_RET), (sizeof(GCcdata)))" data-ref="_M/emit_movtomro">emit_movtomro</a>(<a class="local col8 ref" href="#638as" title='as' data-ref="638as" data-ref-filename="638as">as</a>, <a class="local col0 ref" href="#650r" title='r' data-ref="650r" data-ref-filename="650r">r</a> + <a class="local col7 ref" href="#647r64" title='r64' data-ref="647r64" data-ref-filename="647r64">r64</a>, <a class="enum" href="lj_target_x86.h.html#RID_RET" title='RID_RET' data-ref="RID_RET" data-ref-filename="RID_RET">RID_RET</a>, <b>sizeof</b>(<a class="typedef" href="lj_obj.h.html#GCcdata" title='GCcdata' data-type='struct GCcdata' data-ref="GCcdata" data-ref-filename="GCcdata">GCcdata</a>));</td></tr>
<tr><th id="1825">1825</th><td>    }</td></tr>
<tr><th id="1826">1826</th><td><u>#<span data-ppcond="1808">else</span></u></td></tr>
<tr><th id="1827">1827</th><td>    int32_t ofs = <b>sizeof</b>(GCcdata);</td></tr>
<tr><th id="1828">1828</th><td>    <b>if</b> (sz == <var>8</var>) {</td></tr>
<tr><th id="1829">1829</th><td>      ofs += <var>4</var>; ir++;</td></tr>
<tr><th id="1830">1830</th><td>      lj_assertA(ir-&gt;o == IR_HIOP, <q>"missing CNEWI HIOP"</q>);</td></tr>
<tr><th id="1831">1831</th><td>    }</td></tr>
<tr><th id="1832">1832</th><td>    <b>do</b> {</td></tr>
<tr><th id="1833">1833</th><td>      <b>if</b> (irref_isk(ir-&gt;op2)) {</td></tr>
<tr><th id="1834">1834</th><td>	emit_movmroi(as, RID_RET, ofs, IR(ir-&gt;op2)-&gt;i);</td></tr>
<tr><th id="1835">1835</th><td>      } <b>else</b> {</td></tr>
<tr><th id="1836">1836</th><td>	Reg r = ra_alloc1(as, ir-&gt;op2, allow);</td></tr>
<tr><th id="1837">1837</th><td>	emit_movtomro(as, r, RID_RET, ofs);</td></tr>
<tr><th id="1838">1838</th><td>	rset_clear(allow, r);</td></tr>
<tr><th id="1839">1839</th><td>      }</td></tr>
<tr><th id="1840">1840</th><td>      <b>if</b> (ofs == <b>sizeof</b>(GCcdata)) <b>break</b>;</td></tr>
<tr><th id="1841">1841</th><td>      ofs -= <var>4</var>; ir--;</td></tr>
<tr><th id="1842">1842</th><td>    } <b>while</b> (<var>1</var>);</td></tr>
<tr><th id="1843">1843</th><td><u>#<span data-ppcond="1808">endif</span></u></td></tr>
<tr><th id="1844">1844</th><td>    <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(sz == <var>4</var> || sz == <var>8</var>, <q>"bad CNEWI size %d"</q>, sz);</td></tr>
<tr><th id="1845">1845</th><td>  } <b>else</b> <b>if</b> (<a class="local col9 ref" href="#639ir" title='ir' data-ref="639ir" data-ref-filename="639ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a> != <a class="enum" href="lj_ir.h.html#REF_NIL" title='REF_NIL' data-ref="REF_NIL" data-ref-filename="REF_NIL">REF_NIL</a>) {  <i>/* Create VLA/VLS/aligned cdata. */</i></td></tr>
<tr><th id="1846">1846</th><td>    <a class="local col4 ref" href="#644ci" title='ci' data-ref="644ci" data-ref-filename="644ci">ci</a> = &amp;<a class="ref" href="lj_ircall.h.html#lj_ir_callinfo" title='lj_ir_callinfo' data-ref="lj_ir_callinfo" data-ref-filename="lj_ir_callinfo">lj_ir_callinfo</a>[<a class="enum" href="lj_ircall.h.html#254" title='IRCALL_lj_cdata_newv' data-ref="IRCALL_lj_cdata_newv" data-ref-filename="IRCALL_lj_cdata_newv">IRCALL_lj_cdata_newv</a>];</td></tr>
<tr><th id="1847">1847</th><td>    <a class="local col5 ref" href="#645args" title='args' data-ref="645args" data-ref-filename="645args">args</a>[<var>0</var>] = <a class="macro" href="lj_asm.c.html#113" title="REF_NIL" data-ref="_M/ASMREF_L">ASMREF_L</a>;     <i>/* lua_State *L */</i></td></tr>
<tr><th id="1848">1848</th><td>    <a class="local col5 ref" href="#645args" title='args' data-ref="645args" data-ref-filename="645args">args</a>[<var>1</var>] = <a class="local col9 ref" href="#639ir" title='ir' data-ref="639ir" data-ref-filename="639ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>;      <i>/* CTypeID id   */</i></td></tr>
<tr><th id="1849">1849</th><td>    <a class="local col5 ref" href="#645args" title='args' data-ref="645args" data-ref-filename="645args">args</a>[<var>2</var>] = <a class="local col9 ref" href="#639ir" title='ir' data-ref="639ir" data-ref-filename="639ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>;      <i>/* CTSize sz    */</i></td></tr>
<tr><th id="1850">1850</th><td>    <a class="local col5 ref" href="#645args" title='args' data-ref="645args" data-ref-filename="645args">args</a>[<var>3</var>] = <a class="macro" href="lj_asm.c.html#111" title="REF_TRUE" data-ref="_M/ASMREF_TMP1">ASMREF_TMP1</a>;  <i>/* CTSize align */</i></td></tr>
<tr><th id="1851">1851</th><td>    <a class="ref fn" href="#asm_gencall" title='asm_gencall' data-ref="asm_gencall" data-ref-filename="asm_gencall">asm_gencall</a>(<a class="local col8 ref" href="#638as" title='as' data-ref="638as" data-ref-filename="638as">as</a>, <a class="local col4 ref" href="#644ci" title='ci' data-ref="644ci" data-ref-filename="644ci">ci</a>, <a class="local col5 ref" href="#645args" title='args' data-ref="645args" data-ref-filename="645args">args</a>);</td></tr>
<tr><th id="1852">1852</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_loadi" title='emit_loadi' data-ref="emit_loadi" data-ref-filename="emit_loadi">emit_loadi</a>(<a class="local col8 ref" href="#638as" title='as' data-ref="638as" data-ref-filename="638as">as</a>, <a class="tu ref fn" href="lj_asm.c.html#ra_releasetmp" title='ra_releasetmp' data-use='c' data-ref="ra_releasetmp" data-ref-filename="ra_releasetmp">ra_releasetmp</a>(<a class="local col8 ref" href="#638as" title='as' data-ref="638as" data-ref-filename="638as">as</a>, <a class="macro" href="lj_asm.c.html#111" title="REF_TRUE" data-ref="_M/ASMREF_TMP1">ASMREF_TMP1</a>), (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<a class="macro" href="lj_ctype.h.html#192" title="(((info) &gt;&gt; 16) &amp; 15)" data-ref="_M/ctype_align">ctype_align</a>(<a class="local col3 ref" href="#643info" title='info' data-ref="643info" data-ref-filename="643info">info</a>));</td></tr>
<tr><th id="1853">1853</th><td>    <b>return</b>;</td></tr>
<tr><th id="1854">1854</th><td>  }</td></tr>
<tr><th id="1855">1855</th><td></td></tr>
<tr><th id="1856">1856</th><td>  <i>/* Combine initialization of marked, gct and ctypeid. */</i></td></tr>
<tr><th id="1857">1857</th><td>  <a class="macro" href="lj_emit_x86.h.html#262" title="emit_rmro(as, XO_MOVto, (RID_ECX), (RID_RET), (__builtin_offsetof(GCcdata, marked)))" data-ref="_M/emit_movtomro">emit_movtomro</a>(<a class="local col8 ref" href="#638as" title='as' data-ref="638as" data-ref-filename="638as">as</a>, <a class="enum" href="lj_target_x86.h.html#30" title='RID_ECX' data-ref="RID_ECX" data-ref-filename="RID_ECX">RID_ECX</a>, <a class="enum" href="lj_target_x86.h.html#RID_RET" title='RID_RET' data-ref="RID_RET" data-ref-filename="RID_RET">RID_RET</a>, <span class="macro" title="__builtin_offsetof(GCcdata, marked)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#GCcdata" title='GCcdata' data-type='struct GCcdata' data-ref="GCcdata" data-ref-filename="GCcdata">GCcdata</a>, marked));</td></tr>
<tr><th id="1858">1858</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_gri" title='emit_gri' data-ref="emit_gri" data-ref-filename="emit_gri">emit_gri</a>(<a class="local col8 ref" href="#638as" title='as' data-ref="638as" data-ref-filename="638as">as</a>, <a class="macro" href="lj_target_x86.h.html#324" title="((x86Group)(((XI_ARITHi8) &lt;&lt; 16) + ((XI_ARITHi) &lt;&lt; 8) + (XOg_OR)))" data-ref="_M/XG_ARITHi">XG_ARITHi</a>(<a class="enum" href="lj_target_x86.h.html#XOg_OR" title='XOg_OR' data-ref="XOg_OR" data-ref-filename="XOg_OR">XOg_OR</a>), <a class="enum" href="lj_target_x86.h.html#30" title='RID_ECX' data-ref="RID_ECX" data-ref-filename="RID_ECX">RID_ECX</a>,</td></tr>
<tr><th id="1859">1859</th><td>	   (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)((~<a class="macro" href="lj_obj.h.html#270" title="(~10u)" data-ref="_M/LJ_TCDATA">LJ_TCDATA</a>&lt;&lt;<var>8</var>)+(<a class="local col1 ref" href="#641id" title='id' data-ref="641id" data-ref-filename="641id">id</a>&lt;&lt;<var>16</var>)));</td></tr>
<tr><th id="1860">1860</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_gri" title='emit_gri' data-ref="emit_gri" data-ref-filename="emit_gri">emit_gri</a>(<a class="local col8 ref" href="#638as" title='as' data-ref="638as" data-ref-filename="638as">as</a>, <a class="macro" href="lj_target_x86.h.html#324" title="((x86Group)(((XI_ARITHi8) &lt;&lt; 16) + ((XI_ARITHi) &lt;&lt; 8) + (XOg_AND)))" data-ref="_M/XG_ARITHi">XG_ARITHi</a>(<a class="enum" href="lj_target_x86.h.html#XOg_AND" title='XOg_AND' data-ref="XOg_AND" data-ref-filename="XOg_AND">XOg_AND</a>), <a class="enum" href="lj_target_x86.h.html#30" title='RID_ECX' data-ref="RID_ECX" data-ref-filename="RID_ECX">RID_ECX</a>, <a class="macro" href="lj_gc.h.html#27" title="(0x01 | 0x02)" data-ref="_M/LJ_GC_WHITES">LJ_GC_WHITES</a>);</td></tr>
<tr><th id="1861">1861</th><td>  <a class="macro" href="lj_emit_x86.h.html#266" title="emit_rma(as, (XO_MOVZXb), (RID_ECX), (void *)&amp;(&amp;((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;g)-&gt;gc.currentwhite)" data-ref="_M/emit_opgl">emit_opgl</a>(<a class="local col8 ref" href="#638as" title='as' data-ref="638as" data-ref-filename="638as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOVZXb" title='XO_MOVZXb' data-ref="XO_MOVZXb" data-ref-filename="XO_MOVZXb">XO_MOVZXb</a>, <a class="enum" href="lj_target_x86.h.html#30" title='RID_ECX' data-ref="RID_ECX" data-ref-filename="RID_ECX">RID_ECX</a>, <a class="ref field" href="lj_obj.h.html#global_State::gc" title='global_State::gc' data-ref="global_State::gc" data-ref-filename="global_State..gc">gc</a>.<a class="ref field" href="lj_obj.h.html#GCState::currentwhite" title='GCState::currentwhite' data-ref="GCState::currentwhite" data-ref-filename="GCState..currentwhite">currentwhite</a>);</td></tr>
<tr><th id="1862">1862</th><td></td></tr>
<tr><th id="1863">1863</th><td>  <a class="local col5 ref" href="#645args" title='args' data-ref="645args" data-ref-filename="645args">args</a>[<var>0</var>] = <a class="macro" href="lj_asm.c.html#113" title="REF_NIL" data-ref="_M/ASMREF_L">ASMREF_L</a>;     <i>/* lua_State *L */</i></td></tr>
<tr><th id="1864">1864</th><td>  <a class="local col5 ref" href="#645args" title='args' data-ref="645args" data-ref-filename="645args">args</a>[<var>1</var>] = <a class="macro" href="lj_asm.c.html#111" title="REF_TRUE" data-ref="_M/ASMREF_TMP1">ASMREF_TMP1</a>;  <i>/* MSize size   */</i></td></tr>
<tr><th id="1865">1865</th><td>  <a class="ref fn" href="#asm_gencall" title='asm_gencall' data-ref="asm_gencall" data-ref-filename="asm_gencall">asm_gencall</a>(<a class="local col8 ref" href="#638as" title='as' data-ref="638as" data-ref-filename="638as">as</a>, <a class="local col4 ref" href="#644ci" title='ci' data-ref="644ci" data-ref-filename="644ci">ci</a>, <a class="local col5 ref" href="#645args" title='args' data-ref="645args" data-ref-filename="645args">args</a>);</td></tr>
<tr><th id="1866">1866</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_loadi" title='emit_loadi' data-ref="emit_loadi" data-ref-filename="emit_loadi">emit_loadi</a>(<a class="local col8 ref" href="#638as" title='as' data-ref="638as" data-ref-filename="638as">as</a>, <a class="tu ref fn" href="lj_asm.c.html#ra_releasetmp" title='ra_releasetmp' data-use='c' data-ref="ra_releasetmp" data-ref-filename="ra_releasetmp">ra_releasetmp</a>(<a class="local col8 ref" href="#638as" title='as' data-ref="638as" data-ref-filename="638as">as</a>, <a class="macro" href="lj_asm.c.html#111" title="REF_TRUE" data-ref="_M/ASMREF_TMP1">ASMREF_TMP1</a>), (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)(<a class="local col2 ref" href="#642sz" title='sz' data-ref="642sz" data-ref-filename="642sz">sz</a>+<b>sizeof</b>(<a class="typedef" href="lj_obj.h.html#GCcdata" title='GCcdata' data-type='struct GCcdata' data-ref="GCcdata" data-ref-filename="GCcdata">GCcdata</a>)));</td></tr>
<tr><th id="1867">1867</th><td>}</td></tr>
<tr><th id="1868">1868</th><td><u>#<span data-ppcond="1790">endif</span></u></td></tr>
<tr><th id="1869">1869</th><td></td></tr>
<tr><th id="1870">1870</th><td><i>/* -- Write barriers ------------------------------------------------------ */</i></td></tr>
<tr><th id="1871">1871</th><td></td></tr>
<tr><th id="1872">1872</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_tbar" title='asm_tbar' data-ref="asm_tbar" data-ref-filename="asm_tbar">asm_tbar</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col1 decl" id="651as" title='as' data-type='ASMState *' data-ref="651as" data-ref-filename="651as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col2 decl" id="652ir" title='ir' data-type='IRIns *' data-ref="652ir" data-ref-filename="652ir">ir</dfn>)</td></tr>
<tr><th id="1873">1873</th><td>{</td></tr>
<tr><th id="1874">1874</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col3 decl" id="653tab" title='tab' data-type='Reg' data-ref="653tab" data-ref-filename="653tab">tab</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col1 ref" href="#651as" title='as' data-ref="651as" data-ref-filename="651as">as</a>, <a class="local col2 ref" href="#652ir" title='ir' data-ref="652ir" data-ref-filename="652ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="1875">1875</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col4 decl" id="654tmp" title='tmp' data-type='Reg' data-ref="654tmp" data-ref-filename="654tmp">tmp</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_scratch" title='ra_scratch' data-use='c' data-ref="ra_scratch" data-ref-filename="ra_scratch">ra_scratch</a>(<a class="local col1 ref" href="#651as" title='as' data-ref="651as" data-ref-filename="651as">as</a>, <a class="macro" href="lj_target.h.html#71" title="(((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH))) &amp; ~(((RegSet)1) &lt;&lt; (tab)))" data-ref="_M/rset_exclude">rset_exclude</a>(<a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>, <a class="local col3 ref" href="#653tab" title='tab' data-ref="653tab" data-ref-filename="653tab">tab</a>));</td></tr>
<tr><th id="1876">1876</th><td>  <a class="typedef" href="lj_emit_x86.h.html#MCLabel" title='MCLabel' data-type='MCode *' data-ref="MCLabel" data-ref-filename="MCLabel">MCLabel</a> <dfn class="local col5 decl" id="655l_end" title='l_end' data-type='MCLabel' data-ref="655l_end" data-ref-filename="655l_end">l_end</dfn> = <a class="macro" href="lj_emit_x86.h.html#472" title="((as)-&gt;mcp)" data-ref="_M/emit_label">emit_label</a>(<a class="local col1 ref" href="#651as" title='as' data-ref="651as" data-ref-filename="651as">as</a>);</td></tr>
<tr><th id="1877">1877</th><td>  <a class="macro" href="lj_emit_x86.h.html#262" title="emit_rmro(as, XO_MOVto, (tmp|(0x200|0x080000)), (tab), (__builtin_offsetof(GCtab, gclist)))" data-ref="_M/emit_movtomro">emit_movtomro</a>(<a class="local col1 ref" href="#651as" title='as' data-ref="651as" data-ref-filename="651as">as</a>, <a class="local col4 ref" href="#654tmp" title='tmp' data-ref="654tmp" data-ref-filename="654tmp">tmp</a>|<a class="macro" href="lj_emit_x86.h.html#24" title="(0x200|0x080000)" data-ref="_M/REX_GC64">REX_GC64</a>, <a class="local col3 ref" href="#653tab" title='tab' data-ref="653tab" data-ref-filename="653tab">tab</a>, <span class="macro" title="__builtin_offsetof(GCtab, gclist)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#GCtab" title='GCtab' data-type='struct GCtab' data-ref="GCtab" data-ref-filename="GCtab">GCtab</a>, gclist));</td></tr>
<tr><th id="1878">1878</th><td>  <a class="macro" href="lj_emit_x86.h.html#269" title="emit_rma(as, (XO_MOVto), ((tab)|(0x200|0x080000)), (void *)&amp;(&amp;((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;g)-&gt;gc.grayagain)" data-ref="_M/emit_setgl">emit_setgl</a>(<a class="local col1 ref" href="#651as" title='as' data-ref="651as" data-ref-filename="651as">as</a>, <a class="local col3 ref" href="#653tab" title='tab' data-ref="653tab" data-ref-filename="653tab">tab</a>, <a class="ref field" href="lj_obj.h.html#global_State::gc" title='global_State::gc' data-ref="global_State::gc" data-ref-filename="global_State..gc">gc</a>.<a class="ref field" href="lj_obj.h.html#GCState::grayagain" title='GCState::grayagain' data-ref="GCState::grayagain" data-ref-filename="GCState..grayagain">grayagain</a>);</td></tr>
<tr><th id="1879">1879</th><td>  <a class="macro" href="lj_emit_x86.h.html#268" title="emit_rma(as, (XO_MOV), ((tmp)|(0x200|0x080000)), (void *)&amp;(&amp;((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;g)-&gt;gc.grayagain)" data-ref="_M/emit_getgl">emit_getgl</a>(<a class="local col1 ref" href="#651as" title='as' data-ref="651as" data-ref-filename="651as">as</a>, <a class="local col4 ref" href="#654tmp" title='tmp' data-ref="654tmp" data-ref-filename="654tmp">tmp</a>, <a class="ref field" href="lj_obj.h.html#global_State::gc" title='global_State::gc' data-ref="global_State::gc" data-ref-filename="global_State..gc">gc</a>.<a class="ref field" href="lj_obj.h.html#GCState::grayagain" title='GCState::grayagain' data-ref="GCState::grayagain" data-ref-filename="GCState..grayagain">grayagain</a>);</td></tr>
<tr><th id="1880">1880</th><td>  <a class="macro" href="lj_emit_x86.h.html#29" title="(*--as-&gt;mcp = (MCode)(~0x04))" data-ref="_M/emit_i8">emit_i8</a>(<a class="local col1 ref" href="#651as" title='as' data-ref="651as" data-ref-filename="651as">as</a>, ~<a class="macro" href="lj_gc.h.html#19" title="0x04" data-ref="_M/LJ_GC_BLACK">LJ_GC_BLACK</a>);</td></tr>
<tr><th id="1881">1881</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col1 ref" href="#651as" title='as' data-ref="651as" data-ref-filename="651as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_ARITHib" title='XO_ARITHib' data-ref="XO_ARITHib" data-ref-filename="XO_ARITHib">XO_ARITHib</a>, <a class="enum" href="lj_target_x86.h.html#XOg_AND" title='XOg_AND' data-ref="XOg_AND" data-ref-filename="XOg_AND">XOg_AND</a>, <a class="local col3 ref" href="#653tab" title='tab' data-ref="653tab" data-ref-filename="653tab">tab</a>, <span class="macro" title="__builtin_offsetof(GCtab, marked)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#GCtab" title='GCtab' data-type='struct GCtab' data-ref="GCtab" data-ref-filename="GCtab">GCtab</a>, marked));</td></tr>
<tr><th id="1882">1882</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_sjcc" title='emit_sjcc' data-ref="emit_sjcc" data-ref-filename="emit_sjcc">emit_sjcc</a>(<a class="local col1 ref" href="#651as" title='as' data-ref="651as" data-ref-filename="651as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_Z" title='CC_Z' data-ref="CC_Z" data-ref-filename="CC_Z">CC_Z</a>, <a class="local col5 ref" href="#655l_end" title='l_end' data-ref="655l_end" data-ref-filename="655l_end">l_end</a>);</td></tr>
<tr><th id="1883">1883</th><td>  <a class="macro" href="lj_emit_x86.h.html#29" title="(*--as-&gt;mcp = (MCode)(0x04))" data-ref="_M/emit_i8">emit_i8</a>(<a class="local col1 ref" href="#651as" title='as' data-ref="651as" data-ref-filename="651as">as</a>, <a class="macro" href="lj_gc.h.html#19" title="0x04" data-ref="_M/LJ_GC_BLACK">LJ_GC_BLACK</a>);</td></tr>
<tr><th id="1884">1884</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col1 ref" href="#651as" title='as' data-ref="651as" data-ref-filename="651as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_GROUP3b" title='XO_GROUP3b' data-ref="XO_GROUP3b" data-ref-filename="XO_GROUP3b">XO_GROUP3b</a>, <a class="enum" href="lj_target_x86.h.html#XOg_TEST" title='XOg_TEST' data-ref="XOg_TEST" data-ref-filename="XOg_TEST">XOg_TEST</a>, <a class="local col3 ref" href="#653tab" title='tab' data-ref="653tab" data-ref-filename="653tab">tab</a>, <span class="macro" title="__builtin_offsetof(GCtab, marked)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#GCtab" title='GCtab' data-type='struct GCtab' data-ref="GCtab" data-ref-filename="GCtab">GCtab</a>, marked));</td></tr>
<tr><th id="1885">1885</th><td>}</td></tr>
<tr><th id="1886">1886</th><td></td></tr>
<tr><th id="1887">1887</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_obar" title='asm_obar' data-ref="asm_obar" data-ref-filename="asm_obar">asm_obar</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col6 decl" id="656as" title='as' data-type='ASMState *' data-ref="656as" data-ref-filename="656as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col7 decl" id="657ir" title='ir' data-type='IRIns *' data-ref="657ir" data-ref-filename="657ir">ir</dfn>)</td></tr>
<tr><th id="1888">1888</th><td>{</td></tr>
<tr><th id="1889">1889</th><td>  <em>const</em> <a class="typedef" href="lj_ircall.h.html#CCallInfo" title='CCallInfo' data-type='struct CCallInfo' data-ref="CCallInfo" data-ref-filename="CCallInfo">CCallInfo</a> *<dfn class="local col8 decl" id="658ci" title='ci' data-type='const CCallInfo *' data-ref="658ci" data-ref-filename="658ci">ci</dfn> = &amp;<a class="ref" href="lj_ircall.h.html#lj_ir_callinfo" title='lj_ir_callinfo' data-ref="lj_ir_callinfo" data-ref-filename="lj_ir_callinfo">lj_ir_callinfo</a>[<a class="enum" href="lj_ircall.h.html#254" title='IRCALL_lj_gc_barrieruv' data-ref="IRCALL_lj_gc_barrieruv" data-ref-filename="IRCALL_lj_gc_barrieruv">IRCALL_lj_gc_barrieruv</a>];</td></tr>
<tr><th id="1890">1890</th><td>  <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col9 decl" id="659args" title='args' data-type='IRRef [2]' data-ref="659args" data-ref-filename="659args">args</dfn>[<var>2</var>];</td></tr>
<tr><th id="1891">1891</th><td>  <a class="typedef" href="lj_emit_x86.h.html#MCLabel" title='MCLabel' data-type='MCode *' data-ref="MCLabel" data-ref-filename="MCLabel">MCLabel</a> <dfn class="local col0 decl" id="660l_end" title='l_end' data-type='MCLabel' data-ref="660l_end" data-ref-filename="660l_end">l_end</dfn>;</td></tr>
<tr><th id="1892">1892</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col1 decl" id="661obj" title='obj' data-type='Reg' data-ref="661obj" data-ref-filename="661obj">obj</dfn>;</td></tr>
<tr><th id="1893">1893</th><td>  <i>/* No need for other object barriers (yet). */</i></td></tr>
<tr><th id="1894">1894</th><td>  <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(IR(ir-&gt;op1)-&gt;o == IR_UREFC, <q>"bad OBAR type"</q>);</td></tr>
<tr><th id="1895">1895</th><td>  <a class="tu ref fn" href="lj_asm.c.html#ra_evictset" title='ra_evictset' data-use='c' data-ref="ra_evictset" data-ref-filename="ra_evictset">ra_evictset</a>(<a class="local col6 ref" href="#656as" title='as' data-ref="656as" data-ref-filename="656as">as</a>, <a class="macro" href="lj_target_x86.h.html#98" title="(((((RegSet)1) &lt;&lt; (RID_EAX))|(((RegSet)1) &lt;&lt; (RID_ECX))|(((RegSet)1) &lt;&lt; (RID_EDX)))|(((((RegSet)1) &lt;&lt; ((RID_R11D+1)-(RID_ESI)))-1) &lt;&lt; (RID_ESI))|((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR))))" data-ref="_M/RSET_SCRATCH">RSET_SCRATCH</a>);</td></tr>
<tr><th id="1896">1896</th><td>  <a class="local col0 ref" href="#660l_end" title='l_end' data-ref="660l_end" data-ref-filename="660l_end">l_end</a> = <a class="macro" href="lj_emit_x86.h.html#472" title="((as)-&gt;mcp)" data-ref="_M/emit_label">emit_label</a>(<a class="local col6 ref" href="#656as" title='as' data-ref="656as" data-ref-filename="656as">as</a>);</td></tr>
<tr><th id="1897">1897</th><td>  <a class="local col9 ref" href="#659args" title='args' data-ref="659args" data-ref-filename="659args">args</a>[<var>0</var>] = <a class="macro" href="lj_asm.c.html#111" title="REF_TRUE" data-ref="_M/ASMREF_TMP1">ASMREF_TMP1</a>;  <i>/* global_State *g */</i></td></tr>
<tr><th id="1898">1898</th><td>  <a class="local col9 ref" href="#659args" title='args' data-ref="659args" data-ref-filename="659args">args</a>[<var>1</var>] = <a class="local col7 ref" href="#657ir" title='ir' data-ref="657ir" data-ref-filename="657ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>;      <i>/* TValue *tv      */</i></td></tr>
<tr><th id="1899">1899</th><td>  <a class="ref fn" href="#asm_gencall" title='asm_gencall' data-ref="asm_gencall" data-ref-filename="asm_gencall">asm_gencall</a>(<a class="local col6 ref" href="#656as" title='as' data-ref="656as" data-ref-filename="656as">as</a>, <a class="local col8 ref" href="#658ci" title='ci' data-ref="658ci" data-ref-filename="658ci">ci</a>, <a class="local col9 ref" href="#659args" title='args' data-ref="659args" data-ref-filename="659args">args</a>);</td></tr>
<tr><th id="1900">1900</th><td>  <a class="macro" href="lj_emit_x86.h.html#302" title="emit_loadu64(as, (ra_releasetmp(as, REF_TRUE)), (uintptr_t)((&amp;((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;g)))" data-ref="_M/emit_loada">emit_loada</a>(<a class="local col6 ref" href="#656as" title='as' data-ref="656as" data-ref-filename="656as">as</a>, <a class="tu ref fn" href="lj_asm.c.html#ra_releasetmp" title='ra_releasetmp' data-use='c' data-ref="ra_releasetmp" data-ref-filename="ra_releasetmp">ra_releasetmp</a>(<a class="local col6 ref" href="#656as" title='as' data-ref="656as" data-ref-filename="656as">as</a>, <a class="macro" href="lj_asm.c.html#111" title="REF_TRUE" data-ref="_M/ASMREF_TMP1">ASMREF_TMP1</a>), <a class="macro" href="lj_dispatch.h.html#115" title="(&amp;((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;g)" data-ref="_M/J2G">J2G</a>(<a class="local col6 ref" href="#656as" title='as' data-ref="656as" data-ref-filename="656as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>));</td></tr>
<tr><th id="1901">1901</th><td>  <a class="local col1 ref" href="#661obj" title='obj' data-ref="661obj" data-ref-filename="661obj">obj</a> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ir-&gt;op1)])" data-ref="_M/IR">IR</a>(<a class="local col7 ref" href="#657ir" title='ir' data-ref="657ir" data-ref-filename="657ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>)-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>;</td></tr>
<tr><th id="1902">1902</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_sjcc" title='emit_sjcc' data-ref="emit_sjcc" data-ref-filename="emit_sjcc">emit_sjcc</a>(<a class="local col6 ref" href="#656as" title='as' data-ref="656as" data-ref-filename="656as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_Z" title='CC_Z' data-ref="CC_Z" data-ref-filename="CC_Z">CC_Z</a>, <a class="local col0 ref" href="#660l_end" title='l_end' data-ref="660l_end" data-ref-filename="660l_end">l_end</a>);</td></tr>
<tr><th id="1903">1903</th><td>  <a class="macro" href="lj_emit_x86.h.html#29" title="(*--as-&gt;mcp = (MCode)((0x01 | 0x02)))" data-ref="_M/emit_i8">emit_i8</a>(<a class="local col6 ref" href="#656as" title='as' data-ref="656as" data-ref-filename="656as">as</a>, <a class="macro" href="lj_gc.h.html#27" title="(0x01 | 0x02)" data-ref="_M/LJ_GC_WHITES">LJ_GC_WHITES</a>);</td></tr>
<tr><th id="1904">1904</th><td>  <b>if</b> (<a class="macro" href="lj_ir.h.html#470" title="((ir-&gt;op2) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col7 ref" href="#657ir" title='ir' data-ref="657ir" data-ref-filename="657ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>)) {</td></tr>
<tr><th id="1905">1905</th><td>    <a class="typedef" href="lj_obj.h.html#GCobj" title='GCobj' data-type='union GCobj' data-ref="GCobj" data-ref-filename="GCobj">GCobj</a> *<dfn class="local col2 decl" id="662vp" title='vp' data-type='GCobj *' data-ref="662vp" data-ref-filename="662vp">vp</dfn> = <a class="macro" href="lj_ir.h.html#571" title="(((GCobj *)(((&amp;as-&gt;ir[(ir-&gt;op2)]))[1].gcr).gcptr64))" data-ref="_M/ir_kgc">ir_kgc</a>(<a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ir-&gt;op2)])" data-ref="_M/IR">IR</a>(<a class="local col7 ref" href="#657ir" title='ir' data-ref="657ir" data-ref-filename="657ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>));</td></tr>
<tr><th id="1906">1906</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_rma" title='emit_rma' data-ref="emit_rma" data-ref-filename="emit_rma">emit_rma</a>(<a class="local col6 ref" href="#656as" title='as' data-ref="656as" data-ref-filename="656as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_GROUP3b" title='XO_GROUP3b' data-ref="XO_GROUP3b" data-ref-filename="XO_GROUP3b">XO_GROUP3b</a>, <a class="enum" href="lj_target_x86.h.html#XOg_TEST" title='XOg_TEST' data-ref="XOg_TEST" data-ref-filename="XOg_TEST">XOg_TEST</a>, &amp;<a class="local col2 ref" href="#662vp" title='vp' data-ref="662vp" data-ref-filename="662vp">vp</a>-&gt;<a class="ref field" href="lj_obj.h.html#GCobj::gch" title='GCobj::gch' data-ref="GCobj::gch" data-ref-filename="GCobj..gch">gch</a>.<a class="ref field" href="lj_obj.h.html#724" title='GChead::marked' data-ref="GChead::marked" data-ref-filename="GChead..marked">marked</a>);</td></tr>
<tr><th id="1907">1907</th><td>  } <b>else</b> {</td></tr>
<tr><th id="1908">1908</th><td>    <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col3 decl" id="663val" title='val' data-type='Reg' data-ref="663val" data-ref-filename="663val">val</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col6 ref" href="#656as" title='as' data-ref="656as" data-ref-filename="656as">as</a>, <a class="local col7 ref" href="#657ir" title='ir' data-ref="657ir" data-ref-filename="657ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>, <a class="macro" href="lj_target.h.html#71" title="((((((RegSet)1) &lt;&lt; (RID_EAX))|(((RegSet)1) &lt;&lt; (RID_ECX))|(((RegSet)1) &lt;&lt; (RID_EDX)))|(((((RegSet)1) &lt;&lt; ((RID_R11D+1)-(RID_ESI)))-1) &lt;&lt; (RID_ESI))|((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR))))&amp;((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH))) &amp; ~(((RegSet)1) &lt;&lt; (obj)))" data-ref="_M/rset_exclude">rset_exclude</a>(<a class="macro" href="lj_target_x86.h.html#98" title="(((((RegSet)1) &lt;&lt; (RID_EAX))|(((RegSet)1) &lt;&lt; (RID_ECX))|(((RegSet)1) &lt;&lt; (RID_EDX)))|(((((RegSet)1) &lt;&lt; ((RID_R11D+1)-(RID_ESI)))-1) &lt;&lt; (RID_ESI))|((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR))))" data-ref="_M/RSET_SCRATCH">RSET_SCRATCH</a>&amp;<a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>, <a class="local col1 ref" href="#661obj" title='obj' data-ref="661obj" data-ref-filename="661obj">obj</a>));</td></tr>
<tr><th id="1909">1909</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col6 ref" href="#656as" title='as' data-ref="656as" data-ref-filename="656as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_GROUP3b" title='XO_GROUP3b' data-ref="XO_GROUP3b" data-ref-filename="XO_GROUP3b">XO_GROUP3b</a>, <a class="enum" href="lj_target_x86.h.html#XOg_TEST" title='XOg_TEST' data-ref="XOg_TEST" data-ref-filename="XOg_TEST">XOg_TEST</a>, <a class="local col3 ref" href="#663val" title='val' data-ref="663val" data-ref-filename="663val">val</a>, (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<span class="macro" title="__builtin_offsetof(GChead, marked)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#GChead" title='GChead' data-type='struct GChead' data-ref="GChead" data-ref-filename="GChead">GChead</a>, marked));</td></tr>
<tr><th id="1910">1910</th><td>  }</td></tr>
<tr><th id="1911">1911</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_sjcc" title='emit_sjcc' data-ref="emit_sjcc" data-ref-filename="emit_sjcc">emit_sjcc</a>(<a class="local col6 ref" href="#656as" title='as' data-ref="656as" data-ref-filename="656as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_Z" title='CC_Z' data-ref="CC_Z" data-ref-filename="CC_Z">CC_Z</a>, <a class="local col0 ref" href="#660l_end" title='l_end' data-ref="660l_end" data-ref-filename="660l_end">l_end</a>);</td></tr>
<tr><th id="1912">1912</th><td>  <a class="macro" href="lj_emit_x86.h.html#29" title="(*--as-&gt;mcp = (MCode)(0x04))" data-ref="_M/emit_i8">emit_i8</a>(<a class="local col6 ref" href="#656as" title='as' data-ref="656as" data-ref-filename="656as">as</a>, <a class="macro" href="lj_gc.h.html#19" title="0x04" data-ref="_M/LJ_GC_BLACK">LJ_GC_BLACK</a>);</td></tr>
<tr><th id="1913">1913</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col6 ref" href="#656as" title='as' data-ref="656as" data-ref-filename="656as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_GROUP3b" title='XO_GROUP3b' data-ref="XO_GROUP3b" data-ref-filename="XO_GROUP3b">XO_GROUP3b</a>, <a class="enum" href="lj_target_x86.h.html#XOg_TEST" title='XOg_TEST' data-ref="XOg_TEST" data-ref-filename="XOg_TEST">XOg_TEST</a>, <a class="local col1 ref" href="#661obj" title='obj' data-ref="661obj" data-ref-filename="661obj">obj</a>,</td></tr>
<tr><th id="1914">1914</th><td>	    (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<span class="macro" title="__builtin_offsetof(GCupval, marked)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#GCupval" title='GCupval' data-type='struct GCupval' data-ref="GCupval" data-ref-filename="GCupval">GCupval</a>, marked)-(<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<span class="macro" title="__builtin_offsetof(GCupval, tv)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lj_obj.h.html#GCupval" title='GCupval' data-type='struct GCupval' data-ref="GCupval" data-ref-filename="GCupval">GCupval</a>, tv));</td></tr>
<tr><th id="1915">1915</th><td>}</td></tr>
<tr><th id="1916">1916</th><td></td></tr>
<tr><th id="1917">1917</th><td><i>/* -- FP/int arithmetic and logic operations ------------------------------ */</i></td></tr>
<tr><th id="1918">1918</th><td></td></tr>
<tr><th id="1919">1919</th><td><i>/* Load reference onto x87 stack. Force a spill to memory if needed. */</i></td></tr>
<tr><th id="1920">1920</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_x87load" title='asm_x87load' data-ref="asm_x87load" data-ref-filename="asm_x87load">asm_x87load</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col4 decl" id="664as" title='as' data-type='ASMState *' data-ref="664as" data-ref-filename="664as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col5 decl" id="665ref" title='ref' data-type='IRRef' data-ref="665ref" data-ref-filename="665ref">ref</dfn>)</td></tr>
<tr><th id="1921">1921</th><td>{</td></tr>
<tr><th id="1922">1922</th><td>  <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col6 decl" id="666ir" title='ir' data-type='IRIns *' data-ref="666ir" data-ref-filename="666ir">ir</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ref)])" data-ref="_M/IR">IR</a>(<a class="local col5 ref" href="#665ref" title='ref' data-ref="665ref" data-ref-filename="665ref">ref</a>);</td></tr>
<tr><th id="1923">1923</th><td>  <b>if</b> (<a class="local col6 ref" href="#666ir" title='ir' data-ref="666ir" data-ref-filename="666ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_KNUM' data-ref="IR_KNUM" data-ref-filename="IR_KNUM">IR_KNUM</a>) {</td></tr>
<tr><th id="1924">1924</th><td>    <a class="typedef" href="lj_obj.h.html#cTValue" title='cTValue' data-type='const TValue' data-ref="cTValue" data-ref-filename="cTValue">cTValue</a> *<dfn class="local col7 decl" id="667tv" title='tv' data-type='cTValue *' data-ref="667tv" data-ref-filename="667tv">tv</dfn> = <a class="macro" href="lj_ir.h.html#576" title="(&amp;(ir)[1].tv)" data-ref="_M/ir_knum">ir_knum</a>(<a class="local col6 ref" href="#666ir" title='ir' data-ref="666ir" data-ref-filename="666ir">ir</a>);</td></tr>
<tr><th id="1925">1925</th><td>    <b>if</b> (<a class="macro" href="lj_obj.h.html#812" title="((tv)-&gt;u64 == 0)" data-ref="_M/tvispzero">tvispzero</a>(<a class="local col7 ref" href="#667tv" title='tv' data-ref="667tv" data-ref-filename="667tv">tv</a>))  <i>/* Use fldz only for +0. */</i></td></tr>
<tr><th id="1926">1926</th><td>      <a class="macro" href="lj_emit_x86.h.html#33" title="(*(uint16_t *)(as-&gt;mcp-2) = (uint16_t)(XI_FLDZ), as-&gt;mcp -= 2)" data-ref="_M/emit_x87op">emit_x87op</a>(<a class="local col4 ref" href="#664as" title='as' data-ref="664as" data-ref-filename="664as">as</a>, <a class="enum" href="lj_target_x86.h.html#XI_FLDZ" title='XI_FLDZ' data-ref="XI_FLDZ" data-ref-filename="XI_FLDZ">XI_FLDZ</a>);</td></tr>
<tr><th id="1927">1927</th><td>    <b>else</b> <b>if</b> (<a class="macro" href="lj_obj.h.html#814" title="((tv)-&gt;u64 == (((uint64_t)0x3ff00000 &lt;&lt; 32) + (uint64_t)0x00000000))" data-ref="_M/tvispone">tvispone</a>(<a class="local col7 ref" href="#667tv" title='tv' data-ref="667tv" data-ref-filename="667tv">tv</a>))</td></tr>
<tr><th id="1928">1928</th><td>      <a class="macro" href="lj_emit_x86.h.html#33" title="(*(uint16_t *)(as-&gt;mcp-2) = (uint16_t)(XI_FLD1), as-&gt;mcp -= 2)" data-ref="_M/emit_x87op">emit_x87op</a>(<a class="local col4 ref" href="#664as" title='as' data-ref="664as" data-ref-filename="664as">as</a>, <a class="enum" href="lj_target_x86.h.html#XI_FLD1" title='XI_FLD1' data-ref="XI_FLD1" data-ref-filename="XI_FLD1">XI_FLD1</a>);</td></tr>
<tr><th id="1929">1929</th><td>    <b>else</b></td></tr>
<tr><th id="1930">1930</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rma" title='emit_rma' data-ref="emit_rma" data-ref-filename="emit_rma">emit_rma</a>(<a class="local col4 ref" href="#664as" title='as' data-ref="664as" data-ref-filename="664as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_FLDq" title='XO_FLDq' data-ref="XO_FLDq" data-ref-filename="XO_FLDq">XO_FLDq</a>, <a class="enum" href="lj_target_x86.h.html#XOg_FLDq" title='XOg_FLDq' data-ref="XOg_FLDq" data-ref-filename="XOg_FLDq">XOg_FLDq</a>, <a class="local col7 ref" href="#667tv" title='tv' data-ref="667tv" data-ref-filename="667tv">tv</a>);</td></tr>
<tr><th id="1931">1931</th><td>  } <b>else</b> <b>if</b> (<a class="local col6 ref" href="#666ir" title='ir' data-ref="666ir" data-ref-filename="666ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_CONV' data-ref="IR_CONV" data-ref-filename="IR_CONV">IR_CONV</a> &amp;&amp; <a class="local col6 ref" href="#666ir" title='ir' data-ref="666ir" data-ref-filename="666ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a> == <a class="macro" href="lj_ir.h.html#242" title="((IRT_NUM&lt;&lt;5)|IRT_INT)" data-ref="_M/IRCONV_NUM_INT">IRCONV_NUM_INT</a> &amp;&amp; !<a class="macro" href="lj_asm.c.html#309" title="((!(((ir)-&gt;r) &amp; 0x80)) || (((ir)-&gt;s) != 0))" data-ref="_M/ra_used">ra_used</a>(<a class="local col6 ref" href="#666ir" title='ir' data-ref="666ir" data-ref-filename="666ir">ir</a>) &amp;&amp;</td></tr>
<tr><th id="1932">1932</th><td>	     !<a class="macro" href="lj_ir.h.html#470" title="((ir-&gt;op1) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col6 ref" href="#666ir" title='ir' data-ref="666ir" data-ref-filename="666ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>) &amp;&amp; <a class="macro" href="lj_asm.c.html#120" title="((ir-&gt;op1) &gt; as-&gt;fuseref)" data-ref="_M/mayfuse">mayfuse</a>(<a class="local col4 ref" href="#664as" title='as' data-ref="664as" data-ref-filename="664as">as</a>, <a class="local col6 ref" href="#666ir" title='ir' data-ref="666ir" data-ref-filename="666ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>)) {</td></tr>
<tr><th id="1933">1933</th><td>    <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col8 decl" id="668iri" title='iri' data-type='IRIns *' data-ref="668iri" data-ref-filename="668iri">iri</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ir-&gt;op1)])" data-ref="_M/IR">IR</a>(<a class="local col6 ref" href="#666ir" title='ir' data-ref="666ir" data-ref-filename="666ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>);</td></tr>
<tr><th id="1934">1934</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col4 ref" href="#664as" title='as' data-ref="664as" data-ref-filename="664as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_FILDd" title='XO_FILDd' data-ref="XO_FILDd" data-ref-filename="XO_FILDd">XO_FILDd</a>, <a class="enum" href="lj_target_x86.h.html#XOg_FILDd" title='XOg_FILDd' data-ref="XOg_FILDd" data-ref-filename="XOg_FILDd">XOg_FILDd</a>, <a class="enum" href="lj_target_x86.h.html#30" title='RID_ESP' data-ref="RID_ESP" data-ref-filename="RID_ESP">RID_ESP</a>, <a class="tu ref fn" href="lj_asm.c.html#ra_spill" title='ra_spill' data-use='c' data-ref="ra_spill" data-ref-filename="ra_spill">ra_spill</a>(<a class="local col4 ref" href="#664as" title='as' data-ref="664as" data-ref-filename="664as">as</a>, <a class="local col8 ref" href="#668iri" title='iri' data-ref="668iri" data-ref-filename="668iri">iri</a>));</td></tr>
<tr><th id="1935">1935</th><td>  } <b>else</b> {</td></tr>
<tr><th id="1936">1936</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col4 ref" href="#664as" title='as' data-ref="664as" data-ref-filename="664as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_FLDq" title='XO_FLDq' data-ref="XO_FLDq" data-ref-filename="XO_FLDq">XO_FLDq</a>, <a class="enum" href="lj_target_x86.h.html#XOg_FLDq" title='XOg_FLDq' data-ref="XOg_FLDq" data-ref-filename="XOg_FLDq">XOg_FLDq</a>, <a class="ref fn" href="#asm_fuseload" title='asm_fuseload' data-ref="asm_fuseload" data-ref-filename="asm_fuseload">asm_fuseload</a>(<a class="local col4 ref" href="#664as" title='as' data-ref="664as" data-ref-filename="664as">as</a>, <a class="local col5 ref" href="#665ref" title='ref' data-ref="665ref" data-ref-filename="665ref">ref</a>, <a class="macro" href="lj_target.h.html#65" title="((RegSet)0)" data-ref="_M/RSET_EMPTY">RSET_EMPTY</a>));</td></tr>
<tr><th id="1937">1937</th><td>  }</td></tr>
<tr><th id="1938">1938</th><td>}</td></tr>
<tr><th id="1939">1939</th><td></td></tr>
<tr><th id="1940">1940</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_fpmath" title='asm_fpmath' data-ref="asm_fpmath" data-ref-filename="asm_fpmath">asm_fpmath</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col9 decl" id="669as" title='as' data-type='ASMState *' data-ref="669as" data-ref-filename="669as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col0 decl" id="670ir" title='ir' data-type='IRIns *' data-ref="670ir" data-ref-filename="670ir">ir</dfn>)</td></tr>
<tr><th id="1941">1941</th><td>{</td></tr>
<tr><th id="1942">1942</th><td>  <a class="typedef" href="lj_ir.h.html#IRFPMathOp" title='IRFPMathOp' data-type='enum IRFPMathOp' data-ref="IRFPMathOp" data-ref-filename="IRFPMathOp">IRFPMathOp</a> <dfn class="local col1 decl" id="671fpm" title='fpm' data-type='IRFPMathOp' data-ref="671fpm" data-ref-filename="671fpm">fpm</dfn> = (<a class="typedef" href="lj_ir.h.html#IRFPMathOp" title='IRFPMathOp' data-type='enum IRFPMathOp' data-ref="IRFPMathOp" data-ref-filename="IRFPMathOp">IRFPMathOp</a>)<a class="local col0 ref" href="#670ir" title='ir' data-ref="670ir" data-ref-filename="670ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>;</td></tr>
<tr><th id="1943">1943</th><td>  <b>if</b> (<a class="local col1 ref" href="#671fpm" title='fpm' data-ref="671fpm" data-ref-filename="671fpm">fpm</a> == <a class="enum" href="lj_ir.h.html#186" title='IRFPM_SQRT' data-ref="IRFPM_SQRT" data-ref-filename="IRFPM_SQRT">IRFPM_SQRT</a>) {</td></tr>
<tr><th id="1944">1944</th><td>    <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col2 decl" id="672dest" title='dest' data-type='Reg' data-ref="672dest" data-ref-filename="672dest">dest</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col9 ref" href="#669as" title='as' data-ref="669as" data-ref-filename="669as">as</a>, <a class="local col0 ref" href="#670ir" title='ir' data-ref="670ir" data-ref-filename="670ir">ir</a>, <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>);</td></tr>
<tr><th id="1945">1945</th><td>    <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col3 decl" id="673left" title='left' data-type='Reg' data-ref="673left" data-ref-filename="673left">left</dfn> = <a class="ref fn" href="#asm_fuseload" title='asm_fuseload' data-ref="asm_fuseload" data-ref-filename="asm_fuseload">asm_fuseload</a>(<a class="local col9 ref" href="#669as" title='as' data-ref="669as" data-ref-filename="669as">as</a>, <a class="local col0 ref" href="#670ir" title='ir' data-ref="670ir" data-ref-filename="670ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>);</td></tr>
<tr><th id="1946">1946</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col9 ref" href="#669as" title='as' data-ref="669as" data-ref-filename="669as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_SQRTSD" title='XO_SQRTSD' data-ref="XO_SQRTSD" data-ref-filename="XO_SQRTSD">XO_SQRTSD</a>, <a class="local col2 ref" href="#672dest" title='dest' data-ref="672dest" data-ref-filename="672dest">dest</a>, <a class="local col3 ref" href="#673left" title='left' data-ref="673left" data-ref-filename="673left">left</a>);</td></tr>
<tr><th id="1947">1947</th><td>  } <b>else</b> <b>if</b> (<a class="local col1 ref" href="#671fpm" title='fpm' data-ref="671fpm" data-ref-filename="671fpm">fpm</a> &lt;= <a class="enum" href="lj_ir.h.html#186" title='IRFPM_TRUNC' data-ref="IRFPM_TRUNC" data-ref-filename="IRFPM_TRUNC">IRFPM_TRUNC</a>) {</td></tr>
<tr><th id="1948">1948</th><td>    <b>if</b> (<a class="local col9 ref" href="#669as" title='as' data-ref="669as" data-ref-filename="669as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::flags" title='ASMState::flags' data-use='r' data-ref="ASMState::flags" data-ref-filename="ASMState..flags">flags</a> &amp; <a class="macro" href="lj_jit.h.html#23" title="(0x00000010 &lt;&lt; 1)" data-ref="_M/JIT_F_SSE4_1">JIT_F_SSE4_1</a>) {  <i>/* SSE4.1 has a rounding instruction. */</i></td></tr>
<tr><th id="1949">1949</th><td>      <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col4 decl" id="674dest" title='dest' data-type='Reg' data-ref="674dest" data-ref-filename="674dest">dest</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col9 ref" href="#669as" title='as' data-ref="669as" data-ref-filename="669as">as</a>, <a class="local col0 ref" href="#670ir" title='ir' data-ref="670ir" data-ref-filename="670ir">ir</a>, <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>);</td></tr>
<tr><th id="1950">1950</th><td>      <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col5 decl" id="675left" title='left' data-type='Reg' data-ref="675left" data-ref-filename="675left">left</dfn> = <a class="ref fn" href="#asm_fuseload" title='asm_fuseload' data-ref="asm_fuseload" data-ref-filename="asm_fuseload">asm_fuseload</a>(<a class="local col9 ref" href="#669as" title='as' data-ref="669as" data-ref-filename="669as">as</a>, <a class="local col0 ref" href="#670ir" title='ir' data-ref="670ir" data-ref-filename="670ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>);</td></tr>
<tr><th id="1951">1951</th><td>      <i>/* ROUNDSD has a 4-byte opcode which doesn't fit in x86Op.</i></td></tr>
<tr><th id="1952">1952</th><td><i>      ** Let's pretend it's a 3-byte opcode, and compensate afterwards.</i></td></tr>
<tr><th id="1953">1953</th><td><i>      ** This is atrocious, but the alternatives are much worse.</i></td></tr>
<tr><th id="1954">1954</th><td><i>      */</i></td></tr>
<tr><th id="1955">1955</th><td>      <i>/* Round down/up/trunc == 1001/1010/1011. */</i></td></tr>
<tr><th id="1956">1956</th><td>      <a class="macro" href="lj_emit_x86.h.html#29" title="(*--as-&gt;mcp = (MCode)(0x09 + fpm))" data-ref="_M/emit_i8">emit_i8</a>(<a class="local col9 ref" href="#669as" title='as' data-ref="669as" data-ref-filename="669as">as</a>, <var>0x09</var> + <a class="local col1 ref" href="#671fpm" title='fpm' data-ref="671fpm" data-ref-filename="671fpm">fpm</a>);</td></tr>
<tr><th id="1957">1957</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col9 ref" href="#669as" title='as' data-ref="669as" data-ref-filename="669as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_ROUNDSD" title='XO_ROUNDSD' data-ref="XO_ROUNDSD" data-ref-filename="XO_ROUNDSD">XO_ROUNDSD</a>, <a class="local col4 ref" href="#674dest" title='dest' data-ref="674dest" data-ref-filename="674dest">dest</a>, <a class="local col5 ref" href="#675left" title='left' data-ref="675left" data-ref-filename="675left">left</a>);</td></tr>
<tr><th id="1958">1958</th><td>      <b>if</b> (<a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp; <a class="local col9 ref" href="#669as" title='as' data-ref="669as" data-ref-filename="669as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcp" title='ASMState::mcp' data-use='r' data-ref="ASMState::mcp" data-ref-filename="ASMState..mcp">mcp</a>[<var>1</var>] != (<a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a>)(<a class="enum" href="lj_target_x86.h.html#XO_ROUNDSD" title='XO_ROUNDSD' data-ref="XO_ROUNDSD" data-ref-filename="XO_ROUNDSD">XO_ROUNDSD</a> &gt;&gt; <var>16</var>)) {</td></tr>
<tr><th id="1959">1959</th><td>	<a class="local col9 ref" href="#669as" title='as' data-ref="669as" data-ref-filename="669as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcp" title='ASMState::mcp' data-use='r' data-ref="ASMState::mcp" data-ref-filename="ASMState..mcp">mcp</a>[<var>0</var>] = <a class="local col9 ref" href="#669as" title='as' data-ref="669as" data-ref-filename="669as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcp" title='ASMState::mcp' data-use='r' data-ref="ASMState::mcp" data-ref-filename="ASMState..mcp">mcp</a>[<var>1</var>]; <a class="local col9 ref" href="#669as" title='as' data-ref="669as" data-ref-filename="669as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcp" title='ASMState::mcp' data-use='r' data-ref="ASMState::mcp" data-ref-filename="ASMState..mcp">mcp</a>[<var>1</var>] = <var>0x0f</var>;  <i>/* Swap 0F and REX. */</i></td></tr>
<tr><th id="1960">1960</th><td>      }</td></tr>
<tr><th id="1961">1961</th><td>      *--<a class="local col9 ref" href="#669as" title='as' data-ref="669as" data-ref-filename="669as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcp" title='ASMState::mcp' data-use='w' data-ref="ASMState::mcp" data-ref-filename="ASMState..mcp">mcp</a> = <var>0x66</var>;  <i>/* 1st byte of ROUNDSD opcode. */</i></td></tr>
<tr><th id="1962">1962</th><td>    } <b>else</b> {  <i>/* Call helper functions for SSE2 variant. */</i></td></tr>
<tr><th id="1963">1963</th><td>      <i>/* The modified regs must match with the *.dasc implementation. */</i></td></tr>
<tr><th id="1964">1964</th><td>      <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col6 decl" id="676drop" title='drop' data-type='RegSet' data-ref="676drop" data-ref-filename="676drop">drop</dfn> = <a class="macro" href="lj_target.h.html#66" title="(((((RegSet)1) &lt;&lt; ((RID_XMM3+1)-(RID_XMM0)))-1) &lt;&lt; (RID_XMM0))" data-ref="_M/RSET_RANGE">RSET_RANGE</a>(<a class="enum" href="lj_target_x86.h.html#31" title='RID_XMM0' data-ref="RID_XMM0" data-ref-filename="RID_XMM0">RID_XMM0</a>, <a class="enum" href="lj_target_x86.h.html#31" title='RID_XMM3' data-ref="RID_XMM3" data-ref-filename="RID_XMM3">RID_XMM3</a>+<var>1</var>)|<a class="macro" href="lj_target.h.html#64" title="(((RegSet)1) &lt;&lt; (RID_EAX))" data-ref="_M/RID2RSET">RID2RSET</a>(<a class="enum" href="lj_target_x86.h.html#30" title='RID_EAX' data-ref="RID_EAX" data-ref-filename="RID_EAX">RID_EAX</a>);</td></tr>
<tr><th id="1965">1965</th><td>      <b>if</b> (<a class="macro" href="lj_target.h.html#28" title="(!((ir-&gt;r) &amp; 0x80))" data-ref="_M/ra_hasreg">ra_hasreg</a>(<a class="local col0 ref" href="#670ir" title='ir' data-ref="670ir" data-ref-filename="670ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>))</td></tr>
<tr><th id="1966">1966</th><td>	<a class="macro" href="lj_target.h.html#70" title="(drop &amp;= ~(((RegSet)1) &lt;&lt; (ir-&gt;r)))" data-ref="_M/rset_clear">rset_clear</a>(<a class="local col6 ref" href="#676drop" title='drop' data-ref="676drop" data-ref-filename="676drop">drop</a>, <a class="local col0 ref" href="#670ir" title='ir' data-ref="670ir" data-ref-filename="670ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>);  <i>/* Dest reg handled below. */</i></td></tr>
<tr><th id="1967">1967</th><td>      <a class="tu ref fn" href="lj_asm.c.html#ra_evictset" title='ra_evictset' data-use='c' data-ref="ra_evictset" data-ref-filename="ra_evictset">ra_evictset</a>(<a class="local col9 ref" href="#669as" title='as' data-ref="669as" data-ref-filename="669as">as</a>, <a class="local col6 ref" href="#676drop" title='drop' data-ref="676drop" data-ref-filename="676drop">drop</a>);</td></tr>
<tr><th id="1968">1968</th><td>      <a class="tu ref fn" href="lj_asm.c.html#ra_destreg" title='ra_destreg' data-use='c' data-ref="ra_destreg" data-ref-filename="ra_destreg">ra_destreg</a>(<a class="local col9 ref" href="#669as" title='as' data-ref="669as" data-ref-filename="669as">as</a>, <a class="local col0 ref" href="#670ir" title='ir' data-ref="670ir" data-ref-filename="670ir">ir</a>, <a class="enum" href="lj_target_x86.h.html#31" title='RID_XMM0' data-ref="RID_XMM0" data-ref-filename="RID_XMM0">RID_XMM0</a>);</td></tr>
<tr><th id="1969">1969</th><td>      <a class="macro" href="lj_emit_x86.h.html#519" title="emit_call_(as, (MCode *)(void *)(fpm == IRFPM_FLOOR ? lj_vm_floor_sse : fpm == IRFPM_CEIL ? lj_vm_ceil_sse : lj_vm_trunc_sse))" data-ref="_M/emit_call">emit_call</a>(<a class="local col9 ref" href="#669as" title='as' data-ref="669as" data-ref-filename="669as">as</a>, <a class="local col1 ref" href="#671fpm" title='fpm' data-ref="671fpm" data-ref-filename="671fpm">fpm</a> == <a class="enum" href="lj_ir.h.html#186" title='IRFPM_FLOOR' data-ref="IRFPM_FLOOR" data-ref-filename="IRFPM_FLOOR">IRFPM_FLOOR</a> ? <a class="ref fn" href="lj_vm.h.html#lj_vm_floor_sse" title='lj_vm_floor_sse' data-ref="lj_vm_floor_sse" data-ref-filename="lj_vm_floor_sse">lj_vm_floor_sse</a> :</td></tr>
<tr><th id="1970">1970</th><td>		    <a class="local col1 ref" href="#671fpm" title='fpm' data-ref="671fpm" data-ref-filename="671fpm">fpm</a> == <a class="enum" href="lj_ir.h.html#186" title='IRFPM_CEIL' data-ref="IRFPM_CEIL" data-ref-filename="IRFPM_CEIL">IRFPM_CEIL</a> ? <a class="ref fn" href="lj_vm.h.html#lj_vm_ceil_sse" title='lj_vm_ceil_sse' data-ref="lj_vm_ceil_sse" data-ref-filename="lj_vm_ceil_sse">lj_vm_ceil_sse</a> : <a class="ref fn" href="lj_vm.h.html#lj_vm_trunc_sse" title='lj_vm_trunc_sse' data-ref="lj_vm_trunc_sse" data-ref-filename="lj_vm_trunc_sse">lj_vm_trunc_sse</a>);</td></tr>
<tr><th id="1971">1971</th><td>      <a class="tu ref fn" href="lj_asm.c.html#ra_left" title='ra_left' data-use='c' data-ref="ra_left" data-ref-filename="ra_left">ra_left</a>(<a class="local col9 ref" href="#669as" title='as' data-ref="669as" data-ref-filename="669as">as</a>, <a class="enum" href="lj_target_x86.h.html#31" title='RID_XMM0' data-ref="RID_XMM0" data-ref-filename="RID_XMM0">RID_XMM0</a>, <a class="local col0 ref" href="#670ir" title='ir' data-ref="670ir" data-ref-filename="670ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>);</td></tr>
<tr><th id="1972">1972</th><td>    }</td></tr>
<tr><th id="1973">1973</th><td>  } <b>else</b> {</td></tr>
<tr><th id="1974">1974</th><td>    <a class="tu ref fn" href="lj_asm.c.html#asm_callid" title='asm_callid' data-use='c' data-ref="asm_callid" data-ref-filename="asm_callid">asm_callid</a>(<a class="local col9 ref" href="#669as" title='as' data-ref="669as" data-ref-filename="669as">as</a>, <a class="local col0 ref" href="#670ir" title='ir' data-ref="670ir" data-ref-filename="670ir">ir</a>, <a class="enum" href="lj_ircall.h.html#254" title='IRCALL_lj_vm_floor' data-ref="IRCALL_lj_vm_floor" data-ref-filename="IRCALL_lj_vm_floor">IRCALL_lj_vm_floor</a> + <a class="local col1 ref" href="#671fpm" title='fpm' data-ref="671fpm" data-ref-filename="671fpm">fpm</a>);</td></tr>
<tr><th id="1975">1975</th><td>  }</td></tr>
<tr><th id="1976">1976</th><td>}</td></tr>
<tr><th id="1977">1977</th><td></td></tr>
<tr><th id="1978">1978</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_ldexp" title='asm_ldexp' data-ref="asm_ldexp" data-ref-filename="asm_ldexp">asm_ldexp</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col7 decl" id="677as" title='as' data-type='ASMState *' data-ref="677as" data-ref-filename="677as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col8 decl" id="678ir" title='ir' data-type='IRIns *' data-ref="678ir" data-ref-filename="678ir">ir</dfn>)</td></tr>
<tr><th id="1979">1979</th><td>{</td></tr>
<tr><th id="1980">1980</th><td>  <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> <dfn class="local col9 decl" id="679ofs" title='ofs' data-type='int32_t' data-ref="679ofs" data-ref-filename="679ofs">ofs</dfn> = <a class="macro" href="lj_target_x86.h.html#152" title="(4 * (int32_t)(ir-&gt;s))" data-ref="_M/sps_scale">sps_scale</a>(<a class="local col8 ref" href="#678ir" title='ir' data-ref="678ir" data-ref-filename="678ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::s' data-ref="IRIns::(anonymous)::s" data-ref-filename="IRIns..(anonymous)..s">s</a>);  <i>/* Use spill slot or temp slots. */</i></td></tr>
<tr><th id="1981">1981</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col0 decl" id="680dest" title='dest' data-type='Reg' data-ref="680dest" data-ref-filename="680dest">dest</dfn> = <a class="local col8 ref" href="#678ir" title='ir' data-ref="678ir" data-ref-filename="678ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>;</td></tr>
<tr><th id="1982">1982</th><td>  <b>if</b> (<a class="macro" href="lj_target.h.html#28" title="(!((dest) &amp; 0x80))" data-ref="_M/ra_hasreg">ra_hasreg</a>(<a class="local col0 ref" href="#680dest" title='dest' data-ref="680dest" data-ref-filename="680dest">dest</a>)) {</td></tr>
<tr><th id="1983">1983</th><td>    <a class="macro" href="lj_asm.c.html#304" title="(as-&gt;freeset |= (((RegSet)1) &lt;&lt; ((dest))))" data-ref="_M/ra_free">ra_free</a>(<a class="local col7 ref" href="#677as" title='as' data-ref="677as" data-ref-filename="677as">as</a>, <a class="local col0 ref" href="#680dest" title='dest' data-ref="680dest" data-ref-filename="680dest">dest</a>);</td></tr>
<tr><th id="1984">1984</th><td>    <a class="macro" href="lj_asm.c.html#305" title="(as-&gt;modset |= (((RegSet)1) &lt;&lt; ((dest))))" data-ref="_M/ra_modified">ra_modified</a>(<a class="local col7 ref" href="#677as" title='as' data-ref="677as" data-ref-filename="677as">as</a>, <a class="local col0 ref" href="#680dest" title='dest' data-ref="680dest" data-ref-filename="680dest">dest</a>);</td></tr>
<tr><th id="1985">1985</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col7 ref" href="#677as" title='as' data-ref="677as" data-ref-filename="677as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOVSD" title='XO_MOVSD' data-ref="XO_MOVSD" data-ref-filename="XO_MOVSD">XO_MOVSD</a>, <a class="local col0 ref" href="#680dest" title='dest' data-ref="680dest" data-ref-filename="680dest">dest</a>, <a class="enum" href="lj_target_x86.h.html#30" title='RID_ESP' data-ref="RID_ESP" data-ref-filename="RID_ESP">RID_ESP</a>, <a class="local col9 ref" href="#679ofs" title='ofs' data-ref="679ofs" data-ref-filename="679ofs">ofs</a>);</td></tr>
<tr><th id="1986">1986</th><td>  }</td></tr>
<tr><th id="1987">1987</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col7 ref" href="#677as" title='as' data-ref="677as" data-ref-filename="677as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_FSTPq" title='XO_FSTPq' data-ref="XO_FSTPq" data-ref-filename="XO_FSTPq">XO_FSTPq</a>, <a class="enum" href="lj_target_x86.h.html#XOg_FSTPq" title='XOg_FSTPq' data-ref="XOg_FSTPq" data-ref-filename="XOg_FSTPq">XOg_FSTPq</a>, <a class="enum" href="lj_target_x86.h.html#30" title='RID_ESP' data-ref="RID_ESP" data-ref-filename="RID_ESP">RID_ESP</a>, <a class="local col9 ref" href="#679ofs" title='ofs' data-ref="679ofs" data-ref-filename="679ofs">ofs</a>);</td></tr>
<tr><th id="1988">1988</th><td>  <a class="macro" href="lj_emit_x86.h.html#33" title="(*(uint16_t *)(as-&gt;mcp-2) = (uint16_t)(XI_FPOP1), as-&gt;mcp -= 2)" data-ref="_M/emit_x87op">emit_x87op</a>(<a class="local col7 ref" href="#677as" title='as' data-ref="677as" data-ref-filename="677as">as</a>, <a class="enum" href="lj_target_x86.h.html#XI_FPOP1" title='XI_FPOP1' data-ref="XI_FPOP1" data-ref-filename="XI_FPOP1">XI_FPOP1</a>);</td></tr>
<tr><th id="1989">1989</th><td>  <a class="macro" href="lj_emit_x86.h.html#33" title="(*(uint16_t *)(as-&gt;mcp-2) = (uint16_t)(XI_FSCALE), as-&gt;mcp -= 2)" data-ref="_M/emit_x87op">emit_x87op</a>(<a class="local col7 ref" href="#677as" title='as' data-ref="677as" data-ref-filename="677as">as</a>, <a class="enum" href="lj_target_x86.h.html#XI_FSCALE" title='XI_FSCALE' data-ref="XI_FSCALE" data-ref-filename="XI_FSCALE">XI_FSCALE</a>);</td></tr>
<tr><th id="1990">1990</th><td>  <a class="ref fn" href="#asm_x87load" title='asm_x87load' data-ref="asm_x87load" data-ref-filename="asm_x87load">asm_x87load</a>(<a class="local col7 ref" href="#677as" title='as' data-ref="677as" data-ref-filename="677as">as</a>, <a class="local col8 ref" href="#678ir" title='ir' data-ref="678ir" data-ref-filename="678ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>);</td></tr>
<tr><th id="1991">1991</th><td>  <a class="ref fn" href="#asm_x87load" title='asm_x87load' data-ref="asm_x87load" data-ref-filename="asm_x87load">asm_x87load</a>(<a class="local col7 ref" href="#677as" title='as' data-ref="677as" data-ref-filename="677as">as</a>, <a class="local col8 ref" href="#678ir" title='ir' data-ref="678ir" data-ref-filename="678ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>);</td></tr>
<tr><th id="1992">1992</th><td>}</td></tr>
<tr><th id="1993">1993</th><td></td></tr>
<tr><th id="1994">1994</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_fppowi" title='asm_fppowi' data-ref="asm_fppowi" data-ref-filename="asm_fppowi">asm_fppowi</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col1 decl" id="681as" title='as' data-type='ASMState *' data-ref="681as" data-ref-filename="681as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col2 decl" id="682ir" title='ir' data-type='IRIns *' data-ref="682ir" data-ref-filename="682ir">ir</dfn>)</td></tr>
<tr><th id="1995">1995</th><td>{</td></tr>
<tr><th id="1996">1996</th><td>  <i>/* The modified regs must match with the *.dasc implementation. */</i></td></tr>
<tr><th id="1997">1997</th><td>  <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col3 decl" id="683drop" title='drop' data-type='RegSet' data-ref="683drop" data-ref-filename="683drop">drop</dfn> = <a class="macro" href="lj_target.h.html#66" title="(((((RegSet)1) &lt;&lt; ((RID_XMM1+1)-(RID_XMM0)))-1) &lt;&lt; (RID_XMM0))" data-ref="_M/RSET_RANGE">RSET_RANGE</a>(<a class="enum" href="lj_target_x86.h.html#31" title='RID_XMM0' data-ref="RID_XMM0" data-ref-filename="RID_XMM0">RID_XMM0</a>, <a class="enum" href="lj_target_x86.h.html#31" title='RID_XMM1' data-ref="RID_XMM1" data-ref-filename="RID_XMM1">RID_XMM1</a>+<var>1</var>)|<a class="macro" href="lj_target.h.html#64" title="(((RegSet)1) &lt;&lt; (RID_EAX))" data-ref="_M/RID2RSET">RID2RSET</a>(<a class="enum" href="lj_target_x86.h.html#30" title='RID_EAX' data-ref="RID_EAX" data-ref-filename="RID_EAX">RID_EAX</a>);</td></tr>
<tr><th id="1998">1998</th><td>  <b>if</b> (<a class="macro" href="lj_target.h.html#28" title="(!((ir-&gt;r) &amp; 0x80))" data-ref="_M/ra_hasreg">ra_hasreg</a>(<a class="local col2 ref" href="#682ir" title='ir' data-ref="682ir" data-ref-filename="682ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>))</td></tr>
<tr><th id="1999">1999</th><td>    <a class="macro" href="lj_target.h.html#70" title="(drop &amp;= ~(((RegSet)1) &lt;&lt; (ir-&gt;r)))" data-ref="_M/rset_clear">rset_clear</a>(<a class="local col3 ref" href="#683drop" title='drop' data-ref="683drop" data-ref-filename="683drop">drop</a>, <a class="local col2 ref" href="#682ir" title='ir' data-ref="682ir" data-ref-filename="682ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>);  <i>/* Dest reg handled below. */</i></td></tr>
<tr><th id="2000">2000</th><td>  <a class="tu ref fn" href="lj_asm.c.html#ra_evictset" title='ra_evictset' data-use='c' data-ref="ra_evictset" data-ref-filename="ra_evictset">ra_evictset</a>(<a class="local col1 ref" href="#681as" title='as' data-ref="681as" data-ref-filename="681as">as</a>, <a class="local col3 ref" href="#683drop" title='drop' data-ref="683drop" data-ref-filename="683drop">drop</a>);</td></tr>
<tr><th id="2001">2001</th><td>  <a class="tu ref fn" href="lj_asm.c.html#ra_destreg" title='ra_destreg' data-use='c' data-ref="ra_destreg" data-ref-filename="ra_destreg">ra_destreg</a>(<a class="local col1 ref" href="#681as" title='as' data-ref="681as" data-ref-filename="681as">as</a>, <a class="local col2 ref" href="#682ir" title='ir' data-ref="682ir" data-ref-filename="682ir">ir</a>, <a class="enum" href="lj_target_x86.h.html#31" title='RID_XMM0' data-ref="RID_XMM0" data-ref-filename="RID_XMM0">RID_XMM0</a>);</td></tr>
<tr><th id="2002">2002</th><td>  <a class="macro" href="lj_emit_x86.h.html#519" title="emit_call_(as, (MCode *)(void *)(lj_vm_powi_sse))" data-ref="_M/emit_call">emit_call</a>(<a class="local col1 ref" href="#681as" title='as' data-ref="681as" data-ref-filename="681as">as</a>, <a class="ref fn" href="lj_vm.h.html#lj_vm_powi_sse" title='lj_vm_powi_sse' data-ref="lj_vm_powi_sse" data-ref-filename="lj_vm_powi_sse">lj_vm_powi_sse</a>);</td></tr>
<tr><th id="2003">2003</th><td>  <a class="tu ref fn" href="lj_asm.c.html#ra_left" title='ra_left' data-use='c' data-ref="ra_left" data-ref-filename="ra_left">ra_left</a>(<a class="local col1 ref" href="#681as" title='as' data-ref="681as" data-ref-filename="681as">as</a>, <a class="enum" href="lj_target_x86.h.html#31" title='RID_XMM0' data-ref="RID_XMM0" data-ref-filename="RID_XMM0">RID_XMM0</a>, <a class="local col2 ref" href="#682ir" title='ir' data-ref="682ir" data-ref-filename="682ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>);</td></tr>
<tr><th id="2004">2004</th><td>  <a class="tu ref fn" href="lj_asm.c.html#ra_left" title='ra_left' data-use='c' data-ref="ra_left" data-ref-filename="ra_left">ra_left</a>(<a class="local col1 ref" href="#681as" title='as' data-ref="681as" data-ref-filename="681as">as</a>, <a class="enum" href="lj_target_x86.h.html#30" title='RID_EAX' data-ref="RID_EAX" data-ref-filename="RID_EAX">RID_EAX</a>, <a class="local col2 ref" href="#682ir" title='ir' data-ref="682ir" data-ref-filename="682ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>);</td></tr>
<tr><th id="2005">2005</th><td>}</td></tr>
<tr><th id="2006">2006</th><td></td></tr>
<tr><th id="2007">2007</th><td><em>static</em> <em>int</em> <dfn class="decl def fn" id="asm_swapops" title='asm_swapops' data-ref="asm_swapops" data-ref-filename="asm_swapops">asm_swapops</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col4 decl" id="684as" title='as' data-type='ASMState *' data-ref="684as" data-ref-filename="684as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col5 decl" id="685ir" title='ir' data-type='IRIns *' data-ref="685ir" data-ref-filename="685ir">ir</dfn>)</td></tr>
<tr><th id="2008">2008</th><td>{</td></tr>
<tr><th id="2009">2009</th><td>  <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col6 decl" id="686irl" title='irl' data-type='IRIns *' data-ref="686irl" data-ref-filename="686irl">irl</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ir-&gt;op1)])" data-ref="_M/IR">IR</a>(<a class="local col5 ref" href="#685ir" title='ir' data-ref="685ir" data-ref-filename="685ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>);</td></tr>
<tr><th id="2010">2010</th><td>  <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col7 decl" id="687irr" title='irr' data-type='IRIns *' data-ref="687irr" data-ref-filename="687irr">irr</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ir-&gt;op2)])" data-ref="_M/IR">IR</a>(<a class="local col5 ref" href="#685ir" title='ir' data-ref="685ir" data-ref-filename="685ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>);</td></tr>
<tr><th id="2011">2011</th><td>  <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(ra_noreg(irr-&gt;r), <q>"bad usage"</q>);</td></tr>
<tr><th id="2012">2012</th><td>  <b>if</b> (!<a class="macro" href="lj_ir.h.html#288" title="((lj_ir_mode[ir-&gt;o]) &amp; 0x10)" data-ref="_M/irm_iscomm">irm_iscomm</a>(<a class="ref" href="lj_ir.h.html#lj_ir_mode" title='lj_ir_mode' data-ref="lj_ir_mode" data-ref-filename="lj_ir_mode">lj_ir_mode</a>[<a class="local col5 ref" href="#685ir" title='ir' data-ref="685ir" data-ref-filename="685ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a>]))</td></tr>
<tr><th id="2013">2013</th><td>    <b>return</b> <var>0</var>;  <i>/* Can't swap non-commutative operations. */</i></td></tr>
<tr><th id="2014">2014</th><td>  <b>if</b> (<a class="macro" href="lj_ir.h.html#470" title="((ir-&gt;op2) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col5 ref" href="#685ir" title='ir' data-ref="685ir" data-ref-filename="685ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>))</td></tr>
<tr><th id="2015">2015</th><td>    <b>return</b> <var>0</var>;  <i>/* Don't swap constants to the left. */</i></td></tr>
<tr><th id="2016">2016</th><td>  <b>if</b> (<a class="macro" href="lj_target.h.html#28" title="(!((irl-&gt;r) &amp; 0x80))" data-ref="_M/ra_hasreg">ra_hasreg</a>(<a class="local col6 ref" href="#686irl" title='irl' data-ref="686irl" data-ref-filename="686irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>))</td></tr>
<tr><th id="2017">2017</th><td>    <b>return</b> <var>1</var>;  <i>/* Swap if left already has a register. */</i></td></tr>
<tr><th id="2018">2018</th><td>  <b>if</b> (<a class="macro" href="lj_target.h.html#34" title="(((Reg)(((ir-&gt;r)^(irr-&gt;r)) &amp; 0x7f)) == 0)" data-ref="_M/ra_samehint">ra_samehint</a>(<a class="local col5 ref" href="#685ir" title='ir' data-ref="685ir" data-ref-filename="685ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>, <a class="local col7 ref" href="#687irr" title='irr' data-ref="687irr" data-ref-filename="687irr">irr</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>))</td></tr>
<tr><th id="2019">2019</th><td>    <b>return</b> <var>1</var>;  <i>/* Swap if dest and right have matching hints. */</i></td></tr>
<tr><th id="2020">2020</th><td>  <b>if</b> (<a class="local col4 ref" href="#684as" title='as' data-ref="684as" data-ref-filename="684as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::curins" title='ASMState::curins' data-use='r' data-ref="ASMState::curins" data-ref-filename="ASMState..curins">curins</a> &gt; <a class="local col4 ref" href="#684as" title='as' data-ref="684as" data-ref-filename="684as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::loopref" title='ASMState::loopref' data-use='r' data-ref="ASMState::loopref" data-ref-filename="ASMState..loopref">loopref</a>) {  <i>/* In variant part? */</i></td></tr>
<tr><th id="2021">2021</th><td>    <b>if</b> (<a class="local col5 ref" href="#685ir" title='ir' data-ref="685ir" data-ref-filename="685ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a> &lt; <a class="local col4 ref" href="#684as" title='as' data-ref="684as" data-ref-filename="684as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::loopref" title='ASMState::loopref' data-use='r' data-ref="ASMState::loopref" data-ref-filename="ASMState..loopref">loopref</a> &amp;&amp; !<a class="macro" href="lj_ir.h.html#433" title="((irr-&gt;t).irt &amp; IRT_ISPHI)" data-ref="_M/irt_isphi">irt_isphi</a>(<a class="local col7 ref" href="#687irr" title='irr' data-ref="687irr" data-ref-filename="687irr">irr</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>))</td></tr>
<tr><th id="2022">2022</th><td>      <b>return</b> <var>0</var>;  <i>/* Keep invariants on the right. */</i></td></tr>
<tr><th id="2023">2023</th><td>    <b>if</b> (<a class="local col5 ref" href="#685ir" title='ir' data-ref="685ir" data-ref-filename="685ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a> &lt; <a class="local col4 ref" href="#684as" title='as' data-ref="684as" data-ref-filename="684as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::loopref" title='ASMState::loopref' data-use='r' data-ref="ASMState::loopref" data-ref-filename="ASMState..loopref">loopref</a> &amp;&amp; !<a class="macro" href="lj_ir.h.html#433" title="((irl-&gt;t).irt &amp; IRT_ISPHI)" data-ref="_M/irt_isphi">irt_isphi</a>(<a class="local col6 ref" href="#686irl" title='irl' data-ref="686irl" data-ref-filename="686irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>))</td></tr>
<tr><th id="2024">2024</th><td>      <b>return</b> <var>1</var>;  <i>/* Swap invariants to the right. */</i></td></tr>
<tr><th id="2025">2025</th><td>  }</td></tr>
<tr><th id="2026">2026</th><td>  <b>if</b> (<a class="macro" href="lj_asm.c.html#123" title="((irl-&gt;o) == IR_ALOAD || (irl-&gt;o) == IR_HLOAD || (irl-&gt;o) == IR_ULOAD || (irl-&gt;o) == IR_FLOAD || (irl-&gt;o) == IR_XLOAD || (irl-&gt;o) == IR_SLOAD || (irl-&gt;o) == IR_VLOAD)" data-ref="_M/opisfusableload">opisfusableload</a>(<a class="local col6 ref" href="#686irl" title='irl' data-ref="686irl" data-ref-filename="686irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a>))</td></tr>
<tr><th id="2027">2027</th><td>    <b>return</b> <var>1</var>;  <i>/* Swap fusable loads to the right. */</i></td></tr>
<tr><th id="2028">2028</th><td>  <b>return</b> <var>0</var>;  <i>/* Otherwise don't swap. */</i></td></tr>
<tr><th id="2029">2029</th><td>}</td></tr>
<tr><th id="2030">2030</th><td></td></tr>
<tr><th id="2031">2031</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_fparith" title='asm_fparith' data-ref="asm_fparith" data-ref-filename="asm_fparith">asm_fparith</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col8 decl" id="688as" title='as' data-type='ASMState *' data-ref="688as" data-ref-filename="688as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col9 decl" id="689ir" title='ir' data-type='IRIns *' data-ref="689ir" data-ref-filename="689ir">ir</dfn>, <a class="typedef" href="lj_target_x86.h.html#x86Op" title='x86Op' data-type='enum x86Op' data-ref="x86Op" data-ref-filename="x86Op">x86Op</a> <dfn class="local col0 decl" id="690xo" title='xo' data-type='x86Op' data-ref="690xo" data-ref-filename="690xo">xo</dfn>)</td></tr>
<tr><th id="2032">2032</th><td>{</td></tr>
<tr><th id="2033">2033</th><td>  <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col1 decl" id="691lref" title='lref' data-type='IRRef' data-ref="691lref" data-ref-filename="691lref">lref</dfn> = <a class="local col9 ref" href="#689ir" title='ir' data-ref="689ir" data-ref-filename="689ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>;</td></tr>
<tr><th id="2034">2034</th><td>  <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col2 decl" id="692rref" title='rref' data-type='IRRef' data-ref="692rref" data-ref-filename="692rref">rref</dfn> = <a class="local col9 ref" href="#689ir" title='ir' data-ref="689ir" data-ref-filename="689ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>;</td></tr>
<tr><th id="2035">2035</th><td>  <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col3 decl" id="693allow" title='allow' data-type='RegSet' data-ref="693allow" data-ref-filename="693allow">allow</dfn> = <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>;</td></tr>
<tr><th id="2036">2036</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col4 decl" id="694dest" title='dest' data-type='Reg' data-ref="694dest" data-ref-filename="694dest">dest</dfn>;</td></tr>
<tr><th id="2037">2037</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col5 decl" id="695right" title='right' data-type='Reg' data-ref="695right" data-ref-filename="695right">right</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(rref)])" data-ref="_M/IR">IR</a>(<a class="local col2 ref" href="#692rref" title='rref' data-ref="692rref" data-ref-filename="692rref">rref</a>)-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>;</td></tr>
<tr><th id="2038">2038</th><td>  <b>if</b> (<a class="macro" href="lj_target.h.html#28" title="(!((right) &amp; 0x80))" data-ref="_M/ra_hasreg">ra_hasreg</a>(<a class="local col5 ref" href="#695right" title='right' data-ref="695right" data-ref-filename="695right">right</a>)) {</td></tr>
<tr><th id="2039">2039</th><td>    <a class="macro" href="lj_target.h.html#70" title="(allow &amp;= ~(((RegSet)1) &lt;&lt; (right)))" data-ref="_M/rset_clear">rset_clear</a>(<a class="local col3 ref" href="#693allow" title='allow' data-ref="693allow" data-ref-filename="693allow">allow</a>, <a class="local col5 ref" href="#695right" title='right' data-ref="695right" data-ref-filename="695right">right</a>);</td></tr>
<tr><th id="2040">2040</th><td>    <a class="macro" href="lj_asm.c.html#307" title="(as-&gt;weakset &amp;= ~(((RegSet)1) &lt;&lt; ((right))))" data-ref="_M/ra_noweak">ra_noweak</a>(<a class="local col8 ref" href="#688as" title='as' data-ref="688as" data-ref-filename="688as">as</a>, <a class="local col5 ref" href="#695right" title='right' data-ref="695right" data-ref-filename="695right">right</a>);</td></tr>
<tr><th id="2041">2041</th><td>  }</td></tr>
<tr><th id="2042">2042</th><td>  <a class="local col4 ref" href="#694dest" title='dest' data-ref="694dest" data-ref-filename="694dest">dest</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col8 ref" href="#688as" title='as' data-ref="688as" data-ref-filename="688as">as</a>, <a class="local col9 ref" href="#689ir" title='ir' data-ref="689ir" data-ref-filename="689ir">ir</a>, <a class="local col3 ref" href="#693allow" title='allow' data-ref="693allow" data-ref-filename="693allow">allow</a>);</td></tr>
<tr><th id="2043">2043</th><td>  <b>if</b> (<a class="local col1 ref" href="#691lref" title='lref' data-ref="691lref" data-ref-filename="691lref">lref</a> == <a class="local col2 ref" href="#692rref" title='rref' data-ref="692rref" data-ref-filename="692rref">rref</a>) {</td></tr>
<tr><th id="2044">2044</th><td>    <a class="local col5 ref" href="#695right" title='right' data-ref="695right" data-ref-filename="695right">right</a> = <a class="local col4 ref" href="#694dest" title='dest' data-ref="694dest" data-ref-filename="694dest">dest</a>;</td></tr>
<tr><th id="2045">2045</th><td>  } <b>else</b> <b>if</b> (<a class="macro" href="lj_target.h.html#27" title="((right) &amp; 0x80)" data-ref="_M/ra_noreg">ra_noreg</a>(<a class="local col5 ref" href="#695right" title='right' data-ref="695right" data-ref-filename="695right">right</a>)) {</td></tr>
<tr><th id="2046">2046</th><td>    <b>if</b> (<a class="ref fn" href="#asm_swapops" title='asm_swapops' data-ref="asm_swapops" data-ref-filename="asm_swapops">asm_swapops</a>(<a class="local col8 ref" href="#688as" title='as' data-ref="688as" data-ref-filename="688as">as</a>, <a class="local col9 ref" href="#689ir" title='ir' data-ref="689ir" data-ref-filename="689ir">ir</a>)) {</td></tr>
<tr><th id="2047">2047</th><td>      <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col6 decl" id="696tmp" title='tmp' data-type='IRRef' data-ref="696tmp" data-ref-filename="696tmp">tmp</dfn> = <a class="local col1 ref" href="#691lref" title='lref' data-ref="691lref" data-ref-filename="691lref">lref</a>; <a class="local col1 ref" href="#691lref" title='lref' data-ref="691lref" data-ref-filename="691lref">lref</a> = <a class="local col2 ref" href="#692rref" title='rref' data-ref="692rref" data-ref-filename="692rref">rref</a>; <a class="local col2 ref" href="#692rref" title='rref' data-ref="692rref" data-ref-filename="692rref">rref</a> = <a class="local col6 ref" href="#696tmp" title='tmp' data-ref="696tmp" data-ref-filename="696tmp">tmp</a>;</td></tr>
<tr><th id="2048">2048</th><td>    }</td></tr>
<tr><th id="2049">2049</th><td>    <a class="local col5 ref" href="#695right" title='right' data-ref="695right" data-ref-filename="695right">right</a> = <a class="ref fn" href="#asm_fuseload" title='asm_fuseload' data-ref="asm_fuseload" data-ref-filename="asm_fuseload">asm_fuseload</a>(<a class="local col8 ref" href="#688as" title='as' data-ref="688as" data-ref-filename="688as">as</a>, <a class="local col2 ref" href="#692rref" title='rref' data-ref="692rref" data-ref-filename="692rref">rref</a>, <a class="macro" href="lj_target.h.html#70" title="(allow &amp;= ~(((RegSet)1) &lt;&lt; (dest)))" data-ref="_M/rset_clear">rset_clear</a>(<a class="local col3 ref" href="#693allow" title='allow' data-ref="693allow" data-ref-filename="693allow">allow</a>, <a class="local col4 ref" href="#694dest" title='dest' data-ref="694dest" data-ref-filename="694dest">dest</a>));</td></tr>
<tr><th id="2050">2050</th><td>  }</td></tr>
<tr><th id="2051">2051</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col8 ref" href="#688as" title='as' data-ref="688as" data-ref-filename="688as">as</a>, <a class="local col0 ref" href="#690xo" title='xo' data-ref="690xo" data-ref-filename="690xo">xo</a>, <a class="local col4 ref" href="#694dest" title='dest' data-ref="694dest" data-ref-filename="694dest">dest</a>, <a class="local col5 ref" href="#695right" title='right' data-ref="695right" data-ref-filename="695right">right</a>);</td></tr>
<tr><th id="2052">2052</th><td>  <a class="tu ref fn" href="lj_asm.c.html#ra_left" title='ra_left' data-use='c' data-ref="ra_left" data-ref-filename="ra_left">ra_left</a>(<a class="local col8 ref" href="#688as" title='as' data-ref="688as" data-ref-filename="688as">as</a>, <a class="local col4 ref" href="#694dest" title='dest' data-ref="694dest" data-ref-filename="694dest">dest</a>, <a class="local col1 ref" href="#691lref" title='lref' data-ref="691lref" data-ref-filename="691lref">lref</a>);</td></tr>
<tr><th id="2053">2053</th><td>}</td></tr>
<tr><th id="2054">2054</th><td></td></tr>
<tr><th id="2055">2055</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_intarith" title='asm_intarith' data-ref="asm_intarith" data-ref-filename="asm_intarith">asm_intarith</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col7 decl" id="697as" title='as' data-type='ASMState *' data-ref="697as" data-ref-filename="697as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col8 decl" id="698ir" title='ir' data-type='IRIns *' data-ref="698ir" data-ref-filename="698ir">ir</dfn>, <a class="typedef" href="lj_target_x86.h.html#x86Arith" title='x86Arith' data-type='enum x86Arith' data-ref="x86Arith" data-ref-filename="x86Arith">x86Arith</a> <dfn class="local col9 decl" id="699xa" title='xa' data-type='x86Arith' data-ref="699xa" data-ref-filename="699xa">xa</dfn>)</td></tr>
<tr><th id="2056">2056</th><td>{</td></tr>
<tr><th id="2057">2057</th><td>  <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col0 decl" id="700lref" title='lref' data-type='IRRef' data-ref="700lref" data-ref-filename="700lref">lref</dfn> = <a class="local col8 ref" href="#698ir" title='ir' data-ref="698ir" data-ref-filename="698ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>;</td></tr>
<tr><th id="2058">2058</th><td>  <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col1 decl" id="701rref" title='rref' data-type='IRRef' data-ref="701rref" data-ref-filename="701rref">rref</dfn> = <a class="local col8 ref" href="#698ir" title='ir' data-ref="698ir" data-ref-filename="698ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>;</td></tr>
<tr><th id="2059">2059</th><td>  <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col2 decl" id="702allow" title='allow' data-type='RegSet' data-ref="702allow" data-ref-filename="702allow">allow</dfn> = <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>;</td></tr>
<tr><th id="2060">2060</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col3 decl" id="703dest" title='dest' data-type='Reg' data-ref="703dest" data-ref-filename="703dest">dest</dfn>, <dfn class="local col4 decl" id="704right" title='right' data-type='Reg' data-ref="704right" data-ref-filename="704right">right</dfn>;</td></tr>
<tr><th id="2061">2061</th><td>  <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> <dfn class="local col5 decl" id="705k" title='k' data-type='int32_t' data-ref="705k" data-ref-filename="705k">k</dfn> = <var>0</var>;</td></tr>
<tr><th id="2062">2062</th><td>  <b>if</b> (<a class="local col7 ref" href="#697as" title='as' data-ref="697as" data-ref-filename="697as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::flagmcp" title='ASMState::flagmcp' data-use='r' data-ref="ASMState::flagmcp" data-ref-filename="ASMState..flagmcp">flagmcp</a> == <a class="local col7 ref" href="#697as" title='as' data-ref="697as" data-ref-filename="697as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcp" title='ASMState::mcp' data-use='r' data-ref="ASMState::mcp" data-ref-filename="ASMState..mcp">mcp</a>) {  <i>/* Drop test r,r instruction. */</i></td></tr>
<tr><th id="2063">2063</th><td>    <a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *<dfn class="local col6 decl" id="706p" title='p' data-type='MCode *' data-ref="706p" data-ref-filename="706p">p</dfn> = <a class="local col7 ref" href="#697as" title='as' data-ref="697as" data-ref-filename="697as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcp" title='ASMState::mcp' data-use='r' data-ref="ASMState::mcp" data-ref-filename="ASMState..mcp">mcp</a> + ((<a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp; *<a class="local col7 ref" href="#697as" title='as' data-ref="697as" data-ref-filename="697as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcp" title='ASMState::mcp' data-use='r' data-ref="ASMState::mcp" data-ref-filename="ASMState..mcp">mcp</a> &lt; <a class="enum" href="lj_target_x86.h.html#XI_TESTb" title='XI_TESTb' data-ref="XI_TESTb" data-ref-filename="XI_TESTb">XI_TESTb</a>) ? <var>3</var> : <var>2</var>);</td></tr>
<tr><th id="2064">2064</th><td>    <a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *<dfn class="local col7 decl" id="707q" title='q' data-type='MCode *' data-ref="707q" data-ref-filename="707q">q</dfn> = <a class="local col6 ref" href="#706p" title='p' data-ref="706p" data-ref-filename="706p">p</a>[<var>0</var>] == <var>0x0f</var> ? <a class="local col6 ref" href="#706p" title='p' data-ref="706p" data-ref-filename="706p">p</a>+<var>1</var> : <a class="local col6 ref" href="#706p" title='p' data-ref="706p" data-ref-filename="706p">p</a>;</td></tr>
<tr><th id="2065">2065</th><td>    <b>if</b> ((*<a class="local col7 ref" href="#707q" title='q' data-ref="707q" data-ref-filename="707q">q</a> &amp; <var>15</var>) &lt; <var>14</var>) {</td></tr>
<tr><th id="2066">2066</th><td>      <b>if</b> ((*<a class="local col7 ref" href="#707q" title='q' data-ref="707q" data-ref-filename="707q">q</a> &amp; <var>15</var>) &gt;= <var>12</var>) *<a class="local col7 ref" href="#707q" title='q' data-ref="707q" data-ref-filename="707q">q</a> -= <var>4</var>;  <i>/* L &lt;-&gt;S, NL &lt;-&gt; NS */</i></td></tr>
<tr><th id="2067">2067</th><td>      <a class="local col7 ref" href="#697as" title='as' data-ref="697as" data-ref-filename="697as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::flagmcp" title='ASMState::flagmcp' data-use='w' data-ref="ASMState::flagmcp" data-ref-filename="ASMState..flagmcp">flagmcp</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="2068">2068</th><td>      <a class="local col7 ref" href="#697as" title='as' data-ref="697as" data-ref-filename="697as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcp" title='ASMState::mcp' data-use='w' data-ref="ASMState::mcp" data-ref-filename="ASMState..mcp">mcp</a> = <a class="local col6 ref" href="#706p" title='p' data-ref="706p" data-ref-filename="706p">p</a>;</td></tr>
<tr><th id="2069">2069</th><td>    }  <i>/* else: cannot transform LE/NLE to cc without use of OF. */</i></td></tr>
<tr><th id="2070">2070</th><td>  }</td></tr>
<tr><th id="2071">2071</th><td>  <a class="local col4 ref" href="#704right" title='right' data-ref="704right" data-ref-filename="704right">right</a> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(rref)])" data-ref="_M/IR">IR</a>(<a class="local col1 ref" href="#701rref" title='rref' data-ref="701rref" data-ref-filename="701rref">rref</a>)-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>;</td></tr>
<tr><th id="2072">2072</th><td>  <b>if</b> (<a class="macro" href="lj_target.h.html#28" title="(!((right) &amp; 0x80))" data-ref="_M/ra_hasreg">ra_hasreg</a>(<a class="local col4 ref" href="#704right" title='right' data-ref="704right" data-ref-filename="704right">right</a>)) {</td></tr>
<tr><th id="2073">2073</th><td>    <a class="macro" href="lj_target.h.html#70" title="(allow &amp;= ~(((RegSet)1) &lt;&lt; (right)))" data-ref="_M/rset_clear">rset_clear</a>(<a class="local col2 ref" href="#702allow" title='allow' data-ref="702allow" data-ref-filename="702allow">allow</a>, <a class="local col4 ref" href="#704right" title='right' data-ref="704right" data-ref-filename="704right">right</a>);</td></tr>
<tr><th id="2074">2074</th><td>    <a class="macro" href="lj_asm.c.html#307" title="(as-&gt;weakset &amp;= ~(((RegSet)1) &lt;&lt; ((right))))" data-ref="_M/ra_noweak">ra_noweak</a>(<a class="local col7 ref" href="#697as" title='as' data-ref="697as" data-ref-filename="697as">as</a>, <a class="local col4 ref" href="#704right" title='right' data-ref="704right" data-ref-filename="704right">right</a>);</td></tr>
<tr><th id="2075">2075</th><td>  }</td></tr>
<tr><th id="2076">2076</th><td>  <a class="local col3 ref" href="#703dest" title='dest' data-ref="703dest" data-ref-filename="703dest">dest</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col7 ref" href="#697as" title='as' data-ref="697as" data-ref-filename="697as">as</a>, <a class="local col8 ref" href="#698ir" title='ir' data-ref="698ir" data-ref-filename="698ir">ir</a>, <a class="local col2 ref" href="#702allow" title='allow' data-ref="702allow" data-ref-filename="702allow">allow</a>);</td></tr>
<tr><th id="2077">2077</th><td>  <b>if</b> (<a class="local col0 ref" href="#700lref" title='lref' data-ref="700lref" data-ref-filename="700lref">lref</a> == <a class="local col1 ref" href="#701rref" title='rref' data-ref="701rref" data-ref-filename="701rref">rref</a>) {</td></tr>
<tr><th id="2078">2078</th><td>    <a class="local col4 ref" href="#704right" title='right' data-ref="704right" data-ref-filename="704right">right</a> = <a class="local col3 ref" href="#703dest" title='dest' data-ref="703dest" data-ref-filename="703dest">dest</a>;</td></tr>
<tr><th id="2079">2079</th><td>  } <b>else</b> <b>if</b> (<a class="macro" href="lj_target.h.html#27" title="((right) &amp; 0x80)" data-ref="_M/ra_noreg">ra_noreg</a>(<a class="local col4 ref" href="#704right" title='right' data-ref="704right" data-ref-filename="704right">right</a>) &amp;&amp; !<a class="ref fn" href="#asm_isk32" title='asm_isk32' data-ref="asm_isk32" data-ref-filename="asm_isk32">asm_isk32</a>(<a class="local col7 ref" href="#697as" title='as' data-ref="697as" data-ref-filename="697as">as</a>, <a class="local col1 ref" href="#701rref" title='rref' data-ref="701rref" data-ref-filename="701rref">rref</a>, &amp;<a class="local col5 ref" href="#705k" title='k' data-ref="705k" data-ref-filename="705k">k</a>)) {</td></tr>
<tr><th id="2080">2080</th><td>    <b>if</b> (<a class="ref fn" href="#asm_swapops" title='asm_swapops' data-ref="asm_swapops" data-ref-filename="asm_swapops">asm_swapops</a>(<a class="local col7 ref" href="#697as" title='as' data-ref="697as" data-ref-filename="697as">as</a>, <a class="local col8 ref" href="#698ir" title='ir' data-ref="698ir" data-ref-filename="698ir">ir</a>)) {</td></tr>
<tr><th id="2081">2081</th><td>      <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col8 decl" id="708tmp" title='tmp' data-type='IRRef' data-ref="708tmp" data-ref-filename="708tmp">tmp</dfn> = <a class="local col0 ref" href="#700lref" title='lref' data-ref="700lref" data-ref-filename="700lref">lref</a>; <a class="local col0 ref" href="#700lref" title='lref' data-ref="700lref" data-ref-filename="700lref">lref</a> = <a class="local col1 ref" href="#701rref" title='rref' data-ref="701rref" data-ref-filename="701rref">rref</a>; <a class="local col1 ref" href="#701rref" title='rref' data-ref="701rref" data-ref-filename="701rref">rref</a> = <a class="local col8 ref" href="#708tmp" title='tmp' data-ref="708tmp" data-ref-filename="708tmp">tmp</a>;</td></tr>
<tr><th id="2082">2082</th><td>    }</td></tr>
<tr><th id="2083">2083</th><td>    <a class="local col4 ref" href="#704right" title='right' data-ref="704right" data-ref-filename="704right">right</a> = <a class="ref fn" href="#asm_fuseloadm" title='asm_fuseloadm' data-ref="asm_fuseloadm" data-ref-filename="asm_fuseloadm">asm_fuseloadm</a>(<a class="local col7 ref" href="#697as" title='as' data-ref="697as" data-ref-filename="697as">as</a>, <a class="local col1 ref" href="#701rref" title='rref' data-ref="701rref" data-ref-filename="701rref">rref</a>, <a class="macro" href="lj_target.h.html#70" title="(allow &amp;= ~(((RegSet)1) &lt;&lt; (dest)))" data-ref="_M/rset_clear">rset_clear</a>(<a class="local col2 ref" href="#702allow" title='allow' data-ref="702allow" data-ref-filename="702allow">allow</a>, <a class="local col3 ref" href="#703dest" title='dest' data-ref="703dest" data-ref-filename="703dest">dest</a>), <a class="macro" href="lj_ir.h.html#394" title="((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)((ir-&gt;t).irt &amp; IRT_TYPE))) &amp; 1)" data-ref="_M/irt_is64">irt_is64</a>(<a class="local col8 ref" href="#698ir" title='ir' data-ref="698ir" data-ref-filename="698ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>));</td></tr>
<tr><th id="2084">2084</th><td>  }</td></tr>
<tr><th id="2085">2085</th><td>  <b>if</b> (<a class="macro" href="lj_ir.h.html#429" title="((ir-&gt;t).irt &amp; IRT_GUARD)" data-ref="_M/irt_isguard">irt_isguard</a>(<a class="local col8 ref" href="#698ir" title='ir' data-ref="698ir" data-ref-filename="698ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>))  <i>/* For IR_ADDOV etc. */</i></td></tr>
<tr><th id="2086">2086</th><td>    <a class="ref fn" href="#asm_guardcc" title='asm_guardcc' data-ref="asm_guardcc" data-ref-filename="asm_guardcc">asm_guardcc</a>(<a class="local col7 ref" href="#697as" title='as' data-ref="697as" data-ref-filename="697as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_O" title='CC_O' data-ref="CC_O" data-ref-filename="CC_O">CC_O</a>);</td></tr>
<tr><th id="2087">2087</th><td>  <b>if</b> (<a class="local col9 ref" href="#699xa" title='xa' data-ref="699xa" data-ref-filename="699xa">xa</a> != <a class="enum" href="lj_target_x86.h.html#XOg_X_IMUL" title='XOg_X_IMUL' data-ref="XOg_X_IMUL" data-ref-filename="XOg_X_IMUL">XOg_X_IMUL</a>) {</td></tr>
<tr><th id="2088">2088</th><td>    <b>if</b> (<a class="macro" href="lj_target.h.html#28" title="(!((right) &amp; 0x80))" data-ref="_M/ra_hasreg">ra_hasreg</a>(<a class="local col4 ref" href="#704right" title='right' data-ref="704right" data-ref-filename="704right">right</a>))</td></tr>
<tr><th id="2089">2089</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col7 ref" href="#697as" title='as' data-ref="697as" data-ref-filename="697as">as</a>, <a class="macro" href="lj_target_x86.h.html#328" title="((x86Op)(0x030000fe + ((xa)&lt;&lt;27)))" data-ref="_M/XO_ARITH">XO_ARITH</a>(<a class="local col9 ref" href="#699xa" title='xa' data-ref="699xa" data-ref-filename="699xa">xa</a>), <a class="macro" href="lj_emit_x86.h.html#525" title="((dest) + (((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)(((ir)-&gt;t).irt &amp; IRT_TYPE))) &amp; 1) ? (0x200|0x080000) : 0))" data-ref="_M/REX_64IR">REX_64IR</a>(<a class="local col8 ref" href="#698ir" title='ir' data-ref="698ir" data-ref-filename="698ir">ir</a>, <a class="local col3 ref" href="#703dest" title='dest' data-ref="703dest" data-ref-filename="703dest">dest</a>), <a class="local col4 ref" href="#704right" title='right' data-ref="704right" data-ref-filename="704right">right</a>);</td></tr>
<tr><th id="2090">2090</th><td>    <b>else</b></td></tr>
<tr><th id="2091">2091</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_gri" title='emit_gri' data-ref="emit_gri" data-ref-filename="emit_gri">emit_gri</a>(<a class="local col7 ref" href="#697as" title='as' data-ref="697as" data-ref-filename="697as">as</a>, <a class="macro" href="lj_target_x86.h.html#324" title="((x86Group)(((XI_ARITHi8) &lt;&lt; 16) + ((XI_ARITHi) &lt;&lt; 8) + (xa)))" data-ref="_M/XG_ARITHi">XG_ARITHi</a>(<a class="local col9 ref" href="#699xa" title='xa' data-ref="699xa" data-ref-filename="699xa">xa</a>), <a class="macro" href="lj_emit_x86.h.html#525" title="((dest) + (((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)(((ir)-&gt;t).irt &amp; IRT_TYPE))) &amp; 1) ? (0x200|0x080000) : 0))" data-ref="_M/REX_64IR">REX_64IR</a>(<a class="local col8 ref" href="#698ir" title='ir' data-ref="698ir" data-ref-filename="698ir">ir</a>, <a class="local col3 ref" href="#703dest" title='dest' data-ref="703dest" data-ref-filename="703dest">dest</a>), <a class="local col5 ref" href="#705k" title='k' data-ref="705k" data-ref-filename="705k">k</a>);</td></tr>
<tr><th id="2092">2092</th><td>  } <b>else</b> <b>if</b> (<a class="macro" href="lj_target.h.html#28" title="(!((right) &amp; 0x80))" data-ref="_M/ra_hasreg">ra_hasreg</a>(<a class="local col4 ref" href="#704right" title='right' data-ref="704right" data-ref-filename="704right">right</a>)) {  <i>/* IMUL r, mrm. */</i></td></tr>
<tr><th id="2093">2093</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col7 ref" href="#697as" title='as' data-ref="697as" data-ref-filename="697as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_IMUL" title='XO_IMUL' data-ref="XO_IMUL" data-ref-filename="XO_IMUL">XO_IMUL</a>, <a class="macro" href="lj_emit_x86.h.html#525" title="((dest) + (((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)(((ir)-&gt;t).irt &amp; IRT_TYPE))) &amp; 1) ? (0x200|0x080000) : 0))" data-ref="_M/REX_64IR">REX_64IR</a>(<a class="local col8 ref" href="#698ir" title='ir' data-ref="698ir" data-ref-filename="698ir">ir</a>, <a class="local col3 ref" href="#703dest" title='dest' data-ref="703dest" data-ref-filename="703dest">dest</a>), <a class="local col4 ref" href="#704right" title='right' data-ref="704right" data-ref-filename="704right">right</a>);</td></tr>
<tr><th id="2094">2094</th><td>  } <b>else</b> {  <i>/* IMUL r, r, k. */</i></td></tr>
<tr><th id="2095">2095</th><td>    <i>/* NYI: use lea/shl/add/sub (FOLD only does 2^k) depending on CPU. */</i></td></tr>
<tr><th id="2096">2096</th><td>    <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col9 decl" id="709left" title='left' data-type='Reg' data-ref="709left" data-ref-filename="709left">left</dfn> = <a class="ref fn" href="#asm_fuseloadm" title='asm_fuseloadm' data-ref="asm_fuseloadm" data-ref-filename="asm_fuseloadm">asm_fuseloadm</a>(<a class="local col7 ref" href="#697as" title='as' data-ref="697as" data-ref-filename="697as">as</a>, <a class="local col0 ref" href="#700lref" title='lref' data-ref="700lref" data-ref-filename="700lref">lref</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>, <a class="macro" href="lj_ir.h.html#394" title="((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)((ir-&gt;t).irt &amp; IRT_TYPE))) &amp; 1)" data-ref="_M/irt_is64">irt_is64</a>(<a class="local col8 ref" href="#698ir" title='ir' data-ref="698ir" data-ref-filename="698ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>));</td></tr>
<tr><th id="2097">2097</th><td>    <a class="typedef" href="lj_target_x86.h.html#x86Op" title='x86Op' data-type='enum x86Op' data-ref="x86Op" data-ref-filename="x86Op">x86Op</a> <dfn class="local col0 decl" id="710xo" title='xo' data-type='x86Op' data-ref="710xo" data-ref-filename="710xo">xo</dfn>;</td></tr>
<tr><th id="2098">2098</th><td>    <b>if</b> (<a class="macro" href="lj_def.h.html#101" title="((k) == (int32_t)(int8_t)(k))" data-ref="_M/checki8">checki8</a>(<a class="local col5 ref" href="#705k" title='k' data-ref="705k" data-ref-filename="705k">k</a>)) { <a class="macro" href="lj_emit_x86.h.html#29" title="(*--as-&gt;mcp = (MCode)(k))" data-ref="_M/emit_i8">emit_i8</a>(<a class="local col7 ref" href="#697as" title='as' data-ref="697as" data-ref-filename="697as">as</a>, <a class="local col5 ref" href="#705k" title='k' data-ref="705k" data-ref-filename="705k">k</a>); <a class="local col0 ref" href="#710xo" title='xo' data-ref="710xo" data-ref-filename="710xo">xo</a> = <a class="enum" href="lj_target_x86.h.html#XO_IMULi8" title='XO_IMULi8' data-ref="XO_IMULi8" data-ref-filename="XO_IMULi8">XO_IMULi8</a>;</td></tr>
<tr><th id="2099">2099</th><td>    } <b>else</b> { <a class="macro" href="lj_emit_x86.h.html#30" title="(*(int32_t *)(as-&gt;mcp-4) = (k), as-&gt;mcp -= 4)" data-ref="_M/emit_i32">emit_i32</a>(<a class="local col7 ref" href="#697as" title='as' data-ref="697as" data-ref-filename="697as">as</a>, <a class="local col5 ref" href="#705k" title='k' data-ref="705k" data-ref-filename="705k">k</a>); <a class="local col0 ref" href="#710xo" title='xo' data-ref="710xo" data-ref-filename="710xo">xo</a> = <a class="enum" href="lj_target_x86.h.html#XO_IMULi" title='XO_IMULi' data-ref="XO_IMULi" data-ref-filename="XO_IMULi">XO_IMULi</a>; }</td></tr>
<tr><th id="2100">2100</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col7 ref" href="#697as" title='as' data-ref="697as" data-ref-filename="697as">as</a>, <a class="local col0 ref" href="#710xo" title='xo' data-ref="710xo" data-ref-filename="710xo">xo</a>, <a class="macro" href="lj_emit_x86.h.html#525" title="((dest) + (((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)(((ir)-&gt;t).irt &amp; IRT_TYPE))) &amp; 1) ? (0x200|0x080000) : 0))" data-ref="_M/REX_64IR">REX_64IR</a>(<a class="local col8 ref" href="#698ir" title='ir' data-ref="698ir" data-ref-filename="698ir">ir</a>, <a class="local col3 ref" href="#703dest" title='dest' data-ref="703dest" data-ref-filename="703dest">dest</a>), <a class="local col9 ref" href="#709left" title='left' data-ref="709left" data-ref-filename="709left">left</a>);</td></tr>
<tr><th id="2101">2101</th><td>    <b>return</b>;</td></tr>
<tr><th id="2102">2102</th><td>  }</td></tr>
<tr><th id="2103">2103</th><td>  <a class="tu ref fn" href="lj_asm.c.html#ra_left" title='ra_left' data-use='c' data-ref="ra_left" data-ref-filename="ra_left">ra_left</a>(<a class="local col7 ref" href="#697as" title='as' data-ref="697as" data-ref-filename="697as">as</a>, <a class="local col3 ref" href="#703dest" title='dest' data-ref="703dest" data-ref-filename="703dest">dest</a>, <a class="local col0 ref" href="#700lref" title='lref' data-ref="700lref" data-ref-filename="700lref">lref</a>);</td></tr>
<tr><th id="2104">2104</th><td>}</td></tr>
<tr><th id="2105">2105</th><td></td></tr>
<tr><th id="2106">2106</th><td><i>/* LEA is really a 4-operand ADD with an independent destination register,</i></td></tr>
<tr><th id="2107">2107</th><td><i>** up to two source registers and an immediate. One register can be scaled</i></td></tr>
<tr><th id="2108">2108</th><td><i>** by 1, 2, 4 or 8. This can be used to avoid moves or to fuse several</i></td></tr>
<tr><th id="2109">2109</th><td><i>** instructions.</i></td></tr>
<tr><th id="2110">2110</th><td><i>**</i></td></tr>
<tr><th id="2111">2111</th><td><i>** Currently only a few common cases are supported:</i></td></tr>
<tr><th id="2112">2112</th><td><i>** - 3-operand ADD:    y = a+b; y = a+k   with a and b already allocated</i></td></tr>
<tr><th id="2113">2113</th><td><i>** - Left ADD fusion:  y = (a+b)+k; y = (a+k)+b</i></td></tr>
<tr><th id="2114">2114</th><td><i>** - Right ADD fusion: y = a+(b+k)</i></td></tr>
<tr><th id="2115">2115</th><td><i>** The ommited variants have already been reduced by FOLD.</i></td></tr>
<tr><th id="2116">2116</th><td><i>**</i></td></tr>
<tr><th id="2117">2117</th><td><i>** There are more fusion opportunities, like gathering shifts or joining</i></td></tr>
<tr><th id="2118">2118</th><td><i>** common references. But these are probably not worth the trouble, since</i></td></tr>
<tr><th id="2119">2119</th><td><i>** array indexing is not decomposed and already makes use of all fields</i></td></tr>
<tr><th id="2120">2120</th><td><i>** of the ModRM operand.</i></td></tr>
<tr><th id="2121">2121</th><td><i>*/</i></td></tr>
<tr><th id="2122">2122</th><td><em>static</em> <em>int</em> <dfn class="decl def fn" id="asm_lea" title='asm_lea' data-ref="asm_lea" data-ref-filename="asm_lea">asm_lea</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col1 decl" id="711as" title='as' data-type='ASMState *' data-ref="711as" data-ref-filename="711as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col2 decl" id="712ir" title='ir' data-type='IRIns *' data-ref="712ir" data-ref-filename="712ir">ir</dfn>)</td></tr>
<tr><th id="2123">2123</th><td>{</td></tr>
<tr><th id="2124">2124</th><td>  <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col3 decl" id="713irl" title='irl' data-type='IRIns *' data-ref="713irl" data-ref-filename="713irl">irl</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ir-&gt;op1)])" data-ref="_M/IR">IR</a>(<a class="local col2 ref" href="#712ir" title='ir' data-ref="712ir" data-ref-filename="712ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>);</td></tr>
<tr><th id="2125">2125</th><td>  <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col4 decl" id="714irr" title='irr' data-type='IRIns *' data-ref="714irr" data-ref-filename="714irr">irr</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ir-&gt;op2)])" data-ref="_M/IR">IR</a>(<a class="local col2 ref" href="#712ir" title='ir' data-ref="712ir" data-ref-filename="712ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>);</td></tr>
<tr><th id="2126">2126</th><td>  <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col5 decl" id="715allow" title='allow' data-type='RegSet' data-ref="715allow" data-ref-filename="715allow">allow</dfn> = <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>;</td></tr>
<tr><th id="2127">2127</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col6 decl" id="716dest" title='dest' data-type='Reg' data-ref="716dest" data-ref-filename="716dest">dest</dfn>;</td></tr>
<tr><th id="2128">2128</th><td>  <a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> = <a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::idx" title='(anonymous struct)::idx' data-ref="(anonymous)::idx" data-ref-filename="(anonymous)..idx">idx</a> = <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a>;</td></tr>
<tr><th id="2129">2129</th><td>  <a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::scale" title='(anonymous struct)::scale' data-ref="(anonymous)::scale" data-ref-filename="(anonymous)..scale">scale</a> = <a class="enum" href="lj_target_x86.h.html#XM_SCALE1" title='XM_SCALE1' data-ref="XM_SCALE1" data-ref-filename="XM_SCALE1">XM_SCALE1</a>;</td></tr>
<tr><th id="2130">2130</th><td>  <a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> = <var>0</var>;</td></tr>
<tr><th id="2131">2131</th><td>  <b>if</b> (<a class="macro" href="lj_target.h.html#28" title="(!((irl-&gt;r) &amp; 0x80))" data-ref="_M/ra_hasreg">ra_hasreg</a>(<a class="local col3 ref" href="#713irl" title='irl' data-ref="713irl" data-ref-filename="713irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>)) {</td></tr>
<tr><th id="2132">2132</th><td>    <a class="macro" href="lj_target.h.html#70" title="(allow &amp;= ~(((RegSet)1) &lt;&lt; (irl-&gt;r)))" data-ref="_M/rset_clear">rset_clear</a>(<a class="local col5 ref" href="#715allow" title='allow' data-ref="715allow" data-ref-filename="715allow">allow</a>, <a class="local col3 ref" href="#713irl" title='irl' data-ref="713irl" data-ref-filename="713irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>);</td></tr>
<tr><th id="2133">2133</th><td>    <a class="macro" href="lj_asm.c.html#307" title="(as-&gt;weakset &amp;= ~(((RegSet)1) &lt;&lt; ((irl-&gt;r))))" data-ref="_M/ra_noweak">ra_noweak</a>(<a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>, <a class="local col3 ref" href="#713irl" title='irl' data-ref="713irl" data-ref-filename="713irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>);</td></tr>
<tr><th id="2134">2134</th><td>    <a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> = <a class="local col3 ref" href="#713irl" title='irl' data-ref="713irl" data-ref-filename="713irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>;</td></tr>
<tr><th id="2135">2135</th><td>    <b>if</b> (<a class="macro" href="lj_ir.h.html#470" title="((ir-&gt;op2) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col2 ref" href="#712ir" title='ir' data-ref="712ir" data-ref-filename="712ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>) || <a class="macro" href="lj_target.h.html#28" title="(!((irr-&gt;r) &amp; 0x80))" data-ref="_M/ra_hasreg">ra_hasreg</a>(<a class="local col4 ref" href="#714irr" title='irr' data-ref="714irr" data-ref-filename="714irr">irr</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>)) {</td></tr>
<tr><th id="2136">2136</th><td>      <i>/* The PHI renaming logic does a better job in some cases. */</i></td></tr>
<tr><th id="2137">2137</th><td>      <b>if</b> (<a class="macro" href="lj_target.h.html#28" title="(!((ir-&gt;r) &amp; 0x80))" data-ref="_M/ra_hasreg">ra_hasreg</a>(<a class="local col2 ref" href="#712ir" title='ir' data-ref="712ir" data-ref-filename="712ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>) &amp;&amp;</td></tr>
<tr><th id="2138">2138</th><td>	  ((<a class="macro" href="lj_ir.h.html#433" title="((irl-&gt;t).irt &amp; IRT_ISPHI)" data-ref="_M/irt_isphi">irt_isphi</a>(<a class="local col3 ref" href="#713irl" title='irl' data-ref="713irl" data-ref-filename="713irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) &amp;&amp; <a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::phireg" title='ASMState::phireg' data-use='r' data-ref="ASMState::phireg" data-ref-filename="ASMState..phireg">phireg</a>[<a class="local col2 ref" href="#712ir" title='ir' data-ref="712ir" data-ref-filename="712ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>] == <a class="local col2 ref" href="#712ir" title='ir' data-ref="712ir" data-ref-filename="712ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>) ||</td></tr>
<tr><th id="2139">2139</th><td>	   (<a class="macro" href="lj_ir.h.html#433" title="((irr-&gt;t).irt &amp; IRT_ISPHI)" data-ref="_M/irt_isphi">irt_isphi</a>(<a class="local col4 ref" href="#714irr" title='irr' data-ref="714irr" data-ref-filename="714irr">irr</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) &amp;&amp; <a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::phireg" title='ASMState::phireg' data-use='r' data-ref="ASMState::phireg" data-ref-filename="ASMState..phireg">phireg</a>[<a class="local col2 ref" href="#712ir" title='ir' data-ref="712ir" data-ref-filename="712ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>] == <a class="local col2 ref" href="#712ir" title='ir' data-ref="712ir" data-ref-filename="712ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>)))</td></tr>
<tr><th id="2140">2140</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="2141">2141</th><td>      <b>if</b> (<a class="macro" href="lj_ir.h.html#470" title="((ir-&gt;op2) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col2 ref" href="#712ir" title='ir' data-ref="712ir" data-ref-filename="712ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>)) {</td></tr>
<tr><th id="2142">2142</th><td>	<a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> = <a class="local col4 ref" href="#714irr" title='irr' data-ref="714irr" data-ref-filename="714irr">irr</a>-&gt;<a class="ref field" href="lj_ir.h.html#IRIns::i" title='IRIns::i' data-ref="IRIns::i" data-ref-filename="IRIns..i">i</a>;</td></tr>
<tr><th id="2143">2143</th><td>      } <b>else</b> {</td></tr>
<tr><th id="2144">2144</th><td>	<a class="macro" href="lj_target.h.html#70" title="(allow &amp;= ~(((RegSet)1) &lt;&lt; (irr-&gt;r)))" data-ref="_M/rset_clear">rset_clear</a>(<a class="local col5 ref" href="#715allow" title='allow' data-ref="715allow" data-ref-filename="715allow">allow</a>, <a class="local col4 ref" href="#714irr" title='irr' data-ref="714irr" data-ref-filename="714irr">irr</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>);</td></tr>
<tr><th id="2145">2145</th><td>	<a class="macro" href="lj_asm.c.html#307" title="(as-&gt;weakset &amp;= ~(((RegSet)1) &lt;&lt; ((irr-&gt;r))))" data-ref="_M/ra_noweak">ra_noweak</a>(<a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>, <a class="local col4 ref" href="#714irr" title='irr' data-ref="714irr" data-ref-filename="714irr">irr</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>);</td></tr>
<tr><th id="2146">2146</th><td>	<a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::idx" title='(anonymous struct)::idx' data-ref="(anonymous)::idx" data-ref-filename="(anonymous)..idx">idx</a> = <a class="local col4 ref" href="#714irr" title='irr' data-ref="714irr" data-ref-filename="714irr">irr</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>;</td></tr>
<tr><th id="2147">2147</th><td>      }</td></tr>
<tr><th id="2148">2148</th><td>    } <b>else</b> <b>if</b> (<a class="local col4 ref" href="#714irr" title='irr' data-ref="714irr" data-ref-filename="714irr">irr</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_ADD' data-ref="IR_ADD" data-ref-filename="IR_ADD">IR_ADD</a> &amp;&amp; <a class="macro" href="lj_asm.c.html#120" title="((ir-&gt;op2) &gt; as-&gt;fuseref)" data-ref="_M/mayfuse">mayfuse</a>(<a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>, <a class="local col2 ref" href="#712ir" title='ir' data-ref="712ir" data-ref-filename="712ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>) &amp;&amp;</td></tr>
<tr><th id="2149">2149</th><td>	       <a class="macro" href="lj_ir.h.html#470" title="((irr-&gt;op2) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col4 ref" href="#714irr" title='irr' data-ref="714irr" data-ref-filename="714irr">irr</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>)) {</td></tr>
<tr><th id="2150">2150</th><td>      <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col7 decl" id="717idx" title='idx' data-type='Reg' data-ref="717idx" data-ref-filename="717idx">idx</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>, <a class="local col4 ref" href="#714irr" title='irr' data-ref="714irr" data-ref-filename="714irr">irr</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="local col5 ref" href="#715allow" title='allow' data-ref="715allow" data-ref-filename="715allow">allow</a>);</td></tr>
<tr><th id="2151">2151</th><td>      <a class="macro" href="lj_target.h.html#70" title="(allow &amp;= ~(((RegSet)1) &lt;&lt; (idx)))" data-ref="_M/rset_clear">rset_clear</a>(<a class="local col5 ref" href="#715allow" title='allow' data-ref="715allow" data-ref-filename="715allow">allow</a>, <a class="local col7 ref" href="#717idx" title='idx' data-ref="717idx" data-ref-filename="717idx">idx</a>);</td></tr>
<tr><th id="2152">2152</th><td>      <a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::idx" title='(anonymous struct)::idx' data-ref="(anonymous)::idx" data-ref-filename="(anonymous)..idx">idx</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a>)<a class="local col7 ref" href="#717idx" title='idx' data-ref="717idx" data-ref-filename="717idx">idx</a>;</td></tr>
<tr><th id="2153">2153</th><td>      <a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(irr-&gt;op2)])" data-ref="_M/IR">IR</a>(<a class="local col4 ref" href="#714irr" title='irr' data-ref="714irr" data-ref-filename="714irr">irr</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>)-&gt;<a class="ref field" href="lj_ir.h.html#IRIns::i" title='IRIns::i' data-ref="IRIns::i" data-ref-filename="IRIns..i">i</a>;</td></tr>
<tr><th id="2154">2154</th><td>    } <b>else</b> {</td></tr>
<tr><th id="2155">2155</th><td>      <b>return</b> <var>0</var>;</td></tr>
<tr><th id="2156">2156</th><td>    }</td></tr>
<tr><th id="2157">2157</th><td>  } <b>else</b> <b>if</b> (<a class="local col2 ref" href="#712ir" title='ir' data-ref="712ir" data-ref-filename="712ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a> != <a class="local col2 ref" href="#712ir" title='ir' data-ref="712ir" data-ref-filename="712ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a> &amp;&amp; <a class="local col3 ref" href="#713irl" title='irl' data-ref="713irl" data-ref-filename="713irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_ADD' data-ref="IR_ADD" data-ref-filename="IR_ADD">IR_ADD</a> &amp;&amp; <a class="macro" href="lj_asm.c.html#120" title="((ir-&gt;op1) &gt; as-&gt;fuseref)" data-ref="_M/mayfuse">mayfuse</a>(<a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>, <a class="local col2 ref" href="#712ir" title='ir' data-ref="712ir" data-ref-filename="712ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>) &amp;&amp;</td></tr>
<tr><th id="2158">2158</th><td>	     (<a class="macro" href="lj_ir.h.html#470" title="((ir-&gt;op2) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col2 ref" href="#712ir" title='ir' data-ref="712ir" data-ref-filename="712ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>) || <a class="macro" href="lj_ir.h.html#470" title="((irl-&gt;op2) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col3 ref" href="#713irl" title='irl' data-ref="713irl" data-ref-filename="713irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>))) {</td></tr>
<tr><th id="2159">2159</th><td>    <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col8 decl" id="718idx" title='idx' data-type='Reg' data-ref="718idx" data-ref-filename="718idx">idx</dfn>, <dfn class="local col9 decl" id="719base" title='base' data-type='Reg' data-ref="719base" data-ref-filename="719base">base</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>, <a class="local col3 ref" href="#713irl" title='irl' data-ref="713irl" data-ref-filename="713irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="local col5 ref" href="#715allow" title='allow' data-ref="715allow" data-ref-filename="715allow">allow</a>);</td></tr>
<tr><th id="2160">2160</th><td>    <a class="macro" href="lj_target.h.html#70" title="(allow &amp;= ~(((RegSet)1) &lt;&lt; (base)))" data-ref="_M/rset_clear">rset_clear</a>(<a class="local col5 ref" href="#715allow" title='allow' data-ref="715allow" data-ref-filename="715allow">allow</a>, <a class="local col9 ref" href="#719base" title='base' data-ref="719base" data-ref-filename="719base">base</a>);</td></tr>
<tr><th id="2161">2161</th><td>    <a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a>)<a class="local col9 ref" href="#719base" title='base' data-ref="719base" data-ref-filename="719base">base</a>;</td></tr>
<tr><th id="2162">2162</th><td>    <b>if</b> (<a class="macro" href="lj_ir.h.html#470" title="((ir-&gt;op2) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col2 ref" href="#712ir" title='ir' data-ref="712ir" data-ref-filename="712ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>)) {</td></tr>
<tr><th id="2163">2163</th><td>      <a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> = <a class="local col4 ref" href="#714irr" title='irr' data-ref="714irr" data-ref-filename="714irr">irr</a>-&gt;<a class="ref field" href="lj_ir.h.html#IRIns::i" title='IRIns::i' data-ref="IRIns::i" data-ref-filename="IRIns..i">i</a>;</td></tr>
<tr><th id="2164">2164</th><td>      <a class="local col8 ref" href="#718idx" title='idx' data-ref="718idx" data-ref-filename="718idx">idx</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>, <a class="local col3 ref" href="#713irl" title='irl' data-ref="713irl" data-ref-filename="713irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>, <a class="local col5 ref" href="#715allow" title='allow' data-ref="715allow" data-ref-filename="715allow">allow</a>);</td></tr>
<tr><th id="2165">2165</th><td>    } <b>else</b> {</td></tr>
<tr><th id="2166">2166</th><td>      <a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::ofs" title='(anonymous struct)::ofs' data-ref="(anonymous)::ofs" data-ref-filename="(anonymous)..ofs">ofs</a> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(irl-&gt;op2)])" data-ref="_M/IR">IR</a>(<a class="local col3 ref" href="#713irl" title='irl' data-ref="713irl" data-ref-filename="713irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>)-&gt;<a class="ref field" href="lj_ir.h.html#IRIns::i" title='IRIns::i' data-ref="IRIns::i" data-ref-filename="IRIns..i">i</a>;</td></tr>
<tr><th id="2167">2167</th><td>      <a class="local col8 ref" href="#718idx" title='idx' data-ref="718idx" data-ref-filename="718idx">idx</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>, <a class="local col2 ref" href="#712ir" title='ir' data-ref="712ir" data-ref-filename="712ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>, <a class="local col5 ref" href="#715allow" title='allow' data-ref="715allow" data-ref-filename="715allow">allow</a>);</td></tr>
<tr><th id="2168">2168</th><td>    }</td></tr>
<tr><th id="2169">2169</th><td>    <a class="macro" href="lj_target.h.html#70" title="(allow &amp;= ~(((RegSet)1) &lt;&lt; (idx)))" data-ref="_M/rset_clear">rset_clear</a>(<a class="local col5 ref" href="#715allow" title='allow' data-ref="715allow" data-ref-filename="715allow">allow</a>, <a class="local col8 ref" href="#718idx" title='idx' data-ref="718idx" data-ref-filename="718idx">idx</a>);</td></tr>
<tr><th id="2170">2170</th><td>    <a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::idx" title='(anonymous struct)::idx' data-ref="(anonymous)::idx" data-ref-filename="(anonymous)..idx">idx</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a>)<a class="local col8 ref" href="#718idx" title='idx' data-ref="718idx" data-ref-filename="718idx">idx</a>;</td></tr>
<tr><th id="2171">2171</th><td>  } <b>else</b> {</td></tr>
<tr><th id="2172">2172</th><td>    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="2173">2173</th><td>  }</td></tr>
<tr><th id="2174">2174</th><td>  <a class="local col6 ref" href="#716dest" title='dest' data-ref="716dest" data-ref-filename="716dest">dest</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>, <a class="local col2 ref" href="#712ir" title='ir' data-ref="712ir" data-ref-filename="712ir">ir</a>, <a class="local col5 ref" href="#715allow" title='allow' data-ref="715allow" data-ref-filename="715allow">allow</a>);</td></tr>
<tr><th id="2175">2175</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col1 ref" href="#711as" title='as' data-ref="711as" data-ref-filename="711as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_LEA" title='XO_LEA' data-ref="XO_LEA" data-ref-filename="XO_LEA">XO_LEA</a>, <a class="local col6 ref" href="#716dest" title='dest' data-ref="716dest" data-ref-filename="716dest">dest</a>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="2176">2176</th><td>  <b>return</b> <var>1</var>;  <i>/* Success. */</i></td></tr>
<tr><th id="2177">2177</th><td>}</td></tr>
<tr><th id="2178">2178</th><td></td></tr>
<tr><th id="2179">2179</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_add" title='asm_add' data-ref="asm_add" data-ref-filename="asm_add">asm_add</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col0 decl" id="720as" title='as' data-type='ASMState *' data-ref="720as" data-ref-filename="720as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col1 decl" id="721ir" title='ir' data-type='IRIns *' data-ref="721ir" data-ref-filename="721ir">ir</dfn>)</td></tr>
<tr><th id="2180">2180</th><td>{</td></tr>
<tr><th id="2181">2181</th><td>  <b>if</b> (<a class="macro" href="lj_ir.h.html#363" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM)" data-ref="_M/irt_isnum">irt_isnum</a>(<a class="local col1 ref" href="#721ir" title='ir' data-ref="721ir" data-ref-filename="721ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>))</td></tr>
<tr><th id="2182">2182</th><td>    <a class="ref fn" href="#asm_fparith" title='asm_fparith' data-ref="asm_fparith" data-ref-filename="asm_fparith">asm_fparith</a>(<a class="local col0 ref" href="#720as" title='as' data-ref="720as" data-ref-filename="720as">as</a>, <a class="local col1 ref" href="#721ir" title='ir' data-ref="721ir" data-ref-filename="721ir">ir</a>, <a class="enum" href="lj_target_x86.h.html#XO_ADDSD" title='XO_ADDSD' data-ref="XO_ADDSD" data-ref-filename="XO_ADDSD">XO_ADDSD</a>);</td></tr>
<tr><th id="2183">2183</th><td>  <b>else</b> <b>if</b> (<a class="local col0 ref" href="#720as" title='as' data-ref="720as" data-ref-filename="720as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::flagmcp" title='ASMState::flagmcp' data-use='r' data-ref="ASMState::flagmcp" data-ref-filename="ASMState..flagmcp">flagmcp</a> == <a class="local col0 ref" href="#720as" title='as' data-ref="720as" data-ref-filename="720as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcp" title='ASMState::mcp' data-use='r' data-ref="ASMState::mcp" data-ref-filename="ASMState..mcp">mcp</a> || <a class="macro" href="lj_ir.h.html#394" title="((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)((ir-&gt;t).irt &amp; IRT_TYPE))) &amp; 1)" data-ref="_M/irt_is64">irt_is64</a>(<a class="local col1 ref" href="#721ir" title='ir' data-ref="721ir" data-ref-filename="721ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) || !<a class="ref fn" href="#asm_lea" title='asm_lea' data-ref="asm_lea" data-ref-filename="asm_lea">asm_lea</a>(<a class="local col0 ref" href="#720as" title='as' data-ref="720as" data-ref-filename="720as">as</a>, <a class="local col1 ref" href="#721ir" title='ir' data-ref="721ir" data-ref-filename="721ir">ir</a>))</td></tr>
<tr><th id="2184">2184</th><td>    <a class="ref fn" href="#asm_intarith" title='asm_intarith' data-ref="asm_intarith" data-ref-filename="asm_intarith">asm_intarith</a>(<a class="local col0 ref" href="#720as" title='as' data-ref="720as" data-ref-filename="720as">as</a>, <a class="local col1 ref" href="#721ir" title='ir' data-ref="721ir" data-ref-filename="721ir">ir</a>, <a class="enum" href="lj_target_x86.h.html#XOg_ADD" title='XOg_ADD' data-ref="XOg_ADD" data-ref-filename="XOg_ADD">XOg_ADD</a>);</td></tr>
<tr><th id="2185">2185</th><td>}</td></tr>
<tr><th id="2186">2186</th><td></td></tr>
<tr><th id="2187">2187</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_sub" title='asm_sub' data-ref="asm_sub" data-ref-filename="asm_sub">asm_sub</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col2 decl" id="722as" title='as' data-type='ASMState *' data-ref="722as" data-ref-filename="722as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col3 decl" id="723ir" title='ir' data-type='IRIns *' data-ref="723ir" data-ref-filename="723ir">ir</dfn>)</td></tr>
<tr><th id="2188">2188</th><td>{</td></tr>
<tr><th id="2189">2189</th><td>  <b>if</b> (<a class="macro" href="lj_ir.h.html#363" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM)" data-ref="_M/irt_isnum">irt_isnum</a>(<a class="local col3 ref" href="#723ir" title='ir' data-ref="723ir" data-ref-filename="723ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>))</td></tr>
<tr><th id="2190">2190</th><td>    <a class="ref fn" href="#asm_fparith" title='asm_fparith' data-ref="asm_fparith" data-ref-filename="asm_fparith">asm_fparith</a>(<a class="local col2 ref" href="#722as" title='as' data-ref="722as" data-ref-filename="722as">as</a>, <a class="local col3 ref" href="#723ir" title='ir' data-ref="723ir" data-ref-filename="723ir">ir</a>, <a class="enum" href="lj_target_x86.h.html#XO_SUBSD" title='XO_SUBSD' data-ref="XO_SUBSD" data-ref-filename="XO_SUBSD">XO_SUBSD</a>);</td></tr>
<tr><th id="2191">2191</th><td>  <b>else</b>  <i>/* Note: no need for LEA trick here. i-k is encoded as i+(-k). */</i></td></tr>
<tr><th id="2192">2192</th><td>    <a class="ref fn" href="#asm_intarith" title='asm_intarith' data-ref="asm_intarith" data-ref-filename="asm_intarith">asm_intarith</a>(<a class="local col2 ref" href="#722as" title='as' data-ref="722as" data-ref-filename="722as">as</a>, <a class="local col3 ref" href="#723ir" title='ir' data-ref="723ir" data-ref-filename="723ir">ir</a>, <a class="enum" href="lj_target_x86.h.html#XOg_SUB" title='XOg_SUB' data-ref="XOg_SUB" data-ref-filename="XOg_SUB">XOg_SUB</a>);</td></tr>
<tr><th id="2193">2193</th><td>}</td></tr>
<tr><th id="2194">2194</th><td></td></tr>
<tr><th id="2195">2195</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_mul" title='asm_mul' data-ref="asm_mul" data-ref-filename="asm_mul">asm_mul</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col4 decl" id="724as" title='as' data-type='ASMState *' data-ref="724as" data-ref-filename="724as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col5 decl" id="725ir" title='ir' data-type='IRIns *' data-ref="725ir" data-ref-filename="725ir">ir</dfn>)</td></tr>
<tr><th id="2196">2196</th><td>{</td></tr>
<tr><th id="2197">2197</th><td>  <b>if</b> (<a class="macro" href="lj_ir.h.html#363" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM)" data-ref="_M/irt_isnum">irt_isnum</a>(<a class="local col5 ref" href="#725ir" title='ir' data-ref="725ir" data-ref-filename="725ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>))</td></tr>
<tr><th id="2198">2198</th><td>    <a class="ref fn" href="#asm_fparith" title='asm_fparith' data-ref="asm_fparith" data-ref-filename="asm_fparith">asm_fparith</a>(<a class="local col4 ref" href="#724as" title='as' data-ref="724as" data-ref-filename="724as">as</a>, <a class="local col5 ref" href="#725ir" title='ir' data-ref="725ir" data-ref-filename="725ir">ir</a>, <a class="enum" href="lj_target_x86.h.html#XO_MULSD" title='XO_MULSD' data-ref="XO_MULSD" data-ref-filename="XO_MULSD">XO_MULSD</a>);</td></tr>
<tr><th id="2199">2199</th><td>  <b>else</b></td></tr>
<tr><th id="2200">2200</th><td>    <a class="ref fn" href="#asm_intarith" title='asm_intarith' data-ref="asm_intarith" data-ref-filename="asm_intarith">asm_intarith</a>(<a class="local col4 ref" href="#724as" title='as' data-ref="724as" data-ref-filename="724as">as</a>, <a class="local col5 ref" href="#725ir" title='ir' data-ref="725ir" data-ref-filename="725ir">ir</a>, <a class="enum" href="lj_target_x86.h.html#XOg_X_IMUL" title='XOg_X_IMUL' data-ref="XOg_X_IMUL" data-ref-filename="XOg_X_IMUL">XOg_X_IMUL</a>);</td></tr>
<tr><th id="2201">2201</th><td>}</td></tr>
<tr><th id="2202">2202</th><td></td></tr>
<tr><th id="2203">2203</th><td><u>#define <dfn class="macro" id="_M/asm_fpdiv" data-ref="_M/asm_fpdiv">asm_fpdiv</dfn>(as, ir)	asm_fparith(as, ir, XO_DIVSD)</u></td></tr>
<tr><th id="2204">2204</th><td></td></tr>
<tr><th id="2205">2205</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_neg_not" title='asm_neg_not' data-ref="asm_neg_not" data-ref-filename="asm_neg_not">asm_neg_not</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col6 decl" id="726as" title='as' data-type='ASMState *' data-ref="726as" data-ref-filename="726as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col7 decl" id="727ir" title='ir' data-type='IRIns *' data-ref="727ir" data-ref-filename="727ir">ir</dfn>, <a class="typedef" href="lj_target_x86.h.html#x86Group3" title='x86Group3' data-type='enum x86Group3' data-ref="x86Group3" data-ref-filename="x86Group3">x86Group3</a> <dfn class="local col8 decl" id="728xg" title='xg' data-type='x86Group3' data-ref="728xg" data-ref-filename="728xg">xg</dfn>)</td></tr>
<tr><th id="2206">2206</th><td>{</td></tr>
<tr><th id="2207">2207</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col9 decl" id="729dest" title='dest' data-type='Reg' data-ref="729dest" data-ref-filename="729dest">dest</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col6 ref" href="#726as" title='as' data-ref="726as" data-ref-filename="726as">as</a>, <a class="local col7 ref" href="#727ir" title='ir' data-ref="727ir" data-ref-filename="727ir">ir</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="2208">2208</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col6 ref" href="#726as" title='as' data-ref="726as" data-ref-filename="726as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_GROUP3" title='XO_GROUP3' data-ref="XO_GROUP3" data-ref-filename="XO_GROUP3">XO_GROUP3</a>, <a class="macro" href="lj_emit_x86.h.html#525" title="((xg) + (((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)(((ir)-&gt;t).irt &amp; IRT_TYPE))) &amp; 1) ? (0x200|0x080000) : 0))" data-ref="_M/REX_64IR">REX_64IR</a>(<a class="local col7 ref" href="#727ir" title='ir' data-ref="727ir" data-ref-filename="727ir">ir</a>, <a class="local col8 ref" href="#728xg" title='xg' data-ref="728xg" data-ref-filename="728xg">xg</a>), <a class="local col9 ref" href="#729dest" title='dest' data-ref="729dest" data-ref-filename="729dest">dest</a>);</td></tr>
<tr><th id="2209">2209</th><td>  <a class="tu ref fn" href="lj_asm.c.html#ra_left" title='ra_left' data-use='c' data-ref="ra_left" data-ref-filename="ra_left">ra_left</a>(<a class="local col6 ref" href="#726as" title='as' data-ref="726as" data-ref-filename="726as">as</a>, <a class="local col9 ref" href="#729dest" title='dest' data-ref="729dest" data-ref-filename="729dest">dest</a>, <a class="local col7 ref" href="#727ir" title='ir' data-ref="727ir" data-ref-filename="727ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>);</td></tr>
<tr><th id="2210">2210</th><td>}</td></tr>
<tr><th id="2211">2211</th><td></td></tr>
<tr><th id="2212">2212</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_neg" title='asm_neg' data-ref="asm_neg" data-ref-filename="asm_neg">asm_neg</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col0 decl" id="730as" title='as' data-type='ASMState *' data-ref="730as" data-ref-filename="730as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col1 decl" id="731ir" title='ir' data-type='IRIns *' data-ref="731ir" data-ref-filename="731ir">ir</dfn>)</td></tr>
<tr><th id="2213">2213</th><td>{</td></tr>
<tr><th id="2214">2214</th><td>  <b>if</b> (<a class="macro" href="lj_ir.h.html#363" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM)" data-ref="_M/irt_isnum">irt_isnum</a>(<a class="local col1 ref" href="#731ir" title='ir' data-ref="731ir" data-ref-filename="731ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>))</td></tr>
<tr><th id="2215">2215</th><td>    <a class="ref fn" href="#asm_fparith" title='asm_fparith' data-ref="asm_fparith" data-ref-filename="asm_fparith">asm_fparith</a>(<a class="local col0 ref" href="#730as" title='as' data-ref="730as" data-ref-filename="730as">as</a>, <a class="local col1 ref" href="#731ir" title='ir' data-ref="731ir" data-ref-filename="731ir">ir</a>, <a class="enum" href="lj_target_x86.h.html#XO_XORPS" title='XO_XORPS' data-ref="XO_XORPS" data-ref-filename="XO_XORPS">XO_XORPS</a>);</td></tr>
<tr><th id="2216">2216</th><td>  <b>else</b></td></tr>
<tr><th id="2217">2217</th><td>    <a class="ref fn" href="#asm_neg_not" title='asm_neg_not' data-ref="asm_neg_not" data-ref-filename="asm_neg_not">asm_neg_not</a>(<a class="local col0 ref" href="#730as" title='as' data-ref="730as" data-ref-filename="730as">as</a>, <a class="local col1 ref" href="#731ir" title='ir' data-ref="731ir" data-ref-filename="731ir">ir</a>, <a class="enum" href="lj_target_x86.h.html#XOg_NEG" title='XOg_NEG' data-ref="XOg_NEG" data-ref-filename="XOg_NEG">XOg_NEG</a>);</td></tr>
<tr><th id="2218">2218</th><td>}</td></tr>
<tr><th id="2219">2219</th><td></td></tr>
<tr><th id="2220">2220</th><td><u>#define <dfn class="macro" id="_M/asm_abs" data-ref="_M/asm_abs">asm_abs</dfn>(as, ir)		asm_fparith(as, ir, XO_ANDPS)</u></td></tr>
<tr><th id="2221">2221</th><td></td></tr>
<tr><th id="2222">2222</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_intmin_max" title='asm_intmin_max' data-ref="asm_intmin_max" data-ref-filename="asm_intmin_max">asm_intmin_max</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col2 decl" id="732as" title='as' data-type='ASMState *' data-ref="732as" data-ref-filename="732as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col3 decl" id="733ir" title='ir' data-type='IRIns *' data-ref="733ir" data-ref-filename="733ir">ir</dfn>, <em>int</em> <dfn class="local col4 decl" id="734cc" title='cc' data-type='int' data-ref="734cc" data-ref-filename="734cc">cc</dfn>)</td></tr>
<tr><th id="2223">2223</th><td>{</td></tr>
<tr><th id="2224">2224</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col5 decl" id="735right" title='right' data-type='Reg' data-ref="735right" data-ref-filename="735right">right</dfn>, <dfn class="local col6 decl" id="736dest" title='dest' data-type='Reg' data-ref="736dest" data-ref-filename="736dest">dest</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col2 ref" href="#732as" title='as' data-ref="732as" data-ref-filename="732as">as</a>, <a class="local col3 ref" href="#733ir" title='ir' data-ref="733ir" data-ref-filename="733ir">ir</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="2225">2225</th><td>  <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col7 decl" id="737lref" title='lref' data-type='IRRef' data-ref="737lref" data-ref-filename="737lref">lref</dfn> = <a class="local col3 ref" href="#733ir" title='ir' data-ref="733ir" data-ref-filename="733ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <dfn class="local col8 decl" id="738rref" title='rref' data-type='IRRef' data-ref="738rref" data-ref-filename="738rref">rref</dfn> = <a class="local col3 ref" href="#733ir" title='ir' data-ref="733ir" data-ref-filename="733ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>;</td></tr>
<tr><th id="2226">2226</th><td>  <b>if</b> (<a class="macro" href="lj_ir.h.html#470" title="((rref) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col8 ref" href="#738rref" title='rref' data-ref="738rref" data-ref-filename="738rref">rref</a>)) { <a class="local col7 ref" href="#737lref" title='lref' data-ref="737lref" data-ref-filename="737lref">lref</a> = <a class="local col8 ref" href="#738rref" title='rref' data-ref="738rref" data-ref-filename="738rref">rref</a>; <a class="local col8 ref" href="#738rref" title='rref' data-ref="738rref" data-ref-filename="738rref">rref</a> = <a class="local col3 ref" href="#733ir" title='ir' data-ref="733ir" data-ref-filename="733ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>; }</td></tr>
<tr><th id="2227">2227</th><td>  <a class="local col5 ref" href="#735right" title='right' data-ref="735right" data-ref-filename="735right">right</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col2 ref" href="#732as" title='as' data-ref="732as" data-ref-filename="732as">as</a>, <a class="local col8 ref" href="#738rref" title='rref' data-ref="738rref" data-ref-filename="738rref">rref</a>, <a class="macro" href="lj_target.h.html#71" title="(((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH))) &amp; ~(((RegSet)1) &lt;&lt; (dest)))" data-ref="_M/rset_exclude">rset_exclude</a>(<a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>, <a class="local col6 ref" href="#736dest" title='dest' data-ref="736dest" data-ref-filename="736dest">dest</a>));</td></tr>
<tr><th id="2228">2228</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col2 ref" href="#732as" title='as' data-ref="732as" data-ref-filename="732as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_CMOV" title='XO_CMOV' data-ref="XO_CMOV" data-ref-filename="XO_CMOV">XO_CMOV</a> + (<a class="local col4 ref" href="#734cc" title='cc' data-ref="734cc" data-ref-filename="734cc">cc</a>&lt;&lt;<var>24</var>), <a class="macro" href="lj_emit_x86.h.html#525" title="((dest) + (((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)(((ir)-&gt;t).irt &amp; IRT_TYPE))) &amp; 1) ? (0x200|0x080000) : 0))" data-ref="_M/REX_64IR">REX_64IR</a>(<a class="local col3 ref" href="#733ir" title='ir' data-ref="733ir" data-ref-filename="733ir">ir</a>, <a class="local col6 ref" href="#736dest" title='dest' data-ref="736dest" data-ref-filename="736dest">dest</a>), <a class="local col5 ref" href="#735right" title='right' data-ref="735right" data-ref-filename="735right">right</a>);</td></tr>
<tr><th id="2229">2229</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col2 ref" href="#732as" title='as' data-ref="732as" data-ref-filename="732as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_CMP" title='XO_CMP' data-ref="XO_CMP" data-ref-filename="XO_CMP">XO_CMP</a>, <a class="macro" href="lj_emit_x86.h.html#525" title="((dest) + (((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)(((ir)-&gt;t).irt &amp; IRT_TYPE))) &amp; 1) ? (0x200|0x080000) : 0))" data-ref="_M/REX_64IR">REX_64IR</a>(<a class="local col3 ref" href="#733ir" title='ir' data-ref="733ir" data-ref-filename="733ir">ir</a>, <a class="local col6 ref" href="#736dest" title='dest' data-ref="736dest" data-ref-filename="736dest">dest</a>), <a class="local col5 ref" href="#735right" title='right' data-ref="735right" data-ref-filename="735right">right</a>);</td></tr>
<tr><th id="2230">2230</th><td>  <a class="tu ref fn" href="lj_asm.c.html#ra_left" title='ra_left' data-use='c' data-ref="ra_left" data-ref-filename="ra_left">ra_left</a>(<a class="local col2 ref" href="#732as" title='as' data-ref="732as" data-ref-filename="732as">as</a>, <a class="local col6 ref" href="#736dest" title='dest' data-ref="736dest" data-ref-filename="736dest">dest</a>, <a class="local col7 ref" href="#737lref" title='lref' data-ref="737lref" data-ref-filename="737lref">lref</a>);</td></tr>
<tr><th id="2231">2231</th><td>}</td></tr>
<tr><th id="2232">2232</th><td></td></tr>
<tr><th id="2233">2233</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_min" title='asm_min' data-ref="asm_min" data-ref-filename="asm_min">asm_min</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col9 decl" id="739as" title='as' data-type='ASMState *' data-ref="739as" data-ref-filename="739as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col0 decl" id="740ir" title='ir' data-type='IRIns *' data-ref="740ir" data-ref-filename="740ir">ir</dfn>)</td></tr>
<tr><th id="2234">2234</th><td>{</td></tr>
<tr><th id="2235">2235</th><td>  <b>if</b> (<a class="macro" href="lj_ir.h.html#363" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM)" data-ref="_M/irt_isnum">irt_isnum</a>(<a class="local col0 ref" href="#740ir" title='ir' data-ref="740ir" data-ref-filename="740ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>))</td></tr>
<tr><th id="2236">2236</th><td>    <a class="ref fn" href="#asm_fparith" title='asm_fparith' data-ref="asm_fparith" data-ref-filename="asm_fparith">asm_fparith</a>(<a class="local col9 ref" href="#739as" title='as' data-ref="739as" data-ref-filename="739as">as</a>, <a class="local col0 ref" href="#740ir" title='ir' data-ref="740ir" data-ref-filename="740ir">ir</a>, <a class="enum" href="lj_target_x86.h.html#XO_MINSD" title='XO_MINSD' data-ref="XO_MINSD" data-ref-filename="XO_MINSD">XO_MINSD</a>);</td></tr>
<tr><th id="2237">2237</th><td>  <b>else</b></td></tr>
<tr><th id="2238">2238</th><td>    <a class="ref fn" href="#asm_intmin_max" title='asm_intmin_max' data-ref="asm_intmin_max" data-ref-filename="asm_intmin_max">asm_intmin_max</a>(<a class="local col9 ref" href="#739as" title='as' data-ref="739as" data-ref-filename="739as">as</a>, <a class="local col0 ref" href="#740ir" title='ir' data-ref="740ir" data-ref-filename="740ir">ir</a>, <a class="enum" href="lj_target_x86.h.html#CC_G" title='CC_G' data-ref="CC_G" data-ref-filename="CC_G">CC_G</a>);</td></tr>
<tr><th id="2239">2239</th><td>}</td></tr>
<tr><th id="2240">2240</th><td></td></tr>
<tr><th id="2241">2241</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_max" title='asm_max' data-ref="asm_max" data-ref-filename="asm_max">asm_max</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col1 decl" id="741as" title='as' data-type='ASMState *' data-ref="741as" data-ref-filename="741as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col2 decl" id="742ir" title='ir' data-type='IRIns *' data-ref="742ir" data-ref-filename="742ir">ir</dfn>)</td></tr>
<tr><th id="2242">2242</th><td>{</td></tr>
<tr><th id="2243">2243</th><td>  <b>if</b> (<a class="macro" href="lj_ir.h.html#363" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM)" data-ref="_M/irt_isnum">irt_isnum</a>(<a class="local col2 ref" href="#742ir" title='ir' data-ref="742ir" data-ref-filename="742ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>))</td></tr>
<tr><th id="2244">2244</th><td>    <a class="ref fn" href="#asm_fparith" title='asm_fparith' data-ref="asm_fparith" data-ref-filename="asm_fparith">asm_fparith</a>(<a class="local col1 ref" href="#741as" title='as' data-ref="741as" data-ref-filename="741as">as</a>, <a class="local col2 ref" href="#742ir" title='ir' data-ref="742ir" data-ref-filename="742ir">ir</a>, <a class="enum" href="lj_target_x86.h.html#XO_MAXSD" title='XO_MAXSD' data-ref="XO_MAXSD" data-ref-filename="XO_MAXSD">XO_MAXSD</a>);</td></tr>
<tr><th id="2245">2245</th><td>  <b>else</b></td></tr>
<tr><th id="2246">2246</th><td>    <a class="ref fn" href="#asm_intmin_max" title='asm_intmin_max' data-ref="asm_intmin_max" data-ref-filename="asm_intmin_max">asm_intmin_max</a>(<a class="local col1 ref" href="#741as" title='as' data-ref="741as" data-ref-filename="741as">as</a>, <a class="local col2 ref" href="#742ir" title='ir' data-ref="742ir" data-ref-filename="742ir">ir</a>, <a class="enum" href="lj_target_x86.h.html#CC_L" title='CC_L' data-ref="CC_L" data-ref-filename="CC_L">CC_L</a>);</td></tr>
<tr><th id="2247">2247</th><td>}</td></tr>
<tr><th id="2248">2248</th><td></td></tr>
<tr><th id="2249">2249</th><td><i>/* Note: don't use LEA for overflow-checking arithmetic! */</i></td></tr>
<tr><th id="2250">2250</th><td><u>#define <dfn class="macro" id="_M/asm_addov" data-ref="_M/asm_addov">asm_addov</dfn>(as, ir)	asm_intarith(as, ir, XOg_ADD)</u></td></tr>
<tr><th id="2251">2251</th><td><u>#define <dfn class="macro" id="_M/asm_subov" data-ref="_M/asm_subov">asm_subov</dfn>(as, ir)	asm_intarith(as, ir, XOg_SUB)</u></td></tr>
<tr><th id="2252">2252</th><td><u>#define <dfn class="macro" id="_M/asm_mulov" data-ref="_M/asm_mulov">asm_mulov</dfn>(as, ir)	asm_intarith(as, ir, XOg_X_IMUL)</u></td></tr>
<tr><th id="2253">2253</th><td></td></tr>
<tr><th id="2254">2254</th><td><u>#define <dfn class="macro" id="_M/asm_bnot" data-ref="_M/asm_bnot">asm_bnot</dfn>(as, ir)	asm_neg_not(as, ir, XOg_NOT)</u></td></tr>
<tr><th id="2255">2255</th><td></td></tr>
<tr><th id="2256">2256</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_bswap" title='asm_bswap' data-ref="asm_bswap" data-ref-filename="asm_bswap">asm_bswap</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col3 decl" id="743as" title='as' data-type='ASMState *' data-ref="743as" data-ref-filename="743as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col4 decl" id="744ir" title='ir' data-type='IRIns *' data-ref="744ir" data-ref-filename="744ir">ir</dfn>)</td></tr>
<tr><th id="2257">2257</th><td>{</td></tr>
<tr><th id="2258">2258</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col5 decl" id="745dest" title='dest' data-type='Reg' data-ref="745dest" data-ref-filename="745dest">dest</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col3 ref" href="#743as" title='as' data-ref="743as" data-ref-filename="743as">as</a>, <a class="local col4 ref" href="#744ir" title='ir' data-ref="744ir" data-ref-filename="744ir">ir</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="2259">2259</th><td>  <a class="local col3 ref" href="#743as" title='as' data-ref="743as" data-ref-filename="743as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcp" title='ASMState::mcp' data-use='w' data-ref="ASMState::mcp" data-ref-filename="ASMState..mcp">mcp</a> = <a class="ref fn" href="lj_emit_x86.h.html#emit_op" title='emit_op' data-ref="emit_op" data-ref-filename="emit_op">emit_op</a>(<a class="enum" href="lj_target_x86.h.html#XO_BSWAP" title='XO_BSWAP' data-ref="XO_BSWAP" data-ref-filename="XO_BSWAP">XO_BSWAP</a> + ((<a class="local col5 ref" href="#745dest" title='dest' data-ref="745dest" data-ref-filename="745dest">dest</a>&amp;<var>7</var>) &lt;&lt; <var>24</var>),</td></tr>
<tr><th id="2260">2260</th><td>		    <a class="macro" href="lj_emit_x86.h.html#525" title="((0) + (((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)(((ir)-&gt;t).irt &amp; IRT_TYPE))) &amp; 1) ? (0x200|0x080000) : 0))" data-ref="_M/REX_64IR">REX_64IR</a>(<a class="local col4 ref" href="#744ir" title='ir' data-ref="744ir" data-ref-filename="744ir">ir</a>, <var>0</var>), <a class="local col5 ref" href="#745dest" title='dest' data-ref="745dest" data-ref-filename="745dest">dest</a>, <var>0</var>, <a class="local col3 ref" href="#743as" title='as' data-ref="743as" data-ref-filename="743as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcp" title='ASMState::mcp' data-use='r' data-ref="ASMState::mcp" data-ref-filename="ASMState..mcp">mcp</a>, <var>1</var>);</td></tr>
<tr><th id="2261">2261</th><td>  <a class="tu ref fn" href="lj_asm.c.html#ra_left" title='ra_left' data-use='c' data-ref="ra_left" data-ref-filename="ra_left">ra_left</a>(<a class="local col3 ref" href="#743as" title='as' data-ref="743as" data-ref-filename="743as">as</a>, <a class="local col5 ref" href="#745dest" title='dest' data-ref="745dest" data-ref-filename="745dest">dest</a>, <a class="local col4 ref" href="#744ir" title='ir' data-ref="744ir" data-ref-filename="744ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>);</td></tr>
<tr><th id="2262">2262</th><td>}</td></tr>
<tr><th id="2263">2263</th><td></td></tr>
<tr><th id="2264">2264</th><td><u>#define <dfn class="macro" id="_M/asm_band" data-ref="_M/asm_band">asm_band</dfn>(as, ir)	asm_intarith(as, ir, XOg_AND)</u></td></tr>
<tr><th id="2265">2265</th><td><u>#define <dfn class="macro" id="_M/asm_bor" data-ref="_M/asm_bor">asm_bor</dfn>(as, ir)		asm_intarith(as, ir, XOg_OR)</u></td></tr>
<tr><th id="2266">2266</th><td><u>#define <dfn class="macro" id="_M/asm_bxor" data-ref="_M/asm_bxor">asm_bxor</dfn>(as, ir)	asm_intarith(as, ir, XOg_XOR)</u></td></tr>
<tr><th id="2267">2267</th><td></td></tr>
<tr><th id="2268">2268</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_bitshift" title='asm_bitshift' data-ref="asm_bitshift" data-ref-filename="asm_bitshift">asm_bitshift</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col6 decl" id="746as" title='as' data-type='ASMState *' data-ref="746as" data-ref-filename="746as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col7 decl" id="747ir" title='ir' data-type='IRIns *' data-ref="747ir" data-ref-filename="747ir">ir</dfn>, <a class="typedef" href="lj_target_x86.h.html#x86Shift" title='x86Shift' data-type='enum x86Shift' data-ref="x86Shift" data-ref-filename="x86Shift">x86Shift</a> <dfn class="local col8 decl" id="748xs" title='xs' data-type='x86Shift' data-ref="748xs" data-ref-filename="748xs">xs</dfn>, <a class="typedef" href="lj_target_x86.h.html#x86Op" title='x86Op' data-type='enum x86Op' data-ref="x86Op" data-ref-filename="x86Op">x86Op</a> <dfn class="local col9 decl" id="749xv" title='xv' data-type='x86Op' data-ref="749xv" data-ref-filename="749xv">xv</dfn>)</td></tr>
<tr><th id="2269">2269</th><td>{</td></tr>
<tr><th id="2270">2270</th><td>  <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col0 decl" id="750rref" title='rref' data-type='IRRef' data-ref="750rref" data-ref-filename="750rref">rref</dfn> = <a class="local col7 ref" href="#747ir" title='ir' data-ref="747ir" data-ref-filename="747ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>;</td></tr>
<tr><th id="2271">2271</th><td>  <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col1 decl" id="751irr" title='irr' data-type='IRIns *' data-ref="751irr" data-ref-filename="751irr">irr</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(rref)])" data-ref="_M/IR">IR</a>(<a class="local col0 ref" href="#750rref" title='rref' data-ref="750rref" data-ref-filename="750rref">rref</a>);</td></tr>
<tr><th id="2272">2272</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col2 decl" id="752dest" title='dest' data-type='Reg' data-ref="752dest" data-ref-filename="752dest">dest</dfn>;</td></tr>
<tr><th id="2273">2273</th><td>  <b>if</b> (<a class="macro" href="lj_ir.h.html#470" title="((rref) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col0 ref" href="#750rref" title='rref' data-ref="750rref" data-ref-filename="750rref">rref</a>)) {  <i>/* Constant shifts. */</i></td></tr>
<tr><th id="2274">2274</th><td>    <em>int</em> <dfn class="local col3 decl" id="753shift" title='shift' data-type='int' data-ref="753shift" data-ref-filename="753shift">shift</dfn>;</td></tr>
<tr><th id="2275">2275</th><td>    <a class="local col2 ref" href="#752dest" title='dest' data-ref="752dest" data-ref-filename="752dest">dest</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col6 ref" href="#746as" title='as' data-ref="746as" data-ref-filename="746as">as</a>, <a class="local col7 ref" href="#747ir" title='ir' data-ref="747ir" data-ref-filename="747ir">ir</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="2276">2276</th><td>    <a class="local col3 ref" href="#753shift" title='shift' data-ref="753shift" data-ref-filename="753shift">shift</a> = <a class="local col1 ref" href="#751irr" title='irr' data-ref="751irr" data-ref-filename="751irr">irr</a>-&gt;<a class="ref field" href="lj_ir.h.html#IRIns::i" title='IRIns::i' data-ref="IRIns::i" data-ref-filename="IRIns..i">i</a> &amp; (<a class="macro" href="lj_ir.h.html#394" title="((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)((ir-&gt;t).irt &amp; IRT_TYPE))) &amp; 1)" data-ref="_M/irt_is64">irt_is64</a>(<a class="local col7 ref" href="#747ir" title='ir' data-ref="747ir" data-ref-filename="747ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) ? <var>63</var> : <var>31</var>);</td></tr>
<tr><th id="2277">2277</th><td>    <b>if</b> (!<a class="local col9 ref" href="#749xv" title='xv' data-ref="749xv" data-ref-filename="749xv">xv</a> &amp;&amp; <a class="local col3 ref" href="#753shift" title='shift' data-ref="753shift" data-ref-filename="753shift">shift</a> &amp;&amp; (<a class="local col6 ref" href="#746as" title='as' data-ref="746as" data-ref-filename="746as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::flags" title='ASMState::flags' data-use='r' data-ref="ASMState::flags" data-ref-filename="ASMState..flags">flags</a> &amp; <a class="macro" href="lj_jit.h.html#24" title="(0x00000010 &lt;&lt; 2)" data-ref="_M/JIT_F_BMI2">JIT_F_BMI2</a>)) {</td></tr>
<tr><th id="2278">2278</th><td>      <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col4 decl" id="754left" title='left' data-type='Reg' data-ref="754left" data-ref-filename="754left">left</dfn> = <a class="ref fn" href="#asm_fuseloadm" title='asm_fuseloadm' data-ref="asm_fuseloadm" data-ref-filename="asm_fuseloadm">asm_fuseloadm</a>(<a class="local col6 ref" href="#746as" title='as' data-ref="746as" data-ref-filename="746as">as</a>, <a class="local col7 ref" href="#747ir" title='ir' data-ref="747ir" data-ref-filename="747ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>, <a class="macro" href="lj_ir.h.html#394" title="((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)((ir-&gt;t).irt &amp; IRT_TYPE))) &amp; 1)" data-ref="_M/irt_is64">irt_is64</a>(<a class="local col7 ref" href="#747ir" title='ir' data-ref="747ir" data-ref-filename="747ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>));</td></tr>
<tr><th id="2279">2279</th><td>      <b>if</b> (<a class="local col4 ref" href="#754left" title='left' data-ref="754left" data-ref-filename="754left">left</a> != <a class="local col2 ref" href="#752dest" title='dest' data-ref="752dest" data-ref-filename="752dest">dest</a>) {  <i>/* BMI2 rotate right by constant. */</i></td></tr>
<tr><th id="2280">2280</th><td>	<a class="macro" href="lj_emit_x86.h.html#29" title="(*--as-&gt;mcp = (MCode)(xs == XOg_ROL ? -shift : shift))" data-ref="_M/emit_i8">emit_i8</a>(<a class="local col6 ref" href="#746as" title='as' data-ref="746as" data-ref-filename="746as">as</a>, <a class="local col8 ref" href="#748xs" title='xs' data-ref="748xs" data-ref-filename="748xs">xs</a> == <a class="enum" href="lj_target_x86.h.html#XOg_ROL" title='XOg_ROL' data-ref="XOg_ROL" data-ref-filename="XOg_ROL">XOg_ROL</a> ? -<a class="local col3 ref" href="#753shift" title='shift' data-ref="753shift" data-ref-filename="753shift">shift</a> : <a class="local col3 ref" href="#753shift" title='shift' data-ref="753shift" data-ref-filename="753shift">shift</a>);</td></tr>
<tr><th id="2281">2281</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col6 ref" href="#746as" title='as' data-ref="746as" data-ref-filename="746as">as</a>, <a class="macro" href="lj_emit_x86.h.html#526" title="((XV_RORX) + (((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)(((ir)-&gt;t).irt &amp; IRT_TYPE))) &amp; 1) ? 0x800000 : 0))" data-ref="_M/VEX_64IR">VEX_64IR</a>(<a class="local col7 ref" href="#747ir" title='ir' data-ref="747ir" data-ref-filename="747ir">ir</a>, <a class="enum" href="lj_target_x86.h.html#XV_RORX" title='XV_RORX' data-ref="XV_RORX" data-ref-filename="XV_RORX">XV_RORX</a>), <a class="local col2 ref" href="#752dest" title='dest' data-ref="752dest" data-ref-filename="752dest">dest</a>, <a class="local col4 ref" href="#754left" title='left' data-ref="754left" data-ref-filename="754left">left</a>);</td></tr>
<tr><th id="2282">2282</th><td>	<b>return</b>;</td></tr>
<tr><th id="2283">2283</th><td>      }</td></tr>
<tr><th id="2284">2284</th><td>    }</td></tr>
<tr><th id="2285">2285</th><td>    <b>switch</b> (<a class="local col3 ref" href="#753shift" title='shift' data-ref="753shift" data-ref-filename="753shift">shift</a>) {</td></tr>
<tr><th id="2286">2286</th><td>    <b>case</b> <var>0</var>: <b>break</b>;</td></tr>
<tr><th id="2287">2287</th><td>    <b>case</b> <var>1</var>: <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col6 ref" href="#746as" title='as' data-ref="746as" data-ref-filename="746as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_SHIFT1" title='XO_SHIFT1' data-ref="XO_SHIFT1" data-ref-filename="XO_SHIFT1">XO_SHIFT1</a>, <a class="macro" href="lj_emit_x86.h.html#525" title="((xs) + (((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)(((ir)-&gt;t).irt &amp; IRT_TYPE))) &amp; 1) ? (0x200|0x080000) : 0))" data-ref="_M/REX_64IR">REX_64IR</a>(<a class="local col7 ref" href="#747ir" title='ir' data-ref="747ir" data-ref-filename="747ir">ir</a>, <a class="local col8 ref" href="#748xs" title='xs' data-ref="748xs" data-ref-filename="748xs">xs</a>), <a class="local col2 ref" href="#752dest" title='dest' data-ref="752dest" data-ref-filename="752dest">dest</a>); <b>break</b>;</td></tr>
<tr><th id="2288">2288</th><td>    <b>default</b>: <a class="macro" href="lj_emit_x86.h.html#189" title="((*--as-&gt;mcp = (MCode)((shift))), emit_rr(as, XO_SHIFTi, (Reg)(((xs) + (((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)(((ir)-&gt;t).irt &amp; IRT_TYPE))) &amp; 1) ? (0x200|0x080000) : 0))), (dest)))" data-ref="_M/emit_shifti">emit_shifti</a>(<a class="local col6 ref" href="#746as" title='as' data-ref="746as" data-ref-filename="746as">as</a>, <a class="macro" href="lj_emit_x86.h.html#525" title="((xs) + (((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)(((ir)-&gt;t).irt &amp; IRT_TYPE))) &amp; 1) ? (0x200|0x080000) : 0))" data-ref="_M/REX_64IR">REX_64IR</a>(<a class="local col7 ref" href="#747ir" title='ir' data-ref="747ir" data-ref-filename="747ir">ir</a>, <a class="local col8 ref" href="#748xs" title='xs' data-ref="748xs" data-ref-filename="748xs">xs</a>), <a class="local col2 ref" href="#752dest" title='dest' data-ref="752dest" data-ref-filename="752dest">dest</a>, <a class="local col3 ref" href="#753shift" title='shift' data-ref="753shift" data-ref-filename="753shift">shift</a>); <b>break</b>;</td></tr>
<tr><th id="2289">2289</th><td>    }</td></tr>
<tr><th id="2290">2290</th><td>  } <b>else</b> <b>if</b> ((<a class="local col6 ref" href="#746as" title='as' data-ref="746as" data-ref-filename="746as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::flags" title='ASMState::flags' data-use='r' data-ref="ASMState::flags" data-ref-filename="ASMState..flags">flags</a> &amp; <a class="macro" href="lj_jit.h.html#24" title="(0x00000010 &lt;&lt; 2)" data-ref="_M/JIT_F_BMI2">JIT_F_BMI2</a>) &amp;&amp; <a class="local col9 ref" href="#749xv" title='xv' data-ref="749xv" data-ref-filename="749xv">xv</a>) {	<i>/* BMI2 variable shifts. */</i></td></tr>
<tr><th id="2291">2291</th><td>    <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col5 decl" id="755left" title='left' data-type='Reg' data-ref="755left" data-ref-filename="755left">left</dfn>, <dfn class="local col6 decl" id="756right" title='right' data-type='Reg' data-ref="756right" data-ref-filename="756right">right</dfn>;</td></tr>
<tr><th id="2292">2292</th><td>    <a class="local col2 ref" href="#752dest" title='dest' data-ref="752dest" data-ref-filename="752dest">dest</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col6 ref" href="#746as" title='as' data-ref="746as" data-ref-filename="746as">as</a>, <a class="local col7 ref" href="#747ir" title='ir' data-ref="747ir" data-ref-filename="747ir">ir</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="2293">2293</th><td>    <a class="local col6 ref" href="#756right" title='right' data-ref="756right" data-ref-filename="756right">right</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col6 ref" href="#746as" title='as' data-ref="746as" data-ref-filename="746as">as</a>, <a class="local col0 ref" href="#750rref" title='rref' data-ref="750rref" data-ref-filename="750rref">rref</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="2294">2294</th><td>    <a class="local col5 ref" href="#755left" title='left' data-ref="755left" data-ref-filename="755left">left</a> = <a class="ref fn" href="#asm_fuseloadm" title='asm_fuseloadm' data-ref="asm_fuseloadm" data-ref-filename="asm_fuseloadm">asm_fuseloadm</a>(<a class="local col6 ref" href="#746as" title='as' data-ref="746as" data-ref-filename="746as">as</a>, <a class="local col7 ref" href="#747ir" title='ir' data-ref="747ir" data-ref-filename="747ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="macro" href="lj_target.h.html#71" title="(((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH))) &amp; ~(((RegSet)1) &lt;&lt; (right)))" data-ref="_M/rset_exclude">rset_exclude</a>(<a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>, <a class="local col6 ref" href="#756right" title='right' data-ref="756right" data-ref-filename="756right">right</a>),</td></tr>
<tr><th id="2295">2295</th><td>			 <a class="macro" href="lj_ir.h.html#394" title="((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)((ir-&gt;t).irt &amp; IRT_TYPE))) &amp; 1)" data-ref="_M/irt_is64">irt_is64</a>(<a class="local col7 ref" href="#747ir" title='ir' data-ref="747ir" data-ref-filename="747ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>));</td></tr>
<tr><th id="2296">2296</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col6 ref" href="#746as" title='as' data-ref="746as" data-ref-filename="746as">as</a>, <a class="macro" href="lj_emit_x86.h.html#526" title="((xv) + (((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)(((ir)-&gt;t).irt &amp; IRT_TYPE))) &amp; 1) ? 0x800000 : 0))" data-ref="_M/VEX_64IR">VEX_64IR</a>(<a class="local col7 ref" href="#747ir" title='ir' data-ref="747ir" data-ref-filename="747ir">ir</a>, <a class="local col9 ref" href="#749xv" title='xv' data-ref="749xv" data-ref-filename="749xv">xv</a>) ^ (<a class="local col6 ref" href="#756right" title='right' data-ref="756right" data-ref-filename="756right">right</a> &lt;&lt; <var>19</var>), <a class="local col2 ref" href="#752dest" title='dest' data-ref="752dest" data-ref-filename="752dest">dest</a>, <a class="local col5 ref" href="#755left" title='left' data-ref="755left" data-ref-filename="755left">left</a>);</td></tr>
<tr><th id="2297">2297</th><td>    <b>return</b>;</td></tr>
<tr><th id="2298">2298</th><td>  } <b>else</b> {  <i>/* Variable shifts implicitly use register cl (i.e. ecx). */</i></td></tr>
<tr><th id="2299">2299</th><td>    <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col7 decl" id="757right" title='right' data-type='Reg' data-ref="757right" data-ref-filename="757right">right</dfn>;</td></tr>
<tr><th id="2300">2300</th><td>    <a class="local col2 ref" href="#752dest" title='dest' data-ref="752dest" data-ref-filename="752dest">dest</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_dest" title='ra_dest' data-use='c' data-ref="ra_dest" data-ref-filename="ra_dest">ra_dest</a>(<a class="local col6 ref" href="#746as" title='as' data-ref="746as" data-ref-filename="746as">as</a>, <a class="local col7 ref" href="#747ir" title='ir' data-ref="747ir" data-ref-filename="747ir">ir</a>, <a class="macro" href="lj_target.h.html#71" title="(((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH))) &amp; ~(((RegSet)1) &lt;&lt; (RID_ECX)))" data-ref="_M/rset_exclude">rset_exclude</a>(<a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>, <a class="enum" href="lj_target_x86.h.html#30" title='RID_ECX' data-ref="RID_ECX" data-ref-filename="RID_ECX">RID_ECX</a>));</td></tr>
<tr><th id="2301">2301</th><td>    <b>if</b> (<a class="local col2 ref" href="#752dest" title='dest' data-ref="752dest" data-ref-filename="752dest">dest</a> == <a class="enum" href="lj_target_x86.h.html#30" title='RID_ECX' data-ref="RID_ECX" data-ref-filename="RID_ECX">RID_ECX</a>) {</td></tr>
<tr><th id="2302">2302</th><td>      <a class="local col2 ref" href="#752dest" title='dest' data-ref="752dest" data-ref-filename="752dest">dest</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_scratch" title='ra_scratch' data-use='c' data-ref="ra_scratch" data-ref-filename="ra_scratch">ra_scratch</a>(<a class="local col6 ref" href="#746as" title='as' data-ref="746as" data-ref-filename="746as">as</a>, <a class="macro" href="lj_target.h.html#71" title="(((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH))) &amp; ~(((RegSet)1) &lt;&lt; (RID_ECX)))" data-ref="_M/rset_exclude">rset_exclude</a>(<a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>, <a class="enum" href="lj_target_x86.h.html#30" title='RID_ECX' data-ref="RID_ECX" data-ref-filename="RID_ECX">RID_ECX</a>));</td></tr>
<tr><th id="2303">2303</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col6 ref" href="#746as" title='as' data-ref="746as" data-ref-filename="746as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="macro" href="lj_emit_x86.h.html#525" title="((RID_ECX) + (((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)(((ir)-&gt;t).irt &amp; IRT_TYPE))) &amp; 1) ? (0x200|0x080000) : 0))" data-ref="_M/REX_64IR">REX_64IR</a>(<a class="local col7 ref" href="#747ir" title='ir' data-ref="747ir" data-ref-filename="747ir">ir</a>, <a class="enum" href="lj_target_x86.h.html#30" title='RID_ECX' data-ref="RID_ECX" data-ref-filename="RID_ECX">RID_ECX</a>), <a class="local col2 ref" href="#752dest" title='dest' data-ref="752dest" data-ref-filename="752dest">dest</a>);</td></tr>
<tr><th id="2304">2304</th><td>    }</td></tr>
<tr><th id="2305">2305</th><td>    <a class="local col7 ref" href="#757right" title='right' data-ref="757right" data-ref-filename="757right">right</a> = <a class="local col1 ref" href="#751irr" title='irr' data-ref="751irr" data-ref-filename="751irr">irr</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>;</td></tr>
<tr><th id="2306">2306</th><td>    <b>if</b> (<a class="macro" href="lj_target.h.html#27" title="((right) &amp; 0x80)" data-ref="_M/ra_noreg">ra_noreg</a>(<a class="local col7 ref" href="#757right" title='right' data-ref="757right" data-ref-filename="757right">right</a>))</td></tr>
<tr><th id="2307">2307</th><td>      <a class="local col7 ref" href="#757right" title='right' data-ref="757right" data-ref-filename="757right">right</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_allocref" title='ra_allocref' data-use='c' data-ref="ra_allocref" data-ref-filename="ra_allocref">ra_allocref</a>(<a class="local col6 ref" href="#746as" title='as' data-ref="746as" data-ref-filename="746as">as</a>, <a class="local col0 ref" href="#750rref" title='rref' data-ref="750rref" data-ref-filename="750rref">rref</a>, <a class="macro" href="lj_target.h.html#64" title="(((RegSet)1) &lt;&lt; (RID_ECX))" data-ref="_M/RID2RSET">RID2RSET</a>(<a class="enum" href="lj_target_x86.h.html#30" title='RID_ECX' data-ref="RID_ECX" data-ref-filename="RID_ECX">RID_ECX</a>));</td></tr>
<tr><th id="2308">2308</th><td>    <b>else</b> <b>if</b> (<a class="local col7 ref" href="#757right" title='right' data-ref="757right" data-ref-filename="757right">right</a> != <a class="enum" href="lj_target_x86.h.html#30" title='RID_ECX' data-ref="RID_ECX" data-ref-filename="RID_ECX">RID_ECX</a>)</td></tr>
<tr><th id="2309">2309</th><td>      <a class="tu ref fn" href="lj_asm.c.html#ra_scratch" title='ra_scratch' data-use='c' data-ref="ra_scratch" data-ref-filename="ra_scratch">ra_scratch</a>(<a class="local col6 ref" href="#746as" title='as' data-ref="746as" data-ref-filename="746as">as</a>, <a class="macro" href="lj_target.h.html#64" title="(((RegSet)1) &lt;&lt; (RID_ECX))" data-ref="_M/RID2RSET">RID2RSET</a>(<a class="enum" href="lj_target_x86.h.html#30" title='RID_ECX' data-ref="RID_ECX" data-ref-filename="RID_ECX">RID_ECX</a>));</td></tr>
<tr><th id="2310">2310</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col6 ref" href="#746as" title='as' data-ref="746as" data-ref-filename="746as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_SHIFTcl" title='XO_SHIFTcl' data-ref="XO_SHIFTcl" data-ref-filename="XO_SHIFTcl">XO_SHIFTcl</a>, <a class="macro" href="lj_emit_x86.h.html#525" title="((xs) + (((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)(((ir)-&gt;t).irt &amp; IRT_TYPE))) &amp; 1) ? (0x200|0x080000) : 0))" data-ref="_M/REX_64IR">REX_64IR</a>(<a class="local col7 ref" href="#747ir" title='ir' data-ref="747ir" data-ref-filename="747ir">ir</a>, <a class="local col8 ref" href="#748xs" title='xs' data-ref="748xs" data-ref-filename="748xs">xs</a>), <a class="local col2 ref" href="#752dest" title='dest' data-ref="752dest" data-ref-filename="752dest">dest</a>);</td></tr>
<tr><th id="2311">2311</th><td>    <a class="macro" href="lj_asm.c.html#307" title="(as-&gt;weakset &amp;= ~(((RegSet)1) &lt;&lt; ((right))))" data-ref="_M/ra_noweak">ra_noweak</a>(<a class="local col6 ref" href="#746as" title='as' data-ref="746as" data-ref-filename="746as">as</a>, <a class="local col7 ref" href="#757right" title='right' data-ref="757right" data-ref-filename="757right">right</a>);</td></tr>
<tr><th id="2312">2312</th><td>    <b>if</b> (<a class="local col7 ref" href="#757right" title='right' data-ref="757right" data-ref-filename="757right">right</a> != <a class="enum" href="lj_target_x86.h.html#30" title='RID_ECX' data-ref="RID_ECX" data-ref-filename="RID_ECX">RID_ECX</a>)</td></tr>
<tr><th id="2313">2313</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col6 ref" href="#746as" title='as' data-ref="746as" data-ref-filename="746as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="enum" href="lj_target_x86.h.html#30" title='RID_ECX' data-ref="RID_ECX" data-ref-filename="RID_ECX">RID_ECX</a>, <a class="local col7 ref" href="#757right" title='right' data-ref="757right" data-ref-filename="757right">right</a>);</td></tr>
<tr><th id="2314">2314</th><td>  }</td></tr>
<tr><th id="2315">2315</th><td>  <a class="tu ref fn" href="lj_asm.c.html#ra_left" title='ra_left' data-use='c' data-ref="ra_left" data-ref-filename="ra_left">ra_left</a>(<a class="local col6 ref" href="#746as" title='as' data-ref="746as" data-ref-filename="746as">as</a>, <a class="local col2 ref" href="#752dest" title='dest' data-ref="752dest" data-ref-filename="752dest">dest</a>, <a class="local col7 ref" href="#747ir" title='ir' data-ref="747ir" data-ref-filename="747ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>);</td></tr>
<tr><th id="2316">2316</th><td>  <i>/*</i></td></tr>
<tr><th id="2317">2317</th><td><i>  ** Note: avoid using the flags resulting from a shift or rotate!</i></td></tr>
<tr><th id="2318">2318</th><td><i>  ** All of them cause a partial flag stall, except for r,1 shifts</i></td></tr>
<tr><th id="2319">2319</th><td><i>  ** (but not rotates). And a shift count of 0 leaves the flags unmodified.</i></td></tr>
<tr><th id="2320">2320</th><td><i>  */</i></td></tr>
<tr><th id="2321">2321</th><td>}</td></tr>
<tr><th id="2322">2322</th><td></td></tr>
<tr><th id="2323">2323</th><td><u>#define <dfn class="macro" id="_M/asm_bshl" data-ref="_M/asm_bshl">asm_bshl</dfn>(as, ir)	asm_bitshift(as, ir, XOg_SHL, XV_SHLX)</u></td></tr>
<tr><th id="2324">2324</th><td><u>#define <dfn class="macro" id="_M/asm_bshr" data-ref="_M/asm_bshr">asm_bshr</dfn>(as, ir)	asm_bitshift(as, ir, XOg_SHR, XV_SHRX)</u></td></tr>
<tr><th id="2325">2325</th><td><u>#define <dfn class="macro" id="_M/asm_bsar" data-ref="_M/asm_bsar">asm_bsar</dfn>(as, ir)	asm_bitshift(as, ir, XOg_SAR, XV_SARX)</u></td></tr>
<tr><th id="2326">2326</th><td><u>#define <dfn class="macro" id="_M/asm_brol" data-ref="_M/asm_brol">asm_brol</dfn>(as, ir)	asm_bitshift(as, ir, XOg_ROL, 0)</u></td></tr>
<tr><th id="2327">2327</th><td><u>#define <dfn class="macro" id="_M/asm_bror" data-ref="_M/asm_bror">asm_bror</dfn>(as, ir)	asm_bitshift(as, ir, XOg_ROR, 0)</u></td></tr>
<tr><th id="2328">2328</th><td></td></tr>
<tr><th id="2329">2329</th><td><i>/* -- Comparisons --------------------------------------------------------- */</i></td></tr>
<tr><th id="2330">2330</th><td></td></tr>
<tr><th id="2331">2331</th><td><i>/* Virtual flags for unordered FP comparisons. */</i></td></tr>
<tr><th id="2332">2332</th><td><u>#define <dfn class="macro" id="_M/VCC_U" data-ref="_M/VCC_U">VCC_U</dfn>	0x1000		/* Unordered. */</u></td></tr>
<tr><th id="2333">2333</th><td><u>#define <dfn class="macro" id="_M/VCC_P" data-ref="_M/VCC_P">VCC_P</dfn>	0x2000		/* Needs extra CC_P branch. */</u></td></tr>
<tr><th id="2334">2334</th><td><u>#define <dfn class="macro" id="_M/VCC_S" data-ref="_M/VCC_S">VCC_S</dfn>	0x4000		/* Swap avoids CC_P branch. */</u></td></tr>
<tr><th id="2335">2335</th><td><u>#define <dfn class="macro" id="_M/VCC_PS" data-ref="_M/VCC_PS">VCC_PS</dfn>	(VCC_P|VCC_S)</u></td></tr>
<tr><th id="2336">2336</th><td></td></tr>
<tr><th id="2337">2337</th><td><i>/* Map of comparisons to flags. ORDER IR. */</i></td></tr>
<tr><th id="2338">2338</th><td><u>#define <dfn class="macro" id="_M/COMPFLAGS" data-ref="_M/COMPFLAGS">COMPFLAGS</dfn>(ci, cin, cu, cf)	((ci)+((cu)&lt;&lt;4)+((cin)&lt;&lt;8)+(cf))</u></td></tr>
<tr><th id="2339">2339</th><td><em>static</em> <em>const</em> <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint16_t" title='uint16_t' data-type='__uint16_t' data-ref="uint16_t" data-ref-filename="uint16_t">uint16_t</a> <dfn class="decl def" id="asm_compmap" title='asm_compmap' data-ref="asm_compmap" data-ref-filename="asm_compmap">asm_compmap</dfn>[<a class="enum" href="lj_ir.h.html#154" title='IR_ABC' data-ref="IR_ABC" data-ref-filename="IR_ABC">IR_ABC</a>+<var>1</var>] = {</td></tr>
<tr><th id="2340">2340</th><td>  <i>/*                 signed non-eq unsigned flags */</i></td></tr>
<tr><th id="2341">2341</th><td>  <i>/* LT  */</i> <a class="macro" href="#2338" title="((CC_GE)+((CC_AE)&lt;&lt;4)+((CC_G)&lt;&lt;8)+((0x2000|0x4000)))" data-ref="_M/COMPFLAGS">COMPFLAGS</a>(<a class="enum" href="lj_target_x86.h.html#CC_GE" title='CC_GE' data-ref="CC_GE" data-ref-filename="CC_GE">CC_GE</a>, <a class="enum" href="lj_target_x86.h.html#CC_G" title='CC_G' data-ref="CC_G" data-ref-filename="CC_G">CC_G</a>,  <a class="enum" href="lj_target_x86.h.html#CC_AE" title='CC_AE' data-ref="CC_AE" data-ref-filename="CC_AE">CC_AE</a>, <a class="macro" href="#2335" title="(0x2000|0x4000)" data-ref="_M/VCC_PS">VCC_PS</a>),</td></tr>
<tr><th id="2342">2342</th><td>  <i>/* GE  */</i> <a class="macro" href="#2338" title="((CC_L)+((CC_B)&lt;&lt;4)+((CC_L)&lt;&lt;8)+(0))" data-ref="_M/COMPFLAGS">COMPFLAGS</a>(<a class="enum" href="lj_target_x86.h.html#CC_L" title='CC_L' data-ref="CC_L" data-ref-filename="CC_L">CC_L</a>,  <a class="enum" href="lj_target_x86.h.html#CC_L" title='CC_L' data-ref="CC_L" data-ref-filename="CC_L">CC_L</a>,  <a class="enum" href="lj_target_x86.h.html#CC_B" title='CC_B' data-ref="CC_B" data-ref-filename="CC_B">CC_B</a>,  <var>0</var>),</td></tr>
<tr><th id="2343">2343</th><td>  <i>/* LE  */</i> <a class="macro" href="#2338" title="((CC_G)+((CC_A)&lt;&lt;4)+((CC_G)&lt;&lt;8)+((0x2000|0x4000)))" data-ref="_M/COMPFLAGS">COMPFLAGS</a>(<a class="enum" href="lj_target_x86.h.html#CC_G" title='CC_G' data-ref="CC_G" data-ref-filename="CC_G">CC_G</a>,  <a class="enum" href="lj_target_x86.h.html#CC_G" title='CC_G' data-ref="CC_G" data-ref-filename="CC_G">CC_G</a>,  <a class="enum" href="lj_target_x86.h.html#CC_A" title='CC_A' data-ref="CC_A" data-ref-filename="CC_A">CC_A</a>,  <a class="macro" href="#2335" title="(0x2000|0x4000)" data-ref="_M/VCC_PS">VCC_PS</a>),</td></tr>
<tr><th id="2344">2344</th><td>  <i>/* GT  */</i> <a class="macro" href="#2338" title="((CC_LE)+((CC_BE)&lt;&lt;4)+((CC_L)&lt;&lt;8)+(0))" data-ref="_M/COMPFLAGS">COMPFLAGS</a>(<a class="enum" href="lj_target_x86.h.html#CC_LE" title='CC_LE' data-ref="CC_LE" data-ref-filename="CC_LE">CC_LE</a>, <a class="enum" href="lj_target_x86.h.html#CC_L" title='CC_L' data-ref="CC_L" data-ref-filename="CC_L">CC_L</a>,  <a class="enum" href="lj_target_x86.h.html#CC_BE" title='CC_BE' data-ref="CC_BE" data-ref-filename="CC_BE">CC_BE</a>, <var>0</var>),</td></tr>
<tr><th id="2345">2345</th><td>  <i>/* ULT */</i> <a class="macro" href="#2338" title="((CC_AE)+((CC_AE)&lt;&lt;4)+((CC_A)&lt;&lt;8)+(0x1000))" data-ref="_M/COMPFLAGS">COMPFLAGS</a>(<a class="enum" href="lj_target_x86.h.html#CC_AE" title='CC_AE' data-ref="CC_AE" data-ref-filename="CC_AE">CC_AE</a>, <a class="enum" href="lj_target_x86.h.html#CC_A" title='CC_A' data-ref="CC_A" data-ref-filename="CC_A">CC_A</a>,  <a class="enum" href="lj_target_x86.h.html#CC_AE" title='CC_AE' data-ref="CC_AE" data-ref-filename="CC_AE">CC_AE</a>, <a class="macro" href="#2332" title="0x1000" data-ref="_M/VCC_U">VCC_U</a>),</td></tr>
<tr><th id="2346">2346</th><td>  <i>/* UGE */</i> <a class="macro" href="#2338" title="((CC_B)+((CC_B)&lt;&lt;4)+((CC_B)&lt;&lt;8)+(0x1000|(0x2000|0x4000)))" data-ref="_M/COMPFLAGS">COMPFLAGS</a>(<a class="enum" href="lj_target_x86.h.html#CC_B" title='CC_B' data-ref="CC_B" data-ref-filename="CC_B">CC_B</a>,  <a class="enum" href="lj_target_x86.h.html#CC_B" title='CC_B' data-ref="CC_B" data-ref-filename="CC_B">CC_B</a>,  <a class="enum" href="lj_target_x86.h.html#CC_B" title='CC_B' data-ref="CC_B" data-ref-filename="CC_B">CC_B</a>,  <a class="macro" href="#2332" title="0x1000" data-ref="_M/VCC_U">VCC_U</a>|<a class="macro" href="#2335" title="(0x2000|0x4000)" data-ref="_M/VCC_PS">VCC_PS</a>),</td></tr>
<tr><th id="2347">2347</th><td>  <i>/* ULE */</i> <a class="macro" href="#2338" title="((CC_A)+((CC_A)&lt;&lt;4)+((CC_A)&lt;&lt;8)+(0x1000))" data-ref="_M/COMPFLAGS">COMPFLAGS</a>(<a class="enum" href="lj_target_x86.h.html#CC_A" title='CC_A' data-ref="CC_A" data-ref-filename="CC_A">CC_A</a>,  <a class="enum" href="lj_target_x86.h.html#CC_A" title='CC_A' data-ref="CC_A" data-ref-filename="CC_A">CC_A</a>,  <a class="enum" href="lj_target_x86.h.html#CC_A" title='CC_A' data-ref="CC_A" data-ref-filename="CC_A">CC_A</a>,  <a class="macro" href="#2332" title="0x1000" data-ref="_M/VCC_U">VCC_U</a>),</td></tr>
<tr><th id="2348">2348</th><td>  <i>/* UGT */</i> <a class="macro" href="#2338" title="((CC_BE)+((CC_BE)&lt;&lt;4)+((CC_B)&lt;&lt;8)+(0x1000|(0x2000|0x4000)))" data-ref="_M/COMPFLAGS">COMPFLAGS</a>(<a class="enum" href="lj_target_x86.h.html#CC_BE" title='CC_BE' data-ref="CC_BE" data-ref-filename="CC_BE">CC_BE</a>, <a class="enum" href="lj_target_x86.h.html#CC_B" title='CC_B' data-ref="CC_B" data-ref-filename="CC_B">CC_B</a>,  <a class="enum" href="lj_target_x86.h.html#CC_BE" title='CC_BE' data-ref="CC_BE" data-ref-filename="CC_BE">CC_BE</a>, <a class="macro" href="#2332" title="0x1000" data-ref="_M/VCC_U">VCC_U</a>|<a class="macro" href="#2335" title="(0x2000|0x4000)" data-ref="_M/VCC_PS">VCC_PS</a>),</td></tr>
<tr><th id="2349">2349</th><td>  <i>/* EQ  */</i> <a class="macro" href="#2338" title="((CC_NE)+((CC_NE)&lt;&lt;4)+((CC_NE)&lt;&lt;8)+(0x2000))" data-ref="_M/COMPFLAGS">COMPFLAGS</a>(<a class="enum" href="lj_target_x86.h.html#CC_NE" title='CC_NE' data-ref="CC_NE" data-ref-filename="CC_NE">CC_NE</a>, <a class="enum" href="lj_target_x86.h.html#CC_NE" title='CC_NE' data-ref="CC_NE" data-ref-filename="CC_NE">CC_NE</a>, <a class="enum" href="lj_target_x86.h.html#CC_NE" title='CC_NE' data-ref="CC_NE" data-ref-filename="CC_NE">CC_NE</a>, <a class="macro" href="#2333" title="0x2000" data-ref="_M/VCC_P">VCC_P</a>),</td></tr>
<tr><th id="2350">2350</th><td>  <i>/* NE  */</i> <a class="macro" href="#2338" title="((CC_E)+((CC_E)&lt;&lt;4)+((CC_E)&lt;&lt;8)+(0x1000|0x2000))" data-ref="_M/COMPFLAGS">COMPFLAGS</a>(<a class="enum" href="lj_target_x86.h.html#CC_E" title='CC_E' data-ref="CC_E" data-ref-filename="CC_E">CC_E</a>,  <a class="enum" href="lj_target_x86.h.html#CC_E" title='CC_E' data-ref="CC_E" data-ref-filename="CC_E">CC_E</a>,  <a class="enum" href="lj_target_x86.h.html#CC_E" title='CC_E' data-ref="CC_E" data-ref-filename="CC_E">CC_E</a>,  <a class="macro" href="#2332" title="0x1000" data-ref="_M/VCC_U">VCC_U</a>|<a class="macro" href="#2333" title="0x2000" data-ref="_M/VCC_P">VCC_P</a>),</td></tr>
<tr><th id="2351">2351</th><td>  <i>/* ABC */</i> <a class="macro" href="#2338" title="((CC_BE)+((CC_BE)&lt;&lt;4)+((CC_B)&lt;&lt;8)+(0x1000|(0x2000|0x4000)))" data-ref="_M/COMPFLAGS">COMPFLAGS</a>(<a class="enum" href="lj_target_x86.h.html#CC_BE" title='CC_BE' data-ref="CC_BE" data-ref-filename="CC_BE">CC_BE</a>, <a class="enum" href="lj_target_x86.h.html#CC_B" title='CC_B' data-ref="CC_B" data-ref-filename="CC_B">CC_B</a>,  <a class="enum" href="lj_target_x86.h.html#CC_BE" title='CC_BE' data-ref="CC_BE" data-ref-filename="CC_BE">CC_BE</a>, <a class="macro" href="#2332" title="0x1000" data-ref="_M/VCC_U">VCC_U</a>|<a class="macro" href="#2335" title="(0x2000|0x4000)" data-ref="_M/VCC_PS">VCC_PS</a>)  <i>/* Same as UGT. */</i></td></tr>
<tr><th id="2352">2352</th><td>};</td></tr>
<tr><th id="2353">2353</th><td></td></tr>
<tr><th id="2354">2354</th><td><i>/* FP and integer comparisons. */</i></td></tr>
<tr><th id="2355">2355</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_comp" title='asm_comp' data-ref="asm_comp" data-ref-filename="asm_comp">asm_comp</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col8 decl" id="758as" title='as' data-type='ASMState *' data-ref="758as" data-ref-filename="758as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col9 decl" id="759ir" title='ir' data-type='IRIns *' data-ref="759ir" data-ref-filename="759ir">ir</dfn>)</td></tr>
<tr><th id="2356">2356</th><td>{</td></tr>
<tr><th id="2357">2357</th><td>  <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a> <dfn class="local col0 decl" id="760cc" title='cc' data-type='uint32_t' data-ref="760cc" data-ref-filename="760cc">cc</dfn> = <a class="ref" href="#asm_compmap" title='asm_compmap' data-ref="asm_compmap" data-ref-filename="asm_compmap">asm_compmap</a>[<a class="local col9 ref" href="#759ir" title='ir' data-ref="759ir" data-ref-filename="759ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a>];</td></tr>
<tr><th id="2358">2358</th><td>  <b>if</b> (<a class="macro" href="lj_ir.h.html#363" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM)" data-ref="_M/irt_isnum">irt_isnum</a>(<a class="local col9 ref" href="#759ir" title='ir' data-ref="759ir" data-ref-filename="759ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="2359">2359</th><td>    <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col1 decl" id="761lref" title='lref' data-type='IRRef' data-ref="761lref" data-ref-filename="761lref">lref</dfn> = <a class="local col9 ref" href="#759ir" title='ir' data-ref="759ir" data-ref-filename="759ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>;</td></tr>
<tr><th id="2360">2360</th><td>    <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col2 decl" id="762rref" title='rref' data-type='IRRef' data-ref="762rref" data-ref-filename="762rref">rref</dfn> = <a class="local col9 ref" href="#759ir" title='ir' data-ref="759ir" data-ref-filename="759ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>;</td></tr>
<tr><th id="2361">2361</th><td>    <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col3 decl" id="763left" title='left' data-type='Reg' data-ref="763left" data-ref-filename="763left">left</dfn>, <dfn class="local col4 decl" id="764right" title='right' data-type='Reg' data-ref="764right" data-ref-filename="764right">right</dfn>;</td></tr>
<tr><th id="2362">2362</th><td>    <a class="typedef" href="lj_emit_x86.h.html#MCLabel" title='MCLabel' data-type='MCode *' data-ref="MCLabel" data-ref-filename="MCLabel">MCLabel</a> <dfn class="local col5 decl" id="765l_around" title='l_around' data-type='MCLabel' data-ref="765l_around" data-ref-filename="765l_around">l_around</dfn>;</td></tr>
<tr><th id="2363">2363</th><td>    <i>/*</i></td></tr>
<tr><th id="2364">2364</th><td><i>    ** An extra CC_P branch is required to preserve ordered/unordered</i></td></tr>
<tr><th id="2365">2365</th><td><i>    ** semantics for FP comparisons. This can be avoided by swapping</i></td></tr>
<tr><th id="2366">2366</th><td><i>    ** the operands and inverting the condition (except for EQ and UNE).</i></td></tr>
<tr><th id="2367">2367</th><td><i>    ** So always try to swap if possible.</i></td></tr>
<tr><th id="2368">2368</th><td><i>    **</i></td></tr>
<tr><th id="2369">2369</th><td><i>    ** Another option would be to swap operands to achieve better memory</i></td></tr>
<tr><th id="2370">2370</th><td><i>    ** operand fusion. But it's unlikely that this outweighs the cost</i></td></tr>
<tr><th id="2371">2371</th><td><i>    ** of the extra branches.</i></td></tr>
<tr><th id="2372">2372</th><td><i>    */</i></td></tr>
<tr><th id="2373">2373</th><td>    <b>if</b> (<a class="local col0 ref" href="#760cc" title='cc' data-ref="760cc" data-ref-filename="760cc">cc</a> &amp; <a class="macro" href="#2334" title="0x4000" data-ref="_M/VCC_S">VCC_S</a>) {  <i>/* Swap? */</i></td></tr>
<tr><th id="2374">2374</th><td>      <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col6 decl" id="766tmp" title='tmp' data-type='IRRef' data-ref="766tmp" data-ref-filename="766tmp">tmp</dfn> = <a class="local col1 ref" href="#761lref" title='lref' data-ref="761lref" data-ref-filename="761lref">lref</a>; <a class="local col1 ref" href="#761lref" title='lref' data-ref="761lref" data-ref-filename="761lref">lref</a> = <a class="local col2 ref" href="#762rref" title='rref' data-ref="762rref" data-ref-filename="762rref">rref</a>; <a class="local col2 ref" href="#762rref" title='rref' data-ref="762rref" data-ref-filename="762rref">rref</a> = <a class="local col6 ref" href="#766tmp" title='tmp' data-ref="766tmp" data-ref-filename="766tmp">tmp</a>;</td></tr>
<tr><th id="2375">2375</th><td>      <a class="local col0 ref" href="#760cc" title='cc' data-ref="760cc" data-ref-filename="760cc">cc</a> ^= (<a class="macro" href="#2335" title="(0x2000|0x4000)" data-ref="_M/VCC_PS">VCC_PS</a>|(<var>5</var>&lt;&lt;<var>4</var>));  <i>/* A &lt;-&gt; B, AE &lt;-&gt; BE, PS &lt;-&gt; none */</i></td></tr>
<tr><th id="2376">2376</th><td>    }</td></tr>
<tr><th id="2377">2377</th><td>    <a class="local col3 ref" href="#763left" title='left' data-ref="763left" data-ref-filename="763left">left</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="local col1 ref" href="#761lref" title='lref' data-ref="761lref" data-ref-filename="761lref">lref</a>, <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>);</td></tr>
<tr><th id="2378">2378</th><td>    <a class="local col5 ref" href="#765l_around" title='l_around' data-ref="765l_around" data-ref-filename="765l_around">l_around</a> = <a class="macro" href="lj_emit_x86.h.html#472" title="((as)-&gt;mcp)" data-ref="_M/emit_label">emit_label</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>);</td></tr>
<tr><th id="2379">2379</th><td>    <a class="ref fn" href="#asm_guardcc" title='asm_guardcc' data-ref="asm_guardcc" data-ref-filename="asm_guardcc">asm_guardcc</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="local col0 ref" href="#760cc" title='cc' data-ref="760cc" data-ref-filename="760cc">cc</a> &gt;&gt; <var>4</var>);</td></tr>
<tr><th id="2380">2380</th><td>    <b>if</b> (<a class="local col0 ref" href="#760cc" title='cc' data-ref="760cc" data-ref-filename="760cc">cc</a> &amp; <a class="macro" href="#2333" title="0x2000" data-ref="_M/VCC_P">VCC_P</a>) {  <i>/* Extra CC_P branch required? */</i></td></tr>
<tr><th id="2381">2381</th><td>      <b>if</b> (!(<a class="local col0 ref" href="#760cc" title='cc' data-ref="760cc" data-ref-filename="760cc">cc</a> &amp; <a class="macro" href="#2332" title="0x1000" data-ref="_M/VCC_U">VCC_U</a>)) {</td></tr>
<tr><th id="2382">2382</th><td>	<a class="ref fn" href="#asm_guardcc" title='asm_guardcc' data-ref="asm_guardcc" data-ref-filename="asm_guardcc">asm_guardcc</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_P" title='CC_P' data-ref="CC_P" data-ref-filename="CC_P">CC_P</a>);  <i>/* Branch to exit for ordered comparisons. */</i></td></tr>
<tr><th id="2383">2383</th><td>      } <b>else</b> <b>if</b> (<a class="local col5 ref" href="#765l_around" title='l_around' data-ref="765l_around" data-ref-filename="765l_around">l_around</a> != <a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::invmcp" title='ASMState::invmcp' data-use='r' data-ref="ASMState::invmcp" data-ref-filename="ASMState..invmcp">invmcp</a>) {</td></tr>
<tr><th id="2384">2384</th><td>	<a class="ref fn" href="lj_emit_x86.h.html#emit_sjcc" title='emit_sjcc' data-ref="emit_sjcc" data-ref-filename="emit_sjcc">emit_sjcc</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_P" title='CC_P' data-ref="CC_P" data-ref-filename="CC_P">CC_P</a>, <a class="local col5 ref" href="#765l_around" title='l_around' data-ref="765l_around" data-ref-filename="765l_around">l_around</a>);  <i>/* Branch around for unordered. */</i></td></tr>
<tr><th id="2385">2385</th><td>      } <b>else</b> {</td></tr>
<tr><th id="2386">2386</th><td>	<i>/* Patched to mcloop by asm_loop_fixup. */</i></td></tr>
<tr><th id="2387">2387</th><td>	<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::loopinv" title='ASMState::loopinv' data-use='w' data-ref="ASMState::loopinv" data-ref-filename="ASMState..loopinv">loopinv</a> = <var>2</var>;</td></tr>
<tr><th id="2388">2388</th><td>	<b>if</b> (<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::realign" title='ASMState::realign' data-use='r' data-ref="ASMState::realign" data-ref-filename="ASMState..realign">realign</a>)</td></tr>
<tr><th id="2389">2389</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_sjcc" title='emit_sjcc' data-ref="emit_sjcc" data-ref-filename="emit_sjcc">emit_sjcc</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_P" title='CC_P' data-ref="CC_P" data-ref-filename="CC_P">CC_P</a>, <a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcp" title='ASMState::mcp' data-use='r' data-ref="ASMState::mcp" data-ref-filename="ASMState..mcp">mcp</a>);</td></tr>
<tr><th id="2390">2390</th><td>	<b>else</b></td></tr>
<tr><th id="2391">2391</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_jcc" title='emit_jcc' data-ref="emit_jcc" data-ref-filename="emit_jcc">emit_jcc</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_P" title='CC_P' data-ref="CC_P" data-ref-filename="CC_P">CC_P</a>, <a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcp" title='ASMState::mcp' data-use='r' data-ref="ASMState::mcp" data-ref-filename="ASMState..mcp">mcp</a>);</td></tr>
<tr><th id="2392">2392</th><td>      }</td></tr>
<tr><th id="2393">2393</th><td>    }</td></tr>
<tr><th id="2394">2394</th><td>    <a class="local col4 ref" href="#764right" title='right' data-ref="764right" data-ref-filename="764right">right</a> = <a class="ref fn" href="#asm_fuseload" title='asm_fuseload' data-ref="asm_fuseload" data-ref-filename="asm_fuseload">asm_fuseload</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="local col2 ref" href="#762rref" title='rref' data-ref="762rref" data-ref-filename="762rref">rref</a>, <a class="macro" href="lj_target.h.html#71" title="(((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR))) &amp; ~(((RegSet)1) &lt;&lt; (left)))" data-ref="_M/rset_exclude">rset_exclude</a>(<a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>, <a class="local col3 ref" href="#763left" title='left' data-ref="763left" data-ref-filename="763left">left</a>));</td></tr>
<tr><th id="2395">2395</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_UCOMISD" title='XO_UCOMISD' data-ref="XO_UCOMISD" data-ref-filename="XO_UCOMISD">XO_UCOMISD</a>, <a class="local col3 ref" href="#763left" title='left' data-ref="763left" data-ref-filename="763left">left</a>, <a class="local col4 ref" href="#764right" title='right' data-ref="764right" data-ref-filename="764right">right</a>);</td></tr>
<tr><th id="2396">2396</th><td>  } <b>else</b> {</td></tr>
<tr><th id="2397">2397</th><td>    <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col7 decl" id="767lref" title='lref' data-type='IRRef' data-ref="767lref" data-ref-filename="767lref">lref</dfn> = <a class="local col9 ref" href="#759ir" title='ir' data-ref="759ir" data-ref-filename="759ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <dfn class="local col8 decl" id="768rref" title='rref' data-type='IRRef' data-ref="768rref" data-ref-filename="768rref">rref</dfn> = <a class="local col9 ref" href="#759ir" title='ir' data-ref="759ir" data-ref-filename="759ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>;</td></tr>
<tr><th id="2398">2398</th><td>    <a class="typedef" href="lj_ir.h.html#IROp" title='IROp' data-type='enum IROp' data-ref="IROp" data-ref-filename="IROp">IROp</a> <dfn class="local col9 decl" id="769leftop" title='leftop' data-type='IROp' data-ref="769leftop" data-ref-filename="769leftop">leftop</dfn> = (<a class="typedef" href="lj_ir.h.html#IROp" title='IROp' data-type='enum IROp' data-ref="IROp" data-ref-filename="IROp">IROp</a>)(<a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(lref)])" data-ref="_M/IR">IR</a>(<a class="local col7 ref" href="#767lref" title='lref' data-ref="767lref" data-ref-filename="767lref">lref</a>)-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a>);</td></tr>
<tr><th id="2399">2399</th><td>    <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col0 decl" id="770r64" title='r64' data-type='Reg' data-ref="770r64" data-ref-filename="770r64">r64</dfn> = <a class="macro" href="lj_emit_x86.h.html#525" title="((0) + (((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)(((ir)-&gt;t).irt &amp; IRT_TYPE))) &amp; 1) ? (0x200|0x080000) : 0))" data-ref="_M/REX_64IR">REX_64IR</a>(<a class="local col9 ref" href="#759ir" title='ir' data-ref="759ir" data-ref-filename="759ir">ir</a>, <var>0</var>);</td></tr>
<tr><th id="2400">2400</th><td>    <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> <dfn class="local col1 decl" id="771imm" title='imm' data-type='int32_t' data-ref="771imm" data-ref-filename="771imm">imm</dfn> = <var>0</var>;</td></tr>
<tr><th id="2401">2401</th><td>    <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(irt_is64(ir-&gt;t) || irt_isint(ir-&gt;t) ||</td></tr>
<tr><th id="2402">2402</th><td>	       irt_isu32(ir-&gt;t) || irt_isaddr(ir-&gt;t) || irt_isu8(ir-&gt;t),</td></tr>
<tr><th id="2403">2403</th><td>	       <q>"bad comparison data type %d"</q>, irt_type(ir-&gt;t));</td></tr>
<tr><th id="2404">2404</th><td>    <i>/* Swap constants (only for ABC) and fusable loads to the right. */</i></td></tr>
<tr><th id="2405">2405</th><td>    <b>if</b> (<a class="macro" href="lj_ir.h.html#470" title="((lref) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col7 ref" href="#767lref" title='lref' data-ref="767lref" data-ref-filename="767lref">lref</a>) || (!<a class="macro" href="lj_ir.h.html#470" title="((rref) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col8 ref" href="#768rref" title='rref' data-ref="768rref" data-ref-filename="768rref">rref</a>) &amp;&amp; <a class="macro" href="lj_asm.c.html#123" title="((leftop) == IR_ALOAD || (leftop) == IR_HLOAD || (leftop) == IR_ULOAD || (leftop) == IR_FLOAD || (leftop) == IR_XLOAD || (leftop) == IR_SLOAD || (leftop) == IR_VLOAD)" data-ref="_M/opisfusableload">opisfusableload</a>(<a class="local col9 ref" href="#769leftop" title='leftop' data-ref="769leftop" data-ref-filename="769leftop">leftop</a>))) {</td></tr>
<tr><th id="2406">2406</th><td>      <b>if</b> ((<a class="local col0 ref" href="#760cc" title='cc' data-ref="760cc" data-ref-filename="760cc">cc</a> &amp; <var>0xc</var>) == <var>0xc</var>) <a class="local col0 ref" href="#760cc" title='cc' data-ref="760cc" data-ref-filename="760cc">cc</a> ^= <var>0x53</var>;  <i>/* L &lt;-&gt; G, LE &lt;-&gt; GE */</i></td></tr>
<tr><th id="2407">2407</th><td>      <b>else</b> <b>if</b> ((<a class="local col0 ref" href="#760cc" title='cc' data-ref="760cc" data-ref-filename="760cc">cc</a> &amp; <var>0xa</var>) == <var>0x2</var>) <a class="local col0 ref" href="#760cc" title='cc' data-ref="760cc" data-ref-filename="760cc">cc</a> ^= <var>0x55</var>;  <i>/* A &lt;-&gt; B, AE &lt;-&gt; BE */</i></td></tr>
<tr><th id="2408">2408</th><td>      <a class="local col7 ref" href="#767lref" title='lref' data-ref="767lref" data-ref-filename="767lref">lref</a> = <a class="local col9 ref" href="#759ir" title='ir' data-ref="759ir" data-ref-filename="759ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>; <a class="local col8 ref" href="#768rref" title='rref' data-ref="768rref" data-ref-filename="768rref">rref</a> = <a class="local col9 ref" href="#759ir" title='ir' data-ref="759ir" data-ref-filename="759ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>;</td></tr>
<tr><th id="2409">2409</th><td>    }</td></tr>
<tr><th id="2410">2410</th><td>    <b>if</b> (<a class="ref fn" href="#asm_isk32" title='asm_isk32' data-ref="asm_isk32" data-ref-filename="asm_isk32">asm_isk32</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="local col8 ref" href="#768rref" title='rref' data-ref="768rref" data-ref-filename="768rref">rref</a>, &amp;<a class="local col1 ref" href="#771imm" title='imm' data-ref="771imm" data-ref-filename="771imm">imm</a>)) {</td></tr>
<tr><th id="2411">2411</th><td>      <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col2 decl" id="772irl" title='irl' data-type='IRIns *' data-ref="772irl" data-ref-filename="772irl">irl</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(lref)])" data-ref="_M/IR">IR</a>(<a class="local col7 ref" href="#767lref" title='lref' data-ref="767lref" data-ref-filename="767lref">lref</a>);</td></tr>
<tr><th id="2412">2412</th><td>      <i>/* Check wether we can use test ins. Not for unsigned, since CF=0. */</i></td></tr>
<tr><th id="2413">2413</th><td>      <em>int</em> <dfn class="local col3 decl" id="773usetest" title='usetest' data-type='int' data-ref="773usetest" data-ref-filename="773usetest">usetest</dfn> = (<a class="local col1 ref" href="#771imm" title='imm' data-ref="771imm" data-ref-filename="771imm">imm</a> == <var>0</var> &amp;&amp; (<a class="local col0 ref" href="#760cc" title='cc' data-ref="760cc" data-ref-filename="760cc">cc</a> &amp; <var>0xa</var>) != <var>0x2</var>);</td></tr>
<tr><th id="2414">2414</th><td>      <b>if</b> (<a class="local col3 ref" href="#773usetest" title='usetest' data-ref="773usetest" data-ref-filename="773usetest">usetest</a> &amp;&amp; <a class="local col2 ref" href="#772irl" title='irl' data-ref="772irl" data-ref-filename="772irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a> == <a class="enum" href="lj_ir.h.html#154" title='IR_BAND' data-ref="IR_BAND" data-ref-filename="IR_BAND">IR_BAND</a> &amp;&amp; <a class="local col2 ref" href="#772irl" title='irl' data-ref="772irl" data-ref-filename="772irl">irl</a>+<var>1</var> == <a class="local col9 ref" href="#759ir" title='ir' data-ref="759ir" data-ref-filename="759ir">ir</a> &amp;&amp; !<a class="macro" href="lj_asm.c.html#309" title="((!(((irl)-&gt;r) &amp; 0x80)) || (((irl)-&gt;s) != 0))" data-ref="_M/ra_used">ra_used</a>(<a class="local col2 ref" href="#772irl" title='irl' data-ref="772irl" data-ref-filename="772irl">irl</a>)) {</td></tr>
<tr><th id="2415">2415</th><td>	<i>/* Combine comp(BAND(ref, r/imm), 0) into test mrm, r/imm. */</i></td></tr>
<tr><th id="2416">2416</th><td>	<a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col4 decl" id="774right" title='right' data-type='Reg' data-ref="774right" data-ref-filename="774right">right</dfn>, <dfn class="local col5 decl" id="775left" title='left' data-type='Reg' data-ref="775left" data-ref-filename="775left">left</dfn> = <a class="macro" href="lj_target.h.html#21" title="0x80" data-ref="_M/RID_NONE">RID_NONE</a>;</td></tr>
<tr><th id="2417">2417</th><td>	<a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col6 decl" id="776allow" title='allow' data-type='RegSet' data-ref="776allow" data-ref-filename="776allow">allow</dfn> = <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>;</td></tr>
<tr><th id="2418">2418</th><td>	<b>if</b> (!<a class="ref fn" href="#asm_isk32" title='asm_isk32' data-ref="asm_isk32" data-ref-filename="asm_isk32">asm_isk32</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="local col2 ref" href="#772irl" title='irl' data-ref="772irl" data-ref-filename="772irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>, &amp;<a class="local col1 ref" href="#771imm" title='imm' data-ref="771imm" data-ref-filename="771imm">imm</a>)) {</td></tr>
<tr><th id="2419">2419</th><td>	  <a class="local col5 ref" href="#775left" title='left' data-ref="775left" data-ref-filename="775left">left</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="local col2 ref" href="#772irl" title='irl' data-ref="772irl" data-ref-filename="772irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op2' data-ref="IRIns::(anonymous)::op2" data-ref-filename="IRIns..(anonymous)..op2">op2</a>, <a class="local col6 ref" href="#776allow" title='allow' data-ref="776allow" data-ref-filename="776allow">allow</a>);</td></tr>
<tr><th id="2420">2420</th><td>	  <a class="macro" href="lj_target.h.html#70" title="(allow &amp;= ~(((RegSet)1) &lt;&lt; (left)))" data-ref="_M/rset_clear">rset_clear</a>(<a class="local col6 ref" href="#776allow" title='allow' data-ref="776allow" data-ref-filename="776allow">allow</a>, <a class="local col5 ref" href="#775left" title='left' data-ref="775left" data-ref-filename="775left">left</a>);</td></tr>
<tr><th id="2421">2421</th><td>	} <b>else</b> {  <i>/* Try to Fuse IRT_I8/IRT_U8 loads, too. See below. */</i></td></tr>
<tr><th id="2422">2422</th><td>	  <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col7 decl" id="777irll" title='irll' data-type='IRIns *' data-ref="777irll" data-ref-filename="777irll">irll</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(irl-&gt;op1)])" data-ref="_M/IR">IR</a>(<a class="local col2 ref" href="#772irl" title='irl' data-ref="772irl" data-ref-filename="772irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>);</td></tr>
<tr><th id="2423">2423</th><td>	  <b>if</b> (<a class="macro" href="lj_asm.c.html#123" title="(((IROp)irll-&gt;o) == IR_ALOAD || ((IROp)irll-&gt;o) == IR_HLOAD || ((IROp)irll-&gt;o) == IR_ULOAD || ((IROp)irll-&gt;o) == IR_FLOAD || ((IROp)irll-&gt;o) == IR_XLOAD || ((IROp)irll-&gt;o) == IR_SLOAD || ((IROp)irll-&gt;o) == IR_VLOAD)" data-ref="_M/opisfusableload">opisfusableload</a>((<a class="typedef" href="lj_ir.h.html#IROp" title='IROp' data-type='enum IROp' data-ref="IROp" data-ref-filename="IROp">IROp</a>)<a class="local col7 ref" href="#777irll" title='irll' data-ref="777irll" data-ref-filename="777irll">irll</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a>) &amp;&amp;</td></tr>
<tr><th id="2424">2424</th><td>	      (<a class="macro" href="lj_ir.h.html#365" title="(((IRType)((irll-&gt;t).irt &amp; IRT_TYPE)) == IRT_I8)" data-ref="_M/irt_isi8">irt_isi8</a>(<a class="local col7 ref" href="#777irll" title='irll' data-ref="777irll" data-ref-filename="777irll">irll</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) || <a class="macro" href="lj_ir.h.html#366" title="(((IRType)((irll-&gt;t).irt &amp; IRT_TYPE)) == IRT_U8)" data-ref="_M/irt_isu8">irt_isu8</a>(<a class="local col7 ref" href="#777irll" title='irll' data-ref="777irll" data-ref-filename="777irll">irll</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>))) {</td></tr>
<tr><th id="2425">2425</th><td>	    <a class="typedef" href="lj_ir.h.html#IRType1" title='IRType1' data-type='struct IRType1' data-ref="IRType1" data-ref-filename="IRType1">IRType1</a> <dfn class="local col8 decl" id="778origt" title='origt' data-type='IRType1' data-ref="778origt" data-ref-filename="778origt">origt</dfn> = <a class="local col7 ref" href="#777irll" title='irll' data-ref="777irll" data-ref-filename="777irll">irll</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>;  <i>/* Temporarily flip types. */</i></td></tr>
<tr><th id="2426">2426</th><td>	    <a class="local col7 ref" href="#777irll" title='irll' data-ref="777irll" data-ref-filename="777irll">irll</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>.<a class="ref field" href="lj_ir.h.html#IRType1::irt" title='IRType1::irt' data-ref="IRType1::irt" data-ref-filename="IRType1..irt">irt</a> = (<a class="local col7 ref" href="#777irll" title='irll' data-ref="777irll" data-ref-filename="777irll">irll</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>.<a class="ref field" href="lj_ir.h.html#IRType1::irt" title='IRType1::irt' data-ref="IRType1::irt" data-ref-filename="IRType1..irt">irt</a> &amp; ~<a class="enum" href="lj_ir.h.html#IRT_TYPE" title='IRT_TYPE' data-ref="IRT_TYPE" data-ref-filename="IRT_TYPE">IRT_TYPE</a>) | <a class="enum" href="lj_ir.h.html#318" title='IRT_INT' data-ref="IRT_INT" data-ref-filename="IRT_INT">IRT_INT</a>;</td></tr>
<tr><th id="2427">2427</th><td>	    <a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::curins" title='ASMState::curins' data-use='w' data-ref="ASMState::curins" data-ref-filename="ASMState..curins">curins</a>--;  <i>/* Skip to BAND to avoid failing in noconflict(). */</i></td></tr>
<tr><th id="2428">2428</th><td>	    <a class="local col4 ref" href="#774right" title='right' data-ref="774right" data-ref-filename="774right">right</a> = <a class="ref fn" href="#asm_fuseload" title='asm_fuseload' data-ref="asm_fuseload" data-ref-filename="asm_fuseload">asm_fuseload</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="local col2 ref" href="#772irl" title='irl' data-ref="772irl" data-ref-filename="772irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="2429">2429</th><td>	    <a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::curins" title='ASMState::curins' data-use='w' data-ref="ASMState::curins" data-ref-filename="ASMState..curins">curins</a>++;</td></tr>
<tr><th id="2430">2430</th><td>	    <a class="local col7 ref" href="#777irll" title='irll' data-ref="777irll" data-ref-filename="777irll">irll</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a> = <a class="local col8 ref" href="#778origt" title='origt' data-ref="778origt" data-ref-filename="778origt">origt</a>;</td></tr>
<tr><th id="2431">2431</th><td>	    <b>if</b> (<a class="local col4 ref" href="#774right" title='right' data-ref="774right" data-ref-filename="774right">right</a> != <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>) <b>goto</b> <a class="lbl" href="#779test_nofuse" data-ref="779test_nofuse" data-ref-filename="779test_nofuse">test_nofuse</a>;</td></tr>
<tr><th id="2432">2432</th><td>	    <i>/* Fusion succeeded, emit test byte mrm, imm8. */</i></td></tr>
<tr><th id="2433">2433</th><td>	    <a class="ref fn" href="#asm_guardcc" title='asm_guardcc' data-ref="asm_guardcc" data-ref-filename="asm_guardcc">asm_guardcc</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="local col0 ref" href="#760cc" title='cc' data-ref="760cc" data-ref-filename="760cc">cc</a>);</td></tr>
<tr><th id="2434">2434</th><td>	    <a class="macro" href="lj_emit_x86.h.html#29" title="(*--as-&gt;mcp = (MCode)((imm &amp; 0xff)))" data-ref="_M/emit_i8">emit_i8</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, (<a class="local col1 ref" href="#771imm" title='imm' data-ref="771imm" data-ref-filename="771imm">imm</a> &amp; <var>0xff</var>));</td></tr>
<tr><th id="2435">2435</th><td>	    <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_GROUP3b" title='XO_GROUP3b' data-ref="XO_GROUP3b" data-ref-filename="XO_GROUP3b">XO_GROUP3b</a>, <a class="enum" href="lj_target_x86.h.html#XOg_TEST" title='XOg_TEST' data-ref="XOg_TEST" data-ref-filename="XOg_TEST">XOg_TEST</a>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="2436">2436</th><td>	    <b>return</b>;</td></tr>
<tr><th id="2437">2437</th><td>	  }</td></tr>
<tr><th id="2438">2438</th><td>	}</td></tr>
<tr><th id="2439">2439</th><td>	<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::curins" title='ASMState::curins' data-use='w' data-ref="ASMState::curins" data-ref-filename="ASMState..curins">curins</a>--;  <i>/* Skip to BAND to avoid failing in noconflict(). */</i></td></tr>
<tr><th id="2440">2440</th><td>	<a class="local col4 ref" href="#774right" title='right' data-ref="774right" data-ref-filename="774right">right</a> = <a class="ref fn" href="#asm_fuseloadm" title='asm_fuseloadm' data-ref="asm_fuseloadm" data-ref-filename="asm_fuseloadm">asm_fuseloadm</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="local col2 ref" href="#772irl" title='irl' data-ref="772irl" data-ref-filename="772irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#542" title='IRIns::(anonymous struct)::op1' data-ref="IRIns::(anonymous)::op1" data-ref-filename="IRIns..(anonymous)..op1">op1</a>, <a class="local col6 ref" href="#776allow" title='allow' data-ref="776allow" data-ref-filename="776allow">allow</a>, <a class="local col0 ref" href="#770r64" title='r64' data-ref="770r64" data-ref-filename="770r64">r64</a>);</td></tr>
<tr><th id="2441">2441</th><td>	<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::curins" title='ASMState::curins' data-use='w' data-ref="ASMState::curins" data-ref-filename="ASMState..curins">curins</a>++;  <i>/* Undo the above. */</i></td></tr>
<tr><th id="2442">2442</th><td>      <dfn class="lbl" id="779test_nofuse" data-ref="779test_nofuse" data-ref-filename="779test_nofuse">test_nofuse</dfn>:</td></tr>
<tr><th id="2443">2443</th><td>	<a class="ref fn" href="#asm_guardcc" title='asm_guardcc' data-ref="asm_guardcc" data-ref-filename="asm_guardcc">asm_guardcc</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="local col0 ref" href="#760cc" title='cc' data-ref="760cc" data-ref-filename="760cc">cc</a>);</td></tr>
<tr><th id="2444">2444</th><td>	<b>if</b> (<a class="macro" href="lj_target.h.html#27" title="((left) &amp; 0x80)" data-ref="_M/ra_noreg">ra_noreg</a>(<a class="local col5 ref" href="#775left" title='left' data-ref="775left" data-ref-filename="775left">left</a>)) {</td></tr>
<tr><th id="2445">2445</th><td>	  <a class="macro" href="lj_emit_x86.h.html#30" title="(*(int32_t *)(as-&gt;mcp-4) = (imm), as-&gt;mcp -= 4)" data-ref="_M/emit_i32">emit_i32</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="local col1 ref" href="#771imm" title='imm' data-ref="771imm" data-ref-filename="771imm">imm</a>);</td></tr>
<tr><th id="2446">2446</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_GROUP3" title='XO_GROUP3' data-ref="XO_GROUP3" data-ref-filename="XO_GROUP3">XO_GROUP3</a>, <a class="local col0 ref" href="#770r64" title='r64' data-ref="770r64" data-ref-filename="770r64">r64</a> + <a class="enum" href="lj_target_x86.h.html#XOg_TEST" title='XOg_TEST' data-ref="XOg_TEST" data-ref-filename="XOg_TEST">XOg_TEST</a>, <a class="local col4 ref" href="#774right" title='right' data-ref="774right" data-ref-filename="774right">right</a>);</td></tr>
<tr><th id="2447">2447</th><td>	} <b>else</b> {</td></tr>
<tr><th id="2448">2448</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_TEST" title='XO_TEST' data-ref="XO_TEST" data-ref-filename="XO_TEST">XO_TEST</a>, <a class="local col0 ref" href="#770r64" title='r64' data-ref="770r64" data-ref-filename="770r64">r64</a> + <a class="local col5 ref" href="#775left" title='left' data-ref="775left" data-ref-filename="775left">left</a>, <a class="local col4 ref" href="#774right" title='right' data-ref="774right" data-ref-filename="774right">right</a>);</td></tr>
<tr><th id="2449">2449</th><td>	}</td></tr>
<tr><th id="2450">2450</th><td>      } <b>else</b> {</td></tr>
<tr><th id="2451">2451</th><td>	<a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col0 decl" id="780left" title='left' data-type='Reg' data-ref="780left" data-ref-filename="780left">left</dfn>;</td></tr>
<tr><th id="2452">2452</th><td>	<b>if</b> (<a class="macro" href="lj_asm.c.html#123" title="(((IROp)irl-&gt;o) == IR_ALOAD || ((IROp)irl-&gt;o) == IR_HLOAD || ((IROp)irl-&gt;o) == IR_ULOAD || ((IROp)irl-&gt;o) == IR_FLOAD || ((IROp)irl-&gt;o) == IR_XLOAD || ((IROp)irl-&gt;o) == IR_SLOAD || ((IROp)irl-&gt;o) == IR_VLOAD)" data-ref="_M/opisfusableload">opisfusableload</a>((<a class="typedef" href="lj_ir.h.html#IROp" title='IROp' data-type='enum IROp' data-ref="IROp" data-ref-filename="IROp">IROp</a>)<a class="local col2 ref" href="#772irl" title='irl' data-ref="772irl" data-ref-filename="772irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::o' data-ref="IRIns::(anonymous)::o" data-ref-filename="IRIns..(anonymous)..o">o</a>) &amp;&amp;</td></tr>
<tr><th id="2453">2453</th><td>	    ((<a class="macro" href="lj_ir.h.html#366" title="(((IRType)((irl-&gt;t).irt &amp; IRT_TYPE)) == IRT_U8)" data-ref="_M/irt_isu8">irt_isu8</a>(<a class="local col2 ref" href="#772irl" title='irl' data-ref="772irl" data-ref-filename="772irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) &amp;&amp; <a class="macro" href="lj_def.h.html#102" title="((imm) == (int32_t)(uint8_t)(imm))" data-ref="_M/checku8">checku8</a>(<a class="local col1 ref" href="#771imm" title='imm' data-ref="771imm" data-ref-filename="771imm">imm</a>)) ||</td></tr>
<tr><th id="2454">2454</th><td>	     ((<a class="macro" href="lj_ir.h.html#365" title="(((IRType)((irl-&gt;t).irt &amp; IRT_TYPE)) == IRT_I8)" data-ref="_M/irt_isi8">irt_isi8</a>(<a class="local col2 ref" href="#772irl" title='irl' data-ref="772irl" data-ref-filename="772irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) || <a class="macro" href="lj_ir.h.html#367" title="(((IRType)((irl-&gt;t).irt &amp; IRT_TYPE)) == IRT_I16)" data-ref="_M/irt_isi16">irt_isi16</a>(<a class="local col2 ref" href="#772irl" title='irl' data-ref="772irl" data-ref-filename="772irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) &amp;&amp; <a class="macro" href="lj_def.h.html#101" title="((imm) == (int32_t)(int8_t)(imm))" data-ref="_M/checki8">checki8</a>(<a class="local col1 ref" href="#771imm" title='imm' data-ref="771imm" data-ref-filename="771imm">imm</a>)) ||</td></tr>
<tr><th id="2455">2455</th><td>	     (<a class="macro" href="lj_ir.h.html#368" title="(((IRType)((irl-&gt;t).irt &amp; IRT_TYPE)) == IRT_U16)" data-ref="_M/irt_isu16">irt_isu16</a>(<a class="local col2 ref" href="#772irl" title='irl' data-ref="772irl" data-ref-filename="772irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) &amp;&amp; <a class="macro" href="lj_def.h.html#104" title="((imm) == (int32_t)(uint16_t)(imm))" data-ref="_M/checku16">checku16</a>(<a class="local col1 ref" href="#771imm" title='imm' data-ref="771imm" data-ref-filename="771imm">imm</a>) &amp;&amp; <a class="macro" href="lj_def.h.html#101" title="(((int16_t)imm) == (int32_t)(int8_t)((int16_t)imm))" data-ref="_M/checki8">checki8</a>((<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int16_t" title='int16_t' data-type='__int16_t' data-ref="int16_t" data-ref-filename="int16_t">int16_t</a>)<a class="local col1 ref" href="#771imm" title='imm' data-ref="771imm" data-ref-filename="771imm">imm</a>)))) {</td></tr>
<tr><th id="2456">2456</th><td>	  <i>/* Only the IRT_INT case is fused by asm_fuseload.</i></td></tr>
<tr><th id="2457">2457</th><td><i>	  ** The IRT_I8/IRT_U8 loads and some IRT_I16/IRT_U16 loads</i></td></tr>
<tr><th id="2458">2458</th><td><i>	  ** are handled here.</i></td></tr>
<tr><th id="2459">2459</th><td><i>	  ** Note that cmp word [mem], imm16 should not be generated,</i></td></tr>
<tr><th id="2460">2460</th><td><i>	  ** since it has a length-changing prefix. Compares of a word</i></td></tr>
<tr><th id="2461">2461</th><td><i>	  ** against a sign-extended imm8 are ok, however.</i></td></tr>
<tr><th id="2462">2462</th><td><i>	  */</i></td></tr>
<tr><th id="2463">2463</th><td>	  <a class="typedef" href="lj_ir.h.html#IRType1" title='IRType1' data-type='struct IRType1' data-ref="IRType1" data-ref-filename="IRType1">IRType1</a> <dfn class="local col1 decl" id="781origt" title='origt' data-type='IRType1' data-ref="781origt" data-ref-filename="781origt">origt</dfn> = <a class="local col2 ref" href="#772irl" title='irl' data-ref="772irl" data-ref-filename="772irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>;  <i>/* Temporarily flip types. */</i></td></tr>
<tr><th id="2464">2464</th><td>	  <a class="local col2 ref" href="#772irl" title='irl' data-ref="772irl" data-ref-filename="772irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>.<a class="ref field" href="lj_ir.h.html#IRType1::irt" title='IRType1::irt' data-ref="IRType1::irt" data-ref-filename="IRType1..irt">irt</a> = (<a class="local col2 ref" href="#772irl" title='irl' data-ref="772irl" data-ref-filename="772irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>.<a class="ref field" href="lj_ir.h.html#IRType1::irt" title='IRType1::irt' data-ref="IRType1::irt" data-ref-filename="IRType1..irt">irt</a> &amp; ~<a class="enum" href="lj_ir.h.html#IRT_TYPE" title='IRT_TYPE' data-ref="IRT_TYPE" data-ref-filename="IRT_TYPE">IRT_TYPE</a>) | <a class="enum" href="lj_ir.h.html#318" title='IRT_INT' data-ref="IRT_INT" data-ref-filename="IRT_INT">IRT_INT</a>;</td></tr>
<tr><th id="2465">2465</th><td>	  <a class="local col0 ref" href="#780left" title='left' data-ref="780left" data-ref-filename="780left">left</a> = <a class="ref fn" href="#asm_fuseload" title='asm_fuseload' data-ref="asm_fuseload" data-ref-filename="asm_fuseload">asm_fuseload</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="local col7 ref" href="#767lref" title='lref' data-ref="767lref" data-ref-filename="767lref">lref</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="2466">2466</th><td>	  <a class="local col2 ref" href="#772irl" title='irl' data-ref="772irl" data-ref-filename="772irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a> = <a class="local col1 ref" href="#781origt" title='origt' data-ref="781origt" data-ref-filename="781origt">origt</a>;</td></tr>
<tr><th id="2467">2467</th><td>	  <b>if</b> (<a class="local col0 ref" href="#780left" title='left' data-ref="780left" data-ref-filename="780left">left</a> == <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>) {  <i>/* Fusion succeeded? */</i></td></tr>
<tr><th id="2468">2468</th><td>	    <b>if</b> (<a class="macro" href="lj_ir.h.html#366" title="(((IRType)((irl-&gt;t).irt &amp; IRT_TYPE)) == IRT_U8)" data-ref="_M/irt_isu8">irt_isu8</a>(<a class="local col2 ref" href="#772irl" title='irl' data-ref="772irl" data-ref-filename="772irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) || <a class="macro" href="lj_ir.h.html#368" title="(((IRType)((irl-&gt;t).irt &amp; IRT_TYPE)) == IRT_U16)" data-ref="_M/irt_isu16">irt_isu16</a>(<a class="local col2 ref" href="#772irl" title='irl' data-ref="772irl" data-ref-filename="772irl">irl</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>))</td></tr>
<tr><th id="2469">2469</th><td>	      <a class="local col0 ref" href="#760cc" title='cc' data-ref="760cc" data-ref-filename="760cc">cc</a> &gt;&gt;= <var>4</var>;  <i>/* Need unsigned compare. */</i></td></tr>
<tr><th id="2470">2470</th><td>	    <a class="ref fn" href="#asm_guardcc" title='asm_guardcc' data-ref="asm_guardcc" data-ref-filename="asm_guardcc">asm_guardcc</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="local col0 ref" href="#760cc" title='cc' data-ref="760cc" data-ref-filename="760cc">cc</a>);</td></tr>
<tr><th id="2471">2471</th><td>	    <a class="macro" href="lj_emit_x86.h.html#29" title="(*--as-&gt;mcp = (MCode)(imm))" data-ref="_M/emit_i8">emit_i8</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="local col1 ref" href="#771imm" title='imm' data-ref="771imm" data-ref-filename="771imm">imm</a>);</td></tr>
<tr><th id="2472">2472</th><td>	    <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, (<a class="macro" href="lj_ir.h.html#365" title="(((IRType)((origt).irt &amp; IRT_TYPE)) == IRT_I8)" data-ref="_M/irt_isi8">irt_isi8</a>(<a class="local col1 ref" href="#781origt" title='origt' data-ref="781origt" data-ref-filename="781origt">origt</a>) || <a class="macro" href="lj_ir.h.html#366" title="(((IRType)((origt).irt &amp; IRT_TYPE)) == IRT_U8)" data-ref="_M/irt_isu8">irt_isu8</a>(<a class="local col1 ref" href="#781origt" title='origt' data-ref="781origt" data-ref-filename="781origt">origt</a>)) ?</td></tr>
<tr><th id="2473">2473</th><td>			 <a class="enum" href="lj_target_x86.h.html#XO_ARITHib" title='XO_ARITHib' data-ref="XO_ARITHib" data-ref-filename="XO_ARITHib">XO_ARITHib</a> : <a class="enum" href="lj_target_x86.h.html#XO_ARITHiw8" title='XO_ARITHiw8' data-ref="XO_ARITHiw8" data-ref-filename="XO_ARITHiw8">XO_ARITHiw8</a>, <a class="local col0 ref" href="#770r64" title='r64' data-ref="770r64" data-ref-filename="770r64">r64</a> + <a class="enum" href="lj_target_x86.h.html#XOg_CMP" title='XOg_CMP' data-ref="XOg_CMP" data-ref-filename="XOg_CMP">XOg_CMP</a>, <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>);</td></tr>
<tr><th id="2474">2474</th><td>	    <b>return</b>;</td></tr>
<tr><th id="2475">2475</th><td>	  }  <i>/* Otherwise handle register case as usual. */</i></td></tr>
<tr><th id="2476">2476</th><td>	} <b>else</b> {</td></tr>
<tr><th id="2477">2477</th><td>	  <a class="local col0 ref" href="#780left" title='left' data-ref="780left" data-ref-filename="780left">left</a> = <a class="ref fn" href="#asm_fuseloadm" title='asm_fuseloadm' data-ref="asm_fuseloadm" data-ref-filename="asm_fuseloadm">asm_fuseloadm</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="local col7 ref" href="#767lref" title='lref' data-ref="767lref" data-ref-filename="767lref">lref</a>,</td></tr>
<tr><th id="2478">2478</th><td>			       <a class="macro" href="lj_ir.h.html#366" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_U8)" data-ref="_M/irt_isu8">irt_isu8</a>(<a class="local col9 ref" href="#759ir" title='ir' data-ref="759ir" data-ref-filename="759ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) ? <a class="macro" href="lj_target_x86.h.html#77" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR8">RSET_GPR8</a> : <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>, <a class="local col0 ref" href="#770r64" title='r64' data-ref="770r64" data-ref-filename="770r64">r64</a>);</td></tr>
<tr><th id="2479">2479</th><td>	}</td></tr>
<tr><th id="2480">2480</th><td>	<a class="ref fn" href="#asm_guardcc" title='asm_guardcc' data-ref="asm_guardcc" data-ref-filename="asm_guardcc">asm_guardcc</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="local col0 ref" href="#760cc" title='cc' data-ref="760cc" data-ref-filename="760cc">cc</a>);</td></tr>
<tr><th id="2481">2481</th><td>	<b>if</b> (<a class="local col3 ref" href="#773usetest" title='usetest' data-ref="773usetest" data-ref-filename="773usetest">usetest</a> &amp;&amp; <a class="local col0 ref" href="#780left" title='left' data-ref="780left" data-ref-filename="780left">left</a> != <a class="enum" href="lj_target_x86.h.html#RID_MRM" title='RID_MRM' data-ref="RID_MRM" data-ref-filename="RID_MRM">RID_MRM</a>) {</td></tr>
<tr><th id="2482">2482</th><td>	  <i>/* Use test r,r instead of cmp r,0. */</i></td></tr>
<tr><th id="2483">2483</th><td>	  <a class="typedef" href="lj_target_x86.h.html#x86Op" title='x86Op' data-type='enum x86Op' data-ref="x86Op" data-ref-filename="x86Op">x86Op</a> <dfn class="local col2 decl" id="782xo" title='xo' data-type='x86Op' data-ref="782xo" data-ref-filename="782xo">xo</dfn> = <a class="enum" href="lj_target_x86.h.html#XO_TEST" title='XO_TEST' data-ref="XO_TEST" data-ref-filename="XO_TEST">XO_TEST</a>;</td></tr>
<tr><th id="2484">2484</th><td>	  <b>if</b> (<a class="macro" href="lj_ir.h.html#366" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_U8)" data-ref="_M/irt_isu8">irt_isu8</a>(<a class="local col9 ref" href="#759ir" title='ir' data-ref="759ir" data-ref-filename="759ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="2485">2485</th><td>	    <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(ir-&gt;o == IR_EQ || ir-&gt;o == IR_NE, <q>"bad usage"</q>);</td></tr>
<tr><th id="2486">2486</th><td>	    <a class="local col2 ref" href="#782xo" title='xo' data-ref="782xo" data-ref-filename="782xo">xo</a> = <a class="enum" href="lj_target_x86.h.html#XO_TESTb" title='XO_TESTb' data-ref="XO_TESTb" data-ref-filename="XO_TESTb">XO_TESTb</a>;</td></tr>
<tr><th id="2487">2487</th><td>	    <b>if</b> (!<a class="macro" href="lj_target.h.html#68" title="((int)(((((((RegSet)1) &lt;&lt; ((RID_EBX+1)-(RID_EAX)))-1) &lt;&lt; (RID_EAX))) &gt;&gt; (left)) &amp; 1)" data-ref="_M/rset_test">rset_test</a>(<a class="macro" href="lj_target.h.html#66" title="(((((RegSet)1) &lt;&lt; ((RID_EBX+1)-(RID_EAX)))-1) &lt;&lt; (RID_EAX))" data-ref="_M/RSET_RANGE">RSET_RANGE</a>(<a class="enum" href="lj_target_x86.h.html#30" title='RID_EAX' data-ref="RID_EAX" data-ref-filename="RID_EAX">RID_EAX</a>, <a class="enum" href="lj_target_x86.h.html#30" title='RID_EBX' data-ref="RID_EBX" data-ref-filename="RID_EBX">RID_EBX</a>+<var>1</var>), <a class="local col0 ref" href="#780left" title='left' data-ref="780left" data-ref-filename="780left">left</a>)) {</td></tr>
<tr><th id="2488">2488</th><td>	      <b>if</b> (<a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a>) {</td></tr>
<tr><th id="2489">2489</th><td>		<a class="local col0 ref" href="#780left" title='left' data-ref="780left" data-ref-filename="780left">left</a> |= <a class="macro" href="lj_emit_x86.h.html#14" title="0x200" data-ref="_M/FORCE_REX">FORCE_REX</a>;</td></tr>
<tr><th id="2490">2490</th><td>	      } <b>else</b> {</td></tr>
<tr><th id="2491">2491</th><td>		<a class="macro" href="lj_emit_x86.h.html#30" title="(*(int32_t *)(as-&gt;mcp-4) = (0xff), as-&gt;mcp -= 4)" data-ref="_M/emit_i32">emit_i32</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <var>0xff</var>);</td></tr>
<tr><th id="2492">2492</th><td>		<a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_GROUP3" title='XO_GROUP3' data-ref="XO_GROUP3" data-ref-filename="XO_GROUP3">XO_GROUP3</a>, <a class="enum" href="lj_target_x86.h.html#XOg_TEST" title='XOg_TEST' data-ref="XOg_TEST" data-ref-filename="XOg_TEST">XOg_TEST</a>, <a class="local col0 ref" href="#780left" title='left' data-ref="780left" data-ref-filename="780left">left</a>);</td></tr>
<tr><th id="2493">2493</th><td>		<b>return</b>;</td></tr>
<tr><th id="2494">2494</th><td>	      }</td></tr>
<tr><th id="2495">2495</th><td>	    }</td></tr>
<tr><th id="2496">2496</th><td>	  }</td></tr>
<tr><th id="2497">2497</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="local col2 ref" href="#782xo" title='xo' data-ref="782xo" data-ref-filename="782xo">xo</a>, <a class="local col0 ref" href="#770r64" title='r64' data-ref="770r64" data-ref-filename="770r64">r64</a> + <a class="local col0 ref" href="#780left" title='left' data-ref="780left" data-ref-filename="780left">left</a>, <a class="local col0 ref" href="#780left" title='left' data-ref="780left" data-ref-filename="780left">left</a>);</td></tr>
<tr><th id="2498">2498</th><td>	  <b>if</b> (<a class="local col2 ref" href="#772irl" title='irl' data-ref="772irl" data-ref-filename="772irl">irl</a>+<var>1</var> == <a class="local col9 ref" href="#759ir" title='ir' data-ref="759ir" data-ref-filename="759ir">ir</a>)  <i>/* Referencing previous ins? */</i></td></tr>
<tr><th id="2499">2499</th><td>	    <a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::flagmcp" title='ASMState::flagmcp' data-use='w' data-ref="ASMState::flagmcp" data-ref-filename="ASMState..flagmcp">flagmcp</a> = <a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcp" title='ASMState::mcp' data-use='r' data-ref="ASMState::mcp" data-ref-filename="ASMState..mcp">mcp</a>;  <i>/* Set flag to drop test r,r if possible. */</i></td></tr>
<tr><th id="2500">2500</th><td>	} <b>else</b> {</td></tr>
<tr><th id="2501">2501</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_gmrmi" title='emit_gmrmi' data-ref="emit_gmrmi" data-ref-filename="emit_gmrmi">emit_gmrmi</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="macro" href="lj_target_x86.h.html#324" title="((x86Group)(((XI_ARITHi8) &lt;&lt; 16) + ((XI_ARITHi) &lt;&lt; 8) + (XOg_CMP)))" data-ref="_M/XG_ARITHi">XG_ARITHi</a>(<a class="enum" href="lj_target_x86.h.html#XOg_CMP" title='XOg_CMP' data-ref="XOg_CMP" data-ref-filename="XOg_CMP">XOg_CMP</a>), <a class="local col0 ref" href="#770r64" title='r64' data-ref="770r64" data-ref-filename="770r64">r64</a> + <a class="local col0 ref" href="#780left" title='left' data-ref="780left" data-ref-filename="780left">left</a>, <a class="local col1 ref" href="#771imm" title='imm' data-ref="771imm" data-ref-filename="771imm">imm</a>);</td></tr>
<tr><th id="2502">2502</th><td>	}</td></tr>
<tr><th id="2503">2503</th><td>      }</td></tr>
<tr><th id="2504">2504</th><td>    } <b>else</b> {</td></tr>
<tr><th id="2505">2505</th><td>      <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col3 decl" id="783left" title='left' data-type='Reg' data-ref="783left" data-ref-filename="783left">left</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="local col7 ref" href="#767lref" title='lref' data-ref="767lref" data-ref-filename="767lref">lref</a>, <a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>);</td></tr>
<tr><th id="2506">2506</th><td>      <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col4 decl" id="784right" title='right' data-type='Reg' data-ref="784right" data-ref-filename="784right">right</dfn> = <a class="ref fn" href="#asm_fuseloadm" title='asm_fuseloadm' data-ref="asm_fuseloadm" data-ref-filename="asm_fuseloadm">asm_fuseloadm</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="local col8 ref" href="#768rref" title='rref' data-ref="768rref" data-ref-filename="768rref">rref</a>, <a class="macro" href="lj_target.h.html#71" title="(((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH))) &amp; ~(((RegSet)1) &lt;&lt; (left)))" data-ref="_M/rset_exclude">rset_exclude</a>(<a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>, <a class="local col3 ref" href="#783left" title='left' data-ref="783left" data-ref-filename="783left">left</a>), <a class="local col0 ref" href="#770r64" title='r64' data-ref="770r64" data-ref-filename="770r64">r64</a>);</td></tr>
<tr><th id="2507">2507</th><td>      <a class="ref fn" href="#asm_guardcc" title='asm_guardcc' data-ref="asm_guardcc" data-ref-filename="asm_guardcc">asm_guardcc</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="local col0 ref" href="#760cc" title='cc' data-ref="760cc" data-ref-filename="760cc">cc</a>);</td></tr>
<tr><th id="2508">2508</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_mrm" title='emit_mrm' data-ref="emit_mrm" data-ref-filename="emit_mrm">emit_mrm</a>(<a class="local col8 ref" href="#758as" title='as' data-ref="758as" data-ref-filename="758as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_CMP" title='XO_CMP' data-ref="XO_CMP" data-ref-filename="XO_CMP">XO_CMP</a>, <a class="local col0 ref" href="#770r64" title='r64' data-ref="770r64" data-ref-filename="770r64">r64</a> + <a class="local col3 ref" href="#783left" title='left' data-ref="783left" data-ref-filename="783left">left</a>, <a class="local col4 ref" href="#784right" title='right' data-ref="784right" data-ref-filename="784right">right</a>);</td></tr>
<tr><th id="2509">2509</th><td>    }</td></tr>
<tr><th id="2510">2510</th><td>  }</td></tr>
<tr><th id="2511">2511</th><td>}</td></tr>
<tr><th id="2512">2512</th><td></td></tr>
<tr><th id="2513">2513</th><td><u>#define <dfn class="macro" id="_M/asm_equal" data-ref="_M/asm_equal">asm_equal</dfn>(as, ir)	asm_comp(as, ir)</u></td></tr>
<tr><th id="2514">2514</th><td></td></tr>
<tr><th id="2515">2515</th><td><u>#<span data-ppcond="2515">if</span> <a class="macro" href="lj_arch.h.html#599" title="0" data-ref="_M/LJ_32">LJ_32</a> &amp;&amp; <a class="macro" href="lj_arch.h.html#549" title="1" data-ref="_M/LJ_HASFFI">LJ_HASFFI</a></u></td></tr>
<tr><th id="2516">2516</th><td><i>/* 64 bit integer comparisons in 32 bit mode. */</i></td></tr>
<tr><th id="2517">2517</th><td><em>static</em> <em>void</em> asm_comp_int64(ASMState *as, IRIns *ir)</td></tr>
<tr><th id="2518">2518</th><td>{</td></tr>
<tr><th id="2519">2519</th><td>  uint32_t cc = asm_compmap[(ir-<var>1</var>)-&gt;o];</td></tr>
<tr><th id="2520">2520</th><td>  RegSet allow = RSET_GPR;</td></tr>
<tr><th id="2521">2521</th><td>  Reg lefthi = RID_NONE, leftlo = RID_NONE;</td></tr>
<tr><th id="2522">2522</th><td>  Reg righthi = RID_NONE, rightlo = RID_NONE;</td></tr>
<tr><th id="2523">2523</th><td>  MCLabel l_around;</td></tr>
<tr><th id="2524">2524</th><td>  x86ModRM mrm;</td></tr>
<tr><th id="2525">2525</th><td></td></tr>
<tr><th id="2526">2526</th><td>  as-&gt;curins--;  <i>/* Skip loword ins. Avoids failing in noconflict(), too. */</i></td></tr>
<tr><th id="2527">2527</th><td></td></tr>
<tr><th id="2528">2528</th><td>  <i>/* Allocate/fuse hiword operands. */</i></td></tr>
<tr><th id="2529">2529</th><td>  <b>if</b> (irref_isk(ir-&gt;op2)) {</td></tr>
<tr><th id="2530">2530</th><td>    lefthi = asm_fuseload(as, ir-&gt;op1, allow);</td></tr>
<tr><th id="2531">2531</th><td>  } <b>else</b> {</td></tr>
<tr><th id="2532">2532</th><td>    lefthi = ra_alloc1(as, ir-&gt;op1, allow);</td></tr>
<tr><th id="2533">2533</th><td>    rset_clear(allow, lefthi);</td></tr>
<tr><th id="2534">2534</th><td>    righthi = asm_fuseload(as, ir-&gt;op2, allow);</td></tr>
<tr><th id="2535">2535</th><td>    <b>if</b> (righthi == RID_MRM) {</td></tr>
<tr><th id="2536">2536</th><td>      <b>if</b> (as-&gt;mrm.base != RID_NONE) rset_clear(allow, as-&gt;mrm.base);</td></tr>
<tr><th id="2537">2537</th><td>      <b>if</b> (as-&gt;mrm.idx != RID_NONE) rset_clear(allow, as-&gt;mrm.idx);</td></tr>
<tr><th id="2538">2538</th><td>    } <b>else</b> {</td></tr>
<tr><th id="2539">2539</th><td>      rset_clear(allow, righthi);</td></tr>
<tr><th id="2540">2540</th><td>    }</td></tr>
<tr><th id="2541">2541</th><td>  }</td></tr>
<tr><th id="2542">2542</th><td>  mrm = as-&gt;mrm;  <i>/* Save state for hiword instruction. */</i></td></tr>
<tr><th id="2543">2543</th><td></td></tr>
<tr><th id="2544">2544</th><td>  <i>/* Allocate/fuse loword operands. */</i></td></tr>
<tr><th id="2545">2545</th><td>  <b>if</b> (irref_isk((ir-<var>1</var>)-&gt;op2)) {</td></tr>
<tr><th id="2546">2546</th><td>    leftlo = asm_fuseload(as, (ir-<var>1</var>)-&gt;op1, allow);</td></tr>
<tr><th id="2547">2547</th><td>  } <b>else</b> {</td></tr>
<tr><th id="2548">2548</th><td>    leftlo = ra_alloc1(as, (ir-<var>1</var>)-&gt;op1, allow);</td></tr>
<tr><th id="2549">2549</th><td>    rset_clear(allow, leftlo);</td></tr>
<tr><th id="2550">2550</th><td>    rightlo = asm_fuseload(as, (ir-<var>1</var>)-&gt;op2, allow);</td></tr>
<tr><th id="2551">2551</th><td>  }</td></tr>
<tr><th id="2552">2552</th><td></td></tr>
<tr><th id="2553">2553</th><td>  <i>/* All register allocations must be performed _before_ this point. */</i></td></tr>
<tr><th id="2554">2554</th><td>  l_around = emit_label(as);</td></tr>
<tr><th id="2555">2555</th><td>  as-&gt;invmcp = as-&gt;flagmcp = NULL;  <i>/* Cannot use these optimizations. */</i></td></tr>
<tr><th id="2556">2556</th><td></td></tr>
<tr><th id="2557">2557</th><td>  <i>/* Loword comparison and branch. */</i></td></tr>
<tr><th id="2558">2558</th><td>  asm_guardcc(as, cc &gt;&gt; <var>4</var>);  <i>/* Always use unsigned compare for loword. */</i></td></tr>
<tr><th id="2559">2559</th><td>  <b>if</b> (ra_noreg(rightlo)) {</td></tr>
<tr><th id="2560">2560</th><td>    int32_t imm = IR((ir-<var>1</var>)-&gt;op2)-&gt;i;</td></tr>
<tr><th id="2561">2561</th><td>    <b>if</b> (imm == <var>0</var> &amp;&amp; ((cc &gt;&gt; <var>4</var>) &amp; <var>0xa</var>) != <var>0x2</var> &amp;&amp; leftlo != RID_MRM)</td></tr>
<tr><th id="2562">2562</th><td>      emit_rr(as, XO_TEST, leftlo, leftlo);</td></tr>
<tr><th id="2563">2563</th><td>    <b>else</b></td></tr>
<tr><th id="2564">2564</th><td>      emit_gmrmi(as, XG_ARITHi(XOg_CMP), leftlo, imm);</td></tr>
<tr><th id="2565">2565</th><td>  } <b>else</b> {</td></tr>
<tr><th id="2566">2566</th><td>    emit_mrm(as, XO_CMP, leftlo, rightlo);</td></tr>
<tr><th id="2567">2567</th><td>  }</td></tr>
<tr><th id="2568">2568</th><td></td></tr>
<tr><th id="2569">2569</th><td>  <i>/* Hiword comparison and branches. */</i></td></tr>
<tr><th id="2570">2570</th><td>  <b>if</b> ((cc &amp; <var>15</var>) != CC_NE)</td></tr>
<tr><th id="2571">2571</th><td>    emit_sjcc(as, CC_NE, l_around);  <i>/* Hiword unequal: skip loword compare. */</i></td></tr>
<tr><th id="2572">2572</th><td>  <b>if</b> ((cc &amp; <var>15</var>) != CC_E)</td></tr>
<tr><th id="2573">2573</th><td>    asm_guardcc(as, cc &gt;&gt; <var>8</var>);  <i>/* Hiword compare without equality check. */</i></td></tr>
<tr><th id="2574">2574</th><td>  as-&gt;mrm = mrm;  <i>/* Restore state. */</i></td></tr>
<tr><th id="2575">2575</th><td>  <b>if</b> (ra_noreg(righthi)) {</td></tr>
<tr><th id="2576">2576</th><td>    int32_t imm = IR(ir-&gt;op2)-&gt;i;</td></tr>
<tr><th id="2577">2577</th><td>    <b>if</b> (imm == <var>0</var> &amp;&amp; (cc &amp; <var>0xa</var>) != <var>0x2</var> &amp;&amp; lefthi != RID_MRM)</td></tr>
<tr><th id="2578">2578</th><td>      emit_rr(as, XO_TEST, lefthi, lefthi);</td></tr>
<tr><th id="2579">2579</th><td>    <b>else</b></td></tr>
<tr><th id="2580">2580</th><td>      emit_gmrmi(as, XG_ARITHi(XOg_CMP), lefthi, imm);</td></tr>
<tr><th id="2581">2581</th><td>  } <b>else</b> {</td></tr>
<tr><th id="2582">2582</th><td>    emit_mrm(as, XO_CMP, lefthi, righthi);</td></tr>
<tr><th id="2583">2583</th><td>  }</td></tr>
<tr><th id="2584">2584</th><td>}</td></tr>
<tr><th id="2585">2585</th><td><u>#<span data-ppcond="2515">endif</span></u></td></tr>
<tr><th id="2586">2586</th><td></td></tr>
<tr><th id="2587">2587</th><td><i>/* -- Support for 64 bit ops in 32 bit mode ------------------------------- */</i></td></tr>
<tr><th id="2588">2588</th><td></td></tr>
<tr><th id="2589">2589</th><td><i>/* Hiword op of a split 64 bit op. Previous op must be the loword op. */</i></td></tr>
<tr><th id="2590">2590</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_hiop" title='asm_hiop' data-ref="asm_hiop" data-ref-filename="asm_hiop">asm_hiop</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col5 decl" id="785as" title='as' data-type='ASMState *' data-ref="785as" data-ref-filename="785as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col6 decl" id="786ir" title='ir' data-type='IRIns *' data-ref="786ir" data-ref-filename="786ir">ir</dfn>)</td></tr>
<tr><th id="2591">2591</th><td>{</td></tr>
<tr><th id="2592">2592</th><td><u>#<span data-ppcond="2592">if</span> <a class="macro" href="lj_arch.h.html#599" title="0" data-ref="_M/LJ_32">LJ_32</a> &amp;&amp; <a class="macro" href="lj_arch.h.html#549" title="1" data-ref="_M/LJ_HASFFI">LJ_HASFFI</a></u></td></tr>
<tr><th id="2593">2593</th><td>  <i>/* HIOP is marked as a store because it needs its own DCE logic. */</i></td></tr>
<tr><th id="2594">2594</th><td>  <em>int</em> uselo = ra_used(ir-<var>1</var>), usehi = ra_used(ir);  <i>/* Loword/hiword used? */</i></td></tr>
<tr><th id="2595">2595</th><td>  <b>if</b> (LJ_UNLIKELY(!(as-&gt;flags &amp; JIT_F_OPT_DCE))) uselo = usehi = <var>1</var>;</td></tr>
<tr><th id="2596">2596</th><td>  <b>if</b> ((ir-<var>1</var>)-&gt;o == IR_CONV) {  <i>/* Conversions to/from 64 bit. */</i></td></tr>
<tr><th id="2597">2597</th><td>    as-&gt;curins--;  <i>/* Always skip the CONV. */</i></td></tr>
<tr><th id="2598">2598</th><td>    <b>if</b> (usehi || uselo)</td></tr>
<tr><th id="2599">2599</th><td>      asm_conv64(as, ir);</td></tr>
<tr><th id="2600">2600</th><td>    <b>return</b>;</td></tr>
<tr><th id="2601">2601</th><td>  } <b>else</b> <b>if</b> ((ir-<var>1</var>)-&gt;o &lt;= IR_NE) {  <i>/* 64 bit integer comparisons. ORDER IR. */</i></td></tr>
<tr><th id="2602">2602</th><td>    asm_comp_int64(as, ir);</td></tr>
<tr><th id="2603">2603</th><td>    <b>return</b>;</td></tr>
<tr><th id="2604">2604</th><td>  } <b>else</b> <b>if</b> ((ir-<var>1</var>)-&gt;o == IR_XSTORE) {</td></tr>
<tr><th id="2605">2605</th><td>    <b>if</b> ((ir-<var>1</var>)-&gt;r != RID_SINK)</td></tr>
<tr><th id="2606">2606</th><td>      asm_fxstore(as, ir);</td></tr>
<tr><th id="2607">2607</th><td>    <b>return</b>;</td></tr>
<tr><th id="2608">2608</th><td>  }</td></tr>
<tr><th id="2609">2609</th><td>  <b>if</b> (!usehi) <b>return</b>;  <i>/* Skip unused hiword op for all remaining ops. */</i></td></tr>
<tr><th id="2610">2610</th><td>  <b>switch</b> ((ir-<var>1</var>)-&gt;o) {</td></tr>
<tr><th id="2611">2611</th><td>  <b>case</b> IR_ADD:</td></tr>
<tr><th id="2612">2612</th><td>    as-&gt;flagmcp = NULL;</td></tr>
<tr><th id="2613">2613</th><td>    as-&gt;curins--;</td></tr>
<tr><th id="2614">2614</th><td>    asm_intarith(as, ir, XOg_ADC);</td></tr>
<tr><th id="2615">2615</th><td>    asm_intarith(as, ir-<var>1</var>, XOg_ADD);</td></tr>
<tr><th id="2616">2616</th><td>    <b>break</b>;</td></tr>
<tr><th id="2617">2617</th><td>  <b>case</b> IR_SUB:</td></tr>
<tr><th id="2618">2618</th><td>    as-&gt;flagmcp = NULL;</td></tr>
<tr><th id="2619">2619</th><td>    as-&gt;curins--;</td></tr>
<tr><th id="2620">2620</th><td>    asm_intarith(as, ir, XOg_SBB);</td></tr>
<tr><th id="2621">2621</th><td>    asm_intarith(as, ir-<var>1</var>, XOg_SUB);</td></tr>
<tr><th id="2622">2622</th><td>    <b>break</b>;</td></tr>
<tr><th id="2623">2623</th><td>  <b>case</b> IR_NEG: {</td></tr>
<tr><th id="2624">2624</th><td>    Reg dest = ra_dest(as, ir, RSET_GPR);</td></tr>
<tr><th id="2625">2625</th><td>    emit_rr(as, XO_GROUP3, XOg_NEG, dest);</td></tr>
<tr><th id="2626">2626</th><td>    emit_i8(as, <var>0</var>);</td></tr>
<tr><th id="2627">2627</th><td>    emit_rr(as, XO_ARITHi8, XOg_ADC, dest);</td></tr>
<tr><th id="2628">2628</th><td>    ra_left(as, dest, ir-&gt;op1);</td></tr>
<tr><th id="2629">2629</th><td>    as-&gt;curins--;</td></tr>
<tr><th id="2630">2630</th><td>    asm_neg_not(as, ir-<var>1</var>, XOg_NEG);</td></tr>
<tr><th id="2631">2631</th><td>    <b>break</b>;</td></tr>
<tr><th id="2632">2632</th><td>    }</td></tr>
<tr><th id="2633">2633</th><td>  <b>case</b> IR_CALLN:</td></tr>
<tr><th id="2634">2634</th><td>  <b>case</b> IR_CALLXS:</td></tr>
<tr><th id="2635">2635</th><td>    <b>if</b> (!uselo)</td></tr>
<tr><th id="2636">2636</th><td>      ra_allocref(as, ir-&gt;op1, RID2RSET(RID_RETLO));  <i>/* Mark lo op as used. */</i></td></tr>
<tr><th id="2637">2637</th><td>    <b>break</b>;</td></tr>
<tr><th id="2638">2638</th><td>  <b>case</b> IR_CNEWI:</td></tr>
<tr><th id="2639">2639</th><td>    <i>/* Nothing to do here. Handled by CNEWI itself. */</i></td></tr>
<tr><th id="2640">2640</th><td>    <b>break</b>;</td></tr>
<tr><th id="2641">2641</th><td>  <b>default</b>: lj_assertA(<var>0</var>, <q>"bad HIOP for op %d"</q>, (ir-<var>1</var>)-&gt;o); <b>break</b>;</td></tr>
<tr><th id="2642">2642</th><td>  }</td></tr>
<tr><th id="2643">2643</th><td><u>#<span data-ppcond="2592">else</span></u></td></tr>
<tr><th id="2644">2644</th><td>  <i>/* Unused on x64 or without FFI. */</i></td></tr>
<tr><th id="2645">2645</th><td>  <a class="macro" href="lj_def.h.html#91" title="((void)(as))" data-ref="_M/UNUSED">UNUSED</a>(<a class="local col5 ref" href="#785as" title='as' data-ref="785as" data-ref-filename="785as">as</a>); <a class="macro" href="lj_def.h.html#91" title="((void)(ir))" data-ref="_M/UNUSED">UNUSED</a>(<a class="local col6 ref" href="#786ir" title='ir' data-ref="786ir" data-ref-filename="786ir">ir</a>); <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(<var>0</var>, <q>"unexpected HIOP"</q>);</td></tr>
<tr><th id="2646">2646</th><td><u>#<span data-ppcond="2592">endif</span></u></td></tr>
<tr><th id="2647">2647</th><td>}</td></tr>
<tr><th id="2648">2648</th><td></td></tr>
<tr><th id="2649">2649</th><td><i>/* -- Profiling ----------------------------------------------------------- */</i></td></tr>
<tr><th id="2650">2650</th><td></td></tr>
<tr><th id="2651">2651</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_prof" title='asm_prof' data-ref="asm_prof" data-ref-filename="asm_prof">asm_prof</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col7 decl" id="787as" title='as' data-type='ASMState *' data-ref="787as" data-ref-filename="787as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col8 decl" id="788ir" title='ir' data-type='IRIns *' data-ref="788ir" data-ref-filename="788ir">ir</dfn>)</td></tr>
<tr><th id="2652">2652</th><td>{</td></tr>
<tr><th id="2653">2653</th><td>  <a class="macro" href="lj_def.h.html#91" title="((void)(ir))" data-ref="_M/UNUSED">UNUSED</a>(<a class="local col8 ref" href="#788ir" title='ir' data-ref="788ir" data-ref-filename="788ir">ir</a>);</td></tr>
<tr><th id="2654">2654</th><td>  <a class="ref fn" href="#asm_guardcc" title='asm_guardcc' data-ref="asm_guardcc" data-ref-filename="asm_guardcc">asm_guardcc</a>(<a class="local col7 ref" href="#787as" title='as' data-ref="787as" data-ref-filename="787as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_NE" title='CC_NE' data-ref="CC_NE" data-ref-filename="CC_NE">CC_NE</a>);</td></tr>
<tr><th id="2655">2655</th><td>  <a class="macro" href="lj_emit_x86.h.html#29" title="(*--as-&gt;mcp = (MCode)(0x80))" data-ref="_M/emit_i8">emit_i8</a>(<a class="local col7 ref" href="#787as" title='as' data-ref="787as" data-ref-filename="787as">as</a>, <a class="macro" href="lj_obj.h.html#671" title="0x80" data-ref="_M/HOOK_PROFILE">HOOK_PROFILE</a>);</td></tr>
<tr><th id="2656">2656</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_rma" title='emit_rma' data-ref="emit_rma" data-ref-filename="emit_rma">emit_rma</a>(<a class="local col7 ref" href="#787as" title='as' data-ref="787as" data-ref-filename="787as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_GROUP3b" title='XO_GROUP3b' data-ref="XO_GROUP3b" data-ref-filename="XO_GROUP3b">XO_GROUP3b</a>, <a class="enum" href="lj_target_x86.h.html#XOg_TEST" title='XOg_TEST' data-ref="XOg_TEST" data-ref-filename="XOg_TEST">XOg_TEST</a>, &amp;<a class="macro" href="lj_dispatch.h.html#115" title="(&amp;((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;g)" data-ref="_M/J2G">J2G</a>(<a class="local col7 ref" href="#787as" title='as' data-ref="787as" data-ref-filename="787as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>)-&gt;<a class="ref field" href="lj_obj.h.html#global_State::hookmask" title='global_State::hookmask' data-ref="global_State::hookmask" data-ref-filename="global_State..hookmask">hookmask</a>);</td></tr>
<tr><th id="2657">2657</th><td>}</td></tr>
<tr><th id="2658">2658</th><td></td></tr>
<tr><th id="2659">2659</th><td><i>/* -- Stack handling ------------------------------------------------------ */</i></td></tr>
<tr><th id="2660">2660</th><td></td></tr>
<tr><th id="2661">2661</th><td><i>/* Check Lua stack size for overflow. Use exit handler as fallback. */</i></td></tr>
<tr><th id="2662">2662</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_stack_check" title='asm_stack_check' data-ref="asm_stack_check" data-ref-filename="asm_stack_check">asm_stack_check</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col9 decl" id="789as" title='as' data-type='ASMState *' data-ref="789as" data-ref-filename="789as">as</dfn>, <a class="typedef" href="lj_obj.h.html#BCReg" title='BCReg' data-type='uint32_t' data-ref="BCReg" data-ref-filename="BCReg">BCReg</a> <dfn class="local col0 decl" id="790topslot" title='topslot' data-type='BCReg' data-ref="790topslot" data-ref-filename="790topslot">topslot</dfn>,</td></tr>
<tr><th id="2663">2663</th><td>			    <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col1 decl" id="791irp" title='irp' data-type='IRIns *' data-ref="791irp" data-ref-filename="791irp">irp</dfn>, <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col2 decl" id="792allow" title='allow' data-type='RegSet' data-ref="792allow" data-ref-filename="792allow">allow</dfn>, <a class="typedef" href="lj_jit.h.html#ExitNo" title='ExitNo' data-type='uint32_t' data-ref="ExitNo" data-ref-filename="ExitNo">ExitNo</a> <dfn class="local col3 decl" id="793exitno" title='exitno' data-type='ExitNo' data-ref="793exitno" data-ref-filename="793exitno">exitno</dfn>)</td></tr>
<tr><th id="2664">2664</th><td>{</td></tr>
<tr><th id="2665">2665</th><td>  <i>/* Try to get an unused temp. register, otherwise spill/restore eax. */</i></td></tr>
<tr><th id="2666">2666</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col4 decl" id="794pbase" title='pbase' data-type='Reg' data-ref="794pbase" data-ref-filename="794pbase">pbase</dfn> = <a class="local col1 ref" href="#791irp" title='irp' data-ref="791irp" data-ref-filename="791irp">irp</a> ? <a class="local col1 ref" href="#791irp" title='irp' data-ref="791irp" data-ref-filename="791irp">irp</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a> : <a class="enum" href="lj_target_x86.h.html#RID_BASE" title='RID_BASE' data-ref="RID_BASE" data-ref-filename="RID_BASE">RID_BASE</a>;</td></tr>
<tr><th id="2667">2667</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col5 decl" id="795r" title='r' data-type='Reg' data-ref="795r" data-ref-filename="795r">r</dfn> = <a class="local col2 ref" href="#792allow" title='allow' data-ref="792allow" data-ref-filename="792allow">allow</a> ? <a class="macro" href="lj_target.h.html#77" title="((Reg)((uint32_t)__builtin_ctz(allow)))" data-ref="_M/rset_pickbot">rset_pickbot</a>(<a class="local col2 ref" href="#792allow" title='allow' data-ref="792allow" data-ref-filename="792allow">allow</a>) : <a class="enum" href="lj_target_x86.h.html#30" title='RID_EAX' data-ref="RID_EAX" data-ref-filename="RID_EAX">RID_EAX</a>;</td></tr>
<tr><th id="2668">2668</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_jcc" title='emit_jcc' data-ref="emit_jcc" data-ref-filename="emit_jcc">emit_jcc</a>(<a class="local col9 ref" href="#789as" title='as' data-ref="789as" data-ref-filename="789as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_B" title='CC_B' data-ref="CC_B" data-ref-filename="CC_B">CC_B</a>, <a class="macro" href="lj_target.h.html#161" title="((MCode *)exitstub_addr_((char **)((as-&gt;J)-&gt;exitstubgroup), (exitno)))" data-ref="_M/exitstub_addr">exitstub_addr</a>(<a class="local col9 ref" href="#789as" title='as' data-ref="789as" data-ref-filename="789as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>, <a class="local col3 ref" href="#793exitno" title='exitno' data-ref="793exitno" data-ref-filename="793exitno">exitno</a>));</td></tr>
<tr><th id="2669">2669</th><td>  <b>if</b> (<a class="local col2 ref" href="#792allow" title='allow' data-ref="792allow" data-ref-filename="792allow">allow</a> == <a class="macro" href="lj_target.h.html#65" title="((RegSet)0)" data-ref="_M/RSET_EMPTY">RSET_EMPTY</a>)  <i>/* Restore temp. register. */</i></td></tr>
<tr><th id="2670">2670</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col9 ref" href="#789as" title='as' data-ref="789as" data-ref-filename="789as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col5 ref" href="#795r" title='r' data-ref="795r" data-ref-filename="795r">r</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="enum" href="lj_target_x86.h.html#30" title='RID_ESP' data-ref="RID_ESP" data-ref-filename="RID_ESP">RID_ESP</a>, <var>0</var>);</td></tr>
<tr><th id="2671">2671</th><td>  <b>else</b></td></tr>
<tr><th id="2672">2672</th><td>    <a class="macro" href="lj_asm.c.html#305" title="(as-&gt;modset |= (((RegSet)1) &lt;&lt; ((r))))" data-ref="_M/ra_modified">ra_modified</a>(<a class="local col9 ref" href="#789as" title='as' data-ref="789as" data-ref-filename="789as">as</a>, <a class="local col5 ref" href="#795r" title='r' data-ref="795r" data-ref-filename="795r">r</a>);</td></tr>
<tr><th id="2673">2673</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_gri" title='emit_gri' data-ref="emit_gri" data-ref-filename="emit_gri">emit_gri</a>(<a class="local col9 ref" href="#789as" title='as' data-ref="789as" data-ref-filename="789as">as</a>, <a class="macro" href="lj_target_x86.h.html#324" title="((x86Group)(((XI_ARITHi8) &lt;&lt; 16) + ((XI_ARITHi) &lt;&lt; 8) + (XOg_CMP)))" data-ref="_M/XG_ARITHi">XG_ARITHi</a>(<a class="enum" href="lj_target_x86.h.html#XOg_CMP" title='XOg_CMP' data-ref="XOg_CMP" data-ref-filename="XOg_CMP">XOg_CMP</a>), <a class="local col5 ref" href="#795r" title='r' data-ref="795r" data-ref-filename="795r">r</a>|<a class="macro" href="lj_emit_x86.h.html#24" title="(0x200|0x080000)" data-ref="_M/REX_GC64">REX_GC64</a>, (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)(<var>8</var>*<a class="local col0 ref" href="#790topslot" title='topslot' data-ref="790topslot" data-ref-filename="790topslot">topslot</a>));</td></tr>
<tr><th id="2674">2674</th><td>  <b>if</b> (<a class="macro" href="lj_target.h.html#28" title="(!((pbase) &amp; 0x80))" data-ref="_M/ra_hasreg">ra_hasreg</a>(<a class="local col4 ref" href="#794pbase" title='pbase' data-ref="794pbase" data-ref-filename="794pbase">pbase</a>) &amp;&amp; <a class="local col4 ref" href="#794pbase" title='pbase' data-ref="794pbase" data-ref-filename="794pbase">pbase</a> != <a class="local col5 ref" href="#795r" title='r' data-ref="795r" data-ref-filename="795r">r</a>)</td></tr>
<tr><th id="2675">2675</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col9 ref" href="#789as" title='as' data-ref="789as" data-ref-filename="789as">as</a>, <a class="macro" href="lj_target_x86.h.html#328" title="((x86Op)(0x030000fe + ((XOg_SUB)&lt;&lt;27)))" data-ref="_M/XO_ARITH">XO_ARITH</a>(<a class="enum" href="lj_target_x86.h.html#XOg_SUB" title='XOg_SUB' data-ref="XOg_SUB" data-ref-filename="XOg_SUB">XOg_SUB</a>), <a class="local col5 ref" href="#795r" title='r' data-ref="795r" data-ref-filename="795r">r</a>|<a class="macro" href="lj_emit_x86.h.html#24" title="(0x200|0x080000)" data-ref="_M/REX_GC64">REX_GC64</a>, <a class="local col4 ref" href="#794pbase" title='pbase' data-ref="794pbase" data-ref-filename="794pbase">pbase</a>);</td></tr>
<tr><th id="2676">2676</th><td>  <b>else</b></td></tr>
<tr><th id="2677">2677</th><td><u>#<span data-ppcond="2677">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="2678">2678</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col9 ref" href="#789as" title='as' data-ref="789as" data-ref-filename="789as">as</a>, <a class="macro" href="lj_target_x86.h.html#328" title="((x86Op)(0x030000fe + ((XOg_SUB)&lt;&lt;27)))" data-ref="_M/XO_ARITH">XO_ARITH</a>(<a class="enum" href="lj_target_x86.h.html#XOg_SUB" title='XOg_SUB' data-ref="XOg_SUB" data-ref-filename="XOg_SUB">XOg_SUB</a>), <a class="local col5 ref" href="#795r" title='r' data-ref="795r" data-ref-filename="795r">r</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="enum" href="lj_target_x86.h.html#RID_DISPATCH" title='RID_DISPATCH' data-ref="RID_DISPATCH" data-ref-filename="RID_DISPATCH">RID_DISPATCH</a>,</td></tr>
<tr><th id="2679">2679</th><td>	      (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<a class="macro" href="lj_emit_x86.h.html#295" title="((intptr_t)((uintptr_t)(&amp;(&amp;((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;g)-&gt;jit_base) - (uintptr_t)((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;dispatch))" data-ref="_M/dispofs">dispofs</a>(<a class="local col9 ref" href="#789as" title='as' data-ref="789as" data-ref-filename="789as">as</a>, &amp;<a class="macro" href="lj_dispatch.h.html#115" title="(&amp;((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;g)" data-ref="_M/J2G">J2G</a>(<a class="local col9 ref" href="#789as" title='as' data-ref="789as" data-ref-filename="789as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>)-&gt;<a class="ref field" href="lj_obj.h.html#global_State::jit_base" title='global_State::jit_base' data-ref="global_State::jit_base" data-ref-filename="global_State..jit_base">jit_base</a>));</td></tr>
<tr><th id="2680">2680</th><td><u>#<span data-ppcond="2677">else</span></u></td></tr>
<tr><th id="2681">2681</th><td>    emit_rmro(as, XO_ARITH(XOg_SUB), r, RID_NONE,</td></tr>
<tr><th id="2682">2682</th><td>	      ptr2addr(&amp;J2G(as-&gt;J)-&gt;jit_base));</td></tr>
<tr><th id="2683">2683</th><td><u>#<span data-ppcond="2677">endif</span></u></td></tr>
<tr><th id="2684">2684</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col9 ref" href="#789as" title='as' data-ref="789as" data-ref-filename="789as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col5 ref" href="#795r" title='r' data-ref="795r" data-ref-filename="795r">r</a>|<a class="macro" href="lj_emit_x86.h.html#24" title="(0x200|0x080000)" data-ref="_M/REX_GC64">REX_GC64</a>, <a class="local col5 ref" href="#795r" title='r' data-ref="795r" data-ref-filename="795r">r</a>, <span class="macro" title="__builtin_offsetof(lua_State, maxstack)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="lua.h.html#lua_State" title='lua_State' data-type='struct lua_State' data-ref="lua_State" data-ref-filename="lua_State">lua_State</a>, maxstack));</td></tr>
<tr><th id="2685">2685</th><td>  <a class="macro" href="lj_emit_x86.h.html#268" title="emit_rma(as, (XO_MOV), ((r)|(0x200|0x080000)), (void *)&amp;(&amp;((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;g)-&gt;cur_L)" data-ref="_M/emit_getgl">emit_getgl</a>(<a class="local col9 ref" href="#789as" title='as' data-ref="789as" data-ref-filename="789as">as</a>, <a class="local col5 ref" href="#795r" title='r' data-ref="795r" data-ref-filename="795r">r</a>, <a class="ref field" href="lj_obj.h.html#global_State::cur_L" title='global_State::cur_L' data-ref="global_State::cur_L" data-ref-filename="global_State..cur_L">cur_L</a>);</td></tr>
<tr><th id="2686">2686</th><td>  <b>if</b> (<a class="local col2 ref" href="#792allow" title='allow' data-ref="792allow" data-ref-filename="792allow">allow</a> == <a class="macro" href="lj_target.h.html#65" title="((RegSet)0)" data-ref="_M/RSET_EMPTY">RSET_EMPTY</a>)  <i>/* Spill temp. register. */</i></td></tr>
<tr><th id="2687">2687</th><td>    <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col9 ref" href="#789as" title='as' data-ref="789as" data-ref-filename="789as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOVto" title='XO_MOVto' data-ref="XO_MOVto" data-ref-filename="XO_MOVto">XO_MOVto</a>, <a class="local col5 ref" href="#795r" title='r' data-ref="795r" data-ref-filename="795r">r</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="enum" href="lj_target_x86.h.html#30" title='RID_ESP' data-ref="RID_ESP" data-ref-filename="RID_ESP">RID_ESP</a>, <var>0</var>);</td></tr>
<tr><th id="2688">2688</th><td>}</td></tr>
<tr><th id="2689">2689</th><td></td></tr>
<tr><th id="2690">2690</th><td><i>/* Restore Lua stack from on-trace state. */</i></td></tr>
<tr><th id="2691">2691</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_stack_restore" title='asm_stack_restore' data-ref="asm_stack_restore" data-ref-filename="asm_stack_restore">asm_stack_restore</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col6 decl" id="796as" title='as' data-type='ASMState *' data-ref="796as" data-ref-filename="796as">as</dfn>, <a class="typedef" href="lj_jit.h.html#SnapShot" title='SnapShot' data-type='struct SnapShot' data-ref="SnapShot" data-ref-filename="SnapShot">SnapShot</a> *<dfn class="local col7 decl" id="797snap" title='snap' data-type='SnapShot *' data-ref="797snap" data-ref-filename="797snap">snap</dfn>)</td></tr>
<tr><th id="2692">2692</th><td>{</td></tr>
<tr><th id="2693">2693</th><td>  <a class="typedef" href="lj_jit.h.html#SnapEntry" title='SnapEntry' data-type='uint32_t' data-ref="SnapEntry" data-ref-filename="SnapEntry">SnapEntry</a> *<dfn class="local col8 decl" id="798map" title='map' data-type='SnapEntry *' data-ref="798map" data-ref-filename="798map">map</dfn> = &amp;<a class="local col6 ref" href="#796as" title='as' data-ref="796as" data-ref-filename="796as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::T" title='ASMState::T' data-use='r' data-ref="ASMState::T" data-ref-filename="ASMState..T">T</a>-&gt;<a class="ref field" href="lj_jit.h.html#GCtrace::snapmap" title='GCtrace::snapmap' data-ref="GCtrace::snapmap" data-ref-filename="GCtrace..snapmap">snapmap</a>[<a class="local col7 ref" href="#797snap" title='snap' data-ref="797snap" data-ref-filename="797snap">snap</a>-&gt;<a class="ref field" href="lj_jit.h.html#SnapShot::mapofs" title='SnapShot::mapofs' data-ref="SnapShot::mapofs" data-ref-filename="SnapShot..mapofs">mapofs</a>];</td></tr>
<tr><th id="2694">2694</th><td><u>#<span data-ppcond="2694">if</span> !<a class="macro" href="lj_arch.h.html#533" title="1" data-ref="_M/LJ_FR2">LJ_FR2</a> || defined(<span class="macro" data-ref="_M/LUA_USE_ASSERT">LUA_USE_ASSERT</span>)</u></td></tr>
<tr><th id="2695">2695</th><td>  SnapEntry *flinks = &amp;as-&gt;T-&gt;snapmap[snap_nextofs(as-&gt;T, snap)-<var>1</var>-LJ_FR2];</td></tr>
<tr><th id="2696">2696</th><td><u>#<span data-ppcond="2694">endif</span></u></td></tr>
<tr><th id="2697">2697</th><td>  <a class="typedef" href="lj_obj.h.html#MSize" title='MSize' data-type='uint32_t' data-ref="MSize" data-ref-filename="MSize">MSize</a> <dfn class="local col9 decl" id="799n" title='n' data-type='MSize' data-ref="799n" data-ref-filename="799n">n</dfn>, <dfn class="local col0 decl" id="800nent" title='nent' data-type='MSize' data-ref="800nent" data-ref-filename="800nent">nent</dfn> = <a class="local col7 ref" href="#797snap" title='snap' data-ref="797snap" data-ref-filename="797snap">snap</a>-&gt;<a class="ref field" href="lj_jit.h.html#SnapShot::nent" title='SnapShot::nent' data-ref="SnapShot::nent" data-ref-filename="SnapShot..nent">nent</a>;</td></tr>
<tr><th id="2698">2698</th><td>  <i>/* Store the value of all modified slots to the Lua stack. */</i></td></tr>
<tr><th id="2699">2699</th><td>  <b>for</b> (<a class="local col9 ref" href="#799n" title='n' data-ref="799n" data-ref-filename="799n">n</a> = <var>0</var>; <a class="local col9 ref" href="#799n" title='n' data-ref="799n" data-ref-filename="799n">n</a> &lt; <a class="local col0 ref" href="#800nent" title='nent' data-ref="800nent" data-ref-filename="800nent">nent</a>; <a class="local col9 ref" href="#799n" title='n' data-ref="799n" data-ref-filename="799n">n</a>++) {</td></tr>
<tr><th id="2700">2700</th><td>    <a class="typedef" href="lj_jit.h.html#SnapEntry" title='SnapEntry' data-type='uint32_t' data-ref="SnapEntry" data-ref-filename="SnapEntry">SnapEntry</a> <dfn class="local col1 decl" id="801sn" title='sn' data-type='SnapEntry' data-ref="801sn" data-ref-filename="801sn">sn</dfn> = <a class="local col8 ref" href="#798map" title='map' data-ref="798map" data-ref-filename="798map">map</a>[<a class="local col9 ref" href="#799n" title='n' data-ref="799n" data-ref-filename="799n">n</a>];</td></tr>
<tr><th id="2701">2701</th><td>    <a class="typedef" href="lj_obj.h.html#BCReg" title='BCReg' data-type='uint32_t' data-ref="BCReg" data-ref-filename="BCReg">BCReg</a> <dfn class="local col2 decl" id="802s" title='s' data-type='BCReg' data-ref="802s" data-ref-filename="802s">s</dfn> = <a class="macro" href="lj_jit.h.html#214" title="((BCReg)((sn) &gt;&gt; 24))" data-ref="_M/snap_slot">snap_slot</a>(<a class="local col1 ref" href="#801sn" title='sn' data-ref="801sn" data-ref-filename="801sn">sn</a>);</td></tr>
<tr><th id="2702">2702</th><td>    <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> <dfn class="local col3 decl" id="803ofs" title='ofs' data-type='int32_t' data-ref="803ofs" data-ref-filename="803ofs">ofs</dfn> = <var>8</var>*((<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)<a class="local col2 ref" href="#802s" title='s' data-ref="802s" data-ref-filename="802s">s</a>-<var>1</var>-<a class="macro" href="lj_arch.h.html#533" title="1" data-ref="_M/LJ_FR2">LJ_FR2</a>);</td></tr>
<tr><th id="2703">2703</th><td>    <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col4 decl" id="804ref" title='ref' data-type='IRRef' data-ref="804ref" data-ref-filename="804ref">ref</dfn> = <a class="macro" href="lj_jit.h.html#213" title="((sn) &amp; 0xffff)" data-ref="_M/snap_ref">snap_ref</a>(<a class="local col1 ref" href="#801sn" title='sn' data-ref="801sn" data-ref-filename="801sn">sn</a>);</td></tr>
<tr><th id="2704">2704</th><td>    <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col5 decl" id="805ir" title='ir' data-type='IRIns *' data-ref="805ir" data-ref-filename="805ir">ir</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(ref)])" data-ref="_M/IR">IR</a>(<a class="local col4 ref" href="#804ref" title='ref' data-ref="804ref" data-ref-filename="804ref">ref</a>);</td></tr>
<tr><th id="2705">2705</th><td>    <b>if</b> ((<a class="local col1 ref" href="#801sn" title='sn' data-ref="801sn" data-ref-filename="801sn">sn</a> &amp; <a class="macro" href="lj_jit.h.html#201" title="0x040000" data-ref="_M/SNAP_NORESTORE">SNAP_NORESTORE</a>))</td></tr>
<tr><th id="2706">2706</th><td>      <b>continue</b>;</td></tr>
<tr><th id="2707">2707</th><td>    <b>if</b> (<a class="macro" href="lj_ir.h.html#363" title="(((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM)" data-ref="_M/irt_isnum">irt_isnum</a>(<a class="local col5 ref" href="#805ir" title='ir' data-ref="805ir" data-ref-filename="805ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="2708">2708</th><td>      <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col6 decl" id="806src" title='src' data-type='Reg' data-ref="806src" data-ref-filename="806src">src</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col6 ref" href="#796as" title='as' data-ref="796as" data-ref-filename="796as">as</a>, <a class="local col4 ref" href="#804ref" title='ref' data-ref="804ref" data-ref-filename="804ref">ref</a>, <a class="macro" href="lj_target_x86.h.html#71" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR)))" data-ref="_M/RSET_FPR">RSET_FPR</a>);</td></tr>
<tr><th id="2709">2709</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col6 ref" href="#796as" title='as' data-ref="796as" data-ref-filename="796as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOVSDto" title='XO_MOVSDto' data-ref="XO_MOVSDto" data-ref-filename="XO_MOVSDto">XO_MOVSDto</a>, <a class="local col6 ref" href="#806src" title='src' data-ref="806src" data-ref-filename="806src">src</a>, <a class="enum" href="lj_target_x86.h.html#RID_BASE" title='RID_BASE' data-ref="RID_BASE" data-ref-filename="RID_BASE">RID_BASE</a>, <a class="local col3 ref" href="#803ofs" title='ofs' data-ref="803ofs" data-ref-filename="803ofs">ofs</a>);</td></tr>
<tr><th id="2710">2710</th><td>    } <b>else</b> {</td></tr>
<tr><th id="2711">2711</th><td>      <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(irt_ispri(ir-&gt;t) || irt_isaddr(ir-&gt;t) ||</td></tr>
<tr><th id="2712">2712</th><td>		 (LJ_DUALNUM &amp;&amp; irt_isinteger(ir-&gt;t)),</td></tr>
<tr><th id="2713">2713</th><td>		 <q>"restore of IR type %d"</q>, irt_type(ir-&gt;t));</td></tr>
<tr><th id="2714">2714</th><td>      <b>if</b> (!<a class="macro" href="lj_ir.h.html#470" title="((ref) &lt; REF_BIAS)" data-ref="_M/irref_isk">irref_isk</a>(<a class="local col4 ref" href="#804ref" title='ref' data-ref="804ref" data-ref-filename="804ref">ref</a>)) {</td></tr>
<tr><th id="2715">2715</th><td>	<a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col7 decl" id="807src" title='src' data-type='Reg' data-ref="807src" data-ref-filename="807src">src</dfn> = <a class="tu ref fn" href="lj_asm.c.html#ra_alloc1" title='ra_alloc1' data-use='c' data-ref="ra_alloc1" data-ref-filename="ra_alloc1">ra_alloc1</a>(<a class="local col6 ref" href="#796as" title='as' data-ref="796as" data-ref-filename="796as">as</a>, <a class="local col4 ref" href="#804ref" title='ref' data-ref="804ref" data-ref-filename="804ref">ref</a>, <a class="macro" href="lj_target.h.html#71" title="(((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH))) &amp; ~(((RegSet)1) &lt;&lt; (RID_BASE)))" data-ref="_M/rset_exclude">rset_exclude</a>(<a class="macro" href="lj_target_x86.h.html#68" title="((((((RegSet)1) &lt;&lt; ((RID_MAX_GPR)-(RID_MIN_GPR)))-1) &lt;&lt; (RID_MIN_GPR)) - (((RegSet)1) &lt;&lt; (RID_ESP)) - 1*(((RegSet)1) &lt;&lt; (RID_DISPATCH)))" data-ref="_M/RSET_GPR">RSET_GPR</a>, <a class="enum" href="lj_target_x86.h.html#RID_BASE" title='RID_BASE' data-ref="RID_BASE" data-ref-filename="RID_BASE">RID_BASE</a>));</td></tr>
<tr><th id="2716">2716</th><td><u>#<span data-ppcond="2716">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="2717">2717</th><td>	<b>if</b> (<a class="macro" href="lj_ir.h.html#394" title="((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)((ir-&gt;t).irt &amp; IRT_TYPE))) &amp; 1)" data-ref="_M/irt_is64">irt_is64</a>(<a class="local col5 ref" href="#805ir" title='ir' data-ref="805ir" data-ref-filename="805ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="2718">2718</th><td>	  <i>/* TODO: 64 bit store + 32 bit load-modify-store is suboptimal. */</i></td></tr>
<tr><th id="2719">2719</th><td>	  <a class="macro" href="lj_emit_x86.h.html#31" title="(*(uint32_t *)(as-&gt;mcp-4) = (irt_toitype_(((IRType)(((ir-&gt;t)).irt &amp; IRT_TYPE))) &lt;&lt; 15), as-&gt;mcp -= 4)" data-ref="_M/emit_u32">emit_u32</a>(<a class="local col6 ref" href="#796as" title='as' data-ref="796as" data-ref-filename="796as">as</a>, <a class="macro" href="lj_ir.h.html#427" title="irt_toitype_(((IRType)(((ir-&gt;t)).irt &amp; IRT_TYPE)))" data-ref="_M/irt_toitype">irt_toitype</a>(<a class="local col5 ref" href="#805ir" title='ir' data-ref="805ir" data-ref-filename="805ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) &lt;&lt; <var>15</var>);</td></tr>
<tr><th id="2720">2720</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col6 ref" href="#796as" title='as' data-ref="796as" data-ref-filename="796as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_ARITHi" title='XO_ARITHi' data-ref="XO_ARITHi" data-ref-filename="XO_ARITHi">XO_ARITHi</a>, <a class="enum" href="lj_target_x86.h.html#XOg_OR" title='XOg_OR' data-ref="XOg_OR" data-ref-filename="XOg_OR">XOg_OR</a>, <a class="enum" href="lj_target_x86.h.html#RID_BASE" title='RID_BASE' data-ref="RID_BASE" data-ref-filename="RID_BASE">RID_BASE</a>, <a class="local col3 ref" href="#803ofs" title='ofs' data-ref="803ofs" data-ref-filename="803ofs">ofs</a>+<var>4</var>);</td></tr>
<tr><th id="2721">2721</th><td>	} <b>else</b> <b>if</b> (<a class="macro" href="lj_arch.h.html#513" title="0" data-ref="_M/LJ_DUALNUM">LJ_DUALNUM</a> &amp;&amp; <a class="macro" href="lj_ir.h.html#374" title="(((uint32_t)(((ir-&gt;t)).irt &amp; IRT_TYPE) - (uint32_t)(IRT_I8) &lt;= (uint32_t)(IRT_INT-IRT_I8)))" data-ref="_M/irt_isinteger">irt_isinteger</a>(<a class="local col5 ref" href="#805ir" title='ir' data-ref="805ir" data-ref-filename="805ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)) {</td></tr>
<tr><th id="2722">2722</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_movmroi" title='emit_movmroi' data-ref="emit_movmroi" data-ref-filename="emit_movmroi">emit_movmroi</a>(<a class="local col6 ref" href="#796as" title='as' data-ref="796as" data-ref-filename="796as">as</a>, <a class="enum" href="lj_target_x86.h.html#RID_BASE" title='RID_BASE' data-ref="RID_BASE" data-ref-filename="RID_BASE">RID_BASE</a>, <a class="local col3 ref" href="#803ofs" title='ofs' data-ref="803ofs" data-ref-filename="803ofs">ofs</a>+<var>4</var>, <a class="macro" href="lj_obj.h.html#280" title="(~13u)" data-ref="_M/LJ_TISNUM">LJ_TISNUM</a> &lt;&lt; <var>15</var>);</td></tr>
<tr><th id="2723">2723</th><td>	} <b>else</b> {</td></tr>
<tr><th id="2724">2724</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_movmroi" title='emit_movmroi' data-ref="emit_movmroi" data-ref-filename="emit_movmroi">emit_movmroi</a>(<a class="local col6 ref" href="#796as" title='as' data-ref="796as" data-ref-filename="796as">as</a>, <a class="enum" href="lj_target_x86.h.html#RID_BASE" title='RID_BASE' data-ref="RID_BASE" data-ref-filename="RID_BASE">RID_BASE</a>, <a class="local col3 ref" href="#803ofs" title='ofs' data-ref="803ofs" data-ref-filename="803ofs">ofs</a>+<var>4</var>, (<a class="macro" href="lj_ir.h.html#427" title="irt_toitype_(((IRType)(((ir-&gt;t)).irt &amp; IRT_TYPE)))" data-ref="_M/irt_toitype">irt_toitype</a>(<a class="local col5 ref" href="#805ir" title='ir' data-ref="805ir" data-ref-filename="805ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>)&lt;&lt;<var>15</var>)|<var>0x7fff</var>);</td></tr>
<tr><th id="2725">2725</th><td>	}</td></tr>
<tr><th id="2726">2726</th><td><u>#<span data-ppcond="2716">endif</span></u></td></tr>
<tr><th id="2727">2727</th><td>	<a class="macro" href="lj_emit_x86.h.html#262" title="emit_rmro(as, XO_MOVto, (((src) + (((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)(((ir)-&gt;t).irt &amp; IRT_TYPE))) &amp; 1) ? (0x200|0x080000) : 0))), (RID_BASE), (ofs))" data-ref="_M/emit_movtomro">emit_movtomro</a>(<a class="local col6 ref" href="#796as" title='as' data-ref="796as" data-ref-filename="796as">as</a>, <a class="macro" href="lj_emit_x86.h.html#525" title="((src) + (((((1u&lt;&lt;IRT_NUM)|(1u&lt;&lt;IRT_I64)|(1u&lt;&lt;IRT_U64)|(1u&lt;&lt;IRT_P64)| (1u&lt;&lt;IRT_LIGHTUD)|(1u&lt;&lt;IRT_STR)|(1u&lt;&lt;IRT_THREAD)|(1u&lt;&lt;IRT_PROTO)| (1u&lt;&lt;IRT_FUNC)|(1u&lt;&lt;IRT_CDATA)|(1u&lt;&lt;IRT_TAB)|(1u&lt;&lt;IRT_UDATA)| (1u&lt;&lt;IRT_NIL)) &gt;&gt; ((IRType)(((ir)-&gt;t).irt &amp; IRT_TYPE))) &amp; 1) ? (0x200|0x080000) : 0))" data-ref="_M/REX_64IR">REX_64IR</a>(<a class="local col5 ref" href="#805ir" title='ir' data-ref="805ir" data-ref-filename="805ir">ir</a>, <a class="local col7 ref" href="#807src" title='src' data-ref="807src" data-ref-filename="807src">src</a>), <a class="enum" href="lj_target_x86.h.html#RID_BASE" title='RID_BASE' data-ref="RID_BASE" data-ref-filename="RID_BASE">RID_BASE</a>, <a class="local col3 ref" href="#803ofs" title='ofs' data-ref="803ofs" data-ref-filename="803ofs">ofs</a>);</td></tr>
<tr><th id="2728">2728</th><td><u>#<span data-ppcond="2728">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="2729">2729</th><td>      } <b>else</b> {</td></tr>
<tr><th id="2730">2730</th><td>	<a class="typedef" href="lj_obj.h.html#TValue" title='TValue' data-type='union TValue' data-ref="TValue" data-ref-filename="TValue">TValue</a> <dfn class="local col8 decl" id="808k" title='k' data-type='TValue' data-ref="808k" data-ref-filename="808k">k</dfn>;</td></tr>
<tr><th id="2731">2731</th><td>	<a class="ref fn" href="lj_iropt.h.html#lj_ir_kvalue" title='lj_ir_kvalue' data-ref="lj_ir_kvalue" data-ref-filename="lj_ir_kvalue">lj_ir_kvalue</a>(<a class="local col6 ref" href="#796as" title='as' data-ref="796as" data-ref-filename="796as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>-&gt;<a class="ref field" href="lj_jit.h.html#jit_State::L" title='jit_State::L' data-ref="jit_State::L" data-ref-filename="jit_State..L">L</a>, &amp;<a class="local col8 ref" href="#808k" title='k' data-ref="808k" data-ref-filename="808k">k</a>, <a class="local col5 ref" href="#805ir" title='ir' data-ref="805ir" data-ref-filename="805ir">ir</a>);</td></tr>
<tr><th id="2732">2732</th><td>	<b>if</b> (<a class="macro" href="lj_obj.h.html#776" title="((&amp;k)-&gt;it64 == -1)" data-ref="_M/tvisnil">tvisnil</a>(&amp;<a class="local col8 ref" href="#808k" title='k' data-ref="808k" data-ref-filename="808k">k</a>)) {</td></tr>
<tr><th id="2733">2733</th><td>	  <a class="macro" href="lj_emit_x86.h.html#30" title="(*(int32_t *)(as-&gt;mcp-4) = (-1), as-&gt;mcp -= 4)" data-ref="_M/emit_i32">emit_i32</a>(<a class="local col6 ref" href="#796as" title='as' data-ref="796as" data-ref-filename="796as">as</a>, -<var>1</var>);</td></tr>
<tr><th id="2734">2734</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col6 ref" href="#796as" title='as' data-ref="796as" data-ref-filename="796as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOVmi" title='XO_MOVmi' data-ref="XO_MOVmi" data-ref-filename="XO_MOVmi">XO_MOVmi</a>, <a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="enum" href="lj_target_x86.h.html#RID_BASE" title='RID_BASE' data-ref="RID_BASE" data-ref-filename="RID_BASE">RID_BASE</a>, <a class="local col3 ref" href="#803ofs" title='ofs' data-ref="803ofs" data-ref-filename="803ofs">ofs</a>);</td></tr>
<tr><th id="2735">2735</th><td>	} <b>else</b> {</td></tr>
<tr><th id="2736">2736</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_movmroi" title='emit_movmroi' data-ref="emit_movmroi" data-ref-filename="emit_movmroi">emit_movmroi</a>(<a class="local col6 ref" href="#796as" title='as' data-ref="796as" data-ref-filename="796as">as</a>, <a class="enum" href="lj_target_x86.h.html#RID_BASE" title='RID_BASE' data-ref="RID_BASE" data-ref-filename="RID_BASE">RID_BASE</a>, <a class="local col3 ref" href="#803ofs" title='ofs' data-ref="803ofs" data-ref-filename="803ofs">ofs</a>+<var>4</var>, <a class="local col8 ref" href="#808k" title='k' data-ref="808k" data-ref-filename="808k">k</a>.<a class="ref field" href="lj_obj.h.html#TValue::u32" title='TValue::u32' data-ref="TValue::u32" data-ref-filename="TValue..u32">u32</a>.<a class="ref field" href="lj_obj.h.html#208" title='TValue::(anonymous struct)::hi' data-ref="TValue::(anonymous)::hi" data-ref-filename="TValue..(anonymous)..hi">hi</a>);</td></tr>
<tr><th id="2737">2737</th><td>	  <a class="ref fn" href="lj_emit_x86.h.html#emit_movmroi" title='emit_movmroi' data-ref="emit_movmroi" data-ref-filename="emit_movmroi">emit_movmroi</a>(<a class="local col6 ref" href="#796as" title='as' data-ref="796as" data-ref-filename="796as">as</a>, <a class="enum" href="lj_target_x86.h.html#RID_BASE" title='RID_BASE' data-ref="RID_BASE" data-ref-filename="RID_BASE">RID_BASE</a>, <a class="local col3 ref" href="#803ofs" title='ofs' data-ref="803ofs" data-ref-filename="803ofs">ofs</a>, <a class="local col8 ref" href="#808k" title='k' data-ref="808k" data-ref-filename="808k">k</a>.<a class="ref field" href="lj_obj.h.html#TValue::u32" title='TValue::u32' data-ref="TValue::u32" data-ref-filename="TValue..u32">u32</a>.<a class="ref field" href="lj_obj.h.html#208" title='TValue::(anonymous struct)::lo' data-ref="TValue::(anonymous)::lo" data-ref-filename="TValue..(anonymous)..lo">lo</a>);</td></tr>
<tr><th id="2738">2738</th><td>	}</td></tr>
<tr><th id="2739">2739</th><td><u>#<span data-ppcond="2728">else</span></u></td></tr>
<tr><th id="2740">2740</th><td>      } <b>else</b> <b>if</b> (!irt_ispri(ir-&gt;t)) {</td></tr>
<tr><th id="2741">2741</th><td>	emit_movmroi(as, RID_BASE, ofs, ir-&gt;i);</td></tr>
<tr><th id="2742">2742</th><td><u>#<span data-ppcond="2728">endif</span></u></td></tr>
<tr><th id="2743">2743</th><td>      }</td></tr>
<tr><th id="2744">2744</th><td>      <b>if</b> ((<a class="local col1 ref" href="#801sn" title='sn' data-ref="801sn" data-ref-filename="801sn">sn</a> &amp; (<a class="macro" href="lj_jit.h.html#200" title="0x020000" data-ref="_M/SNAP_CONT">SNAP_CONT</a>|<a class="macro" href="lj_jit.h.html#199" title="0x010000" data-ref="_M/SNAP_FRAME">SNAP_FRAME</a>))) {</td></tr>
<tr><th id="2745">2745</th><td><u>#<span data-ppcond="2745">if</span> !<a class="macro" href="lj_arch.h.html#533" title="1" data-ref="_M/LJ_FR2">LJ_FR2</a></u></td></tr>
<tr><th id="2746">2746</th><td>	<b>if</b> (s != <var>0</var>)  <i>/* Do not overwrite link to previous frame. */</i></td></tr>
<tr><th id="2747">2747</th><td>	  emit_movmroi(as, RID_BASE, ofs+<var>4</var>, (int32_t)(*flinks--));</td></tr>
<tr><th id="2748">2748</th><td><u>#<span data-ppcond="2745">endif</span></u></td></tr>
<tr><th id="2749">2749</th><td><u>#<span data-ppcond="2749">if</span> !<a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="2750">2750</th><td>      } <b>else</b> {</td></tr>
<tr><th id="2751">2751</th><td>	<b>if</b> (!(LJ_64 &amp;&amp; irt_islightud(ir-&gt;t)))</td></tr>
<tr><th id="2752">2752</th><td>	  emit_movmroi(as, RID_BASE, ofs+<var>4</var>, irt_toitype(ir-&gt;t));</td></tr>
<tr><th id="2753">2753</th><td><u>#<span data-ppcond="2749">endif</span></u></td></tr>
<tr><th id="2754">2754</th><td>      }</td></tr>
<tr><th id="2755">2755</th><td>    }</td></tr>
<tr><th id="2756">2756</th><td>    <a class="tu ref fn" href="lj_asm.c.html#checkmclim" title='checkmclim' data-use='c' data-ref="checkmclim" data-ref-filename="checkmclim">checkmclim</a>(<a class="local col6 ref" href="#796as" title='as' data-ref="796as" data-ref-filename="796as">as</a>);</td></tr>
<tr><th id="2757">2757</th><td>  }</td></tr>
<tr><th id="2758">2758</th><td>  <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(map + nent == flinks, <q>"inconsistent frames in snapshot"</q>);</td></tr>
<tr><th id="2759">2759</th><td>}</td></tr>
<tr><th id="2760">2760</th><td></td></tr>
<tr><th id="2761">2761</th><td><i>/* -- GC handling --------------------------------------------------------- */</i></td></tr>
<tr><th id="2762">2762</th><td></td></tr>
<tr><th id="2763">2763</th><td><i>/* Check GC threshold and do one or more GC steps. */</i></td></tr>
<tr><th id="2764">2764</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_gc_check" title='asm_gc_check' data-ref="asm_gc_check" data-ref-filename="asm_gc_check">asm_gc_check</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col9 decl" id="809as" title='as' data-type='ASMState *' data-ref="809as" data-ref-filename="809as">as</dfn>)</td></tr>
<tr><th id="2765">2765</th><td>{</td></tr>
<tr><th id="2766">2766</th><td>  <em>const</em> <a class="typedef" href="lj_ircall.h.html#CCallInfo" title='CCallInfo' data-type='struct CCallInfo' data-ref="CCallInfo" data-ref-filename="CCallInfo">CCallInfo</a> *<dfn class="local col0 decl" id="810ci" title='ci' data-type='const CCallInfo *' data-ref="810ci" data-ref-filename="810ci">ci</dfn> = &amp;<a class="ref" href="lj_ircall.h.html#lj_ir_callinfo" title='lj_ir_callinfo' data-ref="lj_ir_callinfo" data-ref-filename="lj_ir_callinfo">lj_ir_callinfo</a>[<a class="enum" href="lj_ircall.h.html#254" title='IRCALL_lj_gc_step_jit' data-ref="IRCALL_lj_gc_step_jit" data-ref-filename="IRCALL_lj_gc_step_jit">IRCALL_lj_gc_step_jit</a>];</td></tr>
<tr><th id="2767">2767</th><td>  <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col1 decl" id="811args" title='args' data-type='IRRef [2]' data-ref="811args" data-ref-filename="811args">args</dfn>[<var>2</var>];</td></tr>
<tr><th id="2768">2768</th><td>  <a class="typedef" href="lj_emit_x86.h.html#MCLabel" title='MCLabel' data-type='MCode *' data-ref="MCLabel" data-ref-filename="MCLabel">MCLabel</a> <dfn class="local col2 decl" id="812l_end" title='l_end' data-type='MCLabel' data-ref="812l_end" data-ref-filename="812l_end">l_end</dfn>;</td></tr>
<tr><th id="2769">2769</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col3 decl" id="813tmp" title='tmp' data-type='Reg' data-ref="813tmp" data-ref-filename="813tmp">tmp</dfn>;</td></tr>
<tr><th id="2770">2770</th><td>  <a class="tu ref fn" href="lj_asm.c.html#ra_evictset" title='ra_evictset' data-use='c' data-ref="ra_evictset" data-ref-filename="ra_evictset">ra_evictset</a>(<a class="local col9 ref" href="#809as" title='as' data-ref="809as" data-ref-filename="809as">as</a>, <a class="macro" href="lj_target_x86.h.html#98" title="(((((RegSet)1) &lt;&lt; (RID_EAX))|(((RegSet)1) &lt;&lt; (RID_ECX))|(((RegSet)1) &lt;&lt; (RID_EDX)))|(((((RegSet)1) &lt;&lt; ((RID_R11D+1)-(RID_ESI)))-1) &lt;&lt; (RID_ESI))|((((((RegSet)1) &lt;&lt; ((RID_MAX_FPR)-(RID_MIN_FPR)))-1) &lt;&lt; (RID_MIN_FPR))))" data-ref="_M/RSET_SCRATCH">RSET_SCRATCH</a>);</td></tr>
<tr><th id="2771">2771</th><td>  <a class="local col2 ref" href="#812l_end" title='l_end' data-ref="812l_end" data-ref-filename="812l_end">l_end</a> = <a class="macro" href="lj_emit_x86.h.html#472" title="((as)-&gt;mcp)" data-ref="_M/emit_label">emit_label</a>(<a class="local col9 ref" href="#809as" title='as' data-ref="809as" data-ref-filename="809as">as</a>);</td></tr>
<tr><th id="2772">2772</th><td>  <i>/* Exit trace if in GCSatomic or GCSfinalize. Avoids syncing GC objects. */</i></td></tr>
<tr><th id="2773">2773</th><td>  <a class="ref fn" href="#asm_guardcc" title='asm_guardcc' data-ref="asm_guardcc" data-ref-filename="asm_guardcc">asm_guardcc</a>(<a class="local col9 ref" href="#809as" title='as' data-ref="809as" data-ref-filename="809as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_NE" title='CC_NE' data-ref="CC_NE" data-ref-filename="CC_NE">CC_NE</a>);  <i>/* Assumes asm_snap_prep() already done. */</i></td></tr>
<tr><th id="2774">2774</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col9 ref" href="#809as" title='as' data-ref="809as" data-ref-filename="809as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_TEST" title='XO_TEST' data-ref="XO_TEST" data-ref-filename="XO_TEST">XO_TEST</a>, <a class="enum" href="lj_target_x86.h.html#RID_RET" title='RID_RET' data-ref="RID_RET" data-ref-filename="RID_RET">RID_RET</a>, <a class="enum" href="lj_target_x86.h.html#RID_RET" title='RID_RET' data-ref="RID_RET" data-ref-filename="RID_RET">RID_RET</a>);</td></tr>
<tr><th id="2775">2775</th><td>  <a class="local col1 ref" href="#811args" title='args' data-ref="811args" data-ref-filename="811args">args</a>[<var>0</var>] = <a class="macro" href="lj_asm.c.html#111" title="REF_TRUE" data-ref="_M/ASMREF_TMP1">ASMREF_TMP1</a>;  <i>/* global_State *g */</i></td></tr>
<tr><th id="2776">2776</th><td>  <a class="local col1 ref" href="#811args" title='args' data-ref="811args" data-ref-filename="811args">args</a>[<var>1</var>] = <a class="macro" href="lj_asm.c.html#112" title="REF_FALSE" data-ref="_M/ASMREF_TMP2">ASMREF_TMP2</a>;  <i>/* MSize steps     */</i></td></tr>
<tr><th id="2777">2777</th><td>  <a class="ref fn" href="#asm_gencall" title='asm_gencall' data-ref="asm_gencall" data-ref-filename="asm_gencall">asm_gencall</a>(<a class="local col9 ref" href="#809as" title='as' data-ref="809as" data-ref-filename="809as">as</a>, <a class="local col0 ref" href="#810ci" title='ci' data-ref="810ci" data-ref-filename="810ci">ci</a>, <a class="local col1 ref" href="#811args" title='args' data-ref="811args" data-ref-filename="811args">args</a>);</td></tr>
<tr><th id="2778">2778</th><td>  <a class="local col3 ref" href="#813tmp" title='tmp' data-ref="813tmp" data-ref-filename="813tmp">tmp</a> = <a class="tu ref fn" href="lj_asm.c.html#ra_releasetmp" title='ra_releasetmp' data-use='c' data-ref="ra_releasetmp" data-ref-filename="ra_releasetmp">ra_releasetmp</a>(<a class="local col9 ref" href="#809as" title='as' data-ref="809as" data-ref-filename="809as">as</a>, <a class="macro" href="lj_asm.c.html#111" title="REF_TRUE" data-ref="_M/ASMREF_TMP1">ASMREF_TMP1</a>);</td></tr>
<tr><th id="2779">2779</th><td><u>#<span data-ppcond="2779">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="2780">2780</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_rmro" title='emit_rmro' data-ref="emit_rmro" data-ref-filename="emit_rmro">emit_rmro</a>(<a class="local col9 ref" href="#809as" title='as' data-ref="809as" data-ref-filename="809as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_LEA" title='XO_LEA' data-ref="XO_LEA" data-ref-filename="XO_LEA">XO_LEA</a>, <a class="local col3 ref" href="#813tmp" title='tmp' data-ref="813tmp" data-ref-filename="813tmp">tmp</a>|<a class="macro" href="lj_emit_x86.h.html#15" title="(0x200|0x080000)" data-ref="_M/REX_64">REX_64</a>, <a class="enum" href="lj_target_x86.h.html#RID_DISPATCH" title='RID_DISPATCH' data-ref="RID_DISPATCH" data-ref-filename="RID_DISPATCH">RID_DISPATCH</a>, <a class="macro" href="lj_dispatch.h.html#120" title="(((int)__builtin_offsetof(GG_State, g)) - ((int)__builtin_offsetof(GG_State, dispatch)))" data-ref="_M/GG_DISP2G">GG_DISP2G</a>);</td></tr>
<tr><th id="2781">2781</th><td><u>#<span data-ppcond="2779">else</span></u></td></tr>
<tr><th id="2782">2782</th><td>  emit_loada(as, tmp, J2G(as-&gt;J));</td></tr>
<tr><th id="2783">2783</th><td><u>#<span data-ppcond="2779">endif</span></u></td></tr>
<tr><th id="2784">2784</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_loadi" title='emit_loadi' data-ref="emit_loadi" data-ref-filename="emit_loadi">emit_loadi</a>(<a class="local col9 ref" href="#809as" title='as' data-ref="809as" data-ref-filename="809as">as</a>, <a class="tu ref fn" href="lj_asm.c.html#ra_releasetmp" title='ra_releasetmp' data-use='c' data-ref="ra_releasetmp" data-ref-filename="ra_releasetmp">ra_releasetmp</a>(<a class="local col9 ref" href="#809as" title='as' data-ref="809as" data-ref-filename="809as">as</a>, <a class="macro" href="lj_asm.c.html#112" title="REF_FALSE" data-ref="_M/ASMREF_TMP2">ASMREF_TMP2</a>), <a class="local col9 ref" href="#809as" title='as' data-ref="809as" data-ref-filename="809as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::gcsteps" title='ASMState::gcsteps' data-use='r' data-ref="ASMState::gcsteps" data-ref-filename="ASMState..gcsteps">gcsteps</a>);</td></tr>
<tr><th id="2785">2785</th><td>  <i>/* Jump around GC step if GC total &lt; GC threshold. */</i></td></tr>
<tr><th id="2786">2786</th><td>  <a class="ref fn" href="lj_emit_x86.h.html#emit_sjcc" title='emit_sjcc' data-ref="emit_sjcc" data-ref-filename="emit_sjcc">emit_sjcc</a>(<a class="local col9 ref" href="#809as" title='as' data-ref="809as" data-ref-filename="809as">as</a>, <a class="enum" href="lj_target_x86.h.html#CC_B" title='CC_B' data-ref="CC_B" data-ref-filename="CC_B">CC_B</a>, <a class="local col2 ref" href="#812l_end" title='l_end' data-ref="812l_end" data-ref-filename="812l_end">l_end</a>);</td></tr>
<tr><th id="2787">2787</th><td>  <a class="macro" href="lj_emit_x86.h.html#266" title="emit_rma(as, (((x86Op)(0x030000fe + ((XOg_CMP)&lt;&lt;27)))), (tmp|(0x200|0x080000)), (void *)&amp;(&amp;((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;g)-&gt;gc.threshold)" data-ref="_M/emit_opgl">emit_opgl</a>(<a class="local col9 ref" href="#809as" title='as' data-ref="809as" data-ref-filename="809as">as</a>, <a class="macro" href="lj_target_x86.h.html#328" title="((x86Op)(0x030000fe + ((XOg_CMP)&lt;&lt;27)))" data-ref="_M/XO_ARITH">XO_ARITH</a>(<a class="enum" href="lj_target_x86.h.html#XOg_CMP" title='XOg_CMP' data-ref="XOg_CMP" data-ref-filename="XOg_CMP">XOg_CMP</a>), <a class="local col3 ref" href="#813tmp" title='tmp' data-ref="813tmp" data-ref-filename="813tmp">tmp</a>|<a class="macro" href="lj_emit_x86.h.html#24" title="(0x200|0x080000)" data-ref="_M/REX_GC64">REX_GC64</a>, <a class="ref field" href="lj_obj.h.html#global_State::gc" title='global_State::gc' data-ref="global_State::gc" data-ref-filename="global_State..gc">gc</a>.<a class="ref field" href="lj_obj.h.html#GCState::threshold" title='GCState::threshold' data-ref="GCState::threshold" data-ref-filename="GCState..threshold">threshold</a>);</td></tr>
<tr><th id="2788">2788</th><td>  <a class="macro" href="lj_emit_x86.h.html#268" title="emit_rma(as, (XO_MOV), ((tmp)|(0x200|0x080000)), (void *)&amp;(&amp;((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;g)-&gt;gc.total)" data-ref="_M/emit_getgl">emit_getgl</a>(<a class="local col9 ref" href="#809as" title='as' data-ref="809as" data-ref-filename="809as">as</a>, <a class="local col3 ref" href="#813tmp" title='tmp' data-ref="813tmp" data-ref-filename="813tmp">tmp</a>, <a class="ref field" href="lj_obj.h.html#global_State::gc" title='global_State::gc' data-ref="global_State::gc" data-ref-filename="global_State..gc">gc</a>.<a class="ref field" href="lj_obj.h.html#GCState::total" title='GCState::total' data-ref="GCState::total" data-ref-filename="GCState..total">total</a>);</td></tr>
<tr><th id="2789">2789</th><td>  <a class="local col9 ref" href="#809as" title='as' data-ref="809as" data-ref-filename="809as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::gcsteps" title='ASMState::gcsteps' data-use='w' data-ref="ASMState::gcsteps" data-ref-filename="ASMState..gcsteps">gcsteps</a> = <var>0</var>;</td></tr>
<tr><th id="2790">2790</th><td>  <a class="tu ref fn" href="lj_asm.c.html#checkmclim" title='checkmclim' data-use='c' data-ref="checkmclim" data-ref-filename="checkmclim">checkmclim</a>(<a class="local col9 ref" href="#809as" title='as' data-ref="809as" data-ref-filename="809as">as</a>);</td></tr>
<tr><th id="2791">2791</th><td>}</td></tr>
<tr><th id="2792">2792</th><td></td></tr>
<tr><th id="2793">2793</th><td><i>/* -- Loop handling ------------------------------------------------------- */</i></td></tr>
<tr><th id="2794">2794</th><td></td></tr>
<tr><th id="2795">2795</th><td><i>/* Fixup the loop branch. */</i></td></tr>
<tr><th id="2796">2796</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_loop_fixup" title='asm_loop_fixup' data-ref="asm_loop_fixup" data-ref-filename="asm_loop_fixup">asm_loop_fixup</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col4 decl" id="814as" title='as' data-type='ASMState *' data-ref="814as" data-ref-filename="814as">as</dfn>)</td></tr>
<tr><th id="2797">2797</th><td>{</td></tr>
<tr><th id="2798">2798</th><td>  <a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *<dfn class="local col5 decl" id="815p" title='p' data-type='MCode *' data-ref="815p" data-ref-filename="815p">p</dfn> = <a class="local col4 ref" href="#814as" title='as' data-ref="814as" data-ref-filename="814as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mctop" title='ASMState::mctop' data-use='r' data-ref="ASMState::mctop" data-ref-filename="ASMState..mctop">mctop</a>;</td></tr>
<tr><th id="2799">2799</th><td>  <a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *<dfn class="local col6 decl" id="816target" title='target' data-type='MCode *' data-ref="816target" data-ref-filename="816target">target</dfn> = <a class="local col4 ref" href="#814as" title='as' data-ref="814as" data-ref-filename="814as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcp" title='ASMState::mcp' data-use='r' data-ref="ASMState::mcp" data-ref-filename="ASMState..mcp">mcp</a>;</td></tr>
<tr><th id="2800">2800</th><td>  <b>if</b> (<a class="local col4 ref" href="#814as" title='as' data-ref="814as" data-ref-filename="814as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::realign" title='ASMState::realign' data-use='r' data-ref="ASMState::realign" data-ref-filename="ASMState..realign">realign</a>) {  <i>/* Realigned loops use short jumps. */</i></td></tr>
<tr><th id="2801">2801</th><td>    <a class="local col4 ref" href="#814as" title='as' data-ref="814as" data-ref-filename="814as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::realign" title='ASMState::realign' data-use='w' data-ref="ASMState::realign" data-ref-filename="ASMState..realign">realign</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;  <i>/* Stop another retry. */</i></td></tr>
<tr><th id="2802">2802</th><td>    <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(((intptr_t)target &amp; <var>15</var>) == <var>0</var>, <q>"loop realign failed"</q>);</td></tr>
<tr><th id="2803">2803</th><td>    <b>if</b> (<a class="local col4 ref" href="#814as" title='as' data-ref="814as" data-ref-filename="814as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::loopinv" title='ASMState::loopinv' data-use='r' data-ref="ASMState::loopinv" data-ref-filename="ASMState..loopinv">loopinv</a>) {  <i>/* Inverted loop branch? */</i></td></tr>
<tr><th id="2804">2804</th><td>      <a class="local col5 ref" href="#815p" title='p' data-ref="815p" data-ref-filename="815p">p</a> -= <var>5</var>;</td></tr>
<tr><th id="2805">2805</th><td>      <a class="local col5 ref" href="#815p" title='p' data-ref="815p" data-ref-filename="815p">p</a>[<var>0</var>] = <a class="enum" href="lj_target_x86.h.html#XI_JMP" title='XI_JMP' data-ref="XI_JMP" data-ref-filename="XI_JMP">XI_JMP</a>;</td></tr>
<tr><th id="2806">2806</th><td>      <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(target - p &gt;= -<var>128</var>, <q>"loop realign failed"</q>);</td></tr>
<tr><th id="2807">2807</th><td>      <a class="local col5 ref" href="#815p" title='p' data-ref="815p" data-ref-filename="815p">p</a>[-<var>1</var>] = (<a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a>)(<a class="local col6 ref" href="#816target" title='target' data-ref="816target" data-ref-filename="816target">target</a> - <a class="local col5 ref" href="#815p" title='p' data-ref="815p" data-ref-filename="815p">p</a>);  <i>/* Patch sjcc. */</i></td></tr>
<tr><th id="2808">2808</th><td>      <b>if</b> (<a class="local col4 ref" href="#814as" title='as' data-ref="814as" data-ref-filename="814as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::loopinv" title='ASMState::loopinv' data-use='r' data-ref="ASMState::loopinv" data-ref-filename="ASMState..loopinv">loopinv</a> == <var>2</var>)</td></tr>
<tr><th id="2809">2809</th><td>	<a class="local col5 ref" href="#815p" title='p' data-ref="815p" data-ref-filename="815p">p</a>[-<var>3</var>] = (<a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a>)(<a class="local col6 ref" href="#816target" title='target' data-ref="816target" data-ref-filename="816target">target</a> - <a class="local col5 ref" href="#815p" title='p' data-ref="815p" data-ref-filename="815p">p</a> + <var>2</var>);  <i>/* Patch opt. short jp. */</i></td></tr>
<tr><th id="2810">2810</th><td>    } <b>else</b> {</td></tr>
<tr><th id="2811">2811</th><td>      <a class="macro" href="lj_asm.c.html#106" title="((void)as)" data-ref="_M/lj_assertA">lj_assertA</a>(target - p &gt;= -<var>128</var>, <q>"loop realign failed"</q>);</td></tr>
<tr><th id="2812">2812</th><td>      <a class="local col5 ref" href="#815p" title='p' data-ref="815p" data-ref-filename="815p">p</a>[-<var>1</var>] = (<a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a>)(<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int8_t" title='int8_t' data-type='__int8_t' data-ref="int8_t" data-ref-filename="int8_t">int8_t</a>)(<a class="local col6 ref" href="#816target" title='target' data-ref="816target" data-ref-filename="816target">target</a> - <a class="local col5 ref" href="#815p" title='p' data-ref="815p" data-ref-filename="815p">p</a>);  <i>/* Patch short jmp. */</i></td></tr>
<tr><th id="2813">2813</th><td>      <a class="local col5 ref" href="#815p" title='p' data-ref="815p" data-ref-filename="815p">p</a>[-<var>2</var>] = <a class="enum" href="lj_target_x86.h.html#XI_JMPs" title='XI_JMPs' data-ref="XI_JMPs" data-ref-filename="XI_JMPs">XI_JMPs</a>;</td></tr>
<tr><th id="2814">2814</th><td>    }</td></tr>
<tr><th id="2815">2815</th><td>  } <b>else</b> {</td></tr>
<tr><th id="2816">2816</th><td>    <a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *<dfn class="local col7 decl" id="817newloop" title='newloop' data-type='MCode *' data-ref="817newloop" data-ref-filename="817newloop">newloop</dfn>;</td></tr>
<tr><th id="2817">2817</th><td>    <a class="local col5 ref" href="#815p" title='p' data-ref="815p" data-ref-filename="815p">p</a>[-<var>5</var>] = <a class="enum" href="lj_target_x86.h.html#XI_JMP" title='XI_JMP' data-ref="XI_JMP" data-ref-filename="XI_JMP">XI_JMP</a>;</td></tr>
<tr><th id="2818">2818</th><td>    <b>if</b> (<a class="local col4 ref" href="#814as" title='as' data-ref="814as" data-ref-filename="814as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::loopinv" title='ASMState::loopinv' data-use='r' data-ref="ASMState::loopinv" data-ref-filename="ASMState..loopinv">loopinv</a>) {  <i>/* Inverted loop branch? */</i></td></tr>
<tr><th id="2819">2819</th><td>      <i>/* asm_guardcc already inverted the jcc and patched the jmp. */</i></td></tr>
<tr><th id="2820">2820</th><td>      <a class="local col5 ref" href="#815p" title='p' data-ref="815p" data-ref-filename="815p">p</a> -= <var>5</var>;</td></tr>
<tr><th id="2821">2821</th><td>      <a class="local col7 ref" href="#817newloop" title='newloop' data-ref="817newloop" data-ref-filename="817newloop">newloop</a> = <a class="local col6 ref" href="#816target" title='target' data-ref="816target" data-ref-filename="816target">target</a>+<var>4</var>;</td></tr>
<tr><th id="2822">2822</th><td>      *(<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> *)(<a class="local col5 ref" href="#815p" title='p' data-ref="815p" data-ref-filename="815p">p</a>-<var>4</var>) = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)(<a class="local col6 ref" href="#816target" title='target' data-ref="816target" data-ref-filename="816target">target</a> - <a class="local col5 ref" href="#815p" title='p' data-ref="815p" data-ref-filename="815p">p</a>);  <i>/* Patch jcc. */</i></td></tr>
<tr><th id="2823">2823</th><td>      <b>if</b> (<a class="local col4 ref" href="#814as" title='as' data-ref="814as" data-ref-filename="814as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::loopinv" title='ASMState::loopinv' data-use='r' data-ref="ASMState::loopinv" data-ref-filename="ASMState..loopinv">loopinv</a> == <var>2</var>) {</td></tr>
<tr><th id="2824">2824</th><td>	*(<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> *)(<a class="local col5 ref" href="#815p" title='p' data-ref="815p" data-ref-filename="815p">p</a>-<var>10</var>) = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)(<a class="local col6 ref" href="#816target" title='target' data-ref="816target" data-ref-filename="816target">target</a> - <a class="local col5 ref" href="#815p" title='p' data-ref="815p" data-ref-filename="815p">p</a> + <var>6</var>);  <i>/* Patch opt. jp. */</i></td></tr>
<tr><th id="2825">2825</th><td>	<a class="local col7 ref" href="#817newloop" title='newloop' data-ref="817newloop" data-ref-filename="817newloop">newloop</a> = <a class="local col6 ref" href="#816target" title='target' data-ref="816target" data-ref-filename="816target">target</a>+<var>8</var>;</td></tr>
<tr><th id="2826">2826</th><td>      }</td></tr>
<tr><th id="2827">2827</th><td>    } <b>else</b> {  <i>/* Otherwise just patch jmp. */</i></td></tr>
<tr><th id="2828">2828</th><td>      *(<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> *)(<a class="local col5 ref" href="#815p" title='p' data-ref="815p" data-ref-filename="815p">p</a>-<var>4</var>) = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a>)(<a class="local col6 ref" href="#816target" title='target' data-ref="816target" data-ref-filename="816target">target</a> - <a class="local col5 ref" href="#815p" title='p' data-ref="815p" data-ref-filename="815p">p</a>);</td></tr>
<tr><th id="2829">2829</th><td>      <a class="local col7 ref" href="#817newloop" title='newloop' data-ref="817newloop" data-ref-filename="817newloop">newloop</a> = <a class="local col6 ref" href="#816target" title='target' data-ref="816target" data-ref-filename="816target">target</a>+<var>3</var>;</td></tr>
<tr><th id="2830">2830</th><td>    }</td></tr>
<tr><th id="2831">2831</th><td>    <i>/* Realign small loops and shorten the loop branch. */</i></td></tr>
<tr><th id="2832">2832</th><td>    <b>if</b> (<a class="local col7 ref" href="#817newloop" title='newloop' data-ref="817newloop" data-ref-filename="817newloop">newloop</a> &gt;= <a class="local col5 ref" href="#815p" title='p' data-ref="815p" data-ref-filename="815p">p</a> - <var>128</var>) {</td></tr>
<tr><th id="2833">2833</th><td>      <a class="local col4 ref" href="#814as" title='as' data-ref="814as" data-ref-filename="814as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::realign" title='ASMState::realign' data-use='w' data-ref="ASMState::realign" data-ref-filename="ASMState..realign">realign</a> = <a class="local col7 ref" href="#817newloop" title='newloop' data-ref="817newloop" data-ref-filename="817newloop">newloop</a>;  <i>/* Force a retry and remember alignment. */</i></td></tr>
<tr><th id="2834">2834</th><td>      <a class="local col4 ref" href="#814as" title='as' data-ref="814as" data-ref-filename="814as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::curins" title='ASMState::curins' data-use='w' data-ref="ASMState::curins" data-ref-filename="ASMState..curins">curins</a> = <a class="local col4 ref" href="#814as" title='as' data-ref="814as" data-ref-filename="814as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::stopins" title='ASMState::stopins' data-use='r' data-ref="ASMState::stopins" data-ref-filename="ASMState..stopins">stopins</a>;  <i>/* Abort asm_trace now. */</i></td></tr>
<tr><th id="2835">2835</th><td>      <a class="local col4 ref" href="#814as" title='as' data-ref="814as" data-ref-filename="814as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::T" title='ASMState::T' data-use='r' data-ref="ASMState::T" data-ref-filename="ASMState..T">T</a>-&gt;<a class="ref field" href="lj_jit.h.html#GCtrace::nins" title='GCtrace::nins' data-ref="GCtrace::nins" data-ref-filename="GCtrace..nins">nins</a> = <a class="local col4 ref" href="#814as" title='as' data-ref="814as" data-ref-filename="814as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::orignins" title='ASMState::orignins' data-use='r' data-ref="ASMState::orignins" data-ref-filename="ASMState..orignins">orignins</a>;  <i>/* Remove any added renames. */</i></td></tr>
<tr><th id="2836">2836</th><td>    }</td></tr>
<tr><th id="2837">2837</th><td>  }</td></tr>
<tr><th id="2838">2838</th><td>}</td></tr>
<tr><th id="2839">2839</th><td></td></tr>
<tr><th id="2840">2840</th><td><i>/* -- Head of trace ------------------------------------------------------- */</i></td></tr>
<tr><th id="2841">2841</th><td></td></tr>
<tr><th id="2842">2842</th><td><i>/* Coalesce BASE register for a root trace. */</i></td></tr>
<tr><th id="2843">2843</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_head_root_base" title='asm_head_root_base' data-ref="asm_head_root_base" data-ref-filename="asm_head_root_base">asm_head_root_base</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col8 decl" id="818as" title='as' data-type='ASMState *' data-ref="818as" data-ref-filename="818as">as</dfn>)</td></tr>
<tr><th id="2844">2844</th><td>{</td></tr>
<tr><th id="2845">2845</th><td>  <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col9 decl" id="819ir" title='ir' data-type='IRIns *' data-ref="819ir" data-ref-filename="819ir">ir</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(REF_BASE)])" data-ref="_M/IR">IR</a>(<a class="enum" href="lj_ir.h.html#REF_BASE" title='REF_BASE' data-ref="REF_BASE" data-ref-filename="REF_BASE">REF_BASE</a>);</td></tr>
<tr><th id="2846">2846</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col0 decl" id="820r" title='r' data-type='Reg' data-ref="820r" data-ref-filename="820r">r</dfn> = <a class="local col9 ref" href="#819ir" title='ir' data-ref="819ir" data-ref-filename="819ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>;</td></tr>
<tr><th id="2847">2847</th><td>  <b>if</b> (<a class="macro" href="lj_target.h.html#28" title="(!((r) &amp; 0x80))" data-ref="_M/ra_hasreg">ra_hasreg</a>(<a class="local col0 ref" href="#820r" title='r' data-ref="820r" data-ref-filename="820r">r</a>)) {</td></tr>
<tr><th id="2848">2848</th><td>    <a class="macro" href="lj_asm.c.html#304" title="(as-&gt;freeset |= (((RegSet)1) &lt;&lt; ((r))))" data-ref="_M/ra_free">ra_free</a>(<a class="local col8 ref" href="#818as" title='as' data-ref="818as" data-ref-filename="818as">as</a>, <a class="local col0 ref" href="#820r" title='r' data-ref="820r" data-ref-filename="820r">r</a>);</td></tr>
<tr><th id="2849">2849</th><td>    <b>if</b> (<a class="macro" href="lj_target.h.html#68" title="((int)((as-&gt;modset) &gt;&gt; (r)) &amp; 1)" data-ref="_M/rset_test">rset_test</a>(<a class="local col8 ref" href="#818as" title='as' data-ref="818as" data-ref-filename="818as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::modset" title='ASMState::modset' data-use='r' data-ref="ASMState::modset" data-ref-filename="ASMState..modset">modset</a>, <a class="local col0 ref" href="#820r" title='r' data-ref="820r" data-ref-filename="820r">r</a>) || <a class="macro" href="lj_ir.h.html#430" title="((ir-&gt;t).irt &amp; IRT_MARK)" data-ref="_M/irt_ismarked">irt_ismarked</a>(<a class="local col9 ref" href="#819ir" title='ir' data-ref="819ir" data-ref-filename="819ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>))</td></tr>
<tr><th id="2850">2850</th><td>      <a class="local col9 ref" href="#819ir" title='ir' data-ref="819ir" data-ref-filename="819ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a> = <a class="macro" href="lj_target.h.html#23" title="(0x80|0x7f)" data-ref="_M/RID_INIT">RID_INIT</a>;  <i>/* No inheritance for modified BASE register. */</i></td></tr>
<tr><th id="2851">2851</th><td>    <b>if</b> (<a class="local col0 ref" href="#820r" title='r' data-ref="820r" data-ref-filename="820r">r</a> != <a class="enum" href="lj_target_x86.h.html#RID_BASE" title='RID_BASE' data-ref="RID_BASE" data-ref-filename="RID_BASE">RID_BASE</a>)</td></tr>
<tr><th id="2852">2852</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col8 ref" href="#818as" title='as' data-ref="818as" data-ref-filename="818as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col0 ref" href="#820r" title='r' data-ref="820r" data-ref-filename="820r">r</a>|<a class="macro" href="lj_emit_x86.h.html#24" title="(0x200|0x080000)" data-ref="_M/REX_GC64">REX_GC64</a>, <a class="enum" href="lj_target_x86.h.html#RID_BASE" title='RID_BASE' data-ref="RID_BASE" data-ref-filename="RID_BASE">RID_BASE</a>);</td></tr>
<tr><th id="2853">2853</th><td>  }</td></tr>
<tr><th id="2854">2854</th><td>}</td></tr>
<tr><th id="2855">2855</th><td></td></tr>
<tr><th id="2856">2856</th><td><i>/* Coalesce or reload BASE register for a side trace. */</i></td></tr>
<tr><th id="2857">2857</th><td><em>static</em> <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="decl def fn" id="asm_head_side_base" title='asm_head_side_base' data-ref="asm_head_side_base" data-ref-filename="asm_head_side_base">asm_head_side_base</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col1 decl" id="821as" title='as' data-type='ASMState *' data-ref="821as" data-ref-filename="821as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col2 decl" id="822irp" title='irp' data-type='IRIns *' data-ref="822irp" data-ref-filename="822irp">irp</dfn>, <a class="typedef" href="lj_target.h.html#RegSet" title='RegSet' data-type='uint32_t' data-ref="RegSet" data-ref-filename="RegSet">RegSet</a> <dfn class="local col3 decl" id="823allow" title='allow' data-type='RegSet' data-ref="823allow" data-ref-filename="823allow">allow</dfn>)</td></tr>
<tr><th id="2858">2858</th><td>{</td></tr>
<tr><th id="2859">2859</th><td>  <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col4 decl" id="824ir" title='ir' data-type='IRIns *' data-ref="824ir" data-ref-filename="824ir">ir</dfn> = <a class="macro" href="lj_asm.c.html#109" title="(&amp;as-&gt;ir[(REF_BASE)])" data-ref="_M/IR">IR</a>(<a class="enum" href="lj_ir.h.html#REF_BASE" title='REF_BASE' data-ref="REF_BASE" data-ref-filename="REF_BASE">REF_BASE</a>);</td></tr>
<tr><th id="2860">2860</th><td>  <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="local col5 decl" id="825r" title='r' data-type='Reg' data-ref="825r" data-ref-filename="825r">r</dfn> = <a class="local col4 ref" href="#824ir" title='ir' data-ref="824ir" data-ref-filename="824ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>;</td></tr>
<tr><th id="2861">2861</th><td>  <b>if</b> (<a class="macro" href="lj_target.h.html#28" title="(!((r) &amp; 0x80))" data-ref="_M/ra_hasreg">ra_hasreg</a>(<a class="local col5 ref" href="#825r" title='r' data-ref="825r" data-ref-filename="825r">r</a>)) {</td></tr>
<tr><th id="2862">2862</th><td>    <a class="macro" href="lj_asm.c.html#304" title="(as-&gt;freeset |= (((RegSet)1) &lt;&lt; ((r))))" data-ref="_M/ra_free">ra_free</a>(<a class="local col1 ref" href="#821as" title='as' data-ref="821as" data-ref-filename="821as">as</a>, <a class="local col5 ref" href="#825r" title='r' data-ref="825r" data-ref-filename="825r">r</a>);</td></tr>
<tr><th id="2863">2863</th><td>    <b>if</b> (<a class="macro" href="lj_target.h.html#68" title="((int)((as-&gt;modset) &gt;&gt; (r)) &amp; 1)" data-ref="_M/rset_test">rset_test</a>(<a class="local col1 ref" href="#821as" title='as' data-ref="821as" data-ref-filename="821as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::modset" title='ASMState::modset' data-use='r' data-ref="ASMState::modset" data-ref-filename="ASMState..modset">modset</a>, <a class="local col5 ref" href="#825r" title='r' data-ref="825r" data-ref-filename="825r">r</a>) || <a class="macro" href="lj_ir.h.html#430" title="((ir-&gt;t).irt &amp; IRT_MARK)" data-ref="_M/irt_ismarked">irt_ismarked</a>(<a class="local col4 ref" href="#824ir" title='ir' data-ref="824ir" data-ref-filename="824ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>))</td></tr>
<tr><th id="2864">2864</th><td>      <a class="local col4 ref" href="#824ir" title='ir' data-ref="824ir" data-ref-filename="824ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a> = <a class="macro" href="lj_target.h.html#23" title="(0x80|0x7f)" data-ref="_M/RID_INIT">RID_INIT</a>;  <i>/* No inheritance for modified BASE register. */</i></td></tr>
<tr><th id="2865">2865</th><td>    <b>if</b> (<a class="local col2 ref" href="#822irp" title='irp' data-ref="822irp" data-ref-filename="822irp">irp</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a> == <a class="local col5 ref" href="#825r" title='r' data-ref="825r" data-ref-filename="825r">r</a>) {</td></tr>
<tr><th id="2866">2866</th><td>      <a class="macro" href="lj_target.h.html#70" title="(allow &amp;= ~(((RegSet)1) &lt;&lt; (r)))" data-ref="_M/rset_clear">rset_clear</a>(<a class="local col3 ref" href="#823allow" title='allow' data-ref="823allow" data-ref-filename="823allow">allow</a>, <a class="local col5 ref" href="#825r" title='r' data-ref="825r" data-ref-filename="825r">r</a>);  <i>/* Mark same BASE register as coalesced. */</i></td></tr>
<tr><th id="2867">2867</th><td>    } <b>else</b> <b>if</b> (<a class="macro" href="lj_target.h.html#28" title="(!((irp-&gt;r) &amp; 0x80))" data-ref="_M/ra_hasreg">ra_hasreg</a>(<a class="local col2 ref" href="#822irp" title='irp' data-ref="822irp" data-ref-filename="822irp">irp</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>) &amp;&amp; <a class="macro" href="lj_target.h.html#68" title="((int)((as-&gt;freeset) &gt;&gt; (irp-&gt;r)) &amp; 1)" data-ref="_M/rset_test">rset_test</a>(<a class="local col1 ref" href="#821as" title='as' data-ref="821as" data-ref-filename="821as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::freeset" title='ASMState::freeset' data-use='r' data-ref="ASMState::freeset" data-ref-filename="ASMState..freeset">freeset</a>, <a class="local col2 ref" href="#822irp" title='irp' data-ref="822irp" data-ref-filename="822irp">irp</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>)) {</td></tr>
<tr><th id="2868">2868</th><td>      <i>/* Move from coalesced parent reg. */</i></td></tr>
<tr><th id="2869">2869</th><td>      <a class="macro" href="lj_target.h.html#70" title="(allow &amp;= ~(((RegSet)1) &lt;&lt; (irp-&gt;r)))" data-ref="_M/rset_clear">rset_clear</a>(<a class="local col3 ref" href="#823allow" title='allow' data-ref="823allow" data-ref-filename="823allow">allow</a>, <a class="local col2 ref" href="#822irp" title='irp' data-ref="822irp" data-ref-filename="822irp">irp</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>);</td></tr>
<tr><th id="2870">2870</th><td>      <a class="ref fn" href="lj_emit_x86.h.html#emit_rr" title='emit_rr' data-ref="emit_rr" data-ref-filename="emit_rr">emit_rr</a>(<a class="local col1 ref" href="#821as" title='as' data-ref="821as" data-ref-filename="821as">as</a>, <a class="enum" href="lj_target_x86.h.html#XO_MOV" title='XO_MOV' data-ref="XO_MOV" data-ref-filename="XO_MOV">XO_MOV</a>, <a class="local col5 ref" href="#825r" title='r' data-ref="825r" data-ref-filename="825r">r</a>|<a class="macro" href="lj_emit_x86.h.html#24" title="(0x200|0x080000)" data-ref="_M/REX_GC64">REX_GC64</a>, <a class="local col2 ref" href="#822irp" title='irp' data-ref="822irp" data-ref-filename="822irp">irp</a>-&gt;<a class="ref field" href="lj_ir.h.html#555" title='IRIns::(anonymous struct)::r' data-ref="IRIns::(anonymous)::r" data-ref-filename="IRIns..(anonymous)..r">r</a>);</td></tr>
<tr><th id="2871">2871</th><td>    } <b>else</b> {</td></tr>
<tr><th id="2872">2872</th><td>      <a class="macro" href="lj_emit_x86.h.html#268" title="emit_rma(as, (XO_MOV), ((r)|(0x200|0x080000)), (void *)&amp;(&amp;((GG_State *)((char *)(as-&gt;J) - ((int)__builtin_offsetof(GG_State, J))))-&gt;g)-&gt;jit_base)" data-ref="_M/emit_getgl">emit_getgl</a>(<a class="local col1 ref" href="#821as" title='as' data-ref="821as" data-ref-filename="821as">as</a>, <a class="local col5 ref" href="#825r" title='r' data-ref="825r" data-ref-filename="825r">r</a>, <a class="ref field" href="lj_obj.h.html#global_State::jit_base" title='global_State::jit_base' data-ref="global_State::jit_base" data-ref-filename="global_State..jit_base">jit_base</a>);  <i>/* Otherwise reload BASE. */</i></td></tr>
<tr><th id="2873">2873</th><td>    }</td></tr>
<tr><th id="2874">2874</th><td>  }</td></tr>
<tr><th id="2875">2875</th><td>  <b>return</b> <a class="local col3 ref" href="#823allow" title='allow' data-ref="823allow" data-ref-filename="823allow">allow</a>;</td></tr>
<tr><th id="2876">2876</th><td>}</td></tr>
<tr><th id="2877">2877</th><td></td></tr>
<tr><th id="2878">2878</th><td><i>/* -- Tail of trace ------------------------------------------------------- */</i></td></tr>
<tr><th id="2879">2879</th><td></td></tr>
<tr><th id="2880">2880</th><td><i>/* Fixup the tail code. */</i></td></tr>
<tr><th id="2881">2881</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_tail_fixup" title='asm_tail_fixup' data-ref="asm_tail_fixup" data-ref-filename="asm_tail_fixup">asm_tail_fixup</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col6 decl" id="826as" title='as' data-type='ASMState *' data-ref="826as" data-ref-filename="826as">as</dfn>, <a class="typedef" href="lj_jit.h.html#TraceNo" title='TraceNo' data-type='uint32_t' data-ref="TraceNo" data-ref-filename="TraceNo">TraceNo</a> <dfn class="local col7 decl" id="827lnk" title='lnk' data-type='TraceNo' data-ref="827lnk" data-ref-filename="827lnk">lnk</dfn>)</td></tr>
<tr><th id="2882">2882</th><td>{</td></tr>
<tr><th id="2883">2883</th><td>  <i>/* Note: don't use as-&gt;mcp swap + emit_*: emit_op overwrites more bytes. */</i></td></tr>
<tr><th id="2884">2884</th><td>  <a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *<dfn class="local col8 decl" id="828p" title='p' data-type='MCode *' data-ref="828p" data-ref-filename="828p">p</dfn> = <a class="local col6 ref" href="#826as" title='as' data-ref="826as" data-ref-filename="826as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mctop" title='ASMState::mctop' data-use='r' data-ref="ASMState::mctop" data-ref-filename="ASMState..mctop">mctop</a>;</td></tr>
<tr><th id="2885">2885</th><td>  <a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *<dfn class="local col9 decl" id="829target" title='target' data-type='MCode *' data-ref="829target" data-ref-filename="829target">target</dfn>, *<dfn class="local col0 decl" id="830q" title='q' data-type='MCode *' data-ref="830q" data-ref-filename="830q">q</dfn>;</td></tr>
<tr><th id="2886">2886</th><td>  <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> <dfn class="local col1 decl" id="831spadj" title='spadj' data-type='int32_t' data-ref="831spadj" data-ref-filename="831spadj">spadj</dfn> = <a class="local col6 ref" href="#826as" title='as' data-ref="826as" data-ref-filename="826as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::T" title='ASMState::T' data-use='r' data-ref="ASMState::T" data-ref-filename="ASMState..T">T</a>-&gt;<a class="ref field" href="lj_jit.h.html#GCtrace::spadjust" title='GCtrace::spadjust' data-ref="GCtrace::spadjust" data-ref-filename="GCtrace..spadjust">spadjust</a>;</td></tr>
<tr><th id="2887">2887</th><td>  <b>if</b> (<a class="local col1 ref" href="#831spadj" title='spadj' data-ref="831spadj" data-ref-filename="831spadj">spadj</a> == <var>0</var>) {</td></tr>
<tr><th id="2888">2888</th><td>    <a class="local col8 ref" href="#828p" title='p' data-ref="828p" data-ref-filename="828p">p</a> -= <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> ? <var>7</var> : <var>6</var>;</td></tr>
<tr><th id="2889">2889</th><td>  } <b>else</b> {</td></tr>
<tr><th id="2890">2890</th><td>    <a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *<dfn class="local col2 decl" id="832p1" title='p1' data-type='MCode *' data-ref="832p1" data-ref-filename="832p1">p1</dfn>;</td></tr>
<tr><th id="2891">2891</th><td>    <i>/* Patch stack adjustment. */</i></td></tr>
<tr><th id="2892">2892</th><td>    <b>if</b> (<a class="macro" href="lj_def.h.html#101" title="((spadj) == (int32_t)(int8_t)(spadj))" data-ref="_M/checki8">checki8</a>(<a class="local col1 ref" href="#831spadj" title='spadj' data-ref="831spadj" data-ref-filename="831spadj">spadj</a>)) {</td></tr>
<tr><th id="2893">2893</th><td>      <a class="local col8 ref" href="#828p" title='p' data-ref="828p" data-ref-filename="828p">p</a> -= <var>3</var>;</td></tr>
<tr><th id="2894">2894</th><td>      <a class="local col2 ref" href="#832p1" title='p1' data-ref="832p1" data-ref-filename="832p1">p1</a> = <a class="local col8 ref" href="#828p" title='p' data-ref="828p" data-ref-filename="828p">p</a>-<var>6</var>;</td></tr>
<tr><th id="2895">2895</th><td>      *<a class="local col2 ref" href="#832p1" title='p1' data-ref="832p1" data-ref-filename="832p1">p1</a> = (<a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a>)<a class="local col1 ref" href="#831spadj" title='spadj' data-ref="831spadj" data-ref-filename="831spadj">spadj</a>;</td></tr>
<tr><th id="2896">2896</th><td>    } <b>else</b> {</td></tr>
<tr><th id="2897">2897</th><td>      <a class="local col2 ref" href="#832p1" title='p1' data-ref="832p1" data-ref-filename="832p1">p1</a> = <a class="local col8 ref" href="#828p" title='p' data-ref="828p" data-ref-filename="828p">p</a>-<var>9</var>;</td></tr>
<tr><th id="2898">2898</th><td>      *(<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> *)<a class="local col2 ref" href="#832p1" title='p1' data-ref="832p1" data-ref-filename="832p1">p1</a> = <a class="local col1 ref" href="#831spadj" title='spadj' data-ref="831spadj" data-ref-filename="831spadj">spadj</a>;</td></tr>
<tr><th id="2899">2899</th><td>    }</td></tr>
<tr><th id="2900">2900</th><td><u>#<span data-ppcond="2900">if</span> <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a></u></td></tr>
<tr><th id="2901">2901</th><td>    <a class="local col2 ref" href="#832p1" title='p1' data-ref="832p1" data-ref-filename="832p1">p1</a>[-<var>3</var>] = <var>0x48</var>;</td></tr>
<tr><th id="2902">2902</th><td><u>#<span data-ppcond="2900">endif</span></u></td></tr>
<tr><th id="2903">2903</th><td>    <a class="local col2 ref" href="#832p1" title='p1' data-ref="832p1" data-ref-filename="832p1">p1</a>[-<var>2</var>] = (<a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a>)(<a class="macro" href="lj_def.h.html#101" title="((spadj) == (int32_t)(int8_t)(spadj))" data-ref="_M/checki8">checki8</a>(<a class="local col1 ref" href="#831spadj" title='spadj' data-ref="831spadj" data-ref-filename="831spadj">spadj</a>) ? <a class="enum" href="lj_target_x86.h.html#XI_ARITHi8" title='XI_ARITHi8' data-ref="XI_ARITHi8" data-ref-filename="XI_ARITHi8">XI_ARITHi8</a> : <a class="enum" href="lj_target_x86.h.html#XI_ARITHi" title='XI_ARITHi' data-ref="XI_ARITHi" data-ref-filename="XI_ARITHi">XI_ARITHi</a>);</td></tr>
<tr><th id="2904">2904</th><td>    <a class="local col2 ref" href="#832p1" title='p1' data-ref="832p1" data-ref-filename="832p1">p1</a>[-<var>1</var>] = <a class="macro" href="lj_emit_x86.h.html#8" title="((MCode)((XM_REG)+(((XOg_ADD)&amp;7)&lt;&lt;3)+((RID_ESP)&amp;7)))" data-ref="_M/MODRM">MODRM</a>(<a class="enum" href="lj_target_x86.h.html#XM_REG" title='XM_REG' data-ref="XM_REG" data-ref-filename="XM_REG">XM_REG</a>, <a class="enum" href="lj_target_x86.h.html#XOg_ADD" title='XOg_ADD' data-ref="XOg_ADD" data-ref-filename="XOg_ADD">XOg_ADD</a>, <a class="enum" href="lj_target_x86.h.html#30" title='RID_ESP' data-ref="RID_ESP" data-ref-filename="RID_ESP">RID_ESP</a>);</td></tr>
<tr><th id="2905">2905</th><td>  }</td></tr>
<tr><th id="2906">2906</th><td>  <i>/* Patch exit branch. */</i></td></tr>
<tr><th id="2907">2907</th><td>  <a class="local col9 ref" href="#829target" title='target' data-ref="829target" data-ref-filename="829target">target</a> = <a class="local col7 ref" href="#827lnk" title='lnk' data-ref="827lnk" data-ref-filename="827lnk">lnk</a> ? <a class="macro" href="lj_jit.h.html#287" title="((GCtrace *)((GCobj *)(as-&gt;J-&gt;trace[(lnk)]).gcptr64))" data-ref="_M/traceref">traceref</a>(<a class="local col6 ref" href="#826as" title='as' data-ref="826as" data-ref-filename="826as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>, <a class="local col7 ref" href="#827lnk" title='lnk' data-ref="827lnk" data-ref-filename="827lnk">lnk</a>)-&gt;<a class="ref field" href="lj_jit.h.html#GCtrace::mcode" title='GCtrace::mcode' data-ref="GCtrace::mcode" data-ref-filename="GCtrace..mcode">mcode</a> : (<a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *)<a class="ref fn" href="lj_vm.h.html#lj_vm_exit_interp" title='lj_vm_exit_interp' data-ref="lj_vm_exit_interp" data-ref-filename="lj_vm_exit_interp">lj_vm_exit_interp</a>;</td></tr>
<tr><th id="2908">2908</th><td>  *(<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> *)(<a class="local col8 ref" href="#828p" title='p' data-ref="828p" data-ref-filename="828p">p</a>-<var>4</var>) = <a class="ref fn" href="lj_emit_x86.h.html#jmprel" title='jmprel' data-ref="jmprel" data-ref-filename="jmprel">jmprel</a>(<a class="local col6 ref" href="#826as" title='as' data-ref="826as" data-ref-filename="826as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::J" title='ASMState::J' data-use='r' data-ref="ASMState::J" data-ref-filename="ASMState..J">J</a>, <a class="local col8 ref" href="#828p" title='p' data-ref="828p" data-ref-filename="828p">p</a>, <a class="local col9 ref" href="#829target" title='target' data-ref="829target" data-ref-filename="829target">target</a>);</td></tr>
<tr><th id="2909">2909</th><td>  <a class="local col8 ref" href="#828p" title='p' data-ref="828p" data-ref-filename="828p">p</a>[-<var>5</var>] = <a class="enum" href="lj_target_x86.h.html#XI_JMP" title='XI_JMP' data-ref="XI_JMP" data-ref-filename="XI_JMP">XI_JMP</a>;</td></tr>
<tr><th id="2910">2910</th><td>  <i>/* Drop unused mcode tail. Fill with NOPs to make the prefetcher happy. */</i></td></tr>
<tr><th id="2911">2911</th><td>  <b>for</b> (<a class="local col0 ref" href="#830q" title='q' data-ref="830q" data-ref-filename="830q">q</a> = <a class="local col6 ref" href="#826as" title='as' data-ref="826as" data-ref-filename="826as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mctop" title='ASMState::mctop' data-use='r' data-ref="ASMState::mctop" data-ref-filename="ASMState..mctop">mctop</a>-<var>1</var>; <a class="local col0 ref" href="#830q" title='q' data-ref="830q" data-ref-filename="830q">q</a> &gt;= <a class="local col8 ref" href="#828p" title='p' data-ref="828p" data-ref-filename="828p">p</a>; <a class="local col0 ref" href="#830q" title='q' data-ref="830q" data-ref-filename="830q">q</a>--)</td></tr>
<tr><th id="2912">2912</th><td>    *<a class="local col0 ref" href="#830q" title='q' data-ref="830q" data-ref-filename="830q">q</a> = <a class="enum" href="lj_target_x86.h.html#XI_NOP" title='XI_NOP' data-ref="XI_NOP" data-ref-filename="XI_NOP">XI_NOP</a>;</td></tr>
<tr><th id="2913">2913</th><td>  <a class="local col6 ref" href="#826as" title='as' data-ref="826as" data-ref-filename="826as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mctop" title='ASMState::mctop' data-use='w' data-ref="ASMState::mctop" data-ref-filename="ASMState..mctop">mctop</a> = <a class="local col8 ref" href="#828p" title='p' data-ref="828p" data-ref-filename="828p">p</a>;</td></tr>
<tr><th id="2914">2914</th><td>}</td></tr>
<tr><th id="2915">2915</th><td></td></tr>
<tr><th id="2916">2916</th><td><i>/* Prepare tail of code. */</i></td></tr>
<tr><th id="2917">2917</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_tail_prep" title='asm_tail_prep' data-ref="asm_tail_prep" data-ref-filename="asm_tail_prep">asm_tail_prep</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col3 decl" id="833as" title='as' data-type='ASMState *' data-ref="833as" data-ref-filename="833as">as</dfn>)</td></tr>
<tr><th id="2918">2918</th><td>{</td></tr>
<tr><th id="2919">2919</th><td>  <a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *<dfn class="local col4 decl" id="834p" title='p' data-type='MCode *' data-ref="834p" data-ref-filename="834p">p</dfn> = <a class="local col3 ref" href="#833as" title='as' data-ref="833as" data-ref-filename="833as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mctop" title='ASMState::mctop' data-use='r' data-ref="ASMState::mctop" data-ref-filename="ASMState..mctop">mctop</a>;</td></tr>
<tr><th id="2920">2920</th><td>  <i>/* Realign and leave room for backwards loop branch or exit branch. */</i></td></tr>
<tr><th id="2921">2921</th><td>  <b>if</b> (<a class="local col3 ref" href="#833as" title='as' data-ref="833as" data-ref-filename="833as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::realign" title='ASMState::realign' data-use='r' data-ref="ASMState::realign" data-ref-filename="ASMState..realign">realign</a>) {</td></tr>
<tr><th id="2922">2922</th><td>    <em>int</em> <dfn class="local col5 decl" id="835i" title='i' data-type='int' data-ref="835i" data-ref-filename="835i">i</dfn> = ((<em>int</em>)(<a class="typedef" href="../include/stdint.h.html#intptr_t" title='intptr_t' data-type='long' data-ref="intptr_t" data-ref-filename="intptr_t">intptr_t</a>)<a class="local col3 ref" href="#833as" title='as' data-ref="833as" data-ref-filename="833as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::realign" title='ASMState::realign' data-use='r' data-ref="ASMState::realign" data-ref-filename="ASMState..realign">realign</a>) &amp; <var>15</var>;</td></tr>
<tr><th id="2923">2923</th><td>    <i>/* Fill unused mcode tail with NOPs to make the prefetcher happy. */</i></td></tr>
<tr><th id="2924">2924</th><td>    <b>while</b> (<a class="local col5 ref" href="#835i" title='i' data-ref="835i" data-ref-filename="835i">i</a>-- &gt; <var>0</var>)</td></tr>
<tr><th id="2925">2925</th><td>      *--<a class="local col4 ref" href="#834p" title='p' data-ref="834p" data-ref-filename="834p">p</a> = <a class="enum" href="lj_target_x86.h.html#XI_NOP" title='XI_NOP' data-ref="XI_NOP" data-ref-filename="XI_NOP">XI_NOP</a>;</td></tr>
<tr><th id="2926">2926</th><td>    <a class="local col3 ref" href="#833as" title='as' data-ref="833as" data-ref-filename="833as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mctop" title='ASMState::mctop' data-use='w' data-ref="ASMState::mctop" data-ref-filename="ASMState..mctop">mctop</a> = <a class="local col4 ref" href="#834p" title='p' data-ref="834p" data-ref-filename="834p">p</a>;</td></tr>
<tr><th id="2927">2927</th><td>    <a class="local col4 ref" href="#834p" title='p' data-ref="834p" data-ref-filename="834p">p</a> -= (<a class="local col3 ref" href="#833as" title='as' data-ref="833as" data-ref-filename="833as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::loopinv" title='ASMState::loopinv' data-use='r' data-ref="ASMState::loopinv" data-ref-filename="ASMState..loopinv">loopinv</a> ? <var>5</var> : <var>2</var>);  <i>/* Space for short/near jmp. */</i></td></tr>
<tr><th id="2928">2928</th><td>  } <b>else</b> {</td></tr>
<tr><th id="2929">2929</th><td>    <a class="local col4 ref" href="#834p" title='p' data-ref="834p" data-ref-filename="834p">p</a> -= <var>5</var>;  <i>/* Space for exit branch (near jmp). */</i></td></tr>
<tr><th id="2930">2930</th><td>  }</td></tr>
<tr><th id="2931">2931</th><td>  <b>if</b> (<a class="local col3 ref" href="#833as" title='as' data-ref="833as" data-ref-filename="833as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::loopref" title='ASMState::loopref' data-use='r' data-ref="ASMState::loopref" data-ref-filename="ASMState..loopref">loopref</a>) {</td></tr>
<tr><th id="2932">2932</th><td>    <a class="local col3 ref" href="#833as" title='as' data-ref="833as" data-ref-filename="833as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::invmcp" title='ASMState::invmcp' data-use='w' data-ref="ASMState::invmcp" data-ref-filename="ASMState..invmcp">invmcp</a> = <a class="local col3 ref" href="#833as" title='as' data-ref="833as" data-ref-filename="833as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcp" title='ASMState::mcp' data-use='w' data-ref="ASMState::mcp" data-ref-filename="ASMState..mcp">mcp</a> = <a class="local col4 ref" href="#834p" title='p' data-ref="834p" data-ref-filename="834p">p</a>;</td></tr>
<tr><th id="2933">2933</th><td>  } <b>else</b> {</td></tr>
<tr><th id="2934">2934</th><td>    <i>/* Leave room for ESP adjustment: add esp, imm or lea esp, [esp+imm] */</i></td></tr>
<tr><th id="2935">2935</th><td>    <a class="local col3 ref" href="#833as" title='as' data-ref="833as" data-ref-filename="833as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mcp" title='ASMState::mcp' data-use='w' data-ref="ASMState::mcp" data-ref-filename="ASMState..mcp">mcp</a> = <a class="local col4 ref" href="#834p" title='p' data-ref="834p" data-ref-filename="834p">p</a> - (<a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> ? <var>7</var> : <var>6</var>);</td></tr>
<tr><th id="2936">2936</th><td>    <a class="local col3 ref" href="#833as" title='as' data-ref="833as" data-ref-filename="833as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::invmcp" title='ASMState::invmcp' data-use='w' data-ref="ASMState::invmcp" data-ref-filename="ASMState..invmcp">invmcp</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="2937">2937</th><td>  }</td></tr>
<tr><th id="2938">2938</th><td>}</td></tr>
<tr><th id="2939">2939</th><td></td></tr>
<tr><th id="2940">2940</th><td><i>/* -- Trace setup --------------------------------------------------------- */</i></td></tr>
<tr><th id="2941">2941</th><td></td></tr>
<tr><th id="2942">2942</th><td><i>/* Ensure there are enough stack slots for call arguments. */</i></td></tr>
<tr><th id="2943">2943</th><td><em>static</em> <a class="typedef" href="lj_target.h.html#Reg" title='Reg' data-type='uint32_t' data-ref="Reg" data-ref-filename="Reg">Reg</a> <dfn class="decl def fn" id="asm_setup_call_slots" title='asm_setup_call_slots' data-ref="asm_setup_call_slots" data-ref-filename="asm_setup_call_slots">asm_setup_call_slots</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col6 decl" id="836as" title='as' data-type='ASMState *' data-ref="836as" data-ref-filename="836as">as</dfn>, <a class="typedef" href="lj_ir.h.html#IRIns" title='IRIns' data-type='union IRIns' data-ref="IRIns" data-ref-filename="IRIns">IRIns</a> *<dfn class="local col7 decl" id="837ir" title='ir' data-type='IRIns *' data-ref="837ir" data-ref-filename="837ir">ir</dfn>, <em>const</em> <a class="typedef" href="lj_ircall.h.html#CCallInfo" title='CCallInfo' data-type='struct CCallInfo' data-ref="CCallInfo" data-ref-filename="CCallInfo">CCallInfo</a> *<dfn class="local col8 decl" id="838ci" title='ci' data-type='const CCallInfo *' data-ref="838ci" data-ref-filename="838ci">ci</dfn>)</td></tr>
<tr><th id="2944">2944</th><td>{</td></tr>
<tr><th id="2945">2945</th><td>  <a class="typedef" href="lj_ir.h.html#IRRef" title='IRRef' data-type='uint32_t' data-ref="IRRef" data-ref-filename="IRRef">IRRef</a> <dfn class="local col9 decl" id="839args" title='args' data-type='IRRef [64]' data-ref="839args" data-ref-filename="839args">args</dfn>[<a class="macro" href="lj_ircall.h.html#20" title="32" data-ref="_M/CCI_NARGS_MAX">CCI_NARGS_MAX</a>*<var>2</var>];</td></tr>
<tr><th id="2946">2946</th><td>  <em>int</em> <dfn class="local col0 decl" id="840nslots" title='nslots' data-type='int' data-ref="840nslots" data-ref-filename="840nslots">nslots</dfn>;</td></tr>
<tr><th id="2947">2947</th><td>  <a class="tu ref fn" href="lj_asm.c.html#asm_collectargs" title='asm_collectargs' data-use='c' data-ref="asm_collectargs" data-ref-filename="asm_collectargs">asm_collectargs</a>(<a class="local col6 ref" href="#836as" title='as' data-ref="836as" data-ref-filename="836as">as</a>, <a class="local col7 ref" href="#837ir" title='ir' data-ref="837ir" data-ref-filename="837ir">ir</a>, <a class="local col8 ref" href="#838ci" title='ci' data-ref="838ci" data-ref-filename="838ci">ci</a>, <a class="local col9 ref" href="#839args" title='args' data-ref="839args" data-ref-filename="839args">args</a>);</td></tr>
<tr><th id="2948">2948</th><td>  <a class="local col0 ref" href="#840nslots" title='nslots' data-ref="840nslots" data-ref-filename="840nslots">nslots</a> = <a class="ref fn" href="#asm_count_call_slots" title='asm_count_call_slots' data-ref="asm_count_call_slots" data-ref-filename="asm_count_call_slots">asm_count_call_slots</a>(<a class="local col6 ref" href="#836as" title='as' data-ref="836as" data-ref-filename="836as">as</a>, <a class="local col8 ref" href="#838ci" title='ci' data-ref="838ci" data-ref-filename="838ci">ci</a>, <a class="local col9 ref" href="#839args" title='args' data-ref="839args" data-ref-filename="839args">args</a>);</td></tr>
<tr><th id="2949">2949</th><td>  <b>if</b> (<a class="local col0 ref" href="#840nslots" title='nslots' data-ref="840nslots" data-ref-filename="840nslots">nslots</a> &gt; <a class="local col6 ref" href="#836as" title='as' data-ref="836as" data-ref-filename="836as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::evenspill" title='ASMState::evenspill' data-use='r' data-ref="ASMState::evenspill" data-ref-filename="ASMState..evenspill">evenspill</a>)  <i>/* Leave room for args in stack slots. */</i></td></tr>
<tr><th id="2950">2950</th><td>    <a class="local col6 ref" href="#836as" title='as' data-ref="836as" data-ref-filename="836as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::evenspill" title='ASMState::evenspill' data-use='w' data-ref="ASMState::evenspill" data-ref-filename="ASMState..evenspill">evenspill</a> = <a class="local col0 ref" href="#840nslots" title='nslots' data-ref="840nslots" data-ref-filename="840nslots">nslots</a>;</td></tr>
<tr><th id="2951">2951</th><td><u>#<span data-ppcond="2951">if</span> <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a></u></td></tr>
<tr><th id="2952">2952</th><td>  <b>return</b> <a class="macro" href="lj_ir.h.html#373" title="((((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_NUM) || (((IRType)((ir-&gt;t).irt &amp; IRT_TYPE)) == IRT_FLOAT))" data-ref="_M/irt_isfp">irt_isfp</a>(<a class="local col7 ref" href="#837ir" title='ir' data-ref="837ir" data-ref-filename="837ir">ir</a>-&gt;<a class="ref field" href="lj_ir.h.html#551" title='IRIns::(anonymous struct)::t' data-ref="IRIns::(anonymous)::t" data-ref-filename="IRIns..(anonymous)..t">t</a>) ? <a class="macro" href="lj_target.h.html#45" title="((RID_FPRET)|0x80)" data-ref="_M/REGSP_HINT">REGSP_HINT</a>(<a class="enum" href="lj_target_x86.h.html#RID_FPRET" title='RID_FPRET' data-ref="RID_FPRET" data-ref-filename="RID_FPRET">RID_FPRET</a>) : <a class="macro" href="lj_target.h.html#45" title="((RID_RET)|0x80)" data-ref="_M/REGSP_HINT">REGSP_HINT</a>(<a class="enum" href="lj_target_x86.h.html#RID_RET" title='RID_RET' data-ref="RID_RET" data-ref-filename="RID_RET">RID_RET</a>);</td></tr>
<tr><th id="2953">2953</th><td><u>#<span data-ppcond="2951">else</span></u></td></tr>
<tr><th id="2954">2954</th><td>  <b>return</b> irt_isfp(ir-&gt;t) ? REGSP_INIT : REGSP_HINT(RID_RET);</td></tr>
<tr><th id="2955">2955</th><td><u>#<span data-ppcond="2951">endif</span></u></td></tr>
<tr><th id="2956">2956</th><td>}</td></tr>
<tr><th id="2957">2957</th><td></td></tr>
<tr><th id="2958">2958</th><td><i>/* Target-specific setup. */</i></td></tr>
<tr><th id="2959">2959</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="asm_setup_target" title='asm_setup_target' data-ref="asm_setup_target" data-ref-filename="asm_setup_target">asm_setup_target</dfn>(<a class="typedef" href="lj_asm.c.html#ASMState" title='ASMState' data-type='struct ASMState' data-ref="ASMState" data-ref-filename="ASMState">ASMState</a> *<dfn class="local col1 decl" id="841as" title='as' data-type='ASMState *' data-ref="841as" data-ref-filename="841as">as</dfn>)</td></tr>
<tr><th id="2960">2960</th><td>{</td></tr>
<tr><th id="2961">2961</th><td>  <a class="ref fn" href="#asm_exitstub_setup" title='asm_exitstub_setup' data-ref="asm_exitstub_setup" data-ref-filename="asm_exitstub_setup">asm_exitstub_setup</a>(<a class="local col1 ref" href="#841as" title='as' data-ref="841as" data-ref-filename="841as">as</a>, <a class="local col1 ref" href="#841as" title='as' data-ref="841as" data-ref-filename="841as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::T" title='ASMState::T' data-use='r' data-ref="ASMState::T" data-ref-filename="ASMState..T">T</a>-&gt;<a class="ref field" href="lj_jit.h.html#GCtrace::nsnap" title='GCtrace::nsnap' data-ref="GCtrace::nsnap" data-ref-filename="GCtrace..nsnap">nsnap</a>);</td></tr>
<tr><th id="2962">2962</th><td>  <a class="local col1 ref" href="#841as" title='as' data-ref="841as" data-ref-filename="841as">as</a>-&gt;<a class="tu ref field" href="lj_asm.c.html#ASMState::mrm" title='ASMState::mrm' data-use='m' data-ref="ASMState::mrm" data-ref-filename="ASMState..mrm">mrm</a>.<a class="ref field" href="lj_target_x86.h.html#(anonymous)::base" title='(anonymous struct)::base' data-ref="(anonymous)::base" data-ref-filename="(anonymous)..base">base</a> = <var>0</var>;</td></tr>
<tr><th id="2963">2963</th><td>}</td></tr>
<tr><th id="2964">2964</th><td></td></tr>
<tr><th id="2965">2965</th><td><i>/* -- Trace patching ------------------------------------------------------ */</i></td></tr>
<tr><th id="2966">2966</th><td></td></tr>
<tr><th id="2967">2967</th><td><em>static</em> <em>const</em> <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a> <dfn class="decl def" id="map_op1" title='map_op1' data-ref="map_op1" data-ref-filename="map_op1">map_op1</dfn>[<var>256</var>] = {</td></tr>
<tr><th id="2968">2968</th><td><var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x52</var>,<var>0x45</var>,<var>0x51</var>,<var>0x51</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x52</var>,<var>0x45</var>,<var>0x51</var>,<var>0x20</var>,</td></tr>
<tr><th id="2969">2969</th><td><var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x52</var>,<var>0x45</var>,<var>0x51</var>,<var>0x51</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x52</var>,<var>0x45</var>,<var>0x51</var>,<var>0x51</var>,</td></tr>
<tr><th id="2970">2970</th><td><var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x52</var>,<var>0x45</var>,<var>0x10</var>,<var>0x51</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x52</var>,<var>0x45</var>,<var>0x10</var>,<var>0x51</var>,</td></tr>
<tr><th id="2971">2971</th><td><var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x52</var>,<var>0x45</var>,<var>0x10</var>,<var>0x51</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x52</var>,<var>0x45</var>,<var>0x10</var>,<var>0x51</var>,</td></tr>
<tr><th id="2972">2972</th><td><u>#<span data-ppcond="2972">if</span> <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a></u></td></tr>
<tr><th id="2973">2973</th><td><var>0x10</var>,<var>0x10</var>,<var>0x10</var>,<var>0x10</var>,<var>0x10</var>,<var>0x10</var>,<var>0x10</var>,<var>0x10</var>,<var>0x14</var>,<var>0x14</var>,<var>0x14</var>,<var>0x14</var>,<var>0x14</var>,<var>0x14</var>,<var>0x14</var>,<var>0x14</var>,</td></tr>
<tr><th id="2974">2974</th><td><u>#<span data-ppcond="2972">else</span></u></td></tr>
<tr><th id="2975">2975</th><td><var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,</td></tr>
<tr><th id="2976">2976</th><td><u>#<span data-ppcond="2972">endif</span></u></td></tr>
<tr><th id="2977">2977</th><td><var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,</td></tr>
<tr><th id="2978">2978</th><td><var>0x51</var>,<var>0x51</var>,<var>0x92</var>,<var>0x92</var>,<var>0x10</var>,<var>0x10</var>,<var>0x12</var>,<var>0x11</var>,<var>0x45</var>,<var>0x86</var>,<var>0x52</var>,<var>0x93</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,</td></tr>
<tr><th id="2979">2979</th><td><var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,</td></tr>
<tr><th id="2980">2980</th><td><var>0x93</var>,<var>0x86</var>,<var>0x93</var>,<var>0x93</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,</td></tr>
<tr><th id="2981">2981</th><td><var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x47</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,</td></tr>
<tr><th id="2982">2982</th><td><u>#<span data-ppcond="2982">if</span> <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a></u></td></tr>
<tr><th id="2983">2983</th><td><var>0x59</var>,<var>0x59</var>,<var>0x59</var>,<var>0x59</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x52</var>,<var>0x45</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,</td></tr>
<tr><th id="2984">2984</th><td><u>#<span data-ppcond="2982">else</span></u></td></tr>
<tr><th id="2985">2985</th><td><var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x52</var>,<var>0x45</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,</td></tr>
<tr><th id="2986">2986</th><td><u>#<span data-ppcond="2982">endif</span></u></td></tr>
<tr><th id="2987">2987</th><td><var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x05</var>,<var>0x05</var>,<var>0x05</var>,<var>0x05</var>,<var>0x05</var>,<var>0x05</var>,<var>0x05</var>,<var>0x05</var>,</td></tr>
<tr><th id="2988">2988</th><td><var>0x93</var>,<var>0x93</var>,<var>0x53</var>,<var>0x51</var>,<var>0x70</var>,<var>0x71</var>,<var>0x93</var>,<var>0x86</var>,<var>0x54</var>,<var>0x51</var>,<var>0x53</var>,<var>0x51</var>,<var>0x51</var>,<var>0x52</var>,<var>0x51</var>,<var>0x51</var>,</td></tr>
<tr><th id="2989">2989</th><td><var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x52</var>,<var>0x52</var>,<var>0x51</var>,<var>0x51</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,<var>0x92</var>,</td></tr>
<tr><th id="2990">2990</th><td><var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x45</var>,<var>0x45</var>,<var>0x47</var>,<var>0x52</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,</td></tr>
<tr><th id="2991">2991</th><td><var>0x10</var>,<var>0x51</var>,<var>0x10</var>,<var>0x10</var>,<var>0x51</var>,<var>0x51</var>,<var>0x63</var>,<var>0x66</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x92</var>,<var>0x92</var></td></tr>
<tr><th id="2992">2992</th><td>};</td></tr>
<tr><th id="2993">2993</th><td></td></tr>
<tr><th id="2994">2994</th><td><em>static</em> <em>const</em> <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a> <dfn class="decl def" id="map_op2" title='map_op2' data-ref="map_op2" data-ref-filename="map_op2">map_op2</dfn>[<var>256</var>] = {</td></tr>
<tr><th id="2995">2995</th><td><var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x51</var>,<var>0x52</var>,<var>0x51</var>,<var>0x93</var>,<var>0x52</var>,<var>0x94</var>,</td></tr>
<tr><th id="2996">2996</th><td><var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,</td></tr>
<tr><th id="2997">2997</th><td><var>0x53</var>,<var>0x53</var>,<var>0x53</var>,<var>0x53</var>,<var>0x53</var>,<var>0x53</var>,<var>0x53</var>,<var>0x53</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,</td></tr>
<tr><th id="2998">2998</th><td><var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x34</var>,<var>0x51</var>,<var>0x35</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,<var>0x51</var>,</td></tr>
<tr><th id="2999">2999</th><td><var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,</td></tr>
<tr><th id="3000">3000</th><td><var>0x53</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,</td></tr>
<tr><th id="3001">3001</th><td><var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,</td></tr>
<tr><th id="3002">3002</th><td><var>0x94</var>,<var>0x54</var>,<var>0x54</var>,<var>0x54</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x52</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,</td></tr>
<tr><th id="3003">3003</th><td><var>0x46</var>,<var>0x46</var>,<var>0x46</var>,<var>0x46</var>,<var>0x46</var>,<var>0x46</var>,<var>0x46</var>,<var>0x46</var>,<var>0x46</var>,<var>0x46</var>,<var>0x46</var>,<var>0x46</var>,<var>0x46</var>,<var>0x46</var>,<var>0x46</var>,<var>0x46</var>,</td></tr>
<tr><th id="3004">3004</th><td><var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,</td></tr>
<tr><th id="3005">3005</th><td><var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x93</var>,<var>0x94</var>,<var>0x93</var>,<var>0x51</var>,<var>0x51</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x93</var>,<var>0x94</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,</td></tr>
<tr><th id="3006">3006</th><td><var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x94</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,</td></tr>
<tr><th id="3007">3007</th><td><var>0x93</var>,<var>0x93</var>,<var>0x94</var>,<var>0x93</var>,<var>0x94</var>,<var>0x94</var>,<var>0x94</var>,<var>0x93</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,<var>0x52</var>,</td></tr>
<tr><th id="3008">3008</th><td><var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,</td></tr>
<tr><th id="3009">3009</th><td><var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,</td></tr>
<tr><th id="3010">3010</th><td><var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x93</var>,<var>0x52</var></td></tr>
<tr><th id="3011">3011</th><td>};</td></tr>
<tr><th id="3012">3012</th><td></td></tr>
<tr><th id="3013">3013</th><td><em>static</em> <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a> <dfn class="decl def fn" id="asm_x86_inslen" title='asm_x86_inslen' data-ref="asm_x86_inslen" data-ref-filename="asm_x86_inslen">asm_x86_inslen</dfn>(<em>const</em> <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a>* <dfn class="local col2 decl" id="842p" title='p' data-type='const uint8_t *' data-ref="842p" data-ref-filename="842p">p</dfn>)</td></tr>
<tr><th id="3014">3014</th><td>{</td></tr>
<tr><th id="3015">3015</th><td>  <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a> <dfn class="local col3 decl" id="843result" title='result' data-type='uint32_t' data-ref="843result" data-ref-filename="843result">result</dfn> = <var>0</var>;</td></tr>
<tr><th id="3016">3016</th><td>  <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a> <dfn class="local col4 decl" id="844prefixes" title='prefixes' data-type='uint32_t' data-ref="844prefixes" data-ref-filename="844prefixes">prefixes</dfn> = <var>0</var>;</td></tr>
<tr><th id="3017">3017</th><td>  <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a> <dfn class="local col5 decl" id="845x" title='x' data-type='uint32_t' data-ref="845x" data-ref-filename="845x">x</dfn> = <a class="ref" href="#map_op1" title='map_op1' data-ref="map_op1" data-ref-filename="map_op1">map_op1</a>[*<a class="local col2 ref" href="#842p" title='p' data-ref="842p" data-ref-filename="842p">p</a>];</td></tr>
<tr><th id="3018">3018</th><td>  <b>for</b> (;;) {</td></tr>
<tr><th id="3019">3019</th><td>    <b>switch</b> (<a class="local col5 ref" href="#845x" title='x' data-ref="845x" data-ref-filename="845x">x</a> &gt;&gt; <var>4</var>) {</td></tr>
<tr><th id="3020">3020</th><td>    <b>case</b> <var>0</var>: <b>return</b> <a class="local col3 ref" href="#843result" title='result' data-ref="843result" data-ref-filename="843result">result</a> + <a class="local col5 ref" href="#845x" title='x' data-ref="845x" data-ref-filename="845x">x</a> + (<a class="local col4 ref" href="#844prefixes" title='prefixes' data-ref="844prefixes" data-ref-filename="844prefixes">prefixes</a> &amp; <var>4</var>);</td></tr>
<tr><th id="3021">3021</th><td>    <b>case</b> <var>1</var>: <a class="local col4 ref" href="#844prefixes" title='prefixes' data-ref="844prefixes" data-ref-filename="844prefixes">prefixes</a> |= <a class="local col5 ref" href="#845x" title='x' data-ref="845x" data-ref-filename="845x">x</a>; <a class="local col5 ref" href="#845x" title='x' data-ref="845x" data-ref-filename="845x">x</a> = <a class="ref" href="#map_op1" title='map_op1' data-ref="map_op1" data-ref-filename="map_op1">map_op1</a>[*++<a class="local col2 ref" href="#842p" title='p' data-ref="842p" data-ref-filename="842p">p</a>]; <a class="local col3 ref" href="#843result" title='result' data-ref="843result" data-ref-filename="843result">result</a>++; <b>break</b>;</td></tr>
<tr><th id="3022">3022</th><td>    <b>case</b> <var>2</var>: <a class="local col5 ref" href="#845x" title='x' data-ref="845x" data-ref-filename="845x">x</a> = <a class="ref" href="#map_op2" title='map_op2' data-ref="map_op2" data-ref-filename="map_op2">map_op2</a>[*++<a class="local col2 ref" href="#842p" title='p' data-ref="842p" data-ref-filename="842p">p</a>]; <b>break</b>;</td></tr>
<tr><th id="3023">3023</th><td>    <b>case</b> <var>3</var>: <a class="local col2 ref" href="#842p" title='p' data-ref="842p" data-ref-filename="842p">p</a>++; <b>goto</b> <a class="lbl" href="#846mrm" data-ref="846mrm" data-ref-filename="846mrm">mrm</a>;</td></tr>
<tr><th id="3024">3024</th><td>    <b>case</b> <var>4</var>: <a class="local col3 ref" href="#843result" title='result' data-ref="843result" data-ref-filename="843result">result</a> -= (<a class="local col4 ref" href="#844prefixes" title='prefixes' data-ref="844prefixes" data-ref-filename="844prefixes">prefixes</a> &amp; <var>2</var>);  <i>/* fallthrough */</i></td></tr>
<tr><th id="3025">3025</th><td>    <b>case</b> <var>5</var>: <b>return</b> <a class="local col3 ref" href="#843result" title='result' data-ref="843result" data-ref-filename="843result">result</a> + (<a class="local col5 ref" href="#845x" title='x' data-ref="845x" data-ref-filename="845x">x</a> &amp; <var>15</var>);</td></tr>
<tr><th id="3026">3026</th><td>    <b>case</b> <var>6</var>:  <i>/* Group 3. */</i></td></tr>
<tr><th id="3027">3027</th><td>      <b>if</b> (<a class="local col2 ref" href="#842p" title='p' data-ref="842p" data-ref-filename="842p">p</a>[<var>1</var>] &amp; <var>0x38</var>) <a class="local col5 ref" href="#845x" title='x' data-ref="845x" data-ref-filename="845x">x</a> = <var>2</var>;</td></tr>
<tr><th id="3028">3028</th><td>      <b>else</b> <b>if</b> ((<a class="local col4 ref" href="#844prefixes" title='prefixes' data-ref="844prefixes" data-ref-filename="844prefixes">prefixes</a> &amp; <var>2</var>) &amp;&amp; (<a class="local col5 ref" href="#845x" title='x' data-ref="845x" data-ref-filename="845x">x</a> == <var>0x66</var>)) <a class="local col5 ref" href="#845x" title='x' data-ref="845x" data-ref-filename="845x">x</a> = <var>4</var>;</td></tr>
<tr><th id="3029">3029</th><td>      <b>goto</b> <a class="lbl" href="#846mrm" data-ref="846mrm" data-ref-filename="846mrm">mrm</a>;</td></tr>
<tr><th id="3030">3030</th><td>    <b>case</b> <var>7</var>: <i>/* VEX c4/c5. */</i></td></tr>
<tr><th id="3031">3031</th><td>      <b>if</b> (<a class="macro" href="lj_arch.h.html#599" title="0" data-ref="_M/LJ_32">LJ_32</a> &amp;&amp; <a class="local col2 ref" href="#842p" title='p' data-ref="842p" data-ref-filename="842p">p</a>[<var>1</var>] &lt; <var>0xc0</var>) {</td></tr>
<tr><th id="3032">3032</th><td>	<a class="local col5 ref" href="#845x" title='x' data-ref="845x" data-ref-filename="845x">x</a> = <var>2</var>;</td></tr>
<tr><th id="3033">3033</th><td>	<b>goto</b> <a class="lbl" href="#846mrm" data-ref="846mrm" data-ref-filename="846mrm">mrm</a>;</td></tr>
<tr><th id="3034">3034</th><td>      }</td></tr>
<tr><th id="3035">3035</th><td>      <b>if</b> (<a class="local col5 ref" href="#845x" title='x' data-ref="845x" data-ref-filename="845x">x</a> == <var>0x70</var>) {</td></tr>
<tr><th id="3036">3036</th><td>	<a class="local col5 ref" href="#845x" title='x' data-ref="845x" data-ref-filename="845x">x</a> = *++<a class="local col2 ref" href="#842p" title='p' data-ref="842p" data-ref-filename="842p">p</a> &amp; <var>0x1f</var>;</td></tr>
<tr><th id="3037">3037</th><td>	<a class="local col3 ref" href="#843result" title='result' data-ref="843result" data-ref-filename="843result">result</a>++;</td></tr>
<tr><th id="3038">3038</th><td>	<b>if</b> (<a class="local col5 ref" href="#845x" title='x' data-ref="845x" data-ref-filename="845x">x</a> &gt;= <var>2</var>) {</td></tr>
<tr><th id="3039">3039</th><td>	  <a class="local col2 ref" href="#842p" title='p' data-ref="842p" data-ref-filename="842p">p</a> += <var>2</var>;</td></tr>
<tr><th id="3040">3040</th><td>	  <a class="local col3 ref" href="#843result" title='result' data-ref="843result" data-ref-filename="843result">result</a> += <var>2</var>;</td></tr>
<tr><th id="3041">3041</th><td>	  <b>goto</b> <a class="lbl" href="#846mrm" data-ref="846mrm" data-ref-filename="846mrm">mrm</a>;</td></tr>
<tr><th id="3042">3042</th><td>	}</td></tr>
<tr><th id="3043">3043</th><td>      }</td></tr>
<tr><th id="3044">3044</th><td>      <a class="local col2 ref" href="#842p" title='p' data-ref="842p" data-ref-filename="842p">p</a>++;</td></tr>
<tr><th id="3045">3045</th><td>      <a class="local col3 ref" href="#843result" title='result' data-ref="843result" data-ref-filename="843result">result</a>++;</td></tr>
<tr><th id="3046">3046</th><td>      <a class="local col5 ref" href="#845x" title='x' data-ref="845x" data-ref-filename="845x">x</a> = <a class="ref" href="#map_op2" title='map_op2' data-ref="map_op2" data-ref-filename="map_op2">map_op2</a>[*++<a class="local col2 ref" href="#842p" title='p' data-ref="842p" data-ref-filename="842p">p</a>];</td></tr>
<tr><th id="3047">3047</th><td>      <b>break</b>;</td></tr>
<tr><th id="3048">3048</th><td>    <b>case</b> <var>8</var>: <a class="local col3 ref" href="#843result" title='result' data-ref="843result" data-ref-filename="843result">result</a> -= (<a class="local col4 ref" href="#844prefixes" title='prefixes' data-ref="844prefixes" data-ref-filename="844prefixes">prefixes</a> &amp; <var>2</var>);  <i>/* fallthrough */</i></td></tr>
<tr><th id="3049">3049</th><td>    <b>case</b> <var>9</var>: <dfn class="lbl" id="846mrm" data-ref="846mrm" data-ref-filename="846mrm">mrm</dfn>:  <i>/* ModR/M and possibly SIB. */</i></td></tr>
<tr><th id="3050">3050</th><td>      <a class="local col3 ref" href="#843result" title='result' data-ref="843result" data-ref-filename="843result">result</a> += (<a class="local col5 ref" href="#845x" title='x' data-ref="845x" data-ref-filename="845x">x</a> &amp; <var>15</var>);</td></tr>
<tr><th id="3051">3051</th><td>      <a class="local col5 ref" href="#845x" title='x' data-ref="845x" data-ref-filename="845x">x</a> = *++<a class="local col2 ref" href="#842p" title='p' data-ref="842p" data-ref-filename="842p">p</a>;</td></tr>
<tr><th id="3052">3052</th><td>      <b>switch</b> (<a class="local col5 ref" href="#845x" title='x' data-ref="845x" data-ref-filename="845x">x</a> &gt;&gt; <var>6</var>) {</td></tr>
<tr><th id="3053">3053</th><td>      <b>case</b> <var>0</var>: <b>if</b> ((<a class="local col5 ref" href="#845x" title='x' data-ref="845x" data-ref-filename="845x">x</a> &amp; <var>7</var>) == <var>5</var>) <b>return</b> <a class="local col3 ref" href="#843result" title='result' data-ref="843result" data-ref-filename="843result">result</a> + <var>4</var>; <b>break</b>;</td></tr>
<tr><th id="3054">3054</th><td>      <b>case</b> <var>1</var>: <a class="local col3 ref" href="#843result" title='result' data-ref="843result" data-ref-filename="843result">result</a>++; <b>break</b>;</td></tr>
<tr><th id="3055">3055</th><td>      <b>case</b> <var>2</var>: <a class="local col3 ref" href="#843result" title='result' data-ref="843result" data-ref-filename="843result">result</a> += <var>4</var>; <b>break</b>;</td></tr>
<tr><th id="3056">3056</th><td>      <b>case</b> <var>3</var>: <b>return</b> <a class="local col3 ref" href="#843result" title='result' data-ref="843result" data-ref-filename="843result">result</a>;</td></tr>
<tr><th id="3057">3057</th><td>      }</td></tr>
<tr><th id="3058">3058</th><td>      <b>if</b> ((<a class="local col5 ref" href="#845x" title='x' data-ref="845x" data-ref-filename="845x">x</a> &amp; <var>7</var>) == <var>4</var>) {</td></tr>
<tr><th id="3059">3059</th><td>	<a class="local col3 ref" href="#843result" title='result' data-ref="843result" data-ref-filename="843result">result</a>++;</td></tr>
<tr><th id="3060">3060</th><td>	<b>if</b> (<a class="local col5 ref" href="#845x" title='x' data-ref="845x" data-ref-filename="845x">x</a> &lt; <var>0x40</var> &amp;&amp; (<a class="local col2 ref" href="#842p" title='p' data-ref="842p" data-ref-filename="842p">p</a>[<var>1</var>] &amp; <var>7</var>) == <var>5</var>) <a class="local col3 ref" href="#843result" title='result' data-ref="843result" data-ref-filename="843result">result</a> += <var>4</var>;</td></tr>
<tr><th id="3061">3061</th><td>      }</td></tr>
<tr><th id="3062">3062</th><td>      <b>return</b> <a class="local col3 ref" href="#843result" title='result' data-ref="843result" data-ref-filename="843result">result</a>;</td></tr>
<tr><th id="3063">3063</th><td>    }</td></tr>
<tr><th id="3064">3064</th><td>  }</td></tr>
<tr><th id="3065">3065</th><td>}</td></tr>
<tr><th id="3066">3066</th><td></td></tr>
<tr><th id="3067">3067</th><td><i>/* Patch exit jumps of existing machine code to a new target. */</i></td></tr>
<tr><th id="3068">3068</th><td><em>void</em> <dfn class="decl def fn" id="lj_asm_patchexit" title='lj_asm_patchexit' data-ref="lj_asm_patchexit" data-ref-filename="lj_asm_patchexit">lj_asm_patchexit</dfn>(<a class="typedef" href="lj_jit.h.html#jit_State" title='jit_State' data-type='struct jit_State' data-ref="jit_State" data-ref-filename="jit_State">jit_State</a> *<dfn class="local col7 decl" id="847J" title='J' data-type='jit_State *' data-ref="847J" data-ref-filename="847J">J</dfn>, <a class="typedef" href="lj_jit.h.html#GCtrace" title='GCtrace' data-type='struct GCtrace' data-ref="GCtrace" data-ref-filename="GCtrace">GCtrace</a> *<dfn class="local col8 decl" id="848T" title='T' data-type='GCtrace *' data-ref="848T" data-ref-filename="848T">T</dfn>, <a class="typedef" href="lj_jit.h.html#ExitNo" title='ExitNo' data-type='uint32_t' data-ref="ExitNo" data-ref-filename="ExitNo">ExitNo</a> <dfn class="local col9 decl" id="849exitno" title='exitno' data-type='ExitNo' data-ref="849exitno" data-ref-filename="849exitno">exitno</dfn>, <a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *<dfn class="local col0 decl" id="850target" title='target' data-type='MCode *' data-ref="850target" data-ref-filename="850target">target</dfn>)</td></tr>
<tr><th id="3069">3069</th><td>{</td></tr>
<tr><th id="3070">3070</th><td>  <a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *<dfn class="local col1 decl" id="851p" title='p' data-type='MCode *' data-ref="851p" data-ref-filename="851p">p</dfn> = <a class="local col8 ref" href="#848T" title='T' data-ref="848T" data-ref-filename="848T">T</a>-&gt;<a class="ref field" href="lj_jit.h.html#GCtrace::mcode" title='GCtrace::mcode' data-ref="GCtrace::mcode" data-ref-filename="GCtrace..mcode">mcode</a>;</td></tr>
<tr><th id="3071">3071</th><td>  <a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *<dfn class="local col2 decl" id="852mcarea" title='mcarea' data-type='MCode *' data-ref="852mcarea" data-ref-filename="852mcarea">mcarea</dfn> = <a class="ref fn" href="lj_mcode.h.html#lj_mcode_patch" title='lj_mcode_patch' data-ref="lj_mcode_patch" data-ref-filename="lj_mcode_patch">lj_mcode_patch</a>(<a class="local col7 ref" href="#847J" title='J' data-ref="847J" data-ref-filename="847J">J</a>, <a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a>, <var>0</var>);</td></tr>
<tr><th id="3072">3072</th><td>  <a class="typedef" href="lj_obj.h.html#MSize" title='MSize' data-type='uint32_t' data-ref="MSize" data-ref-filename="MSize">MSize</a> <dfn class="local col3 decl" id="853len" title='len' data-type='MSize' data-ref="853len" data-ref-filename="853len">len</dfn> = <a class="local col8 ref" href="#848T" title='T' data-ref="848T" data-ref-filename="848T">T</a>-&gt;<a class="ref field" href="lj_jit.h.html#GCtrace::szmcode" title='GCtrace::szmcode' data-ref="GCtrace::szmcode" data-ref-filename="GCtrace..szmcode">szmcode</a>;</td></tr>
<tr><th id="3073">3073</th><td>  <a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *<dfn class="local col4 decl" id="854px" title='px' data-type='MCode *' data-ref="854px" data-ref-filename="854px">px</dfn> = <a class="macro" href="lj_target.h.html#161" title="((MCode *)exitstub_addr_((char **)((J)-&gt;exitstubgroup), (exitno)))" data-ref="_M/exitstub_addr">exitstub_addr</a>(<a class="local col7 ref" href="#847J" title='J' data-ref="847J" data-ref-filename="847J">J</a>, <a class="local col9 ref" href="#849exitno" title='exitno' data-ref="849exitno" data-ref-filename="849exitno">exitno</a>) - <var>6</var>;</td></tr>
<tr><th id="3074">3074</th><td>  <a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *<dfn class="local col5 decl" id="855pe" title='pe' data-type='MCode *' data-ref="855pe" data-ref-filename="855pe">pe</dfn> = <a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a>+<a class="local col3 ref" href="#853len" title='len' data-ref="853len" data-ref-filename="853len">len</a>-<var>6</var>;</td></tr>
<tr><th id="3075">3075</th><td>  <a class="typedef" href="lj_jit.h.html#MCode" title='MCode' data-type='uint8_t' data-ref="MCode" data-ref-filename="MCode">MCode</a> *<dfn class="local col6 decl" id="856pgc" title='pgc' data-type='MCode *' data-ref="856pgc" data-ref-filename="856pgc">pgc</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="3076">3076</th><td><u>#<span data-ppcond="3076">if</span> <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a></u></td></tr>
<tr><th id="3077">3077</th><td>  <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a> <dfn class="local col7 decl" id="857statei" title='statei' data-type='uint32_t' data-ref="857statei" data-ref-filename="857statei">statei</dfn> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a>)(<a class="macro" href="lj_dispatch.h.html#111" title="((int)__builtin_offsetof(GG_State, g.vmstate))" data-ref="_M/GG_OFS">GG_OFS</a>(g.vmstate) - <a class="macro" href="lj_dispatch.h.html#111" title="((int)__builtin_offsetof(GG_State, dispatch))" data-ref="_M/GG_OFS">GG_OFS</a>(dispatch));</td></tr>
<tr><th id="3078">3078</th><td><u>#<span data-ppcond="3076">else</span></u></td></tr>
<tr><th id="3079">3079</th><td>  uint32_t statei = u32ptr(&amp;J2G(J)-&gt;vmstate);</td></tr>
<tr><th id="3080">3080</th><td><u>#<span data-ppcond="3076">endif</span></u></td></tr>
<tr><th id="3081">3081</th><td>  <b>if</b> (<a class="local col3 ref" href="#853len" title='len' data-ref="853len" data-ref-filename="853len">len</a> &gt; <var>5</var> &amp;&amp; <a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a>[<a class="local col3 ref" href="#853len" title='len' data-ref="853len" data-ref-filename="853len">len</a>-<var>5</var>] == <a class="enum" href="lj_target_x86.h.html#XI_JMP" title='XI_JMP' data-ref="XI_JMP" data-ref-filename="XI_JMP">XI_JMP</a> &amp;&amp; <a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a>+<a class="local col3 ref" href="#853len" title='len' data-ref="853len" data-ref-filename="853len">len</a>-<var>6</var> + *(<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> *)(<a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a>+<a class="local col3 ref" href="#853len" title='len' data-ref="853len" data-ref-filename="853len">len</a>-<var>4</var>) == <a class="local col4 ref" href="#854px" title='px' data-ref="854px" data-ref-filename="854px">px</a>)</td></tr>
<tr><th id="3082">3082</th><td>    *(<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> *)(<a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a>+<a class="local col3 ref" href="#853len" title='len' data-ref="853len" data-ref-filename="853len">len</a>-<var>4</var>) = <a class="ref fn" href="lj_emit_x86.h.html#jmprel" title='jmprel' data-ref="jmprel" data-ref-filename="jmprel">jmprel</a>(<a class="local col7 ref" href="#847J" title='J' data-ref="847J" data-ref-filename="847J">J</a>, <a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a>+<a class="local col3 ref" href="#853len" title='len' data-ref="853len" data-ref-filename="853len">len</a>, <a class="local col0 ref" href="#850target" title='target' data-ref="850target" data-ref-filename="850target">target</a>);</td></tr>
<tr><th id="3083">3083</th><td>  <i>/* Do not patch parent exit for a stack check. Skip beyond vmstate update. */</i></td></tr>
<tr><th id="3084">3084</th><td>  <b>for</b> (; <a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a> &lt; <a class="local col5 ref" href="#855pe" title='pe' data-ref="855pe" data-ref-filename="855pe">pe</a>; <a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a> += <a class="ref fn" href="#asm_x86_inslen" title='asm_x86_inslen' data-ref="asm_x86_inslen" data-ref-filename="asm_x86_inslen">asm_x86_inslen</a>(<a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a>)) {</td></tr>
<tr><th id="3085">3085</th><td>    <a class="typedef" href="../include/stdint.h.html#intptr_t" title='intptr_t' data-type='long' data-ref="intptr_t" data-ref-filename="intptr_t">intptr_t</a> <dfn class="local col8 decl" id="858ofs" title='ofs' data-type='intptr_t' data-ref="858ofs" data-ref-filename="858ofs">ofs</dfn> = <a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a> ? (<a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a>[<var>0</var>] &amp; <var>0xf0</var>) == <var>0x40</var> : <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a>;</td></tr>
<tr><th id="3086">3086</th><td>    <b>if</b> (*(<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a> *)(<a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a>+<var>2</var>+<a class="local col8 ref" href="#858ofs" title='ofs' data-ref="858ofs" data-ref-filename="858ofs">ofs</a>) == <a class="local col7 ref" href="#857statei" title='statei' data-ref="857statei" data-ref-filename="857statei">statei</a> &amp;&amp; <a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a>[<a class="local col8 ref" href="#858ofs" title='ofs' data-ref="858ofs" data-ref-filename="858ofs">ofs</a>+<a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a>-<a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a>] == <a class="enum" href="lj_target_x86.h.html#XI_MOVmi" title='XI_MOVmi' data-ref="XI_MOVmi" data-ref-filename="XI_MOVmi">XI_MOVmi</a>)</td></tr>
<tr><th id="3087">3087</th><td>      <b>break</b>;</td></tr>
<tr><th id="3088">3088</th><td>  }</td></tr>
<tr><th id="3089">3089</th><td>  <a class="macro" href="lj_jit.h.html#513" title="((void)J)" data-ref="_M/lj_assertJ">lj_assertJ</a>(p &lt; pe, <q>"instruction length decoder failed"</q>);</td></tr>
<tr><th id="3090">3090</th><td>  <b>for</b> (; <a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a> &lt; <a class="local col5 ref" href="#855pe" title='pe' data-ref="855pe" data-ref-filename="855pe">pe</a>; <a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a> += <a class="ref fn" href="#asm_x86_inslen" title='asm_x86_inslen' data-ref="asm_x86_inslen" data-ref-filename="asm_x86_inslen">asm_x86_inslen</a>(<a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a>)) {</td></tr>
<tr><th id="3091">3091</th><td>    <b>if</b> ((*(<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint16_t" title='uint16_t' data-type='__uint16_t' data-ref="uint16_t" data-ref-filename="uint16_t">uint16_t</a> *)<a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a> &amp; <var>0xf0ff</var>) == <var>0x800f</var> &amp;&amp; <a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a> + *(<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> *)(<a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a>+<var>2</var>) == <a class="local col4 ref" href="#854px" title='px' data-ref="854px" data-ref-filename="854px">px</a> &amp;&amp;</td></tr>
<tr><th id="3092">3092</th><td>	<a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a> != <a class="local col6 ref" href="#856pgc" title='pgc' data-ref="856pgc" data-ref-filename="856pgc">pgc</a>) {</td></tr>
<tr><th id="3093">3093</th><td>      *(<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> *)(<a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a>+<var>2</var>) = <a class="ref fn" href="lj_emit_x86.h.html#jmprel" title='jmprel' data-ref="jmprel" data-ref-filename="jmprel">jmprel</a>(<a class="local col7 ref" href="#847J" title='J' data-ref="847J" data-ref-filename="847J">J</a>, <a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a>+<var>6</var>, <a class="local col0 ref" href="#850target" title='target' data-ref="850target" data-ref-filename="850target">target</a>);</td></tr>
<tr><th id="3094">3094</th><td>    } <b>else</b> <b>if</b> (*<a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a> == <a class="enum" href="lj_target_x86.h.html#XI_CALL" title='XI_CALL' data-ref="XI_CALL" data-ref-filename="XI_CALL">XI_CALL</a> &amp;&amp;</td></tr>
<tr><th id="3095">3095</th><td>	      (<em>void</em> *)(<a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a>+<var>5</var>+*(<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t" data-ref-filename="int32_t">int32_t</a> *)(<a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a>+<var>1</var>)) == (<em>void</em> *)<a class="ref fn" href="lj_gc.h.html#lj_gc_step_jit" title='lj_gc_step_jit' data-ref="lj_gc_step_jit" data-ref-filename="lj_gc_step_jit">lj_gc_step_jit</a>) {</td></tr>
<tr><th id="3096">3096</th><td>      <a class="local col6 ref" href="#856pgc" title='pgc' data-ref="856pgc" data-ref-filename="856pgc">pgc</a> = <a class="local col1 ref" href="#851p" title='p' data-ref="851p" data-ref-filename="851p">p</a>+<var>7</var>;  <i>/* Do not patch GC check exit. */</i></td></tr>
<tr><th id="3097">3097</th><td>    }</td></tr>
<tr><th id="3098">3098</th><td>  }</td></tr>
<tr><th id="3099">3099</th><td>  <a class="ref fn" href="lj_mcode.h.html#lj_mcode_sync" title='lj_mcode_sync' data-ref="lj_mcode_sync" data-ref-filename="lj_mcode_sync">lj_mcode_sync</a>(<a class="local col8 ref" href="#848T" title='T' data-ref="848T" data-ref-filename="848T">T</a>-&gt;<a class="ref field" href="lj_jit.h.html#GCtrace::mcode" title='GCtrace::mcode' data-ref="GCtrace::mcode" data-ref-filename="GCtrace..mcode">mcode</a>, <a class="local col8 ref" href="#848T" title='T' data-ref="848T" data-ref-filename="848T">T</a>-&gt;<a class="ref field" href="lj_jit.h.html#GCtrace::mcode" title='GCtrace::mcode' data-ref="GCtrace::mcode" data-ref-filename="GCtrace..mcode">mcode</a> + <a class="local col8 ref" href="#848T" title='T' data-ref="848T" data-ref-filename="848T">T</a>-&gt;<a class="ref field" href="lj_jit.h.html#GCtrace::szmcode" title='GCtrace::szmcode' data-ref="GCtrace::szmcode" data-ref-filename="GCtrace..szmcode">szmcode</a>);</td></tr>
<tr><th id="3100">3100</th><td>  <a class="ref fn" href="lj_mcode.h.html#lj_mcode_patch" title='lj_mcode_patch' data-ref="lj_mcode_patch" data-ref-filename="lj_mcode_patch">lj_mcode_patch</a>(<a class="local col7 ref" href="#847J" title='J' data-ref="847J" data-ref-filename="847J">J</a>, <a class="local col2 ref" href="#852mcarea" title='mcarea' data-ref="852mcarea" data-ref-filename="852mcarea">mcarea</a>, <var>1</var>);</td></tr>
<tr><th id="3101">3101</th><td>}</td></tr>
<tr><th id="3102">3102</th><td></td></tr>
<tr><th id="3103">3103</th><td></td></tr>
</table><hr/><p id='footer'>
Generated while processing <a href='lj_asm.c.html'>luajit/lj_asm.c</a><br/>Generated on <em>2022-Jun-23</em> from project luajit revision <em>v2.1.0-beta3-294-ge9577376</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
