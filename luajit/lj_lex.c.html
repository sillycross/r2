<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>lj_lex.c source code [luajit/lj_lex.c] - Woboq Code Browser</title>
<link rel="stylesheet" href=".././data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href=".././data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src=".././data/jquery/jquery.min.js"></script>
<script type="text/javascript" src=".././data/jquery/jquery-ui.min.js"></script>
<script>var file = 'luajit/lj_lex.c'; var root_path = '..'; var data_path = '.././data'; var ecma_script_api_version = 2;</script>
<script src='.././data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='./'>luajit</a>/<a href='lj_lex.c.html'>lj_lex.c</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*</i></td></tr>
<tr><th id="2">2</th><td><i>** Lexical analyzer.</i></td></tr>
<tr><th id="3">3</th><td><i>** Copyright (C) 2005-2021 Mike Pall. See Copyright Notice in luajit.h</i></td></tr>
<tr><th id="4">4</th><td><i>**</i></td></tr>
<tr><th id="5">5</th><td><i>** Major portions taken verbatim or adapted from the Lua interpreter.</i></td></tr>
<tr><th id="6">6</th><td><i>** Copyright (C) 1994-2008 Lua.org, PUC-Rio. See Copyright Notice in lua.h</i></td></tr>
<tr><th id="7">7</th><td><i>*/</i></td></tr>
<tr><th id="8">8</th><td></td></tr>
<tr><th id="9">9</th><td><u>#define <dfn class="macro" id="_M/lj_lex_c" data-ref="_M/lj_lex_c">lj_lex_c</dfn></u></td></tr>
<tr><th id="10">10</th><td><u>#define <dfn class="macro" id="_M/LUA_CORE" data-ref="_M/LUA_CORE">LUA_CORE</dfn></u></td></tr>
<tr><th id="11">11</th><td></td></tr>
<tr><th id="12">12</th><td><u>#include <a href="lj_obj.h.html">"lj_obj.h"</a></u></td></tr>
<tr><th id="13">13</th><td><u>#include <a href="lj_gc.h.html">"lj_gc.h"</a></u></td></tr>
<tr><th id="14">14</th><td><u>#include <a href="lj_err.h.html">"lj_err.h"</a></u></td></tr>
<tr><th id="15">15</th><td><u>#include <a href="lj_buf.h.html">"lj_buf.h"</a></u></td></tr>
<tr><th id="16">16</th><td><u>#include <a href="lj_str.h.html">"lj_str.h"</a></u></td></tr>
<tr><th id="17">17</th><td><u>#<span data-ppcond="17">if</span> <a class="macro" href="lj_arch.h.html#549" title="1" data-ref="_M/LJ_HASFFI">LJ_HASFFI</a></u></td></tr>
<tr><th id="18">18</th><td><u>#include <a href="lj_tab.h.html">"lj_tab.h"</a></u></td></tr>
<tr><th id="19">19</th><td><u>#include <a href="lj_ctype.h.html">"lj_ctype.h"</a></u></td></tr>
<tr><th id="20">20</th><td><u>#include <a href="lj_cdata.h.html">"lj_cdata.h"</a></u></td></tr>
<tr><th id="21">21</th><td><u>#include <a href="lualib.h.html">"lualib.h"</a></u></td></tr>
<tr><th id="22">22</th><td><u>#<span data-ppcond="17">endif</span></u></td></tr>
<tr><th id="23">23</th><td><u>#include <a href="lj_state.h.html">"lj_state.h"</a></u></td></tr>
<tr><th id="24">24</th><td><u>#include <a href="lj_lex.h.html">"lj_lex.h"</a></u></td></tr>
<tr><th id="25">25</th><td><u>#include <a href="lj_parse.h.html">"lj_parse.h"</a></u></td></tr>
<tr><th id="26">26</th><td><u>#include <a href="lj_char.h.html">"lj_char.h"</a></u></td></tr>
<tr><th id="27">27</th><td><u>#include <a href="lj_strscan.h.html">"lj_strscan.h"</a></u></td></tr>
<tr><th id="28">28</th><td><u>#include <a href="lj_strfmt.h.html">"lj_strfmt.h"</a></u></td></tr>
<tr><th id="29">29</th><td></td></tr>
<tr><th id="30">30</th><td><i  data-doc="tokennames">/* Lua lexer token names. */</i></td></tr>
<tr><th id="31">31</th><td><em>static</em> <em>const</em> <em>char</em> *<em>const</em> <dfn class="tu decl def" id="tokennames" title='tokennames' data-type='const char *const [34]' data-ref="tokennames" data-ref-filename="tokennames">tokennames</dfn>[] = {</td></tr>
<tr><th id="32">32</th><td><u>#define <dfn class="macro" id="_M/TKSTR1" data-ref="_M/TKSTR1">TKSTR1</dfn>(name)		#name,</u></td></tr>
<tr><th id="33">33</th><td><u>#define <dfn class="macro" id="_M/TKSTR2" data-ref="_M/TKSTR2">TKSTR2</dfn>(name, sym)	#sym,</u></td></tr>
<tr><th id="34">34</th><td><a class="macro" href="lj_lex.h.html#15" title="&quot;and&quot;, &quot;break&quot;, &quot;do&quot;, &quot;else&quot;, &quot;elseif&quot;, &quot;end&quot;, &quot;false&quot;, &quot;for&quot;, &quot;function&quot;, &quot;goto&quot;, &quot;if&quot;, &quot;in&quot;, &quot;local&quot;, &quot;nil&quot;, &quot;not&quot;, &quot;or&quot;, &quot;repeat&quot;, &quot;return&quot;, &quot;then&quot;, &quot;true&quot;, &quot;until&quot;, &quot;while&quot;, &quot;..&quot;, &quot;...&quot;, &quot;==&quot;, &quot;&gt;=&quot;, &quot;&lt;=&quot;, &quot;~=&quot;, &quot;::&quot;, &quot;&lt;number&gt;&quot;, &quot;&lt;name&gt;&quot;, &quot;&lt;string&gt;&quot;, &quot;&lt;eof&gt;&quot;," data-ref="_M/TKDEF">TKDEF</a>(TKSTR1, TKSTR2)</td></tr>
<tr><th id="35">35</th><td><u>#undef <a class="macro" href="#32" data-ref="_M/TKSTR1">TKSTR1</a></u></td></tr>
<tr><th id="36">36</th><td><u>#undef <a class="macro" href="#33" data-ref="_M/TKSTR2">TKSTR2</a></u></td></tr>
<tr><th id="37">37</th><td>  <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span></td></tr>
<tr><th id="38">38</th><td>};</td></tr>
<tr><th id="39">39</th><td></td></tr>
<tr><th id="40">40</th><td><i>/* -- Buffer handling ----------------------------------------------------- */</i></td></tr>
<tr><th id="41">41</th><td></td></tr>
<tr><th id="42">42</th><td><u>#define <dfn class="macro" id="_M/LEX_EOF" data-ref="_M/LEX_EOF">LEX_EOF</dfn>			(-1)</u></td></tr>
<tr><th id="43">43</th><td><u>#define <dfn class="macro" id="_M/lex_iseol" data-ref="_M/lex_iseol">lex_iseol</dfn>(ls)		(ls-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> == '\n' || ls-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> == '\r')</u></td></tr>
<tr><th id="44">44</th><td></td></tr>
<tr><th id="45">45</th><td><i  data-doc="lex_more">/* Get more input from reader. */</i></td></tr>
<tr><th id="46">46</th><td><em>static</em> <a class="macro" href="lj_def.h.html#129" title="__attribute__((noinline))" data-ref="_M/LJ_NOINLINE">LJ_NOINLINE</a> <a class="typedef" href="lj_lex.h.html#LexChar" title='LexChar' data-type='int' data-ref="LexChar" data-ref-filename="LexChar">LexChar</a> <dfn class="tu decl def fn" id="lex_more" title='lex_more' data-type='LexChar lex_more(LexState * ls)' data-ref="lex_more" data-ref-filename="lex_more">lex_more</dfn>(<a class="typedef" href="lj_lex.h.html#LexState" title='LexState' data-type='struct LexState' data-ref="LexState" data-ref-filename="LexState">LexState</a> *<dfn class="local col8 decl" id="8ls" title='ls' data-type='LexState *' data-ref="8ls" data-ref-filename="8ls">ls</dfn>)</td></tr>
<tr><th id="47">47</th><td>{</td></tr>
<tr><th id="48">48</th><td>  <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col9 decl" id="9sz" title='sz' data-type='size_t' data-ref="9sz" data-ref-filename="9sz">sz</dfn>;</td></tr>
<tr><th id="49">49</th><td>  <em>const</em> <em>char</em> *<dfn class="local col0 decl" id="10p" title='p' data-type='const char *' data-ref="10p" data-ref-filename="10p">p</dfn> = <a class="local col8 ref" href="#8ls" title='ls' data-ref="8ls" data-ref-filename="8ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::rfunc" title='LexState::rfunc' data-ref="LexState::rfunc" data-ref-filename="LexState..rfunc">rfunc</a>(<a class="local col8 ref" href="#8ls" title='ls' data-ref="8ls" data-ref-filename="8ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::L" title='LexState::L' data-ref="LexState::L" data-ref-filename="LexState..L">L</a>, <a class="local col8 ref" href="#8ls" title='ls' data-ref="8ls" data-ref-filename="8ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::rdata" title='LexState::rdata' data-ref="LexState::rdata" data-ref-filename="LexState..rdata">rdata</a>, &amp;<a class="local col9 ref" href="#9sz" title='sz' data-ref="9sz" data-ref-filename="9sz">sz</a>);</td></tr>
<tr><th id="50">50</th><td>  <b>if</b> (<a class="local col0 ref" href="#10p" title='p' data-ref="10p" data-ref-filename="10p">p</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> || <a class="local col9 ref" href="#9sz" title='sz' data-ref="9sz" data-ref-filename="9sz">sz</a> == <var>0</var>) <b>return</b> <a class="macro" href="#42" title="(-1)" data-ref="_M/LEX_EOF">LEX_EOF</a>;</td></tr>
<tr><th id="51">51</th><td>  <b>if</b> (<a class="local col9 ref" href="#9sz" title='sz' data-ref="9sz" data-ref-filename="9sz">sz</a> &gt;= <a class="macro" href="lj_def.h.html#55" title="0x7fffff00" data-ref="_M/LJ_MAX_BUF">LJ_MAX_BUF</a>) {</td></tr>
<tr><th id="52">52</th><td>    <b>if</b> (<a class="local col9 ref" href="#9sz" title='sz' data-ref="9sz" data-ref-filename="9sz">sz</a> != ~(<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span>)<var>0</var>) <a class="ref fn" href="lj_err.h.html#lj_err_mem" title='lj_err_mem' data-ref="lj_err_mem" data-ref-filename="lj_err_mem">lj_err_mem</a>(<a class="local col8 ref" href="#8ls" title='ls' data-ref="8ls" data-ref-filename="8ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::L" title='LexState::L' data-ref="LexState::L" data-ref-filename="LexState..L">L</a>);</td></tr>
<tr><th id="53">53</th><td>    <a class="local col9 ref" href="#9sz" title='sz' data-ref="9sz" data-ref-filename="9sz">sz</a> = ~(<a class="typedef" href="../include/stdint.h.html#uintptr_t" title='uintptr_t' data-type='unsigned long' data-ref="uintptr_t" data-ref-filename="uintptr_t">uintptr_t</a>)<var>0</var> - (<a class="typedef" href="../include/stdint.h.html#uintptr_t" title='uintptr_t' data-type='unsigned long' data-ref="uintptr_t" data-ref-filename="uintptr_t">uintptr_t</a>)<a class="local col0 ref" href="#10p" title='p' data-ref="10p" data-ref-filename="10p">p</a>;</td></tr>
<tr><th id="54">54</th><td>    <b>if</b> (<a class="local col9 ref" href="#9sz" title='sz' data-ref="9sz" data-ref-filename="9sz">sz</a> &gt;= <a class="macro" href="lj_def.h.html#55" title="0x7fffff00" data-ref="_M/LJ_MAX_BUF">LJ_MAX_BUF</a>) <a class="local col9 ref" href="#9sz" title='sz' data-ref="9sz" data-ref-filename="9sz">sz</a> = <a class="macro" href="lj_def.h.html#55" title="0x7fffff00" data-ref="_M/LJ_MAX_BUF">LJ_MAX_BUF</a>-<var>1</var>;</td></tr>
<tr><th id="55">55</th><td>    <a class="local col8 ref" href="#8ls" title='ls' data-ref="8ls" data-ref-filename="8ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::endmark" title='LexState::endmark' data-ref="LexState::endmark" data-ref-filename="LexState..endmark">endmark</a> = <var>1</var>;</td></tr>
<tr><th id="56">56</th><td>  }</td></tr>
<tr><th id="57">57</th><td>  <a class="local col8 ref" href="#8ls" title='ls' data-ref="8ls" data-ref-filename="8ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::pe" title='LexState::pe' data-ref="LexState::pe" data-ref-filename="LexState..pe">pe</a> = <a class="local col0 ref" href="#10p" title='p' data-ref="10p" data-ref-filename="10p">p</a> + <a class="local col9 ref" href="#9sz" title='sz' data-ref="9sz" data-ref-filename="9sz">sz</a>;</td></tr>
<tr><th id="58">58</th><td>  <a class="local col8 ref" href="#8ls" title='ls' data-ref="8ls" data-ref-filename="8ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::p" title='LexState::p' data-ref="LexState::p" data-ref-filename="LexState..p">p</a> = <a class="local col0 ref" href="#10p" title='p' data-ref="10p" data-ref-filename="10p">p</a> + <var>1</var>;</td></tr>
<tr><th id="59">59</th><td>  <b>return</b> (<a class="typedef" href="lj_lex.h.html#LexChar" title='LexChar' data-type='int' data-ref="LexChar" data-ref-filename="LexChar">LexChar</a>)(<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a>)<a class="local col0 ref" href="#10p" title='p' data-ref="10p" data-ref-filename="10p">p</a>[<var>0</var>];</td></tr>
<tr><th id="60">60</th><td>}</td></tr>
<tr><th id="61">61</th><td></td></tr>
<tr><th id="62">62</th><td><i  data-doc="lex_next">/* Get next character. */</i></td></tr>
<tr><th id="63">63</th><td><em>static</em> <a class="macro" href="lj_def.h.html#128" title="inline __attribute__((always_inline))" data-ref="_M/LJ_AINLINE">LJ_AINLINE</a> <a class="typedef" href="lj_lex.h.html#LexChar" title='LexChar' data-type='int' data-ref="LexChar" data-ref-filename="LexChar">LexChar</a> <dfn class="tu decl def fn" id="lex_next" title='lex_next' data-type='LexChar lex_next(LexState * ls)' data-ref="lex_next" data-ref-filename="lex_next">lex_next</dfn>(<a class="typedef" href="lj_lex.h.html#LexState" title='LexState' data-type='struct LexState' data-ref="LexState" data-ref-filename="LexState">LexState</a> *<dfn class="local col1 decl" id="11ls" title='ls' data-type='LexState *' data-ref="11ls" data-ref-filename="11ls">ls</dfn>)</td></tr>
<tr><th id="64">64</th><td>{</td></tr>
<tr><th id="65">65</th><td>  <b>return</b> (<a class="local col1 ref" href="#11ls" title='ls' data-ref="11ls" data-ref-filename="11ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> = <a class="local col1 ref" href="#11ls" title='ls' data-ref="11ls" data-ref-filename="11ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::p" title='LexState::p' data-ref="LexState::p" data-ref-filename="LexState..p">p</a> &lt; <a class="local col1 ref" href="#11ls" title='ls' data-ref="11ls" data-ref-filename="11ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::pe" title='LexState::pe' data-ref="LexState::pe" data-ref-filename="LexState..pe">pe</a> ? (<a class="typedef" href="lj_lex.h.html#LexChar" title='LexChar' data-type='int' data-ref="LexChar" data-ref-filename="LexChar">LexChar</a>)(<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a>)*<a class="local col1 ref" href="#11ls" title='ls' data-ref="11ls" data-ref-filename="11ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::p" title='LexState::p' data-ref="LexState::p" data-ref-filename="LexState..p">p</a>++ : <a class="tu ref fn" href="#lex_more" title='lex_more' data-use='c' data-ref="lex_more" data-ref-filename="lex_more">lex_more</a>(<a class="local col1 ref" href="#11ls" title='ls' data-ref="11ls" data-ref-filename="11ls">ls</a>));</td></tr>
<tr><th id="66">66</th><td>}</td></tr>
<tr><th id="67">67</th><td></td></tr>
<tr><th id="68">68</th><td><i  data-doc="lex_save">/* Save character. */</i></td></tr>
<tr><th id="69">69</th><td><em>static</em> <a class="macro" href="lj_def.h.html#128" title="inline __attribute__((always_inline))" data-ref="_M/LJ_AINLINE">LJ_AINLINE</a> <em>void</em> <dfn class="tu decl def fn" id="lex_save" title='lex_save' data-type='void lex_save(LexState * ls, LexChar c)' data-ref="lex_save" data-ref-filename="lex_save">lex_save</dfn>(<a class="typedef" href="lj_lex.h.html#LexState" title='LexState' data-type='struct LexState' data-ref="LexState" data-ref-filename="LexState">LexState</a> *<dfn class="local col2 decl" id="12ls" title='ls' data-type='LexState *' data-ref="12ls" data-ref-filename="12ls">ls</dfn>, <a class="typedef" href="lj_lex.h.html#LexChar" title='LexChar' data-type='int' data-ref="LexChar" data-ref-filename="LexChar">LexChar</a> <dfn class="local col3 decl" id="13c" title='c' data-type='LexChar' data-ref="13c" data-ref-filename="13c">c</dfn>)</td></tr>
<tr><th id="70">70</th><td>{</td></tr>
<tr><th id="71">71</th><td>  <a class="ref fn" href="lj_buf.h.html#lj_buf_putb" title='lj_buf_putb' data-ref="lj_buf_putb" data-ref-filename="lj_buf_putb">lj_buf_putb</a>(&amp;<a class="local col2 ref" href="#12ls" title='ls' data-ref="12ls" data-ref-filename="12ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::sb" title='LexState::sb' data-ref="LexState::sb" data-ref-filename="LexState..sb">sb</a>, <a class="local col3 ref" href="#13c" title='c' data-ref="13c" data-ref-filename="13c">c</a>);</td></tr>
<tr><th id="72">72</th><td>}</td></tr>
<tr><th id="73">73</th><td></td></tr>
<tr><th id="74">74</th><td><i  data-doc="lex_savenext">/* Save previous character and get next character. */</i></td></tr>
<tr><th id="75">75</th><td><em>static</em> <a class="macro" href="lj_def.h.html#128" title="inline __attribute__((always_inline))" data-ref="_M/LJ_AINLINE">LJ_AINLINE</a> <a class="typedef" href="lj_lex.h.html#LexChar" title='LexChar' data-type='int' data-ref="LexChar" data-ref-filename="LexChar">LexChar</a> <dfn class="tu decl def fn" id="lex_savenext" title='lex_savenext' data-type='LexChar lex_savenext(LexState * ls)' data-ref="lex_savenext" data-ref-filename="lex_savenext">lex_savenext</dfn>(<a class="typedef" href="lj_lex.h.html#LexState" title='LexState' data-type='struct LexState' data-ref="LexState" data-ref-filename="LexState">LexState</a> *<dfn class="local col4 decl" id="14ls" title='ls' data-type='LexState *' data-ref="14ls" data-ref-filename="14ls">ls</dfn>)</td></tr>
<tr><th id="76">76</th><td>{</td></tr>
<tr><th id="77">77</th><td>  <a class="tu ref fn" href="#lex_save" title='lex_save' data-use='c' data-ref="lex_save" data-ref-filename="lex_save">lex_save</a>(<a class="local col4 ref" href="#14ls" title='ls' data-ref="14ls" data-ref-filename="14ls">ls</a>, <a class="local col4 ref" href="#14ls" title='ls' data-ref="14ls" data-ref-filename="14ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a>);</td></tr>
<tr><th id="78">78</th><td>  <b>return</b> <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col4 ref" href="#14ls" title='ls' data-ref="14ls" data-ref-filename="14ls">ls</a>);</td></tr>
<tr><th id="79">79</th><td>}</td></tr>
<tr><th id="80">80</th><td></td></tr>
<tr><th id="81">81</th><td><i  data-doc="lex_newline">/* Skip line break. Handles "\n", "\r", "\r\n" or "\n\r". */</i></td></tr>
<tr><th id="82">82</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="lex_newline" title='lex_newline' data-type='void lex_newline(LexState * ls)' data-ref="lex_newline" data-ref-filename="lex_newline">lex_newline</dfn>(<a class="typedef" href="lj_lex.h.html#LexState" title='LexState' data-type='struct LexState' data-ref="LexState" data-ref-filename="LexState">LexState</a> *<dfn class="local col5 decl" id="15ls" title='ls' data-type='LexState *' data-ref="15ls" data-ref-filename="15ls">ls</dfn>)</td></tr>
<tr><th id="83">83</th><td>{</td></tr>
<tr><th id="84">84</th><td>  <a class="typedef" href="lj_lex.h.html#LexChar" title='LexChar' data-type='int' data-ref="LexChar" data-ref-filename="LexChar">LexChar</a> <dfn class="local col6 decl" id="16old" title='old' data-type='LexChar' data-ref="16old" data-ref-filename="16old">old</dfn> = <a class="local col5 ref" href="#15ls" title='ls' data-ref="15ls" data-ref-filename="15ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a>;</td></tr>
<tr><th id="85">85</th><td>  <a class="macro" href="lj_lex.h.html#90" title="((void)ls)" data-ref="_M/lj_assertLS">lj_assertLS</a>(lex_iseol(ls), <q>"bad usage"</q>);</td></tr>
<tr><th id="86">86</th><td>  <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col5 ref" href="#15ls" title='ls' data-ref="15ls" data-ref-filename="15ls">ls</a>);  <i>/* Skip "\n" or "\r". */</i></td></tr>
<tr><th id="87">87</th><td>  <b>if</b> (<a class="macro" href="#43" title="(ls-&gt;c == &apos;\n&apos; || ls-&gt;c == &apos;\r&apos;)" data-ref="_M/lex_iseol">lex_iseol</a>(<a class="local col5 ref" href="#15ls" title='ls' data-ref="15ls" data-ref-filename="15ls">ls</a>) &amp;&amp; <a class="local col5 ref" href="#15ls" title='ls' data-ref="15ls" data-ref-filename="15ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> != <a class="local col6 ref" href="#16old" title='old' data-ref="16old" data-ref-filename="16old">old</a>) <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col5 ref" href="#15ls" title='ls' data-ref="15ls" data-ref-filename="15ls">ls</a>);  <i>/* Skip "\n\r" or "\r\n". */</i></td></tr>
<tr><th id="88">88</th><td>  <b>if</b> (++<a class="local col5 ref" href="#15ls" title='ls' data-ref="15ls" data-ref-filename="15ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::linenumber" title='LexState::linenumber' data-ref="LexState::linenumber" data-ref-filename="LexState..linenumber">linenumber</a> &gt;= <a class="macro" href="lj_def.h.html#64" title="0x7fffff00" data-ref="_M/LJ_MAX_LINE">LJ_MAX_LINE</a>)</td></tr>
<tr><th id="89">89</th><td>    <a class="ref fn" href="#lj_lex_error" title='lj_lex_error' data-ref="lj_lex_error" data-ref-filename="lj_lex_error">lj_lex_error</a>(<a class="local col5 ref" href="#15ls" title='ls' data-ref="15ls" data-ref-filename="15ls">ls</a>, <a class="local col5 ref" href="#15ls" title='ls' data-ref="15ls" data-ref-filename="15ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::tok" title='LexState::tok' data-ref="LexState::tok" data-ref-filename="LexState..tok">tok</a>, <a class="enum" href="lj_errmsg.h.html#116" title='LJ_ERR_XLINES' data-ref="LJ_ERR_XLINES" data-ref-filename="LJ_ERR_XLINES">LJ_ERR_XLINES</a>);</td></tr>
<tr><th id="90">90</th><td>}</td></tr>
<tr><th id="91">91</th><td></td></tr>
<tr><th id="92">92</th><td><i>/* -- Scanner for terminals ----------------------------------------------- */</i></td></tr>
<tr><th id="93">93</th><td></td></tr>
<tr><th id="94">94</th><td><i  data-doc="lex_number">/* Parse a number literal. */</i></td></tr>
<tr><th id="95">95</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="lex_number" title='lex_number' data-type='void lex_number(LexState * ls, TValue * tv)' data-ref="lex_number" data-ref-filename="lex_number">lex_number</dfn>(<a class="typedef" href="lj_lex.h.html#LexState" title='LexState' data-type='struct LexState' data-ref="LexState" data-ref-filename="LexState">LexState</a> *<dfn class="local col7 decl" id="17ls" title='ls' data-type='LexState *' data-ref="17ls" data-ref-filename="17ls">ls</dfn>, <a class="typedef" href="lj_obj.h.html#TValue" title='TValue' data-type='union TValue' data-ref="TValue" data-ref-filename="TValue">TValue</a> *<dfn class="local col8 decl" id="18tv" title='tv' data-type='TValue *' data-ref="18tv" data-ref-filename="18tv">tv</dfn>)</td></tr>
<tr><th id="96">96</th><td>{</td></tr>
<tr><th id="97">97</th><td>  <a class="typedef" href="lj_strscan.h.html#StrScanFmt" title='StrScanFmt' data-type='enum StrScanFmt' data-ref="StrScanFmt" data-ref-filename="StrScanFmt">StrScanFmt</a> <dfn class="local col9 decl" id="19fmt" title='fmt' data-type='StrScanFmt' data-ref="19fmt" data-ref-filename="19fmt">fmt</dfn>;</td></tr>
<tr><th id="98">98</th><td>  <a class="typedef" href="lj_lex.h.html#LexChar" title='LexChar' data-type='int' data-ref="LexChar" data-ref-filename="LexChar">LexChar</a> <dfn class="local col0 decl" id="20c" title='c' data-type='LexChar' data-ref="20c" data-ref-filename="20c">c</dfn>, <dfn class="local col1 decl" id="21xp" title='xp' data-type='LexChar' data-ref="21xp" data-ref-filename="21xp">xp</dfn> = <kbd>'e'</kbd>;</td></tr>
<tr><th id="99">99</th><td>  <a class="macro" href="lj_lex.h.html#90" title="((void)ls)" data-ref="_M/lj_assertLS">lj_assertLS</a>(lj_char_isdigit(ls-&gt;c), <q>"bad usage"</q>);</td></tr>
<tr><th id="100">100</th><td>  <b>if</b> ((<a class="local col0 ref" href="#20c" title='c' data-ref="20c" data-ref-filename="20c">c</a> = <a class="local col7 ref" href="#17ls" title='ls' data-ref="17ls" data-ref-filename="17ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a>) == <kbd>'0'</kbd> &amp;&amp; (<a class="tu ref fn" href="#lex_savenext" title='lex_savenext' data-use='c' data-ref="lex_savenext" data-ref-filename="lex_savenext">lex_savenext</a>(<a class="local col7 ref" href="#17ls" title='ls' data-ref="17ls" data-ref-filename="17ls">ls</a>) | <var>0x20</var>) == <kbd>'x'</kbd>)</td></tr>
<tr><th id="101">101</th><td>    <a class="local col1 ref" href="#21xp" title='xp' data-ref="21xp" data-ref-filename="21xp">xp</a> = <kbd>'p'</kbd>;</td></tr>
<tr><th id="102">102</th><td>  <b>while</b> (<a class="macro" href="lj_char.h.html#32" title="((lj_char_bits+1)[((ls-&gt;c))] &amp; 0x80)" data-ref="_M/lj_char_isident">lj_char_isident</a>(<a class="local col7 ref" href="#17ls" title='ls' data-ref="17ls" data-ref-filename="17ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a>) || <a class="local col7 ref" href="#17ls" title='ls' data-ref="17ls" data-ref-filename="17ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> == <kbd>'.'</kbd> ||</td></tr>
<tr><th id="103">103</th><td>	 ((<a class="local col7 ref" href="#17ls" title='ls' data-ref="17ls" data-ref-filename="17ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> == <kbd>'-'</kbd> || <a class="local col7 ref" href="#17ls" title='ls' data-ref="17ls" data-ref-filename="17ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> == <kbd>'+'</kbd>) &amp;&amp; (<a class="local col0 ref" href="#20c" title='c' data-ref="20c" data-ref-filename="20c">c</a> | <var>0x20</var>) == <a class="local col1 ref" href="#21xp" title='xp' data-ref="21xp" data-ref-filename="21xp">xp</a>)) {</td></tr>
<tr><th id="104">104</th><td>    <a class="local col0 ref" href="#20c" title='c' data-ref="20c" data-ref-filename="20c">c</a> = <a class="local col7 ref" href="#17ls" title='ls' data-ref="17ls" data-ref-filename="17ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a>;</td></tr>
<tr><th id="105">105</th><td>    <a class="tu ref fn" href="#lex_savenext" title='lex_savenext' data-use='c' data-ref="lex_savenext" data-ref-filename="lex_savenext">lex_savenext</a>(<a class="local col7 ref" href="#17ls" title='ls' data-ref="17ls" data-ref-filename="17ls">ls</a>);</td></tr>
<tr><th id="106">106</th><td>  }</td></tr>
<tr><th id="107">107</th><td>  <a class="tu ref fn" href="#lex_save" title='lex_save' data-use='c' data-ref="lex_save" data-ref-filename="lex_save">lex_save</a>(<a class="local col7 ref" href="#17ls" title='ls' data-ref="17ls" data-ref-filename="17ls">ls</a>, <kbd>'\0'</kbd>);</td></tr>
<tr><th id="108">108</th><td>  <a class="local col9 ref" href="#19fmt" title='fmt' data-ref="19fmt" data-ref-filename="19fmt">fmt</a> = <a class="ref fn" href="lj_strscan.h.html#lj_strscan_scan" title='lj_strscan_scan' data-ref="lj_strscan_scan" data-ref-filename="lj_strscan_scan">lj_strscan_scan</a>((<em>const</em> <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a> *)<a class="local col7 ref" href="#17ls" title='ls' data-ref="17ls" data-ref-filename="17ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::sb" title='LexState::sb' data-ref="LexState::sb" data-ref-filename="LexState..sb">sb</a>.<a class="ref field" href="lj_obj.h.html#162" title='SBuf::b' data-ref="SBuf::b" data-ref-filename="SBuf..b">b</a>, <a class="macro" href="lj_buf.h.html#35" title="((MSize)((&amp;ls-&gt;sb)-&gt;w - (&amp;ls-&gt;sb)-&gt;b))" data-ref="_M/sbuflen">sbuflen</a>(&amp;<a class="local col7 ref" href="#17ls" title='ls' data-ref="17ls" data-ref-filename="17ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::sb" title='LexState::sb' data-ref="LexState::sb" data-ref-filename="LexState..sb">sb</a>)-<var>1</var>, <a class="local col8 ref" href="#18tv" title='tv' data-ref="18tv" data-ref-filename="18tv">tv</a>,</td></tr>
<tr><th id="109">109</th><td>	  (<a class="macro" href="lj_arch.h.html#513" title="0" data-ref="_M/LJ_DUALNUM">LJ_DUALNUM</a> ? <a class="macro" href="lj_strscan.h.html#12" title="0x01" data-ref="_M/STRSCAN_OPT_TOINT">STRSCAN_OPT_TOINT</a> : <a class="macro" href="lj_strscan.h.html#13" title="0x02" data-ref="_M/STRSCAN_OPT_TONUM">STRSCAN_OPT_TONUM</a>) |</td></tr>
<tr><th id="110">110</th><td>	  (<a class="macro" href="lj_arch.h.html#549" title="1" data-ref="_M/LJ_HASFFI">LJ_HASFFI</a> ? (<a class="macro" href="lj_strscan.h.html#15" title="0x08" data-ref="_M/STRSCAN_OPT_LL">STRSCAN_OPT_LL</a>|<a class="macro" href="lj_strscan.h.html#14" title="0x04" data-ref="_M/STRSCAN_OPT_IMAG">STRSCAN_OPT_IMAG</a>) : <var>0</var>));</td></tr>
<tr><th id="111">111</th><td>  <b>if</b> (<a class="macro" href="lj_arch.h.html#513" title="0" data-ref="_M/LJ_DUALNUM">LJ_DUALNUM</a> &amp;&amp; <a class="local col9 ref" href="#19fmt" title='fmt' data-ref="19fmt" data-ref-filename="19fmt">fmt</a> == <a class="enum" href="lj_strscan.h.html#STRSCAN_INT" title='STRSCAN_INT' data-ref="STRSCAN_INT" data-ref-filename="STRSCAN_INT">STRSCAN_INT</a>) {</td></tr>
<tr><th id="112">112</th><td>    <a class="macro" href="lj_obj.h.html#864" title="((tv)-&gt;it = (((~13u)) &lt;&lt; 15))" data-ref="_M/setitype">setitype</a>(<a class="local col8 ref" href="#18tv" title='tv' data-ref="18tv" data-ref-filename="18tv">tv</a>, <a class="macro" href="lj_obj.h.html#280" title="(~13u)" data-ref="_M/LJ_TISNUM">LJ_TISNUM</a>);</td></tr>
<tr><th id="113">113</th><td>  } <b>else</b> <b>if</b> (<a class="local col9 ref" href="#19fmt" title='fmt' data-ref="19fmt" data-ref-filename="19fmt">fmt</a> == <a class="enum" href="lj_strscan.h.html#STRSCAN_NUM" title='STRSCAN_NUM' data-ref="STRSCAN_NUM" data-ref-filename="STRSCAN_NUM">STRSCAN_NUM</a>) {</td></tr>
<tr><th id="114">114</th><td>    <i>/* Already in correct format. */</i></td></tr>
<tr><th id="115">115</th><td><u>#<span data-ppcond="115">if</span> <a class="macro" href="lj_arch.h.html#549" title="1" data-ref="_M/LJ_HASFFI">LJ_HASFFI</a></u></td></tr>
<tr><th id="116">116</th><td>  } <b>else</b> <b>if</b> (<a class="local col9 ref" href="#19fmt" title='fmt' data-ref="19fmt" data-ref-filename="19fmt">fmt</a> != <a class="enum" href="lj_strscan.h.html#STRSCAN_ERROR" title='STRSCAN_ERROR' data-ref="STRSCAN_ERROR" data-ref-filename="STRSCAN_ERROR">STRSCAN_ERROR</a>) {</td></tr>
<tr><th id="117">117</th><td>    <a class="typedef" href="lua.h.html#lua_State" title='lua_State' data-type='struct lua_State' data-ref="lua_State" data-ref-filename="lua_State">lua_State</a> *<dfn class="local col2 decl" id="22L" title='L' data-type='lua_State *' data-ref="22L" data-ref-filename="22L">L</dfn> = <a class="local col7 ref" href="#17ls" title='ls' data-ref="17ls" data-ref-filename="17ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::L" title='LexState::L' data-ref="LexState::L" data-ref-filename="LexState..L">L</a>;</td></tr>
<tr><th id="118">118</th><td>    <a class="typedef" href="lj_obj.h.html#GCcdata" title='GCcdata' data-type='struct GCcdata' data-ref="GCcdata" data-ref-filename="GCcdata">GCcdata</a> *<dfn class="local col3 decl" id="23cd" title='cd' data-type='GCcdata *' data-ref="23cd" data-ref-filename="23cd">cd</dfn>;</td></tr>
<tr><th id="119">119</th><td>    <a class="macro" href="lj_lex.h.html#90" title="((void)ls)" data-ref="_M/lj_assertLS">lj_assertLS</a>(fmt == STRSCAN_I64 || fmt == STRSCAN_U64 || fmt == STRSCAN_IMAG,</td></tr>
<tr><th id="120">120</th><td>		<q>"unexpected number format %d"</q>, fmt);</td></tr>
<tr><th id="121">121</th><td>    <a class="macro" href="lj_ctype.h.html#394" title="do { if (!(((CTState *)(void *)(((((global_State *)(void *)(L-&gt;glref).ptr64)))-&gt;ctype_state).ptr64))) { ptrdiff_t oldtop = (char *)L-&gt;top - ((char *)(void *)(L-&gt;stack).ptr64); luaopen_ffi(L); L-&gt;top = (TValue *)(((char *)(void *)(L-&gt;stack).ptr64) + oldtop); } } while (0)" data-ref="_M/ctype_loadffi">ctype_loadffi</a>(<a class="local col2 ref" href="#22L" title='L' data-ref="22L" data-ref-filename="22L">L</a>);</td></tr>
<tr><th id="122">122</th><td>    <b>if</b> (<a class="local col9 ref" href="#19fmt" title='fmt' data-ref="19fmt" data-ref-filename="19fmt">fmt</a> == <a class="enum" href="lj_strscan.h.html#STRSCAN_IMAG" title='STRSCAN_IMAG' data-ref="STRSCAN_IMAG" data-ref-filename="STRSCAN_IMAG">STRSCAN_IMAG</a>) {</td></tr>
<tr><th id="123">123</th><td>      <a class="local col3 ref" href="#23cd" title='cd' data-ref="23cd" data-ref-filename="23cd">cd</a> = <a class="ref fn" href="lj_cdata.h.html#lj_cdata_new_" title='lj_cdata_new_' data-ref="lj_cdata_new_" data-ref-filename="lj_cdata_new_">lj_cdata_new_</a>(<a class="local col2 ref" href="#22L" title='L' data-ref="22L" data-ref-filename="22L">L</a>, <a class="enum" href="lj_ctype.h.html#310" title='CTID_COMPLEX_DOUBLE' data-ref="CTID_COMPLEX_DOUBLE" data-ref-filename="CTID_COMPLEX_DOUBLE">CTID_COMPLEX_DOUBLE</a>, <var>2</var>*<b>sizeof</b>(<em>double</em>));</td></tr>
<tr><th id="124">124</th><td>      ((<em>double</em> *)<a class="macro" href="lj_obj.h.html#357" title="((void *)((cd)+1))" data-ref="_M/cdataptr">cdataptr</a>(<a class="local col3 ref" href="#23cd" title='cd' data-ref="23cd" data-ref-filename="23cd">cd</a>))[<var>0</var>] = <var>0</var>;</td></tr>
<tr><th id="125">125</th><td>      ((<em>double</em> *)<a class="macro" href="lj_obj.h.html#357" title="((void *)((cd)+1))" data-ref="_M/cdataptr">cdataptr</a>(<a class="local col3 ref" href="#23cd" title='cd' data-ref="23cd" data-ref-filename="23cd">cd</a>))[<var>1</var>] = <a class="macro" href="lj_obj.h.html#859" title="((tv)-&gt;n)" data-ref="_M/numV">numV</a>(<a class="local col8 ref" href="#18tv" title='tv' data-ref="18tv" data-ref-filename="18tv">tv</a>);</td></tr>
<tr><th id="126">126</th><td>    } <b>else</b> {</td></tr>
<tr><th id="127">127</th><td>      <a class="local col3 ref" href="#23cd" title='cd' data-ref="23cd" data-ref-filename="23cd">cd</a> = <a class="ref fn" href="lj_cdata.h.html#lj_cdata_new_" title='lj_cdata_new_' data-ref="lj_cdata_new_" data-ref-filename="lj_cdata_new_">lj_cdata_new_</a>(<a class="local col2 ref" href="#22L" title='L' data-ref="22L" data-ref-filename="22L">L</a>, <a class="local col9 ref" href="#19fmt" title='fmt' data-ref="19fmt" data-ref-filename="19fmt">fmt</a>==<a class="enum" href="lj_strscan.h.html#STRSCAN_I64" title='STRSCAN_I64' data-ref="STRSCAN_I64" data-ref-filename="STRSCAN_I64">STRSCAN_I64</a> ? <a class="enum" href="lj_ctype.h.html#310" title='CTID_INT64' data-ref="CTID_INT64" data-ref-filename="CTID_INT64">CTID_INT64</a> : <a class="enum" href="lj_ctype.h.html#310" title='CTID_UINT64' data-ref="CTID_UINT64" data-ref-filename="CTID_UINT64">CTID_UINT64</a>, <var>8</var>);</td></tr>
<tr><th id="128">128</th><td>      *(<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> *)<a class="macro" href="lj_obj.h.html#357" title="((void *)((cd)+1))" data-ref="_M/cdataptr">cdataptr</a>(<a class="local col3 ref" href="#23cd" title='cd' data-ref="23cd" data-ref-filename="23cd">cd</a>) = <a class="local col8 ref" href="#18tv" title='tv' data-ref="18tv" data-ref-filename="18tv">tv</a>-&gt;<a class="ref field" href="lj_obj.h.html#TValue::u64" title='TValue::u64' data-ref="TValue::u64" data-ref-filename="TValue..u64">u64</a>;</td></tr>
<tr><th id="129">129</th><td>    }</td></tr>
<tr><th id="130">130</th><td>    <a class="ref fn" href="lj_parse.h.html#lj_parse_keepcdata" title='lj_parse_keepcdata' data-ref="lj_parse_keepcdata" data-ref-filename="lj_parse_keepcdata">lj_parse_keepcdata</a>(<a class="local col7 ref" href="#17ls" title='ls' data-ref="17ls" data-ref-filename="17ls">ls</a>, <a class="local col8 ref" href="#18tv" title='tv' data-ref="18tv" data-ref-filename="18tv">tv</a>, <a class="local col3 ref" href="#23cd" title='cd' data-ref="23cd" data-ref-filename="23cd">cd</a>);</td></tr>
<tr><th id="131">131</th><td><u>#<span data-ppcond="115">endif</span></u></td></tr>
<tr><th id="132">132</th><td>  } <b>else</b> {</td></tr>
<tr><th id="133">133</th><td>    <a class="macro" href="lj_lex.h.html#90" title="((void)ls)" data-ref="_M/lj_assertLS">lj_assertLS</a>(fmt == STRSCAN_ERROR,</td></tr>
<tr><th id="134">134</th><td>		<q>"unexpected number format %d"</q>, fmt);</td></tr>
<tr><th id="135">135</th><td>    <a class="ref fn" href="#lj_lex_error" title='lj_lex_error' data-ref="lj_lex_error" data-ref-filename="lj_lex_error">lj_lex_error</a>(<a class="local col7 ref" href="#17ls" title='ls' data-ref="17ls" data-ref-filename="17ls">ls</a>, <a class="enum" href="lj_lex.h.html#27" title='TK_number' data-ref="TK_number" data-ref-filename="TK_number">TK_number</a>, <a class="enum" href="lj_errmsg.h.html#118" title='LJ_ERR_XNUMBER' data-ref="LJ_ERR_XNUMBER" data-ref-filename="LJ_ERR_XNUMBER">LJ_ERR_XNUMBER</a>);</td></tr>
<tr><th id="136">136</th><td>  }</td></tr>
<tr><th id="137">137</th><td>}</td></tr>
<tr><th id="138">138</th><td></td></tr>
<tr><th id="139">139</th><td><i  data-doc="lex_skipeq">/* Skip equal signs for "[=...=[" and "]=...=]" and return their count. */</i></td></tr>
<tr><th id="140">140</th><td><em>static</em> <em>int</em> <dfn class="tu decl def fn" id="lex_skipeq" title='lex_skipeq' data-type='int lex_skipeq(LexState * ls)' data-ref="lex_skipeq" data-ref-filename="lex_skipeq">lex_skipeq</dfn>(<a class="typedef" href="lj_lex.h.html#LexState" title='LexState' data-type='struct LexState' data-ref="LexState" data-ref-filename="LexState">LexState</a> *<dfn class="local col4 decl" id="24ls" title='ls' data-type='LexState *' data-ref="24ls" data-ref-filename="24ls">ls</dfn>)</td></tr>
<tr><th id="141">141</th><td>{</td></tr>
<tr><th id="142">142</th><td>  <em>int</em> <dfn class="local col5 decl" id="25count" title='count' data-type='int' data-ref="25count" data-ref-filename="25count">count</dfn> = <var>0</var>;</td></tr>
<tr><th id="143">143</th><td>  <a class="typedef" href="lj_lex.h.html#LexChar" title='LexChar' data-type='int' data-ref="LexChar" data-ref-filename="LexChar">LexChar</a> <dfn class="local col6 decl" id="26s" title='s' data-type='LexChar' data-ref="26s" data-ref-filename="26s">s</dfn> = <a class="local col4 ref" href="#24ls" title='ls' data-ref="24ls" data-ref-filename="24ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a>;</td></tr>
<tr><th id="144">144</th><td>  <a class="macro" href="lj_lex.h.html#90" title="((void)ls)" data-ref="_M/lj_assertLS">lj_assertLS</a>(s == <kbd>'['</kbd> || s == <kbd>']'</kbd>, <q>"bad usage"</q>);</td></tr>
<tr><th id="145">145</th><td>  <b>while</b> (<a class="tu ref fn" href="#lex_savenext" title='lex_savenext' data-use='c' data-ref="lex_savenext" data-ref-filename="lex_savenext">lex_savenext</a>(<a class="local col4 ref" href="#24ls" title='ls' data-ref="24ls" data-ref-filename="24ls">ls</a>) == <kbd>'='</kbd> &amp;&amp; <a class="local col5 ref" href="#25count" title='count' data-ref="25count" data-ref-filename="25count">count</a> &lt; <var>0x20000000</var>)</td></tr>
<tr><th id="146">146</th><td>    <a class="local col5 ref" href="#25count" title='count' data-ref="25count" data-ref-filename="25count">count</a>++;</td></tr>
<tr><th id="147">147</th><td>  <b>return</b> (<a class="local col4 ref" href="#24ls" title='ls' data-ref="24ls" data-ref-filename="24ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> == <a class="local col6 ref" href="#26s" title='s' data-ref="26s" data-ref-filename="26s">s</a>) ? <a class="local col5 ref" href="#25count" title='count' data-ref="25count" data-ref-filename="25count">count</a> : (-<a class="local col5 ref" href="#25count" title='count' data-ref="25count" data-ref-filename="25count">count</a>) - <var>1</var>;</td></tr>
<tr><th id="148">148</th><td>}</td></tr>
<tr><th id="149">149</th><td></td></tr>
<tr><th id="150">150</th><td><i  data-doc="lex_longstring">/* Parse a long string or long comment (tv set to NULL). */</i></td></tr>
<tr><th id="151">151</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="lex_longstring" title='lex_longstring' data-type='void lex_longstring(LexState * ls, TValue * tv, int sep)' data-ref="lex_longstring" data-ref-filename="lex_longstring">lex_longstring</dfn>(<a class="typedef" href="lj_lex.h.html#LexState" title='LexState' data-type='struct LexState' data-ref="LexState" data-ref-filename="LexState">LexState</a> *<dfn class="local col7 decl" id="27ls" title='ls' data-type='LexState *' data-ref="27ls" data-ref-filename="27ls">ls</dfn>, <a class="typedef" href="lj_obj.h.html#TValue" title='TValue' data-type='union TValue' data-ref="TValue" data-ref-filename="TValue">TValue</a> *<dfn class="local col8 decl" id="28tv" title='tv' data-type='TValue *' data-ref="28tv" data-ref-filename="28tv">tv</dfn>, <em>int</em> <dfn class="local col9 decl" id="29sep" title='sep' data-type='int' data-ref="29sep" data-ref-filename="29sep">sep</dfn>)</td></tr>
<tr><th id="152">152</th><td>{</td></tr>
<tr><th id="153">153</th><td>  <a class="tu ref fn" href="#lex_savenext" title='lex_savenext' data-use='c' data-ref="lex_savenext" data-ref-filename="lex_savenext">lex_savenext</a>(<a class="local col7 ref" href="#27ls" title='ls' data-ref="27ls" data-ref-filename="27ls">ls</a>);  <i>/* Skip second '['. */</i></td></tr>
<tr><th id="154">154</th><td>  <b>if</b> (<a class="macro" href="#43" title="(ls-&gt;c == &apos;\n&apos; || ls-&gt;c == &apos;\r&apos;)" data-ref="_M/lex_iseol">lex_iseol</a>(<a class="local col7 ref" href="#27ls" title='ls' data-ref="27ls" data-ref-filename="27ls">ls</a>))  <i>/* Skip initial newline. */</i></td></tr>
<tr><th id="155">155</th><td>    <a class="tu ref fn" href="#lex_newline" title='lex_newline' data-use='c' data-ref="lex_newline" data-ref-filename="lex_newline">lex_newline</a>(<a class="local col7 ref" href="#27ls" title='ls' data-ref="27ls" data-ref-filename="27ls">ls</a>);</td></tr>
<tr><th id="156">156</th><td>  <b>for</b> (;;) {</td></tr>
<tr><th id="157">157</th><td>    <b>switch</b> (<a class="local col7 ref" href="#27ls" title='ls' data-ref="27ls" data-ref-filename="27ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a>) {</td></tr>
<tr><th id="158">158</th><td>    <b>case</b> <a class="macro" href="#42" title="(-1)" data-ref="_M/LEX_EOF">LEX_EOF</a>:</td></tr>
<tr><th id="159">159</th><td>      <a class="ref fn" href="#lj_lex_error" title='lj_lex_error' data-ref="lj_lex_error" data-ref-filename="lj_lex_error">lj_lex_error</a>(<a class="local col7 ref" href="#27ls" title='ls' data-ref="27ls" data-ref-filename="27ls">ls</a>, <a class="enum" href="lj_lex.h.html#27" title='TK_eof' data-ref="TK_eof" data-ref-filename="TK_eof">TK_eof</a>, <a class="local col8 ref" href="#28tv" title='tv' data-ref="28tv" data-ref-filename="28tv">tv</a> ? <a class="enum" href="lj_errmsg.h.html#119" title='LJ_ERR_XLSTR' data-ref="LJ_ERR_XLSTR" data-ref-filename="LJ_ERR_XLSTR">LJ_ERR_XLSTR</a> : <a class="enum" href="lj_errmsg.h.html#120" title='LJ_ERR_XLCOM' data-ref="LJ_ERR_XLCOM" data-ref-filename="LJ_ERR_XLCOM">LJ_ERR_XLCOM</a>);</td></tr>
<tr><th id="160">160</th><td>      <b>break</b>;</td></tr>
<tr><th id="161">161</th><td>    <b>case</b> <kbd>']'</kbd>:</td></tr>
<tr><th id="162">162</th><td>      <b>if</b> (<a class="tu ref fn" href="#lex_skipeq" title='lex_skipeq' data-use='c' data-ref="lex_skipeq" data-ref-filename="lex_skipeq">lex_skipeq</a>(<a class="local col7 ref" href="#27ls" title='ls' data-ref="27ls" data-ref-filename="27ls">ls</a>) == <a class="local col9 ref" href="#29sep" title='sep' data-ref="29sep" data-ref-filename="29sep">sep</a>) {</td></tr>
<tr><th id="163">163</th><td>	<a class="tu ref fn" href="#lex_savenext" title='lex_savenext' data-use='c' data-ref="lex_savenext" data-ref-filename="lex_savenext">lex_savenext</a>(<a class="local col7 ref" href="#27ls" title='ls' data-ref="27ls" data-ref-filename="27ls">ls</a>);  <i>/* Skip second ']'. */</i></td></tr>
<tr><th id="164">164</th><td>	<b>goto</b> <a class="lbl" href="#30endloop" data-ref="30endloop" data-ref-filename="30endloop">endloop</a>;</td></tr>
<tr><th id="165">165</th><td>      }</td></tr>
<tr><th id="166">166</th><td>      <b>break</b>;</td></tr>
<tr><th id="167">167</th><td>    <b>case</b> <kbd>'\n'</kbd>:</td></tr>
<tr><th id="168">168</th><td>    <b>case</b> <kbd>'\r'</kbd>:</td></tr>
<tr><th id="169">169</th><td>      <a class="tu ref fn" href="#lex_save" title='lex_save' data-use='c' data-ref="lex_save" data-ref-filename="lex_save">lex_save</a>(<a class="local col7 ref" href="#27ls" title='ls' data-ref="27ls" data-ref-filename="27ls">ls</a>, <kbd>'\n'</kbd>);</td></tr>
<tr><th id="170">170</th><td>      <a class="tu ref fn" href="#lex_newline" title='lex_newline' data-use='c' data-ref="lex_newline" data-ref-filename="lex_newline">lex_newline</a>(<a class="local col7 ref" href="#27ls" title='ls' data-ref="27ls" data-ref-filename="27ls">ls</a>);</td></tr>
<tr><th id="171">171</th><td>      <b>if</b> (!<a class="local col8 ref" href="#28tv" title='tv' data-ref="28tv" data-ref-filename="28tv">tv</a>) <a class="ref fn" href="lj_buf.h.html#lj_buf_reset" title='lj_buf_reset' data-ref="lj_buf_reset" data-ref-filename="lj_buf_reset">lj_buf_reset</a>(&amp;<a class="local col7 ref" href="#27ls" title='ls' data-ref="27ls" data-ref-filename="27ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::sb" title='LexState::sb' data-ref="LexState::sb" data-ref-filename="LexState..sb">sb</a>);  <i>/* Don't waste space for comments. */</i></td></tr>
<tr><th id="172">172</th><td>      <b>break</b>;</td></tr>
<tr><th id="173">173</th><td>    <b>default</b>:</td></tr>
<tr><th id="174">174</th><td>      <a class="tu ref fn" href="#lex_savenext" title='lex_savenext' data-use='c' data-ref="lex_savenext" data-ref-filename="lex_savenext">lex_savenext</a>(<a class="local col7 ref" href="#27ls" title='ls' data-ref="27ls" data-ref-filename="27ls">ls</a>);</td></tr>
<tr><th id="175">175</th><td>      <b>break</b>;</td></tr>
<tr><th id="176">176</th><td>    }</td></tr>
<tr><th id="177">177</th><td>  } <dfn class="lbl" id="30endloop" data-ref="30endloop" data-ref-filename="30endloop">endloop</dfn>:</td></tr>
<tr><th id="178">178</th><td>  <b>if</b> (<a class="local col8 ref" href="#28tv" title='tv' data-ref="28tv" data-ref-filename="28tv">tv</a>) {</td></tr>
<tr><th id="179">179</th><td>    <a class="typedef" href="lj_obj.h.html#GCstr" title='GCstr' data-type='struct GCstr' data-ref="GCstr" data-ref-filename="GCstr">GCstr</a> *<dfn class="local col1 decl" id="31str" title='str' data-type='GCstr *' data-ref="31str" data-ref-filename="31str">str</dfn> = <a class="ref fn" href="lj_parse.h.html#lj_parse_keepstr" title='lj_parse_keepstr' data-ref="lj_parse_keepstr" data-ref-filename="lj_parse_keepstr">lj_parse_keepstr</a>(<a class="local col7 ref" href="#27ls" title='ls' data-ref="27ls" data-ref-filename="27ls">ls</a>, <a class="local col7 ref" href="#27ls" title='ls' data-ref="27ls" data-ref-filename="27ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::sb" title='LexState::sb' data-ref="LexState::sb" data-ref-filename="LexState..sb">sb</a>.<a class="ref field" href="lj_obj.h.html#162" title='SBuf::b' data-ref="SBuf::b" data-ref-filename="SBuf..b">b</a> + (<var>2</var> + (<a class="typedef" href="lj_obj.h.html#MSize" title='MSize' data-type='uint32_t' data-ref="MSize" data-ref-filename="MSize">MSize</a>)<a class="local col9 ref" href="#29sep" title='sep' data-ref="29sep" data-ref-filename="29sep">sep</a>),</td></tr>
<tr><th id="180">180</th><td>				      <a class="macro" href="lj_buf.h.html#35" title="((MSize)((&amp;ls-&gt;sb)-&gt;w - (&amp;ls-&gt;sb)-&gt;b))" data-ref="_M/sbuflen">sbuflen</a>(&amp;<a class="local col7 ref" href="#27ls" title='ls' data-ref="27ls" data-ref-filename="27ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::sb" title='LexState::sb' data-ref="LexState::sb" data-ref-filename="LexState..sb">sb</a>) - <var>2</var>*(<var>2</var> + (<a class="typedef" href="lj_obj.h.html#MSize" title='MSize' data-type='uint32_t' data-ref="MSize" data-ref-filename="MSize">MSize</a>)<a class="local col9 ref" href="#29sep" title='sep' data-ref="29sep" data-ref-filename="29sep">sep</a>));</td></tr>
<tr><th id="181">181</th><td>    <a class="ref fn" href="lj_obj.h.html#930" title='setstrV' data-ref="setstrV" data-ref-filename="setstrV">setstrV</a>(<a class="local col7 ref" href="#27ls" title='ls' data-ref="27ls" data-ref-filename="27ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::L" title='LexState::L' data-ref="LexState::L" data-ref-filename="LexState..L">L</a>, <a class="local col8 ref" href="#28tv" title='tv' data-ref="28tv" data-ref-filename="28tv">tv</a>, <a class="local col1 ref" href="#31str" title='str' data-ref="31str" data-ref-filename="31str">str</a>);</td></tr>
<tr><th id="182">182</th><td>  }</td></tr>
<tr><th id="183">183</th><td>}</td></tr>
<tr><th id="184">184</th><td></td></tr>
<tr><th id="185">185</th><td><i  data-doc="lex_string">/* Parse a string. */</i></td></tr>
<tr><th id="186">186</th><td><em>static</em> <em>void</em> <dfn class="tu decl def fn" id="lex_string" title='lex_string' data-type='void lex_string(LexState * ls, TValue * tv)' data-ref="lex_string" data-ref-filename="lex_string">lex_string</dfn>(<a class="typedef" href="lj_lex.h.html#LexState" title='LexState' data-type='struct LexState' data-ref="LexState" data-ref-filename="LexState">LexState</a> *<dfn class="local col2 decl" id="32ls" title='ls' data-type='LexState *' data-ref="32ls" data-ref-filename="32ls">ls</dfn>, <a class="typedef" href="lj_obj.h.html#TValue" title='TValue' data-type='union TValue' data-ref="TValue" data-ref-filename="TValue">TValue</a> *<dfn class="local col3 decl" id="33tv" title='tv' data-type='TValue *' data-ref="33tv" data-ref-filename="33tv">tv</dfn>)</td></tr>
<tr><th id="187">187</th><td>{</td></tr>
<tr><th id="188">188</th><td>  <a class="typedef" href="lj_lex.h.html#LexChar" title='LexChar' data-type='int' data-ref="LexChar" data-ref-filename="LexChar">LexChar</a> <dfn class="local col4 decl" id="34delim" title='delim' data-type='LexChar' data-ref="34delim" data-ref-filename="34delim">delim</dfn> = <a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a>;  <i>/* Delimiter is '\'' or '"'. */</i></td></tr>
<tr><th id="189">189</th><td>  <a class="tu ref fn" href="#lex_savenext" title='lex_savenext' data-use='c' data-ref="lex_savenext" data-ref-filename="lex_savenext">lex_savenext</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>);</td></tr>
<tr><th id="190">190</th><td>  <b>while</b> (<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> != <a class="local col4 ref" href="#34delim" title='delim' data-ref="34delim" data-ref-filename="34delim">delim</a>) {</td></tr>
<tr><th id="191">191</th><td>    <b>switch</b> (<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a>) {</td></tr>
<tr><th id="192">192</th><td>    <b>case</b> <a class="macro" href="#42" title="(-1)" data-ref="_M/LEX_EOF">LEX_EOF</a>:</td></tr>
<tr><th id="193">193</th><td>      <a class="ref fn" href="#lj_lex_error" title='lj_lex_error' data-ref="lj_lex_error" data-ref-filename="lj_lex_error">lj_lex_error</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>, <a class="enum" href="lj_lex.h.html#27" title='TK_eof' data-ref="TK_eof" data-ref-filename="TK_eof">TK_eof</a>, <a class="enum" href="lj_errmsg.h.html#121" title='LJ_ERR_XSTR' data-ref="LJ_ERR_XSTR" data-ref-filename="LJ_ERR_XSTR">LJ_ERR_XSTR</a>);</td></tr>
<tr><th id="194">194</th><td>      <b>continue</b>;</td></tr>
<tr><th id="195">195</th><td>    <b>case</b> <kbd>'\n'</kbd>:</td></tr>
<tr><th id="196">196</th><td>    <b>case</b> <kbd>'\r'</kbd>:</td></tr>
<tr><th id="197">197</th><td>      <a class="ref fn" href="#lj_lex_error" title='lj_lex_error' data-ref="lj_lex_error" data-ref-filename="lj_lex_error">lj_lex_error</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>, <a class="enum" href="lj_lex.h.html#27" title='TK_string' data-ref="TK_string" data-ref-filename="TK_string">TK_string</a>, <a class="enum" href="lj_errmsg.h.html#121" title='LJ_ERR_XSTR' data-ref="LJ_ERR_XSTR" data-ref-filename="LJ_ERR_XSTR">LJ_ERR_XSTR</a>);</td></tr>
<tr><th id="198">198</th><td>      <b>continue</b>;</td></tr>
<tr><th id="199">199</th><td>    <b>case</b> <kbd>'\\'</kbd>: {</td></tr>
<tr><th id="200">200</th><td>      <a class="typedef" href="lj_lex.h.html#LexChar" title='LexChar' data-type='int' data-ref="LexChar" data-ref-filename="LexChar">LexChar</a> <dfn class="local col5 decl" id="35c" title='c' data-type='LexChar' data-ref="35c" data-ref-filename="35c">c</dfn> = <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>);  <i>/* Skip the '\\'. */</i></td></tr>
<tr><th id="201">201</th><td>      <b>switch</b> (<a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a>) {</td></tr>
<tr><th id="202">202</th><td>      <b>case</b> <kbd>'a'</kbd>: <a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> = <kbd>'\a'</kbd>; <b>break</b>;</td></tr>
<tr><th id="203">203</th><td>      <b>case</b> <kbd>'b'</kbd>: <a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> = <kbd>'\b'</kbd>; <b>break</b>;</td></tr>
<tr><th id="204">204</th><td>      <b>case</b> <kbd>'f'</kbd>: <a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> = <kbd>'\f'</kbd>; <b>break</b>;</td></tr>
<tr><th id="205">205</th><td>      <b>case</b> <kbd>'n'</kbd>: <a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> = <kbd>'\n'</kbd>; <b>break</b>;</td></tr>
<tr><th id="206">206</th><td>      <b>case</b> <kbd>'r'</kbd>: <a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> = <kbd>'\r'</kbd>; <b>break</b>;</td></tr>
<tr><th id="207">207</th><td>      <b>case</b> <kbd>'t'</kbd>: <a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> = <kbd>'\t'</kbd>; <b>break</b>;</td></tr>
<tr><th id="208">208</th><td>      <b>case</b> <kbd>'v'</kbd>: <a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> = <kbd>'\v'</kbd>; <b>break</b>;</td></tr>
<tr><th id="209">209</th><td>      <b>case</b> <kbd>'x'</kbd>:  <i>/* Hexadecimal escape '\xXX'. */</i></td></tr>
<tr><th id="210">210</th><td>	<a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> = (<a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>) &amp; <var>15u</var>) &lt;&lt; <var>4</var>;</td></tr>
<tr><th id="211">211</th><td>	<b>if</b> (!<a class="macro" href="lj_char.h.html#28" title="((lj_char_bits+1)[((ls-&gt;c))] &amp; 0x08)" data-ref="_M/lj_char_isdigit">lj_char_isdigit</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a>)) {</td></tr>
<tr><th id="212">212</th><td>	  <b>if</b> (!<a class="macro" href="lj_char.h.html#29" title="((lj_char_bits+1)[((ls-&gt;c))] &amp; 0x10)" data-ref="_M/lj_char_isxdigit">lj_char_isxdigit</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a>)) <b>goto</b> <a class="lbl" href="#36err_xesc" data-ref="36err_xesc" data-ref-filename="36err_xesc">err_xesc</a>;</td></tr>
<tr><th id="213">213</th><td>	  <a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> += <var>9</var> &lt;&lt; <var>4</var>;</td></tr>
<tr><th id="214">214</th><td>	}</td></tr>
<tr><th id="215">215</th><td>	<a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> += (<a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>) &amp; <var>15u</var>);</td></tr>
<tr><th id="216">216</th><td>	<b>if</b> (!<a class="macro" href="lj_char.h.html#28" title="((lj_char_bits+1)[((ls-&gt;c))] &amp; 0x08)" data-ref="_M/lj_char_isdigit">lj_char_isdigit</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a>)) {</td></tr>
<tr><th id="217">217</th><td>	  <b>if</b> (!<a class="macro" href="lj_char.h.html#29" title="((lj_char_bits+1)[((ls-&gt;c))] &amp; 0x10)" data-ref="_M/lj_char_isxdigit">lj_char_isxdigit</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a>)) <b>goto</b> <a class="lbl" href="#36err_xesc" data-ref="36err_xesc" data-ref-filename="36err_xesc">err_xesc</a>;</td></tr>
<tr><th id="218">218</th><td>	  <a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> += <var>9</var>;</td></tr>
<tr><th id="219">219</th><td>	}</td></tr>
<tr><th id="220">220</th><td>	<b>break</b>;</td></tr>
<tr><th id="221">221</th><td>      <b>case</b> <kbd>'u'</kbd>:  <i>/* Unicode escape '\u{XX...}'. */</i></td></tr>
<tr><th id="222">222</th><td>	<b>if</b> (<a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>) != <kbd>'{'</kbd>) <b>goto</b> <a class="lbl" href="#36err_xesc" data-ref="36err_xesc" data-ref-filename="36err_xesc">err_xesc</a>;</td></tr>
<tr><th id="223">223</th><td>	<a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>);</td></tr>
<tr><th id="224">224</th><td>	<a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> = <var>0</var>;</td></tr>
<tr><th id="225">225</th><td>	<b>do</b> {</td></tr>
<tr><th id="226">226</th><td>	  <a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> = (<a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> &lt;&lt; <var>4</var>) | (<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> &amp; <var>15u</var>);</td></tr>
<tr><th id="227">227</th><td>	  <b>if</b> (!<a class="macro" href="lj_char.h.html#28" title="((lj_char_bits+1)[((ls-&gt;c))] &amp; 0x08)" data-ref="_M/lj_char_isdigit">lj_char_isdigit</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a>)) {</td></tr>
<tr><th id="228">228</th><td>	    <b>if</b> (!<a class="macro" href="lj_char.h.html#29" title="((lj_char_bits+1)[((ls-&gt;c))] &amp; 0x10)" data-ref="_M/lj_char_isxdigit">lj_char_isxdigit</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a>)) <b>goto</b> <a class="lbl" href="#36err_xesc" data-ref="36err_xesc" data-ref-filename="36err_xesc">err_xesc</a>;</td></tr>
<tr><th id="229">229</th><td>	    <a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> += <var>9</var>;</td></tr>
<tr><th id="230">230</th><td>	  }</td></tr>
<tr><th id="231">231</th><td>	  <b>if</b> (<a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> &gt;= <var>0x110000</var>) <b>goto</b> <a class="lbl" href="#36err_xesc" data-ref="36err_xesc" data-ref-filename="36err_xesc">err_xesc</a>;  <i>/* Out of Unicode range. */</i></td></tr>
<tr><th id="232">232</th><td>	} <b>while</b> (<a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>) != <kbd>'}'</kbd>);</td></tr>
<tr><th id="233">233</th><td>	<b>if</b> (<a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> &lt; <var>0x800</var>) {</td></tr>
<tr><th id="234">234</th><td>	  <b>if</b> (<a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> &lt; <var>0x80</var>) <b>break</b>;</td></tr>
<tr><th id="235">235</th><td>	  <a class="tu ref fn" href="#lex_save" title='lex_save' data-use='c' data-ref="lex_save" data-ref-filename="lex_save">lex_save</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>, <var>0xc0</var> | (<a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> &gt;&gt; <var>6</var>));</td></tr>
<tr><th id="236">236</th><td>	} <b>else</b> {</td></tr>
<tr><th id="237">237</th><td>	  <b>if</b> (<a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> &gt;= <var>0x10000</var>) {</td></tr>
<tr><th id="238">238</th><td>	    <a class="tu ref fn" href="#lex_save" title='lex_save' data-use='c' data-ref="lex_save" data-ref-filename="lex_save">lex_save</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>, <var>0xf0</var> | (<a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> &gt;&gt; <var>18</var>));</td></tr>
<tr><th id="239">239</th><td>	    <a class="tu ref fn" href="#lex_save" title='lex_save' data-use='c' data-ref="lex_save" data-ref-filename="lex_save">lex_save</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>, <var>0x80</var> | ((<a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> &gt;&gt; <var>12</var>) &amp; <var>0x3f</var>));</td></tr>
<tr><th id="240">240</th><td>	  } <b>else</b> {</td></tr>
<tr><th id="241">241</th><td>	    <b>if</b> (<a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> &gt;= <var>0xd800</var> &amp;&amp; <a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> &lt; <var>0xe000</var>) <b>goto</b> <a class="lbl" href="#36err_xesc" data-ref="36err_xesc" data-ref-filename="36err_xesc">err_xesc</a>;  <i>/* No surrogates. */</i></td></tr>
<tr><th id="242">242</th><td>	    <a class="tu ref fn" href="#lex_save" title='lex_save' data-use='c' data-ref="lex_save" data-ref-filename="lex_save">lex_save</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>, <var>0xe0</var> | (<a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> &gt;&gt; <var>12</var>));</td></tr>
<tr><th id="243">243</th><td>	  }</td></tr>
<tr><th id="244">244</th><td>	  <a class="tu ref fn" href="#lex_save" title='lex_save' data-use='c' data-ref="lex_save" data-ref-filename="lex_save">lex_save</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>, <var>0x80</var> | ((<a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> &gt;&gt; <var>6</var>) &amp; <var>0x3f</var>));</td></tr>
<tr><th id="245">245</th><td>	}</td></tr>
<tr><th id="246">246</th><td>	<a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> = <var>0x80</var> | (<a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> &amp; <var>0x3f</var>);</td></tr>
<tr><th id="247">247</th><td>	<b>break</b>;</td></tr>
<tr><th id="248">248</th><td>      <b>case</b> <kbd>'z'</kbd>:  <i>/* Skip whitespace. */</i></td></tr>
<tr><th id="249">249</th><td>	<a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>);</td></tr>
<tr><th id="250">250</th><td>	<b>while</b> (<a class="macro" href="lj_char.h.html#26" title="((lj_char_bits+1)[((ls-&gt;c))] &amp; 0x02)" data-ref="_M/lj_char_isspace">lj_char_isspace</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a>))</td></tr>
<tr><th id="251">251</th><td>	  <b>if</b> (<a class="macro" href="#43" title="(ls-&gt;c == &apos;\n&apos; || ls-&gt;c == &apos;\r&apos;)" data-ref="_M/lex_iseol">lex_iseol</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>)) <a class="tu ref fn" href="#lex_newline" title='lex_newline' data-use='c' data-ref="lex_newline" data-ref-filename="lex_newline">lex_newline</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>); <b>else</b> <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>);</td></tr>
<tr><th id="252">252</th><td>	<b>continue</b>;</td></tr>
<tr><th id="253">253</th><td>      <b>case</b> <kbd>'\n'</kbd>: <b>case</b> <kbd>'\r'</kbd>: <a class="tu ref fn" href="#lex_save" title='lex_save' data-use='c' data-ref="lex_save" data-ref-filename="lex_save">lex_save</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>, <kbd>'\n'</kbd>); <a class="tu ref fn" href="#lex_newline" title='lex_newline' data-use='c' data-ref="lex_newline" data-ref-filename="lex_newline">lex_newline</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>); <b>continue</b>;</td></tr>
<tr><th id="254">254</th><td>      <b>case</b> <kbd>'\\'</kbd>: <b>case</b> <kbd>'\"'</kbd>: <b>case</b> <kbd>'\''</kbd>: <b>break</b>;</td></tr>
<tr><th id="255">255</th><td>      <b>case</b> <a class="macro" href="#42" title="(-1)" data-ref="_M/LEX_EOF">LEX_EOF</a>: <b>continue</b>;</td></tr>
<tr><th id="256">256</th><td>      <b>default</b>:</td></tr>
<tr><th id="257">257</th><td>	<b>if</b> (!<a class="macro" href="lj_char.h.html#28" title="((lj_char_bits+1)[((c))] &amp; 0x08)" data-ref="_M/lj_char_isdigit">lj_char_isdigit</a>(<a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a>))</td></tr>
<tr><th id="258">258</th><td>	  <b>goto</b> <a class="lbl" href="#36err_xesc" data-ref="36err_xesc" data-ref-filename="36err_xesc">err_xesc</a>;</td></tr>
<tr><th id="259">259</th><td>	<a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> -= <kbd>'0'</kbd>;  <i>/* Decimal escape '\ddd'. */</i></td></tr>
<tr><th id="260">260</th><td>	<b>if</b> (<a class="macro" href="lj_char.h.html#28" title="((lj_char_bits+1)[((lex_next(ls)))] &amp; 0x08)" data-ref="_M/lj_char_isdigit">lj_char_isdigit</a>(<a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>))) {</td></tr>
<tr><th id="261">261</th><td>	  <a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> = <a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a>*<var>10</var> + (<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> - <kbd>'0'</kbd>);</td></tr>
<tr><th id="262">262</th><td>	  <b>if</b> (<a class="macro" href="lj_char.h.html#28" title="((lj_char_bits+1)[((lex_next(ls)))] &amp; 0x08)" data-ref="_M/lj_char_isdigit">lj_char_isdigit</a>(<a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>))) {</td></tr>
<tr><th id="263">263</th><td>	    <a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> = <a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a>*<var>10</var> + (<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> - <kbd>'0'</kbd>);</td></tr>
<tr><th id="264">264</th><td>	    <b>if</b> (<a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a> &gt; <var>255</var>) {</td></tr>
<tr><th id="265">265</th><td>	    <dfn class="lbl" id="36err_xesc" data-ref="36err_xesc" data-ref-filename="36err_xesc">err_xesc</dfn>:</td></tr>
<tr><th id="266">266</th><td>	      <a class="ref fn" href="#lj_lex_error" title='lj_lex_error' data-ref="lj_lex_error" data-ref-filename="lj_lex_error">lj_lex_error</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>, <a class="enum" href="lj_lex.h.html#27" title='TK_string' data-ref="TK_string" data-ref-filename="TK_string">TK_string</a>, <a class="enum" href="lj_errmsg.h.html#122" title='LJ_ERR_XESC' data-ref="LJ_ERR_XESC" data-ref-filename="LJ_ERR_XESC">LJ_ERR_XESC</a>);</td></tr>
<tr><th id="267">267</th><td>	    }</td></tr>
<tr><th id="268">268</th><td>	    <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>);</td></tr>
<tr><th id="269">269</th><td>	  }</td></tr>
<tr><th id="270">270</th><td>	}</td></tr>
<tr><th id="271">271</th><td>	<a class="tu ref fn" href="#lex_save" title='lex_save' data-use='c' data-ref="lex_save" data-ref-filename="lex_save">lex_save</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>, <a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a>);</td></tr>
<tr><th id="272">272</th><td>	<b>continue</b>;</td></tr>
<tr><th id="273">273</th><td>      }</td></tr>
<tr><th id="274">274</th><td>      <a class="tu ref fn" href="#lex_save" title='lex_save' data-use='c' data-ref="lex_save" data-ref-filename="lex_save">lex_save</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>, <a class="local col5 ref" href="#35c" title='c' data-ref="35c" data-ref-filename="35c">c</a>);</td></tr>
<tr><th id="275">275</th><td>      <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>);</td></tr>
<tr><th id="276">276</th><td>      <b>continue</b>;</td></tr>
<tr><th id="277">277</th><td>      }</td></tr>
<tr><th id="278">278</th><td>    <b>default</b>:</td></tr>
<tr><th id="279">279</th><td>      <a class="tu ref fn" href="#lex_savenext" title='lex_savenext' data-use='c' data-ref="lex_savenext" data-ref-filename="lex_savenext">lex_savenext</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>);</td></tr>
<tr><th id="280">280</th><td>      <b>break</b>;</td></tr>
<tr><th id="281">281</th><td>    }</td></tr>
<tr><th id="282">282</th><td>  }</td></tr>
<tr><th id="283">283</th><td>  <a class="tu ref fn" href="#lex_savenext" title='lex_savenext' data-use='c' data-ref="lex_savenext" data-ref-filename="lex_savenext">lex_savenext</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>);  <i>/* Skip trailing delimiter. */</i></td></tr>
<tr><th id="284">284</th><td>  <a class="ref fn" href="lj_obj.h.html#930" title='setstrV' data-ref="setstrV" data-ref-filename="setstrV">setstrV</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::L" title='LexState::L' data-ref="LexState::L" data-ref-filename="LexState..L">L</a>, <a class="local col3 ref" href="#33tv" title='tv' data-ref="33tv" data-ref-filename="33tv">tv</a>,</td></tr>
<tr><th id="285">285</th><td>	  <a class="ref fn" href="lj_parse.h.html#lj_parse_keepstr" title='lj_parse_keepstr' data-ref="lj_parse_keepstr" data-ref-filename="lj_parse_keepstr">lj_parse_keepstr</a>(<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>, <a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::sb" title='LexState::sb' data-ref="LexState::sb" data-ref-filename="LexState..sb">sb</a>.<a class="ref field" href="lj_obj.h.html#162" title='SBuf::b' data-ref="SBuf::b" data-ref-filename="SBuf..b">b</a>+<var>1</var>, <a class="macro" href="lj_buf.h.html#35" title="((MSize)((&amp;ls-&gt;sb)-&gt;w - (&amp;ls-&gt;sb)-&gt;b))" data-ref="_M/sbuflen">sbuflen</a>(&amp;<a class="local col2 ref" href="#32ls" title='ls' data-ref="32ls" data-ref-filename="32ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::sb" title='LexState::sb' data-ref="LexState::sb" data-ref-filename="LexState..sb">sb</a>)-<var>2</var>));</td></tr>
<tr><th id="286">286</th><td>}</td></tr>
<tr><th id="287">287</th><td></td></tr>
<tr><th id="288">288</th><td><i>/* -- Main lexical scanner ------------------------------------------------ */</i></td></tr>
<tr><th id="289">289</th><td></td></tr>
<tr><th id="290">290</th><td><i  data-doc="lex_scan">/* Get next lexical token. */</i></td></tr>
<tr><th id="291">291</th><td><em>static</em> <a class="typedef" href="lj_lex.h.html#LexToken" title='LexToken' data-type='int' data-ref="LexToken" data-ref-filename="LexToken">LexToken</a> <dfn class="tu decl def fn" id="lex_scan" title='lex_scan' data-type='LexToken lex_scan(LexState * ls, TValue * tv)' data-ref="lex_scan" data-ref-filename="lex_scan">lex_scan</dfn>(<a class="typedef" href="lj_lex.h.html#LexState" title='LexState' data-type='struct LexState' data-ref="LexState" data-ref-filename="LexState">LexState</a> *<dfn class="local col7 decl" id="37ls" title='ls' data-type='LexState *' data-ref="37ls" data-ref-filename="37ls">ls</dfn>, <a class="typedef" href="lj_obj.h.html#TValue" title='TValue' data-type='union TValue' data-ref="TValue" data-ref-filename="TValue">TValue</a> *<dfn class="local col8 decl" id="38tv" title='tv' data-type='TValue *' data-ref="38tv" data-ref-filename="38tv">tv</dfn>)</td></tr>
<tr><th id="292">292</th><td>{</td></tr>
<tr><th id="293">293</th><td>  <a class="ref fn" href="lj_buf.h.html#lj_buf_reset" title='lj_buf_reset' data-ref="lj_buf_reset" data-ref-filename="lj_buf_reset">lj_buf_reset</a>(&amp;<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::sb" title='LexState::sb' data-ref="LexState::sb" data-ref-filename="LexState..sb">sb</a>);</td></tr>
<tr><th id="294">294</th><td>  <b>for</b> (;;) {</td></tr>
<tr><th id="295">295</th><td>    <b>if</b> (<a class="macro" href="lj_char.h.html#32" title="((lj_char_bits+1)[((ls-&gt;c))] &amp; 0x80)" data-ref="_M/lj_char_isident">lj_char_isident</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a>)) {</td></tr>
<tr><th id="296">296</th><td>      <a class="typedef" href="lj_obj.h.html#GCstr" title='GCstr' data-type='struct GCstr' data-ref="GCstr" data-ref-filename="GCstr">GCstr</a> *<dfn class="local col9 decl" id="39s" title='s' data-type='GCstr *' data-ref="39s" data-ref-filename="39s">s</dfn>;</td></tr>
<tr><th id="297">297</th><td>      <b>if</b> (<a class="macro" href="lj_char.h.html#28" title="((lj_char_bits+1)[((ls-&gt;c))] &amp; 0x08)" data-ref="_M/lj_char_isdigit">lj_char_isdigit</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a>)) {  <i>/* Numeric literal. */</i></td></tr>
<tr><th id="298">298</th><td>	<a class="tu ref fn" href="#lex_number" title='lex_number' data-use='c' data-ref="lex_number" data-ref-filename="lex_number">lex_number</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>, <a class="local col8 ref" href="#38tv" title='tv' data-ref="38tv" data-ref-filename="38tv">tv</a>);</td></tr>
<tr><th id="299">299</th><td>	<b>return</b> <a class="enum" href="lj_lex.h.html#27" title='TK_number' data-ref="TK_number" data-ref-filename="TK_number">TK_number</a>;</td></tr>
<tr><th id="300">300</th><td>      }</td></tr>
<tr><th id="301">301</th><td>      <i>/* Identifier or reserved word. */</i></td></tr>
<tr><th id="302">302</th><td>      <b>do</b> {</td></tr>
<tr><th id="303">303</th><td>	<a class="tu ref fn" href="#lex_savenext" title='lex_savenext' data-use='c' data-ref="lex_savenext" data-ref-filename="lex_savenext">lex_savenext</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>);</td></tr>
<tr><th id="304">304</th><td>      } <b>while</b> (<a class="macro" href="lj_char.h.html#32" title="((lj_char_bits+1)[((ls-&gt;c))] &amp; 0x80)" data-ref="_M/lj_char_isident">lj_char_isident</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a>));</td></tr>
<tr><th id="305">305</th><td>      <a class="local col9 ref" href="#39s" title='s' data-ref="39s" data-ref-filename="39s">s</a> = <a class="ref fn" href="lj_parse.h.html#lj_parse_keepstr" title='lj_parse_keepstr' data-ref="lj_parse_keepstr" data-ref-filename="lj_parse_keepstr">lj_parse_keepstr</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>, <a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::sb" title='LexState::sb' data-ref="LexState::sb" data-ref-filename="LexState..sb">sb</a>.<a class="ref field" href="lj_obj.h.html#162" title='SBuf::b' data-ref="SBuf::b" data-ref-filename="SBuf..b">b</a>, <a class="macro" href="lj_buf.h.html#35" title="((MSize)((&amp;ls-&gt;sb)-&gt;w - (&amp;ls-&gt;sb)-&gt;b))" data-ref="_M/sbuflen">sbuflen</a>(&amp;<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::sb" title='LexState::sb' data-ref="LexState::sb" data-ref-filename="LexState..sb">sb</a>));</td></tr>
<tr><th id="306">306</th><td>      <a class="ref fn" href="lj_obj.h.html#930" title='setstrV' data-ref="setstrV" data-ref-filename="setstrV">setstrV</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::L" title='LexState::L' data-ref="LexState::L" data-ref-filename="LexState..L">L</a>, <a class="local col8 ref" href="#38tv" title='tv' data-ref="38tv" data-ref-filename="38tv">tv</a>, <a class="local col9 ref" href="#39s" title='s' data-ref="39s" data-ref-filename="39s">s</a>);</td></tr>
<tr><th id="307">307</th><td>      <b>if</b> (<a class="local col9 ref" href="#39s" title='s' data-ref="39s" data-ref-filename="39s">s</a>-&gt;<a class="ref field" href="lj_obj.h.html#GCstr::reserved" title='GCstr::reserved' data-ref="GCstr::reserved" data-ref-filename="GCstr..reserved">reserved</a> &gt; <var>0</var>)  <i>/* Reserved word? */</i></td></tr>
<tr><th id="308">308</th><td>	<b>return</b> <a class="enum" href="lj_lex.h.html#TK_OFS" title='TK_OFS' data-ref="TK_OFS" data-ref-filename="TK_OFS">TK_OFS</a> + <a class="local col9 ref" href="#39s" title='s' data-ref="39s" data-ref-filename="39s">s</a>-&gt;<a class="ref field" href="lj_obj.h.html#GCstr::reserved" title='GCstr::reserved' data-ref="GCstr::reserved" data-ref-filename="GCstr..reserved">reserved</a>;</td></tr>
<tr><th id="309">309</th><td>      <b>return</b> <a class="enum" href="lj_lex.h.html#27" title='TK_name' data-ref="TK_name" data-ref-filename="TK_name">TK_name</a>;</td></tr>
<tr><th id="310">310</th><td>    }</td></tr>
<tr><th id="311">311</th><td>    <b>switch</b> (<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a>) {</td></tr>
<tr><th id="312">312</th><td>    <b>case</b> <kbd>'\n'</kbd>:</td></tr>
<tr><th id="313">313</th><td>    <b>case</b> <kbd>'\r'</kbd>:</td></tr>
<tr><th id="314">314</th><td>      <a class="tu ref fn" href="#lex_newline" title='lex_newline' data-use='c' data-ref="lex_newline" data-ref-filename="lex_newline">lex_newline</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>);</td></tr>
<tr><th id="315">315</th><td>      <b>continue</b>;</td></tr>
<tr><th id="316">316</th><td>    <b>case</b> <kbd>' '</kbd>:</td></tr>
<tr><th id="317">317</th><td>    <b>case</b> <kbd>'\t'</kbd>:</td></tr>
<tr><th id="318">318</th><td>    <b>case</b> <kbd>'\v'</kbd>:</td></tr>
<tr><th id="319">319</th><td>    <b>case</b> <kbd>'\f'</kbd>:</td></tr>
<tr><th id="320">320</th><td>      <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>);</td></tr>
<tr><th id="321">321</th><td>      <b>continue</b>;</td></tr>
<tr><th id="322">322</th><td>    <b>case</b> <kbd>'-'</kbd>:</td></tr>
<tr><th id="323">323</th><td>      <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>);</td></tr>
<tr><th id="324">324</th><td>      <b>if</b> (<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> != <kbd>'-'</kbd>) <b>return</b> <kbd>'-'</kbd>;</td></tr>
<tr><th id="325">325</th><td>      <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>);</td></tr>
<tr><th id="326">326</th><td>      <b>if</b> (<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> == <kbd>'['</kbd>) {  <i>/* Long comment "--[=*[...]=*]". */</i></td></tr>
<tr><th id="327">327</th><td>	<em>int</em> <dfn class="local col0 decl" id="40sep" title='sep' data-type='int' data-ref="40sep" data-ref-filename="40sep">sep</dfn> = <a class="tu ref fn" href="#lex_skipeq" title='lex_skipeq' data-use='c' data-ref="lex_skipeq" data-ref-filename="lex_skipeq">lex_skipeq</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>);</td></tr>
<tr><th id="328">328</th><td>	<a class="ref fn" href="lj_buf.h.html#lj_buf_reset" title='lj_buf_reset' data-ref="lj_buf_reset" data-ref-filename="lj_buf_reset">lj_buf_reset</a>(&amp;<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::sb" title='LexState::sb' data-ref="LexState::sb" data-ref-filename="LexState..sb">sb</a>);  <i>/* `lex_skipeq' may dirty the buffer */</i></td></tr>
<tr><th id="329">329</th><td>	<b>if</b> (<a class="local col0 ref" href="#40sep" title='sep' data-ref="40sep" data-ref-filename="40sep">sep</a> &gt;= <var>0</var>) {</td></tr>
<tr><th id="330">330</th><td>	  <a class="tu ref fn" href="#lex_longstring" title='lex_longstring' data-use='c' data-ref="lex_longstring" data-ref-filename="lex_longstring">lex_longstring</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <a class="local col0 ref" href="#40sep" title='sep' data-ref="40sep" data-ref-filename="40sep">sep</a>);</td></tr>
<tr><th id="331">331</th><td>	  <a class="ref fn" href="lj_buf.h.html#lj_buf_reset" title='lj_buf_reset' data-ref="lj_buf_reset" data-ref-filename="lj_buf_reset">lj_buf_reset</a>(&amp;<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::sb" title='LexState::sb' data-ref="LexState::sb" data-ref-filename="LexState..sb">sb</a>);</td></tr>
<tr><th id="332">332</th><td>	  <b>continue</b>;</td></tr>
<tr><th id="333">333</th><td>	}</td></tr>
<tr><th id="334">334</th><td>      }</td></tr>
<tr><th id="335">335</th><td>      <i>/* Short comment "--.*\n". */</i></td></tr>
<tr><th id="336">336</th><td>      <b>while</b> (!<a class="macro" href="#43" title="(ls-&gt;c == &apos;\n&apos; || ls-&gt;c == &apos;\r&apos;)" data-ref="_M/lex_iseol">lex_iseol</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>) &amp;&amp; <a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> != <a class="macro" href="#42" title="(-1)" data-ref="_M/LEX_EOF">LEX_EOF</a>)</td></tr>
<tr><th id="337">337</th><td>	<a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>);</td></tr>
<tr><th id="338">338</th><td>      <b>continue</b>;</td></tr>
<tr><th id="339">339</th><td>    <b>case</b> <kbd>'['</kbd>: {</td></tr>
<tr><th id="340">340</th><td>      <em>int</em> <dfn class="local col1 decl" id="41sep" title='sep' data-type='int' data-ref="41sep" data-ref-filename="41sep">sep</dfn> = <a class="tu ref fn" href="#lex_skipeq" title='lex_skipeq' data-use='c' data-ref="lex_skipeq" data-ref-filename="lex_skipeq">lex_skipeq</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>);</td></tr>
<tr><th id="341">341</th><td>      <b>if</b> (<a class="local col1 ref" href="#41sep" title='sep' data-ref="41sep" data-ref-filename="41sep">sep</a> &gt;= <var>0</var>) {</td></tr>
<tr><th id="342">342</th><td>	<a class="tu ref fn" href="#lex_longstring" title='lex_longstring' data-use='c' data-ref="lex_longstring" data-ref-filename="lex_longstring">lex_longstring</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>, <a class="local col8 ref" href="#38tv" title='tv' data-ref="38tv" data-ref-filename="38tv">tv</a>, <a class="local col1 ref" href="#41sep" title='sep' data-ref="41sep" data-ref-filename="41sep">sep</a>);</td></tr>
<tr><th id="343">343</th><td>	<b>return</b> <a class="enum" href="lj_lex.h.html#27" title='TK_string' data-ref="TK_string" data-ref-filename="TK_string">TK_string</a>;</td></tr>
<tr><th id="344">344</th><td>      } <b>else</b> <b>if</b> (<a class="local col1 ref" href="#41sep" title='sep' data-ref="41sep" data-ref-filename="41sep">sep</a> == -<var>1</var>) {</td></tr>
<tr><th id="345">345</th><td>	<b>return</b> <kbd>'['</kbd>;</td></tr>
<tr><th id="346">346</th><td>      } <b>else</b> {</td></tr>
<tr><th id="347">347</th><td>	<a class="ref fn" href="#lj_lex_error" title='lj_lex_error' data-ref="lj_lex_error" data-ref-filename="lj_lex_error">lj_lex_error</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>, <a class="enum" href="lj_lex.h.html#27" title='TK_string' data-ref="TK_string" data-ref-filename="TK_string">TK_string</a>, <a class="enum" href="lj_errmsg.h.html#123" title='LJ_ERR_XLDELIM' data-ref="LJ_ERR_XLDELIM" data-ref-filename="LJ_ERR_XLDELIM">LJ_ERR_XLDELIM</a>);</td></tr>
<tr><th id="348">348</th><td>	<b>continue</b>;</td></tr>
<tr><th id="349">349</th><td>      }</td></tr>
<tr><th id="350">350</th><td>      }</td></tr>
<tr><th id="351">351</th><td>    <b>case</b> <kbd>'='</kbd>:</td></tr>
<tr><th id="352">352</th><td>      <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>);</td></tr>
<tr><th id="353">353</th><td>      <b>if</b> (<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> != <kbd>'='</kbd>) <b>return</b> <kbd>'='</kbd>; <b>else</b> { <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>); <b>return</b> <a class="enum" href="lj_lex.h.html#27" title='TK_eq' data-ref="TK_eq" data-ref-filename="TK_eq">TK_eq</a>; }</td></tr>
<tr><th id="354">354</th><td>    <b>case</b> <kbd>'&lt;'</kbd>:</td></tr>
<tr><th id="355">355</th><td>      <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>);</td></tr>
<tr><th id="356">356</th><td>      <b>if</b> (<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> != <kbd>'='</kbd>) <b>return</b> <kbd>'&lt;'</kbd>; <b>else</b> { <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>); <b>return</b> <a class="enum" href="lj_lex.h.html#27" title='TK_le' data-ref="TK_le" data-ref-filename="TK_le">TK_le</a>; }</td></tr>
<tr><th id="357">357</th><td>    <b>case</b> <kbd>'&gt;'</kbd>:</td></tr>
<tr><th id="358">358</th><td>      <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>);</td></tr>
<tr><th id="359">359</th><td>      <b>if</b> (<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> != <kbd>'='</kbd>) <b>return</b> <kbd>'&gt;'</kbd>; <b>else</b> { <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>); <b>return</b> <a class="enum" href="lj_lex.h.html#27" title='TK_ge' data-ref="TK_ge" data-ref-filename="TK_ge">TK_ge</a>; }</td></tr>
<tr><th id="360">360</th><td>    <b>case</b> <kbd>'~'</kbd>:</td></tr>
<tr><th id="361">361</th><td>      <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>);</td></tr>
<tr><th id="362">362</th><td>      <b>if</b> (<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> != <kbd>'='</kbd>) <b>return</b> <kbd>'~'</kbd>; <b>else</b> { <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>); <b>return</b> <a class="enum" href="lj_lex.h.html#27" title='TK_ne' data-ref="TK_ne" data-ref-filename="TK_ne">TK_ne</a>; }</td></tr>
<tr><th id="363">363</th><td>    <b>case</b> <kbd>':'</kbd>:</td></tr>
<tr><th id="364">364</th><td>      <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>);</td></tr>
<tr><th id="365">365</th><td>      <b>if</b> (<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> != <kbd>':'</kbd>) <b>return</b> <kbd>':'</kbd>; <b>else</b> { <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>); <b>return</b> <a class="enum" href="lj_lex.h.html#27" title='TK_label' data-ref="TK_label" data-ref-filename="TK_label">TK_label</a>; }</td></tr>
<tr><th id="366">366</th><td>    <b>case</b> <kbd>'"'</kbd>:</td></tr>
<tr><th id="367">367</th><td>    <b>case</b> <kbd>'\''</kbd>:</td></tr>
<tr><th id="368">368</th><td>      <a class="tu ref fn" href="#lex_string" title='lex_string' data-use='c' data-ref="lex_string" data-ref-filename="lex_string">lex_string</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>, <a class="local col8 ref" href="#38tv" title='tv' data-ref="38tv" data-ref-filename="38tv">tv</a>);</td></tr>
<tr><th id="369">369</th><td>      <b>return</b> <a class="enum" href="lj_lex.h.html#27" title='TK_string' data-ref="TK_string" data-ref-filename="TK_string">TK_string</a>;</td></tr>
<tr><th id="370">370</th><td>    <b>case</b> <kbd>'.'</kbd>:</td></tr>
<tr><th id="371">371</th><td>      <b>if</b> (<a class="tu ref fn" href="#lex_savenext" title='lex_savenext' data-use='c' data-ref="lex_savenext" data-ref-filename="lex_savenext">lex_savenext</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>) == <kbd>'.'</kbd>) {</td></tr>
<tr><th id="372">372</th><td>	<a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>);</td></tr>
<tr><th id="373">373</th><td>	<b>if</b> (<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> == <kbd>'.'</kbd>) {</td></tr>
<tr><th id="374">374</th><td>	  <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>);</td></tr>
<tr><th id="375">375</th><td>	  <b>return</b> <a class="enum" href="lj_lex.h.html#27" title='TK_dots' data-ref="TK_dots" data-ref-filename="TK_dots">TK_dots</a>;   <i>/* ... */</i></td></tr>
<tr><th id="376">376</th><td>	}</td></tr>
<tr><th id="377">377</th><td>	<b>return</b> <a class="enum" href="lj_lex.h.html#27" title='TK_concat' data-ref="TK_concat" data-ref-filename="TK_concat">TK_concat</a>;   <i>/* .. */</i></td></tr>
<tr><th id="378">378</th><td>      } <b>else</b> <b>if</b> (!<a class="macro" href="lj_char.h.html#28" title="((lj_char_bits+1)[((ls-&gt;c))] &amp; 0x08)" data-ref="_M/lj_char_isdigit">lj_char_isdigit</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a>)) {</td></tr>
<tr><th id="379">379</th><td>	<b>return</b> <kbd>'.'</kbd>;</td></tr>
<tr><th id="380">380</th><td>      } <b>else</b> {</td></tr>
<tr><th id="381">381</th><td>	<a class="tu ref fn" href="#lex_number" title='lex_number' data-use='c' data-ref="lex_number" data-ref-filename="lex_number">lex_number</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>, <a class="local col8 ref" href="#38tv" title='tv' data-ref="38tv" data-ref-filename="38tv">tv</a>);</td></tr>
<tr><th id="382">382</th><td>	<b>return</b> <a class="enum" href="lj_lex.h.html#27" title='TK_number' data-ref="TK_number" data-ref-filename="TK_number">TK_number</a>;</td></tr>
<tr><th id="383">383</th><td>      }</td></tr>
<tr><th id="384">384</th><td>    <b>case</b> <a class="macro" href="#42" title="(-1)" data-ref="_M/LEX_EOF">LEX_EOF</a>:</td></tr>
<tr><th id="385">385</th><td>      <b>return</b> <a class="enum" href="lj_lex.h.html#27" title='TK_eof' data-ref="TK_eof" data-ref-filename="TK_eof">TK_eof</a>;</td></tr>
<tr><th id="386">386</th><td>    <b>default</b>: {</td></tr>
<tr><th id="387">387</th><td>      <a class="typedef" href="lj_lex.h.html#LexChar" title='LexChar' data-type='int' data-ref="LexChar" data-ref-filename="LexChar">LexChar</a> <dfn class="local col2 decl" id="42c" title='c' data-type='LexChar' data-ref="42c" data-ref-filename="42c">c</dfn> = <a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a>;</td></tr>
<tr><th id="388">388</th><td>      <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col7 ref" href="#37ls" title='ls' data-ref="37ls" data-ref-filename="37ls">ls</a>);</td></tr>
<tr><th id="389">389</th><td>      <b>return</b> <a class="local col2 ref" href="#42c" title='c' data-ref="42c" data-ref-filename="42c">c</a>;  <i>/* Single-char tokens (+ - / ...). */</i></td></tr>
<tr><th id="390">390</th><td>    }</td></tr>
<tr><th id="391">391</th><td>    }</td></tr>
<tr><th id="392">392</th><td>  }</td></tr>
<tr><th id="393">393</th><td>}</td></tr>
<tr><th id="394">394</th><td></td></tr>
<tr><th id="395">395</th><td><i>/* -- Lexer API ----------------------------------------------------------- */</i></td></tr>
<tr><th id="396">396</th><td></td></tr>
<tr><th id="397">397</th><td><i>/* Setup lexer state. */</i></td></tr>
<tr><th id="398">398</th><td><em>int</em> <dfn class="decl def fn" id="lj_lex_setup" title='lj_lex_setup' data-ref="lj_lex_setup" data-ref-filename="lj_lex_setup">lj_lex_setup</dfn>(<a class="typedef" href="lua.h.html#lua_State" title='lua_State' data-type='struct lua_State' data-ref="lua_State" data-ref-filename="lua_State">lua_State</a> *<dfn class="local col3 decl" id="43L" title='L' data-type='lua_State *' data-ref="43L" data-ref-filename="43L">L</dfn>, <a class="typedef" href="lj_lex.h.html#LexState" title='LexState' data-type='struct LexState' data-ref="LexState" data-ref-filename="LexState">LexState</a> *<dfn class="local col4 decl" id="44ls" title='ls' data-type='LexState *' data-ref="44ls" data-ref-filename="44ls">ls</dfn>)</td></tr>
<tr><th id="399">399</th><td>{</td></tr>
<tr><th id="400">400</th><td>  <em>int</em> <dfn class="local col5 decl" id="45header" title='header' data-type='int' data-ref="45header" data-ref-filename="45header">header</dfn> = <var>0</var>;</td></tr>
<tr><th id="401">401</th><td>  <a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::L" title='LexState::L' data-ref="LexState::L" data-ref-filename="LexState..L">L</a> = <a class="local col3 ref" href="#43L" title='L' data-ref="43L" data-ref-filename="43L">L</a>;</td></tr>
<tr><th id="402">402</th><td>  <a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::fs" title='LexState::fs' data-ref="LexState::fs" data-ref-filename="LexState..fs">fs</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="403">403</th><td>  <a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::pe" title='LexState::pe' data-ref="LexState::pe" data-ref-filename="LexState..pe">pe</a> = <a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::p" title='LexState::p' data-ref="LexState::p" data-ref-filename="LexState..p">p</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="404">404</th><td>  <a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::vstack" title='LexState::vstack' data-ref="LexState::vstack" data-ref-filename="LexState..vstack">vstack</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="405">405</th><td>  <a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::sizevstack" title='LexState::sizevstack' data-ref="LexState::sizevstack" data-ref-filename="LexState..sizevstack">sizevstack</a> = <var>0</var>;</td></tr>
<tr><th id="406">406</th><td>  <a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::vtop" title='LexState::vtop' data-ref="LexState::vtop" data-ref-filename="LexState..vtop">vtop</a> = <var>0</var>;</td></tr>
<tr><th id="407">407</th><td>  <a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::bcstack" title='LexState::bcstack' data-ref="LexState::bcstack" data-ref-filename="LexState..bcstack">bcstack</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="408">408</th><td>  <a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::sizebcstack" title='LexState::sizebcstack' data-ref="LexState::sizebcstack" data-ref-filename="LexState..sizebcstack">sizebcstack</a> = <var>0</var>;</td></tr>
<tr><th id="409">409</th><td>  <a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::tok" title='LexState::tok' data-ref="LexState::tok" data-ref-filename="LexState..tok">tok</a> = <var>0</var>;</td></tr>
<tr><th id="410">410</th><td>  <a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::lookahead" title='LexState::lookahead' data-ref="LexState::lookahead" data-ref-filename="LexState..lookahead">lookahead</a> = <a class="enum" href="lj_lex.h.html#27" title='TK_eof' data-ref="TK_eof" data-ref-filename="TK_eof">TK_eof</a>;  <i>/* No look-ahead token. */</i></td></tr>
<tr><th id="411">411</th><td>  <a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::linenumber" title='LexState::linenumber' data-ref="LexState::linenumber" data-ref-filename="LexState..linenumber">linenumber</a> = <var>1</var>;</td></tr>
<tr><th id="412">412</th><td>  <a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::lastline" title='LexState::lastline' data-ref="LexState::lastline" data-ref-filename="LexState..lastline">lastline</a> = <var>1</var>;</td></tr>
<tr><th id="413">413</th><td>  <a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::endmark" title='LexState::endmark' data-ref="LexState::endmark" data-ref-filename="LexState..endmark">endmark</a> = <var>0</var>;</td></tr>
<tr><th id="414">414</th><td>  <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>);  <i>/* Read-ahead first char. */</i></td></tr>
<tr><th id="415">415</th><td>  <b>if</b> (<a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> == <var>0xef</var> &amp;&amp; <a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::p" title='LexState::p' data-ref="LexState::p" data-ref-filename="LexState..p">p</a> + <var>2</var> &lt;= <a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::pe" title='LexState::pe' data-ref="LexState::pe" data-ref-filename="LexState..pe">pe</a> &amp;&amp; (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a>)<a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::p" title='LexState::p' data-ref="LexState::p" data-ref-filename="LexState..p">p</a>[<var>0</var>] == <var>0xbb</var> &amp;&amp;</td></tr>
<tr><th id="416">416</th><td>      (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a>)<a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::p" title='LexState::p' data-ref="LexState::p" data-ref-filename="LexState..p">p</a>[<var>1</var>] == <var>0xbf</var>) {  <i>/* Skip UTF-8 BOM (if buffered). */</i></td></tr>
<tr><th id="417">417</th><td>    <a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::p" title='LexState::p' data-ref="LexState::p" data-ref-filename="LexState..p">p</a> += <var>2</var>;</td></tr>
<tr><th id="418">418</th><td>    <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>);</td></tr>
<tr><th id="419">419</th><td>    <a class="local col5 ref" href="#45header" title='header' data-ref="45header" data-ref-filename="45header">header</a> = <var>1</var>;</td></tr>
<tr><th id="420">420</th><td>  }</td></tr>
<tr><th id="421">421</th><td>  <b>if</b> (<a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> == <kbd>'#'</kbd>) {  <i>/* Skip POSIX #! header line. */</i></td></tr>
<tr><th id="422">422</th><td>    <b>do</b> {</td></tr>
<tr><th id="423">423</th><td>      <a class="tu ref fn" href="#lex_next" title='lex_next' data-use='c' data-ref="lex_next" data-ref-filename="lex_next">lex_next</a>(<a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>);</td></tr>
<tr><th id="424">424</th><td>      <b>if</b> (<a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> == <a class="macro" href="#42" title="(-1)" data-ref="_M/LEX_EOF">LEX_EOF</a>) <b>return</b> <var>0</var>;</td></tr>
<tr><th id="425">425</th><td>    } <b>while</b> (!<a class="macro" href="#43" title="(ls-&gt;c == &apos;\n&apos; || ls-&gt;c == &apos;\r&apos;)" data-ref="_M/lex_iseol">lex_iseol</a>(<a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>));</td></tr>
<tr><th id="426">426</th><td>    <a class="tu ref fn" href="#lex_newline" title='lex_newline' data-use='c' data-ref="lex_newline" data-ref-filename="lex_newline">lex_newline</a>(<a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>);</td></tr>
<tr><th id="427">427</th><td>    <a class="local col5 ref" href="#45header" title='header' data-ref="45header" data-ref-filename="45header">header</a> = <var>1</var>;</td></tr>
<tr><th id="428">428</th><td>  }</td></tr>
<tr><th id="429">429</th><td>  <b>if</b> (<a class="local col4 ref" href="#44ls" title='ls' data-ref="44ls" data-ref-filename="44ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::c" title='LexState::c' data-ref="LexState::c" data-ref-filename="LexState..c">c</a> == <a class="macro" href="lua.h.html#27" title="&quot;\033Lua&quot;" data-ref="_M/LUA_SIGNATURE">LUA_SIGNATURE</a>[<var>0</var>]) {  <i>/* Bytecode dump. */</i></td></tr>
<tr><th id="430">430</th><td>    <b>if</b> (<a class="local col5 ref" href="#45header" title='header' data-ref="45header" data-ref-filename="45header">header</a>) {</td></tr>
<tr><th id="431">431</th><td>      <i>/*</i></td></tr>
<tr><th id="432">432</th><td><i>      ** Loading bytecode with an extra header is disabled for security</i></td></tr>
<tr><th id="433">433</th><td><i>      ** reasons. This may circumvent the usual check for bytecode vs.</i></td></tr>
<tr><th id="434">434</th><td><i>      ** Lua code by looking at the first char. Since this is a potential</i></td></tr>
<tr><th id="435">435</th><td><i>      ** security violation no attempt is made to echo the chunkname either.</i></td></tr>
<tr><th id="436">436</th><td><i>      */</i></td></tr>
<tr><th id="437">437</th><td>      <a class="ref fn" href="lj_obj.h.html#930" title='setstrV' data-ref="setstrV" data-ref-filename="setstrV">setstrV</a>(<a class="local col3 ref" href="#43L" title='L' data-ref="43L" data-ref-filename="43L">L</a>, <a class="local col3 ref" href="#43L" title='L' data-ref="43L" data-ref-filename="43L">L</a>-&gt;<a class="ref field" href="lj_obj.h.html#lua_State::top" title='lua_State::top' data-ref="lua_State::top" data-ref-filename="lua_State..top">top</a>++, <a class="ref fn" href="lj_err.h.html#lj_err_str" title='lj_err_str' data-ref="lj_err_str" data-ref-filename="lj_err_str">lj_err_str</a>(<a class="local col3 ref" href="#43L" title='L' data-ref="43L" data-ref-filename="43L">L</a>, <a class="enum" href="lj_errmsg.h.html#148" title='LJ_ERR_BCBAD' data-ref="LJ_ERR_BCBAD" data-ref-filename="LJ_ERR_BCBAD">LJ_ERR_BCBAD</a>));</td></tr>
<tr><th id="438">438</th><td>      <a class="ref fn" href="lj_err.h.html#lj_err_throw" title='lj_err_throw' data-ref="lj_err_throw" data-ref-filename="lj_err_throw">lj_err_throw</a>(<a class="local col3 ref" href="#43L" title='L' data-ref="43L" data-ref-filename="43L">L</a>, <a class="macro" href="lua.h.html#46" title="3" data-ref="_M/LUA_ERRSYNTAX">LUA_ERRSYNTAX</a>);</td></tr>
<tr><th id="439">439</th><td>    }</td></tr>
<tr><th id="440">440</th><td>    <b>return</b> <var>1</var>;</td></tr>
<tr><th id="441">441</th><td>  }</td></tr>
<tr><th id="442">442</th><td>  <b>return</b> <var>0</var>;</td></tr>
<tr><th id="443">443</th><td>}</td></tr>
<tr><th id="444">444</th><td></td></tr>
<tr><th id="445">445</th><td><i>/* Cleanup lexer state. */</i></td></tr>
<tr><th id="446">446</th><td><em>void</em> <dfn class="decl def fn" id="lj_lex_cleanup" title='lj_lex_cleanup' data-ref="lj_lex_cleanup" data-ref-filename="lj_lex_cleanup">lj_lex_cleanup</dfn>(<a class="typedef" href="lua.h.html#lua_State" title='lua_State' data-type='struct lua_State' data-ref="lua_State" data-ref-filename="lua_State">lua_State</a> *<dfn class="local col6 decl" id="46L" title='L' data-type='lua_State *' data-ref="46L" data-ref-filename="46L">L</dfn>, <a class="typedef" href="lj_lex.h.html#LexState" title='LexState' data-type='struct LexState' data-ref="LexState" data-ref-filename="LexState">LexState</a> *<dfn class="local col7 decl" id="47ls" title='ls' data-type='LexState *' data-ref="47ls" data-ref-filename="47ls">ls</dfn>)</td></tr>
<tr><th id="447">447</th><td>{</td></tr>
<tr><th id="448">448</th><td>  <a class="typedef" href="lj_obj.h.html#global_State" title='global_State' data-type='struct global_State' data-ref="global_State" data-ref-filename="global_State">global_State</a> *<dfn class="local col8 decl" id="48g" title='g' data-type='global_State *' data-ref="48g" data-ref-filename="48g">g</dfn> = <a class="macro" href="lj_obj.h.html#699" title="(((global_State *)(void *)(L-&gt;glref).ptr64))" data-ref="_M/G">G</a>(<a class="local col6 ref" href="#46L" title='L' data-ref="46L" data-ref-filename="46L">L</a>);</td></tr>
<tr><th id="449">449</th><td>  <a class="macro" href="lj_gc.h.html#130" title="lj_mem_free(g, (ls-&gt;bcstack), (ls-&gt;sizebcstack)*sizeof(BCInsLine))" data-ref="_M/lj_mem_freevec">lj_mem_freevec</a>(<a class="local col8 ref" href="#48g" title='g' data-ref="48g" data-ref-filename="48g">g</a>, <a class="local col7 ref" href="#47ls" title='ls' data-ref="47ls" data-ref-filename="47ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::bcstack" title='LexState::bcstack' data-ref="LexState::bcstack" data-ref-filename="LexState..bcstack">bcstack</a>, <a class="local col7 ref" href="#47ls" title='ls' data-ref="47ls" data-ref-filename="47ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::sizebcstack" title='LexState::sizebcstack' data-ref="LexState::sizebcstack" data-ref-filename="LexState..sizebcstack">sizebcstack</a>, <a class="typedef" href="lj_lex.h.html#BCInsLine" title='BCInsLine' data-type='struct BCInsLine' data-ref="BCInsLine" data-ref-filename="BCInsLine">BCInsLine</a>);</td></tr>
<tr><th id="450">450</th><td>  <a class="macro" href="lj_gc.h.html#130" title="lj_mem_free(g, (ls-&gt;vstack), (ls-&gt;sizevstack)*sizeof(VarInfo))" data-ref="_M/lj_mem_freevec">lj_mem_freevec</a>(<a class="local col8 ref" href="#48g" title='g' data-ref="48g" data-ref-filename="48g">g</a>, <a class="local col7 ref" href="#47ls" title='ls' data-ref="47ls" data-ref-filename="47ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::vstack" title='LexState::vstack' data-ref="LexState::vstack" data-ref-filename="LexState..vstack">vstack</a>, <a class="local col7 ref" href="#47ls" title='ls' data-ref="47ls" data-ref-filename="47ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::sizevstack" title='LexState::sizevstack' data-ref="LexState::sizevstack" data-ref-filename="LexState..sizevstack">sizevstack</a>, <a class="typedef" href="lj_lex.h.html#VarInfo" title='VarInfo' data-type='struct VarInfo' data-ref="VarInfo" data-ref-filename="VarInfo">VarInfo</a>);</td></tr>
<tr><th id="451">451</th><td>  <a class="ref fn" href="lj_buf.h.html#lj_buf_free" title='lj_buf_free' data-ref="lj_buf_free" data-ref-filename="lj_buf_free">lj_buf_free</a>(<a class="local col8 ref" href="#48g" title='g' data-ref="48g" data-ref-filename="48g">g</a>, &amp;<a class="local col7 ref" href="#47ls" title='ls' data-ref="47ls" data-ref-filename="47ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::sb" title='LexState::sb' data-ref="LexState::sb" data-ref-filename="LexState..sb">sb</a>);</td></tr>
<tr><th id="452">452</th><td>}</td></tr>
<tr><th id="453">453</th><td></td></tr>
<tr><th id="454">454</th><td><i>/* Return next lexical token. */</i></td></tr>
<tr><th id="455">455</th><td><em>void</em> <dfn class="decl def fn" id="lj_lex_next" title='lj_lex_next' data-ref="lj_lex_next" data-ref-filename="lj_lex_next">lj_lex_next</dfn>(<a class="typedef" href="lj_lex.h.html#LexState" title='LexState' data-type='struct LexState' data-ref="LexState" data-ref-filename="LexState">LexState</a> *<dfn class="local col9 decl" id="49ls" title='ls' data-type='LexState *' data-ref="49ls" data-ref-filename="49ls">ls</dfn>)</td></tr>
<tr><th id="456">456</th><td>{</td></tr>
<tr><th id="457">457</th><td>  <a class="local col9 ref" href="#49ls" title='ls' data-ref="49ls" data-ref-filename="49ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::lastline" title='LexState::lastline' data-ref="LexState::lastline" data-ref-filename="LexState..lastline">lastline</a> = <a class="local col9 ref" href="#49ls" title='ls' data-ref="49ls" data-ref-filename="49ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::linenumber" title='LexState::linenumber' data-ref="LexState::linenumber" data-ref-filename="LexState..linenumber">linenumber</a>;</td></tr>
<tr><th id="458">458</th><td>  <b>if</b> (<a class="macro" href="lj_def.h.html#145" title="__builtin_expect(!!(ls-&gt;lookahead == TK_eof), 1)" data-ref="_M/LJ_LIKELY">LJ_LIKELY</a>(<a class="local col9 ref" href="#49ls" title='ls' data-ref="49ls" data-ref-filename="49ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::lookahead" title='LexState::lookahead' data-ref="LexState::lookahead" data-ref-filename="LexState..lookahead">lookahead</a> == <a class="enum" href="lj_lex.h.html#27" title='TK_eof' data-ref="TK_eof" data-ref-filename="TK_eof">TK_eof</a>)) {  <i>/* No lookahead token? */</i></td></tr>
<tr><th id="459">459</th><td>    <a class="local col9 ref" href="#49ls" title='ls' data-ref="49ls" data-ref-filename="49ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::tok" title='LexState::tok' data-ref="LexState::tok" data-ref-filename="LexState..tok">tok</a> = <a class="tu ref fn" href="#lex_scan" title='lex_scan' data-use='c' data-ref="lex_scan" data-ref-filename="lex_scan">lex_scan</a>(<a class="local col9 ref" href="#49ls" title='ls' data-ref="49ls" data-ref-filename="49ls">ls</a>, &amp;<a class="local col9 ref" href="#49ls" title='ls' data-ref="49ls" data-ref-filename="49ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::tokval" title='LexState::tokval' data-ref="LexState::tokval" data-ref-filename="LexState..tokval">tokval</a>);  <i>/* Get next token. */</i></td></tr>
<tr><th id="460">460</th><td>  } <b>else</b> {  <i>/* Otherwise return lookahead token. */</i></td></tr>
<tr><th id="461">461</th><td>    <a class="local col9 ref" href="#49ls" title='ls' data-ref="49ls" data-ref-filename="49ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::tok" title='LexState::tok' data-ref="LexState::tok" data-ref-filename="LexState..tok">tok</a> = <a class="local col9 ref" href="#49ls" title='ls' data-ref="49ls" data-ref-filename="49ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::lookahead" title='LexState::lookahead' data-ref="LexState::lookahead" data-ref-filename="LexState..lookahead">lookahead</a>;</td></tr>
<tr><th id="462">462</th><td>    <a class="local col9 ref" href="#49ls" title='ls' data-ref="49ls" data-ref-filename="49ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::lookahead" title='LexState::lookahead' data-ref="LexState::lookahead" data-ref-filename="LexState..lookahead">lookahead</a> = <a class="enum" href="lj_lex.h.html#27" title='TK_eof' data-ref="TK_eof" data-ref-filename="TK_eof">TK_eof</a>;</td></tr>
<tr><th id="463">463</th><td>    <a class="local col9 ref" href="#49ls" title='ls' data-ref="49ls" data-ref-filename="49ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::tokval" title='LexState::tokval' data-ref="LexState::tokval" data-ref-filename="LexState..tokval">tokval</a> = <a class="local col9 ref" href="#49ls" title='ls' data-ref="49ls" data-ref-filename="49ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::lookaheadval" title='LexState::lookaheadval' data-ref="LexState::lookaheadval" data-ref-filename="LexState..lookaheadval">lookaheadval</a>;</td></tr>
<tr><th id="464">464</th><td>  }</td></tr>
<tr><th id="465">465</th><td>}</td></tr>
<tr><th id="466">466</th><td></td></tr>
<tr><th id="467">467</th><td><i>/* Look ahead for the next token. */</i></td></tr>
<tr><th id="468">468</th><td><a class="typedef" href="lj_lex.h.html#LexToken" title='LexToken' data-type='int' data-ref="LexToken" data-ref-filename="LexToken">LexToken</a> <dfn class="decl def fn" id="lj_lex_lookahead" title='lj_lex_lookahead' data-ref="lj_lex_lookahead" data-ref-filename="lj_lex_lookahead">lj_lex_lookahead</dfn>(<a class="typedef" href="lj_lex.h.html#LexState" title='LexState' data-type='struct LexState' data-ref="LexState" data-ref-filename="LexState">LexState</a> *<dfn class="local col0 decl" id="50ls" title='ls' data-type='LexState *' data-ref="50ls" data-ref-filename="50ls">ls</dfn>)</td></tr>
<tr><th id="469">469</th><td>{</td></tr>
<tr><th id="470">470</th><td>  <a class="macro" href="lj_lex.h.html#90" title="((void)ls)" data-ref="_M/lj_assertLS">lj_assertLS</a>(ls-&gt;lookahead == TK_eof, <q>"double lookahead"</q>);</td></tr>
<tr><th id="471">471</th><td>  <a class="local col0 ref" href="#50ls" title='ls' data-ref="50ls" data-ref-filename="50ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::lookahead" title='LexState::lookahead' data-ref="LexState::lookahead" data-ref-filename="LexState..lookahead">lookahead</a> = <a class="tu ref fn" href="#lex_scan" title='lex_scan' data-use='c' data-ref="lex_scan" data-ref-filename="lex_scan">lex_scan</a>(<a class="local col0 ref" href="#50ls" title='ls' data-ref="50ls" data-ref-filename="50ls">ls</a>, &amp;<a class="local col0 ref" href="#50ls" title='ls' data-ref="50ls" data-ref-filename="50ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::lookaheadval" title='LexState::lookaheadval' data-ref="LexState::lookaheadval" data-ref-filename="LexState..lookaheadval">lookaheadval</a>);</td></tr>
<tr><th id="472">472</th><td>  <b>return</b> <a class="local col0 ref" href="#50ls" title='ls' data-ref="50ls" data-ref-filename="50ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::lookahead" title='LexState::lookahead' data-ref="LexState::lookahead" data-ref-filename="LexState..lookahead">lookahead</a>;</td></tr>
<tr><th id="473">473</th><td>}</td></tr>
<tr><th id="474">474</th><td></td></tr>
<tr><th id="475">475</th><td><i>/* Convert token to string. */</i></td></tr>
<tr><th id="476">476</th><td><em>const</em> <em>char</em> *<dfn class="decl def fn" id="lj_lex_token2str" title='lj_lex_token2str' data-ref="lj_lex_token2str" data-ref-filename="lj_lex_token2str">lj_lex_token2str</dfn>(<a class="typedef" href="lj_lex.h.html#LexState" title='LexState' data-type='struct LexState' data-ref="LexState" data-ref-filename="LexState">LexState</a> *<dfn class="local col1 decl" id="51ls" title='ls' data-type='LexState *' data-ref="51ls" data-ref-filename="51ls">ls</dfn>, <a class="typedef" href="lj_lex.h.html#LexToken" title='LexToken' data-type='int' data-ref="LexToken" data-ref-filename="LexToken">LexToken</a> <dfn class="local col2 decl" id="52tok" title='tok' data-type='LexToken' data-ref="52tok" data-ref-filename="52tok">tok</dfn>)</td></tr>
<tr><th id="477">477</th><td>{</td></tr>
<tr><th id="478">478</th><td>  <b>if</b> (<a class="local col2 ref" href="#52tok" title='tok' data-ref="52tok" data-ref-filename="52tok">tok</a> &gt; <a class="enum" href="lj_lex.h.html#TK_OFS" title='TK_OFS' data-ref="TK_OFS" data-ref-filename="TK_OFS">TK_OFS</a>)</td></tr>
<tr><th id="479">479</th><td>    <b>return</b> <a class="tu ref" href="#tokennames" title='tokennames' data-use='r' data-ref="tokennames" data-ref-filename="tokennames">tokennames</a>[<a class="local col2 ref" href="#52tok" title='tok' data-ref="52tok" data-ref-filename="52tok">tok</a>-<a class="enum" href="lj_lex.h.html#TK_OFS" title='TK_OFS' data-ref="TK_OFS" data-ref-filename="TK_OFS">TK_OFS</a>-<var>1</var>];</td></tr>
<tr><th id="480">480</th><td>  <b>else</b> <b>if</b> (!<a class="macro" href="lj_char.h.html#25" title="((lj_char_bits+1)[((tok))] &amp; 0x01)" data-ref="_M/lj_char_iscntrl">lj_char_iscntrl</a>(<a class="local col2 ref" href="#52tok" title='tok' data-ref="52tok" data-ref-filename="52tok">tok</a>))</td></tr>
<tr><th id="481">481</th><td>    <b>return</b> <a class="ref fn" href="lj_strfmt.h.html#lj_strfmt_pushf" title='lj_strfmt_pushf' data-ref="lj_strfmt_pushf" data-ref-filename="lj_strfmt_pushf">lj_strfmt_pushf</a>(<a class="local col1 ref" href="#51ls" title='ls' data-ref="51ls" data-ref-filename="51ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::L" title='LexState::L' data-ref="LexState::L" data-ref-filename="LexState..L">L</a>, <q>"%c"</q>, <a class="local col2 ref" href="#52tok" title='tok' data-ref="52tok" data-ref-filename="52tok">tok</a>);</td></tr>
<tr><th id="482">482</th><td>  <b>else</b></td></tr>
<tr><th id="483">483</th><td>    <b>return</b> <a class="ref fn" href="lj_strfmt.h.html#lj_strfmt_pushf" title='lj_strfmt_pushf' data-ref="lj_strfmt_pushf" data-ref-filename="lj_strfmt_pushf">lj_strfmt_pushf</a>(<a class="local col1 ref" href="#51ls" title='ls' data-ref="51ls" data-ref-filename="51ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::L" title='LexState::L' data-ref="LexState::L" data-ref-filename="LexState..L">L</a>, <q>"char(%d)"</q>, <a class="local col2 ref" href="#52tok" title='tok' data-ref="52tok" data-ref-filename="52tok">tok</a>);</td></tr>
<tr><th id="484">484</th><td>}</td></tr>
<tr><th id="485">485</th><td></td></tr>
<tr><th id="486">486</th><td><i>/* Lexer error. */</i></td></tr>
<tr><th id="487">487</th><td><em>void</em> <dfn class="decl def fn" id="lj_lex_error" title='lj_lex_error' data-ref="lj_lex_error" data-ref-filename="lj_lex_error">lj_lex_error</dfn>(<a class="typedef" href="lj_lex.h.html#LexState" title='LexState' data-type='struct LexState' data-ref="LexState" data-ref-filename="LexState">LexState</a> *<dfn class="local col3 decl" id="53ls" title='ls' data-type='LexState *' data-ref="53ls" data-ref-filename="53ls">ls</dfn>, <a class="typedef" href="lj_lex.h.html#LexToken" title='LexToken' data-type='int' data-ref="LexToken" data-ref-filename="LexToken">LexToken</a> <dfn class="local col4 decl" id="54tok" title='tok' data-type='LexToken' data-ref="54tok" data-ref-filename="54tok">tok</dfn>, <a class="typedef" href="lj_err.h.html#ErrMsg" title='ErrMsg' data-type='enum ErrMsg' data-ref="ErrMsg" data-ref-filename="ErrMsg">ErrMsg</a> <dfn class="local col5 decl" id="55em" title='em' data-type='ErrMsg' data-ref="55em" data-ref-filename="55em">em</dfn>, ...)</td></tr>
<tr><th id="488">488</th><td>{</td></tr>
<tr><th id="489">489</th><td>  <em>const</em> <em>char</em> *<dfn class="local col6 decl" id="56tokstr" title='tokstr' data-type='const char *' data-ref="56tokstr" data-ref-filename="56tokstr">tokstr</dfn>;</td></tr>
<tr><th id="490">490</th><td>  <span class='typedef' title='va_list' data-type='__builtin_va_list' data-ref="va_list" data-ref-filename="va_list">va_list</span> <dfn class="local col7 decl" id="57argp" title='argp' data-type='va_list' data-ref="57argp" data-ref-filename="57argp">argp</dfn>;</td></tr>
<tr><th id="491">491</th><td>  <b>if</b> (<a class="local col4 ref" href="#54tok" title='tok' data-ref="54tok" data-ref-filename="54tok">tok</a> == <var>0</var>) {</td></tr>
<tr><th id="492">492</th><td>    <a class="local col6 ref" href="#56tokstr" title='tokstr' data-ref="56tokstr" data-ref-filename="56tokstr">tokstr</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="493">493</th><td>  } <b>else</b> <b>if</b> (<a class="local col4 ref" href="#54tok" title='tok' data-ref="54tok" data-ref-filename="54tok">tok</a> == <a class="enum" href="lj_lex.h.html#27" title='TK_name' data-ref="TK_name" data-ref-filename="TK_name">TK_name</a> || <a class="local col4 ref" href="#54tok" title='tok' data-ref="54tok" data-ref-filename="54tok">tok</a> == <a class="enum" href="lj_lex.h.html#27" title='TK_string' data-ref="TK_string" data-ref-filename="TK_string">TK_string</a> || <a class="local col4 ref" href="#54tok" title='tok' data-ref="54tok" data-ref-filename="54tok">tok</a> == <a class="enum" href="lj_lex.h.html#27" title='TK_number' data-ref="TK_number" data-ref-filename="TK_number">TK_number</a>) {</td></tr>
<tr><th id="494">494</th><td>    <a class="tu ref fn" href="#lex_save" title='lex_save' data-use='c' data-ref="lex_save" data-ref-filename="lex_save">lex_save</a>(<a class="local col3 ref" href="#53ls" title='ls' data-ref="53ls" data-ref-filename="53ls">ls</a>, <kbd>'\0'</kbd>);</td></tr>
<tr><th id="495">495</th><td>    <a class="local col6 ref" href="#56tokstr" title='tokstr' data-ref="56tokstr" data-ref-filename="56tokstr">tokstr</a> = <a class="local col3 ref" href="#53ls" title='ls' data-ref="53ls" data-ref-filename="53ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::sb" title='LexState::sb' data-ref="LexState::sb" data-ref-filename="LexState..sb">sb</a>.<a class="ref field" href="lj_obj.h.html#162" title='SBuf::b' data-ref="SBuf::b" data-ref-filename="SBuf..b">b</a>;</td></tr>
<tr><th id="496">496</th><td>  } <b>else</b> {</td></tr>
<tr><th id="497">497</th><td>    <a class="local col6 ref" href="#56tokstr" title='tokstr' data-ref="56tokstr" data-ref-filename="56tokstr">tokstr</a> = <a class="ref fn" href="#lj_lex_token2str" title='lj_lex_token2str' data-ref="lj_lex_token2str" data-ref-filename="lj_lex_token2str">lj_lex_token2str</a>(<a class="local col3 ref" href="#53ls" title='ls' data-ref="53ls" data-ref-filename="53ls">ls</a>, <a class="local col4 ref" href="#54tok" title='tok' data-ref="54tok" data-ref-filename="54tok">tok</a>);</td></tr>
<tr><th id="498">498</th><td>  }</td></tr>
<tr><th id="499">499</th><td>  <span class="macro" title="__builtin_va_start(argp, em)" data-ref="_M/va_start">va_start</span>(<a class="local col7 ref" href="#57argp" title='argp' data-ref="57argp" data-ref-filename="57argp">argp</a>, <a class="local col5 ref" href="#55em" title='em' data-ref="55em" data-ref-filename="55em">em</a>);</td></tr>
<tr><th id="500">500</th><td>  <a class="ref fn" href="lj_err.h.html#lj_err_lex" title='lj_err_lex' data-ref="lj_err_lex" data-ref-filename="lj_err_lex">lj_err_lex</a>(<a class="local col3 ref" href="#53ls" title='ls' data-ref="53ls" data-ref-filename="53ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::L" title='LexState::L' data-ref="LexState::L" data-ref-filename="LexState..L">L</a>, <a class="local col3 ref" href="#53ls" title='ls' data-ref="53ls" data-ref-filename="53ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::chunkname" title='LexState::chunkname' data-ref="LexState::chunkname" data-ref-filename="LexState..chunkname">chunkname</a>, <a class="local col6 ref" href="#56tokstr" title='tokstr' data-ref="56tokstr" data-ref-filename="56tokstr">tokstr</a>, <a class="local col3 ref" href="#53ls" title='ls' data-ref="53ls" data-ref-filename="53ls">ls</a>-&gt;<a class="ref field" href="lj_lex.h.html#LexState::linenumber" title='LexState::linenumber' data-ref="LexState::linenumber" data-ref-filename="LexState..linenumber">linenumber</a>, <a class="local col5 ref" href="#55em" title='em' data-ref="55em" data-ref-filename="55em">em</a>, <a class="local col7 ref" href="#57argp" title='argp' data-ref="57argp" data-ref-filename="57argp">argp</a>);</td></tr>
<tr><th id="501">501</th><td>  <span class="macro" title="__builtin_va_end(argp)" data-ref="_M/va_end">va_end</span>(<a class="local col7 ref" href="#57argp" title='argp' data-ref="57argp" data-ref-filename="57argp">argp</a>);</td></tr>
<tr><th id="502">502</th><td>}</td></tr>
<tr><th id="503">503</th><td></td></tr>
<tr><th id="504">504</th><td><i>/* Initialize strings for reserved words. */</i></td></tr>
<tr><th id="505">505</th><td><em>void</em> <dfn class="decl def fn" id="lj_lex_init" title='lj_lex_init' data-ref="lj_lex_init" data-ref-filename="lj_lex_init">lj_lex_init</dfn>(<a class="typedef" href="lua.h.html#lua_State" title='lua_State' data-type='struct lua_State' data-ref="lua_State" data-ref-filename="lua_State">lua_State</a> *<dfn class="local col8 decl" id="58L" title='L' data-type='lua_State *' data-ref="58L" data-ref-filename="58L">L</dfn>)</td></tr>
<tr><th id="506">506</th><td>{</td></tr>
<tr><th id="507">507</th><td>  <a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a> <dfn class="local col9 decl" id="59i" title='i' data-type='uint32_t' data-ref="59i" data-ref-filename="59i">i</dfn>;</td></tr>
<tr><th id="508">508</th><td>  <b>for</b> (<a class="local col9 ref" href="#59i" title='i' data-ref="59i" data-ref-filename="59i">i</a> = <var>0</var>; <a class="local col9 ref" href="#59i" title='i' data-ref="59i" data-ref-filename="59i">i</a> &lt; <a class="enum" href="lj_lex.h.html#TK_RESERVED" title='TK_RESERVED' data-ref="TK_RESERVED" data-ref-filename="TK_RESERVED">TK_RESERVED</a>; <a class="local col9 ref" href="#59i" title='i' data-ref="59i" data-ref-filename="59i">i</a>++) {</td></tr>
<tr><th id="509">509</th><td>    <a class="typedef" href="lj_obj.h.html#GCstr" title='GCstr' data-type='struct GCstr' data-ref="GCstr" data-ref-filename="GCstr">GCstr</a> *<dfn class="local col0 decl" id="60s" title='s' data-type='GCstr *' data-ref="60s" data-ref-filename="60s">s</dfn> = <a class="macro" href="lj_str.h.html#27" title="(lj_str_new(L, tokennames[i], strlen(tokennames[i])))" data-ref="_M/lj_str_newz">lj_str_newz</a>(<a class="local col8 ref" href="#58L" title='L' data-ref="58L" data-ref-filename="58L">L</a>, <a class="tu ref" href="#tokennames" title='tokennames' data-use='r' data-ref="tokennames" data-ref-filename="tokennames">tokennames</a>[<a class="local col9 ref" href="#59i" title='i' data-ref="59i" data-ref-filename="59i">i</a>]);</td></tr>
<tr><th id="510">510</th><td>    <a class="macro" href="lj_gc.h.html#45" title="((s)-&gt;marked |= 0x20)" data-ref="_M/fixstring">fixstring</a>(<a class="local col0 ref" href="#60s" title='s' data-ref="60s" data-ref-filename="60s">s</a>);  <i>/* Reserved words are never collected. */</i></td></tr>
<tr><th id="511">511</th><td>    <a class="local col0 ref" href="#60s" title='s' data-ref="60s" data-ref-filename="60s">s</a>-&gt;<a class="ref field" href="lj_obj.h.html#GCstr::reserved" title='GCstr::reserved' data-ref="GCstr::reserved" data-ref-filename="GCstr..reserved">reserved</a> = (<a class="typedef" href="../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a>)(<a class="local col9 ref" href="#59i" title='i' data-ref="59i" data-ref-filename="59i">i</a>+<var>1</var>);</td></tr>
<tr><th id="512">512</th><td>  }</td></tr>
<tr><th id="513">513</th><td>}</td></tr>
<tr><th id="514">514</th><td></td></tr>
<tr><th id="515">515</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2022-Jun-23</em> from project luajit revision <em>v2.1.0-beta3-294-ge9577376</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
