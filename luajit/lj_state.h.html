<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>lj_state.h source code [luajit/lj_state.h] - Woboq Code Browser</title>
<link rel="stylesheet" href=".././data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href=".././data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src=".././data/jquery/jquery.min.js"></script>
<script type="text/javascript" src=".././data/jquery/jquery-ui.min.js"></script>
<script>var file = 'luajit/lj_state.h'; var root_path = '..'; var data_path = '.././data'; var ecma_script_api_version = 2;</script>
<script src='.././data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='./'>luajit</a>/<a href='lj_state.h.html'>lj_state.h</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*</i></td></tr>
<tr><th id="2">2</th><td><i>** State and stack handling.</i></td></tr>
<tr><th id="3">3</th><td><i>** Copyright (C) 2005-2021 Mike Pall. See Copyright Notice in luajit.h</i></td></tr>
<tr><th id="4">4</th><td><i>*/</i></td></tr>
<tr><th id="5">5</th><td></td></tr>
<tr><th id="6">6</th><td><u>#<span data-ppcond="6">ifndef</span> <span class="macro" data-ref="_M/_LJ_STATE_H">_LJ_STATE_H</span></u></td></tr>
<tr><th id="7">7</th><td><u>#define <dfn class="macro" id="_M/_LJ_STATE_H" data-ref="_M/_LJ_STATE_H">_LJ_STATE_H</dfn></u></td></tr>
<tr><th id="8">8</th><td></td></tr>
<tr><th id="9">9</th><td><u>#include <a href="lj_obj.h.html">"lj_obj.h"</a></u></td></tr>
<tr><th id="10">10</th><td></td></tr>
<tr><th id="11">11</th><td><u>#define <dfn class="macro" id="_M/incr_top" data-ref="_M/incr_top">incr_top</dfn>(L) \</u></td></tr>
<tr><th id="12">12</th><td><u>  (++L-&gt;top &gt;= tvref(L-&gt;maxstack) &amp;&amp; (lj_state_growstack1(L), 0))</u></td></tr>
<tr><th id="13">13</th><td></td></tr>
<tr><th id="14">14</th><td><u>#define <dfn class="macro" id="_M/savestack" data-ref="_M/savestack">savestack</dfn>(L, p)		((char *)(p) - mref(L-&gt;stack, char))</u></td></tr>
<tr><th id="15">15</th><td><u>#define <dfn class="macro" id="_M/restorestack" data-ref="_M/restorestack">restorestack</dfn>(L, n)	((TValue *)(mref(L-&gt;stack, char) + (n)))</u></td></tr>
<tr><th id="16">16</th><td></td></tr>
<tr><th id="17">17</th><td><a class="macro" href="lj_def.h.html#335" title="extern __attribute__((visibility(&quot;hidden&quot;)))" data-ref="_M/LJ_FUNC">LJ_FUNC</a> <em>void</em> <dfn class="decl fn" id="lj_state_relimitstack" title='lj_state_relimitstack' data-ref="lj_state_relimitstack" data-ref-filename="lj_state_relimitstack">lj_state_relimitstack</dfn>(<a class="typedef" href="lua.h.html#lua_State" title='lua_State' data-type='struct lua_State' data-ref="lua_State" data-ref-filename="lua_State">lua_State</a> *<dfn class="local col5 decl" id="165L" title='L' data-type='lua_State *' data-ref="165L" data-ref-filename="165L">L</dfn>);</td></tr>
<tr><th id="18">18</th><td><a class="macro" href="lj_def.h.html#335" title="extern __attribute__((visibility(&quot;hidden&quot;)))" data-ref="_M/LJ_FUNC">LJ_FUNC</a> <em>void</em> <dfn class="decl fn" id="lj_state_shrinkstack" title='lj_state_shrinkstack' data-ref="lj_state_shrinkstack" data-ref-filename="lj_state_shrinkstack">lj_state_shrinkstack</dfn>(<a class="typedef" href="lua.h.html#lua_State" title='lua_State' data-type='struct lua_State' data-ref="lua_State" data-ref-filename="lua_State">lua_State</a> *<dfn class="local col6 decl" id="166L" title='L' data-type='lua_State *' data-ref="166L" data-ref-filename="166L">L</dfn>, <a class="typedef" href="lj_obj.h.html#MSize" title='MSize' data-type='uint32_t' data-ref="MSize" data-ref-filename="MSize">MSize</a> <dfn class="local col7 decl" id="167used" title='used' data-type='MSize' data-ref="167used" data-ref-filename="167used">used</dfn>);</td></tr>
<tr><th id="19">19</th><td><a class="macro" href="lj_def.h.html#331" title="extern __attribute__((visibility(&quot;hidden&quot;)))" data-ref="_M/LJ_FUNCA">LJ_FUNCA</a> <em>void</em> <a class="macro" href="lj_def.h.html#314" title="" data-ref="_M/LJ_FASTCALL">LJ_FASTCALL</a> <dfn class="decl fn" id="lj_state_growstack" title='lj_state_growstack' data-ref="lj_state_growstack" data-ref-filename="lj_state_growstack">lj_state_growstack</dfn>(<a class="typedef" href="lua.h.html#lua_State" title='lua_State' data-type='struct lua_State' data-ref="lua_State" data-ref-filename="lua_State">lua_State</a> *<dfn class="local col8 decl" id="168L" title='L' data-type='lua_State *' data-ref="168L" data-ref-filename="168L">L</dfn>, <a class="typedef" href="lj_obj.h.html#MSize" title='MSize' data-type='uint32_t' data-ref="MSize" data-ref-filename="MSize">MSize</a> <dfn class="local col9 decl" id="169need" title='need' data-type='MSize' data-ref="169need" data-ref-filename="169need">need</dfn>);</td></tr>
<tr><th id="20">20</th><td><a class="macro" href="lj_def.h.html#335" title="extern __attribute__((visibility(&quot;hidden&quot;)))" data-ref="_M/LJ_FUNC">LJ_FUNC</a> <em>void</em> <a class="macro" href="lj_def.h.html#314" title="" data-ref="_M/LJ_FASTCALL">LJ_FASTCALL</a> <dfn class="decl fn" id="lj_state_growstack1" title='lj_state_growstack1' data-ref="lj_state_growstack1" data-ref-filename="lj_state_growstack1">lj_state_growstack1</dfn>(<a class="typedef" href="lua.h.html#lua_State" title='lua_State' data-type='struct lua_State' data-ref="lua_State" data-ref-filename="lua_State">lua_State</a> *<dfn class="local col0 decl" id="170L" title='L' data-type='lua_State *' data-ref="170L" data-ref-filename="170L">L</dfn>);</td></tr>
<tr><th id="21">21</th><td></td></tr>
<tr><th id="22">22</th><td><em>static</em> <a class="macro" href="lj_def.h.html#128" title="inline __attribute__((always_inline))" data-ref="_M/LJ_AINLINE">LJ_AINLINE</a> <em>void</em> <dfn class="decl def fn" id="lj_state_checkstack" title='lj_state_checkstack' data-ref="lj_state_checkstack" data-ref-filename="lj_state_checkstack">lj_state_checkstack</dfn>(<a class="typedef" href="lua.h.html#lua_State" title='lua_State' data-type='struct lua_State' data-ref="lua_State" data-ref-filename="lua_State">lua_State</a> *<dfn class="local col1 decl" id="171L" title='L' data-type='lua_State *' data-ref="171L" data-ref-filename="171L">L</dfn>, <a class="typedef" href="lj_obj.h.html#MSize" title='MSize' data-type='uint32_t' data-ref="MSize" data-ref-filename="MSize">MSize</a> <dfn class="local col2 decl" id="172need" title='need' data-type='MSize' data-ref="172need" data-ref-filename="172need">need</dfn>)</td></tr>
<tr><th id="23">23</th><td>{</td></tr>
<tr><th id="24">24</th><td>  <b>if</b> ((<a class="macro" href="lj_obj.h.html#36" title="((char *)(void *)(L-&gt;maxstack).ptr64)" data-ref="_M/mref">mref</a>(<a class="local col1 ref" href="#171L" title='L' data-ref="171L" data-ref-filename="171L">L</a>-&gt;<a class="ref field" href="lj_obj.h.html#lua_State::maxstack" title='lua_State::maxstack' data-ref="lua_State::maxstack" data-ref-filename="lua_State..maxstack">maxstack</a>, <em>char</em>) - (<em>char</em> *)<a class="local col1 ref" href="#171L" title='L' data-ref="171L" data-ref-filename="171L">L</a>-&gt;<a class="ref field" href="lj_obj.h.html#lua_State::top" title='lua_State::top' data-ref="lua_State::top" data-ref-filename="lua_State..top">top</a>) &lt;=</td></tr>
<tr><th id="25">25</th><td>      (<span class='typedef' title='ptrdiff_t' data-type='long' data-ref="ptrdiff_t" data-ref-filename="ptrdiff_t">ptrdiff_t</span>)<a class="local col2 ref" href="#172need" title='need' data-ref="172need" data-ref-filename="172need">need</a>*(<span class='typedef' title='ptrdiff_t' data-type='long' data-ref="ptrdiff_t" data-ref-filename="ptrdiff_t">ptrdiff_t</span>)<b>sizeof</b>(<a class="typedef" href="lj_obj.h.html#TValue" title='TValue' data-type='union TValue' data-ref="TValue" data-ref-filename="TValue">TValue</a>))</td></tr>
<tr><th id="26">26</th><td>    <a class="ref fn" href="#lj_state_growstack" title='lj_state_growstack' data-ref="lj_state_growstack" data-ref-filename="lj_state_growstack">lj_state_growstack</a>(<a class="local col1 ref" href="#171L" title='L' data-ref="171L" data-ref-filename="171L">L</a>, <a class="local col2 ref" href="#172need" title='need' data-ref="172need" data-ref-filename="172need">need</a>);</td></tr>
<tr><th id="27">27</th><td>}</td></tr>
<tr><th id="28">28</th><td></td></tr>
<tr><th id="29">29</th><td><a class="macro" href="lj_def.h.html#335" title="extern __attribute__((visibility(&quot;hidden&quot;)))" data-ref="_M/LJ_FUNC">LJ_FUNC</a> <a class="typedef" href="lua.h.html#lua_State" title='lua_State' data-type='struct lua_State' data-ref="lua_State" data-ref-filename="lua_State">lua_State</a> *<dfn class="decl fn" id="lj_state_new" title='lj_state_new' data-ref="lj_state_new" data-ref-filename="lj_state_new">lj_state_new</dfn>(<a class="typedef" href="lua.h.html#lua_State" title='lua_State' data-type='struct lua_State' data-ref="lua_State" data-ref-filename="lua_State">lua_State</a> *<dfn class="local col3 decl" id="173L" title='L' data-type='lua_State *' data-ref="173L" data-ref-filename="173L">L</dfn>);</td></tr>
<tr><th id="30">30</th><td><a class="macro" href="lj_def.h.html#335" title="extern __attribute__((visibility(&quot;hidden&quot;)))" data-ref="_M/LJ_FUNC">LJ_FUNC</a> <em>void</em> <a class="macro" href="lj_def.h.html#314" title="" data-ref="_M/LJ_FASTCALL">LJ_FASTCALL</a> <dfn class="decl fn" id="lj_state_free" title='lj_state_free' data-ref="lj_state_free" data-ref-filename="lj_state_free">lj_state_free</dfn>(<a class="typedef" href="lj_obj.h.html#global_State" title='global_State' data-type='struct global_State' data-ref="global_State" data-ref-filename="global_State">global_State</a> *<dfn class="local col4 decl" id="174g" title='g' data-type='global_State *' data-ref="174g" data-ref-filename="174g">g</dfn>, <a class="typedef" href="lua.h.html#lua_State" title='lua_State' data-type='struct lua_State' data-ref="lua_State" data-ref-filename="lua_State">lua_State</a> *<dfn class="local col5 decl" id="175L" title='L' data-type='lua_State *' data-ref="175L" data-ref-filename="175L">L</dfn>);</td></tr>
<tr><th id="31">31</th><td><u>#<span data-ppcond="31">if</span> <a class="macro" href="lj_arch.h.html#600" title="1" data-ref="_M/LJ_64">LJ_64</a> &amp;&amp; !<a class="macro" href="lj_arch.h.html#526" title="1" data-ref="_M/LJ_GC64">LJ_GC64</a> &amp;&amp; !(defined(<span class="macro" data-ref="_M/LUAJIT_USE_VALGRIND">LUAJIT_USE_VALGRIND</span>) &amp;&amp; defined(<span class="macro" data-ref="_M/LUAJIT_USE_SYSMALLOC">LUAJIT_USE_SYSMALLOC</span>))</u></td></tr>
<tr><th id="32">32</th><td>LJ_FUNC lua_State *lj_state_newstate(lua_Alloc f, <em>void</em> *ud);</td></tr>
<tr><th id="33">33</th><td><u>#<span data-ppcond="31">endif</span></u></td></tr>
<tr><th id="34">34</th><td></td></tr>
<tr><th id="35">35</th><td><u>#define <dfn class="macro" id="_M/LJ_ALLOCF_INTERNAL" data-ref="_M/LJ_ALLOCF_INTERNAL">LJ_ALLOCF_INTERNAL</dfn>	((lua_Alloc)(void *)(uintptr_t)(1237&lt;&lt;4))</u></td></tr>
<tr><th id="36">36</th><td></td></tr>
<tr><th id="37">37</th><td><u>#<span data-ppcond="6">endif</span></u></td></tr>
<tr><th id="38">38</th><td></td></tr>
</table><hr/><p id='footer'>
Generated while processing <a href='lib_aux.c.html'>luajit/lib_aux.c</a><br/>Generated on <em>2022-Jun-23</em> from project luajit revision <em>v2.1.0-beta3-294-ge9577376</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
